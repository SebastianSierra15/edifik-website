{
  "app": {
    "404": {
      "page.tsx": "\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst Custom404 = () => {\r\n  const router = useRouter();\r\n\r\n  const goHome = () => {\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col justify-center items-center min-h-screen text-client-text text-center gap-8\">\r\n      <h1 className=\"text-6xl font-bold\">¡Ups! Página no encontrada</h1>\r\n\r\n      <p className=\"text-xl text-client-textSecondary\">\r\n        Lo sentimos, pero la página que buscas no existe.\r\n      </p>\r\n\r\n      <button\r\n        onClick={goHome}\r\n        className=\"mt-6 px-6 py-3 bg-client-accent text-white font-semibold rounded-full hover:bg-client-accentHover transition-all\"\r\n      >\r\n        Regresar al inicio\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Custom404;\r\n"
    },
    "admin": {
      "layout.tsx": "import type { Metadata } from \"next\";\nimport { inter } from \"@/app/fonts/fonts\";\nimport AdminHeader from \"../ui/admin/adminHeader\";\nimport AdminFooter from \"../ui/admin/adminFooter\";\nimport \"../globals.css\";\n\nexport const metadata: Metadata = {\n  title: \"EdifiK Admin\",\n  description: \"Panel de administración de EdifiK\",\n};\n\nexport default async function AdminLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <div\n      className={`${inter.className} min-h-screen bg-premium-background antialiased`}\n    >\n      <main className=\"flex-grow\">{children}</main>\n    </div>\n  );\n}\n",
      "membresias": {
        "page.tsx": "\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { useCallback } from \"react\";\nimport { Membership, Header } from \"@/lib/definitios\";\nimport { useMemberships } from \"@/app/hooks/memberships/useMemberships\";\nimport { useMembershipValidation } from \"@/app/hooks/memberships/useMembershipValidation\";\nimport { useMembershipUpdate } from \"@/app/hooks/memberships/useMembershipUpdate\";\nimport Alert from \"@/app/ui/alert\";\nimport Table from \"@/app/ui/admin/table/table\";\nimport TableSkeleton from \"@/app/ui/skeletons/admin/tableSkeleton\";\nimport ModalConfirmation from \"@/app/ui/modals/admin/modalConfirmation\";\n\nconst MembershipModal = dynamic(\n  () => import(\"@/app/ui/admin/memberships/membershipModal\"),\n  { ssr: false }\n);\n\nexport default function MembershipsPage() {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\" as \"success\" | \"error\" | null,\n    message: \"\",\n    show: false,\n  });\n\n  const { memberships, totalEntries, isLoading } = useMemberships(\n    currentPage,\n    entriesPerPage,\n    searchTerm,\n    refreshTrigger\n  );\n\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\n  const showSkeleton = !hasLoadedOnce && isLoading;\n  if (!isLoading && !hasLoadedOnce) {\n    setHasLoadedOnce(true);\n  }\n\n  const [membership, setMembership] = useState<Membership>({\n    id: 0,\n    name: \"\",\n    benefits: \"\",\n    price: 0,\n    projectsFeatured: 0,\n    maxProjects: 0,\n    discountThreeMonths: 0,\n    discountSixMonths: 0,\n    discountTwelveMonths: 0,\n  });\n\n  const { errors, validateFields } = useMembershipValidation(membership, true);\n\n  const { updateMembership } = useMembershipUpdate();\n\n  const debouncedSearch = useDebouncedCallback((term: string) => {\n    setSearchTerm(term);\n    setCurrentPage(1);\n  }, 500);\n\n  const filteredMemberships = useMemo(() => {\n    return memberships.filter((membership) => membership.id !== 1004);\n  }, [memberships]);\n\n  const handleEditClick = useCallback((membership: Membership) => {\n    setMembership(membership);\n    setModalOpen(true);\n  }, []);\n\n  const goToNextPage = useCallback(() => {\n    setCurrentPage((prevPage) => prevPage + 1);\n  }, []);\n\n  const handleConfirmUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const isValid = await validateFields();\n\n    if (!isValid) {\n      return;\n    }\n\n    setIsConfirmationModalOpen(true);\n  };\n\n  const handleConfirmedAction = async () => {\n    const success = await updateMembership(membership);\n    if (success) {\n      setRefreshTrigger((prev) => prev + 1);\n      setModalOpen(false);\n      setIsConfirmationModalOpen(false);\n\n      setAlert({\n        type: \"success\",\n        message: \"Membresía editada correctamente.\",\n        show: true,\n      });\n    } else {\n      setAlert({\n        type: \"error\",\n        message: \"Lo sentimos, algo salió mal, intentalo más tarde.\",\n        show: true,\n      });\n    }\n  };\n\n  const handleCloseConfirmationModal = () => {\n    setIsConfirmationModalOpen(false);\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target;\n\n    setMembership({\n      ...membership,\n      [name]: name === \"price\" ? Number(value) || 0 : value,\n    });\n  };\n\n  const goToPreviousPage = () => {\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\n  };\n\n  const goToPage = (pageNumber: number) => {\n    setCurrentPage(pageNumber);\n  };\n\n  const handleEntriesPerPageChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    setEntriesPerPage(Number(e.target.value));\n    setCurrentPage(1);\n  };\n\n  const headers: Header<Membership>[] = [\n    { label: \"Membresía\", key: \"name\", type: \"string\" },\n    { label: \"Beneficios\", key: \"benefits\", type: \"string\" },\n    { label: \"Precio\", key: \"price\", type: \"number\" },\n    {\n      label: \"Propiedades Destacadas\",\n      key: \"projectsFeatured\",\n      type: \"number\",\n    },\n    { label: \"Max. Propiedades\", key: \"maxProjects\", type: \"number\" },\n    {\n      label: \"Descuento por 3 Meses\",\n      key: \"discountThreeMonths\",\n      type: \"number\",\n    },\n    {\n      label: \"Descuento por 6 Meses\",\n      key: \"discountSixMonths\",\n      type: \"number\",\n    },\n    {\n      label: \"Descuento por 12 Meses\",\n      key: \"discountTwelveMonths\",\n      type: \"number\",\n    },\n  ];\n\n  return (\n    <div className=\"container mx-auto mt-24 pb-10\">\n      <h1 className=\"mb-6 pb-5 text-center text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        Gestión de Membresías\n      </h1>\n\n      {showSkeleton ? (\n        <TableSkeleton />\n      ) : (\n        <Table\n          data={filteredMemberships}\n          headers={headers}\n          totalEntries={totalEntries}\n          entry=\"membresías\"\n          currentPage={currentPage}\n          goToPage={goToPage}\n          goToNextPage={goToNextPage}\n          goToPreviousPage={goToPreviousPage}\n          entriesPerPage={entriesPerPage}\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\n          onEditClick={handleEditClick}\n        />\n      )}\n\n      {modalOpen && (\n        <MembershipModal\n          show={modalOpen}\n          onClose={() => setModalOpen(false)}\n          onSubmit={handleConfirmUpdate}\n          handleChange={handleChange}\n          membership={membership}\n          errors={errors}\n        />\n      )}\n\n      {isConfirmationModalOpen && (\n        <ModalConfirmation\n          isOpen={isConfirmationModalOpen}\n          onClose={handleCloseConfirmationModal}\n          onConfirm={handleConfirmedAction}\n          title=\"Confirmar Acción\"\n          message=\"¿Estás seguro de que quieres actualizar esta membresía?\"\n          confirmLabel=\"Confirmar\"\n          cancelLabel=\"Cancelar\"\n        />\n      )}\n\n      {alert.show && (\n        <Alert\n          type={alert.type!}\n          message={alert.message}\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\n        />\n      )}\n    </div>\n  );\n}\n"
      },
      "page.tsx": "\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport dynamic from \"next/dynamic\";\nimport AdminCardSkeleton from \"../ui/skeletons/admin/adminCardSkeleton\";\n\nconst AdminCard = dynamic(() => import(\"../ui/admin/adminCard\"), {\n  ssr: false,\n});\n\nconst Building2 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building2)\n);\nconst House = dynamic(() => import(\"lucide-react\").then((mod) => mod.House));\nconst Users = dynamic(() => import(\"lucide-react\").then((mod) => mod.Users));\nconst ShieldCheck = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ShieldCheck)\n);\nconst Tag = dynamic(() => import(\"lucide-react\").then((mod) => mod.Tag));\nconst ClipboardList = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ClipboardList)\n);\n\nexport default function Page() {\n  const { data: session, status } = useSession();\n\n  const cards = [\n    {\n      href: \"/admin/proyectos\",\n      icon: Building2,\n      title: \"Proyectos\",\n      description:\n        \"Administra y gestiona todos los proyectos en desarrollo, incluyendo información y detalles de cada proyecto.\",\n      permission: \"Gestionar proyectos\",\n    },\n    {\n      href: \"/admin/propiedades\",\n      icon: House,\n      title: \"Propiedades\",\n      description:\n        \"Gestiona las propiedades disponibles para venta y arriendo, incluyendo tipos de vivienda y características.\",\n      permission: \"Gestionar propiedades\",\n    },\n    {\n      href: \"/admin/usuarios\",\n      icon: Users,\n      title: \"Usuarios\",\n      description: \"Gestiona los usuarios registrados en la plataforma.\",\n      permission: \"Gestionar usuarios\",\n    },\n    {\n      href: \"/admin/roles\",\n      icon: ShieldCheck,\n      title: \"Roles\",\n      description: \"Administra los roles, permisos y accesos de los usuarios.\",\n      permission: \"Gestionar roles\",\n    },\n    {\n      href: \"/admin/membresias\",\n      icon: Tag,\n      title: \"Membresías\",\n      description:\n        \"Gestiona las membresías disponibles para usuarios y propiedades, incluyendo niveles y beneficios.\",\n      permission: \"Gestionar membresias\",\n    },\n    {\n      href: \"/admin/solicitudes\",\n      icon: ClipboardList,\n      title: \"Solicitudes\",\n      description:\n        \"Revisa y gestiona las solicitudes de los usuarios relacionadas con propiedades.\",\n      permission: \"Gestionar solicitudes\",\n    },\n  ];\n\n  const userPermissions = session?.user?.permissions || [];\n  const filteredCards =\n    status === \"authenticated\"\n      ? cards.filter((card) =>\n          userPermissions.some((perm) => perm.name === card.permission)\n        )\n      : [];\n\n  return (\n    <div className=\"container mx-auto min-h-[calc(100vh-200px)] bg-premium-background px-4 py-12 dark:bg-premium-background\">\n      <h1 className=\"mb-10 mt-20 text-center text-4xl font-semibold text-premium-primary lg:mt-16 dark:text-premium-primaryLight min-h-[4rem]\">\n        Bienvenido al Panel de Administración de EdifiK\n      </h1>\n\n      <div className=\"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3\">\n        {status === \"loading\" &&\n          cards.map((_, index) => (\n            <div\n              key={index}\n              className=\"min-h-[200px] bg-premium-backgroundAlt dark:bg-premium-secondaryLight rounded-lg\"\n            >\n              <AdminCardSkeleton />\n            </div>\n          ))}\n\n        {status === \"authenticated\" &&\n          filteredCards.map(({ href, icon: Icon, title, description }) => (\n            <div\n              key={href}\n              className=\"min-h-[200px] bg-premium-backgroundAlt dark:bg-premium-secondaryLight rounded-lg\"\n            >\n              <AdminCard\n                href={href}\n                Icon={Icon}\n                title={title}\n                description={description}\n              />\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n}\n",
      "propiedades": {
        "[id]": {
          "page.tsx": "\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport ProjectForm from \"@/app/ui/admin/projects/createEditProject/projectForm\";\r\n\r\nexport default function EditPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n  const params = useParams();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const hasPermission =\r\n    session?.user?.permissions?.some(\r\n      (perm) => perm.name === \"Gestionar propiedades\"\r\n    ) || false;\r\n\r\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\r\n\r\n  if (!projectId) return null;\r\n\r\n  return (\r\n    <ProjectForm\r\n      isEdit={true}\r\n      isProperty={true}\r\n      projectId={Number(projectId)}\r\n      hasPermission={hasPermission}\r\n    />\r\n  );\r\n}\r\n"
        },
        "crear-propiedad": {
          "page.tsx": "\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport ProjectForm from \"@/app/ui/admin/projects/createEditProject/projectForm\";\n\nexport default function CreatePropertyPage() {\n  const { data: session, status } = useSession();\n\n  if (status !== \"authenticated\") return null;\n\n  const hasPermission =\n    session?.user?.permissions?.some(\n      (perm) => perm.name === \"Gestionar propiedades\"\n    ) || false;\n\n  return (\n    <ProjectForm\n      isEdit={false}\n      isProperty={true}\n      hasPermission={hasPermission}\n    />\n  );\n}\n"
        },
        "page.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport ProjectManager from \"@/app/ui/admin/projects/projectManager\";\n\nexport default function PropertyPage() {\n  const [projectTypeId, setProjectTypeId] = useState<number>(2);\n\n  return (\n    <ProjectManager\n      isProperty={true}\n      projectTypeId={projectTypeId}\n      setProjectTypeId={setProjectTypeId}\n    />\n  );\n}\n"
      },
      "proyectos": {
        "[id]": {
          "page.tsx": "\"use client\";\n\nimport { useParams } from \"next/navigation\";\nimport { useSession } from \"next-auth/react\";\nimport ProjectForm from \"@/app/ui/admin/projects/createEditProject/projectForm\";\n\nexport default function EditProjectPage() {\n  const { data: session, status } = useSession();\n  const params = useParams();\n\n  if (status !== \"authenticated\") return null;\n\n  const hasPermission =\n    session?.user?.permissions?.some(\n      (perm) => perm.name === \"Gestionar proyectos\"\n    ) || false;\n\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\n\n  if (!projectId) return null;\n\n  return (\n    <ProjectForm\n      isEdit={true}\n      isProperty={false}\n      projectId={Number(projectId)}\n      hasPermission={hasPermission}\n    />\n  );\n}\n"
        },
        "crear-proyecto": {
          "page.tsx": "import ProjectForm from \"@/app/ui/admin/projects/createEditProject/projectForm\";\n\nexport default function CreateProjectPage() {\n  return <ProjectForm isEdit={false} isProperty={false} />;\n}\n"
        },
        "page.tsx": "import ProjectManager from \"@/app/ui/admin/projects/projectManager\";\n\nexport default function ProjectPage() {\n  return <ProjectManager isProperty={false} projectTypeId={1} />;\n}\n"
      },
      "roles": {
        "page.tsx": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Role, Header } from \"@/lib/definitios\";\r\nimport { useDebouncedCallback } from \"use-debounce\";\r\nimport { Plus } from \"lucide-react\";\r\nimport { useRoles } from \"@/app/hooks/roles/useRoles\";\r\nimport { useRoleValidation } from \"@/app/hooks/roles/useRoleValidation\";\r\nimport { useRoleApi } from \"@/app/hooks/roles/useRoleApi\";\r\nimport { usePermissions } from \"@/app/hooks/roles/usePermissions\";\r\nimport Table from \"@/app/ui/admin/table/table\";\r\nimport TableSkeleton from \"@/app/ui/skeletons/admin/tableSkeleton\";\r\nimport Alert from \"@/app/ui/alert\";\r\nimport ModalConfirmation from \"@/app/ui/modals/admin/modalConfirmation\";\r\n\r\nconst RoleModal = dynamic(() => import(\"@/app/ui/admin/roles/roleModal\"), {\r\n  ssr: false,\r\n});\r\n\r\nexport default function RolesPage() {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editRole, setEditRole] = useState<Role | null>(null);\r\n  const [registerRole, setRegisterRole] = useState<Role>({\r\n    id: 0,\r\n    name: \"\",\r\n    permissions: [],\r\n  });\r\n  const [tempEditRole, setTempEditRole] = useState<Role | null>(null);\r\n  const [deleteRole, setDeleteRole] = useState<Role | null>(null);\r\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\r\n  const [confirmationAction, setConfirmationAction] = useState<\r\n    \"register\" | \"edit\" | \"delete\" | null\r\n  >(null);\r\n  const [flag, setFlag] = useState(true);\r\n  const [alert, setAlert] = useState({\r\n    type: \"\" as \"success\" | \"error\" | null,\r\n    message: \"\",\r\n    show: false,\r\n  });\r\n\r\n  const { roles, totalEntries, isLoadingRoles, refetchRoles } = useRoles(\r\n    currentPage,\r\n    entriesPerPage,\r\n    searchTerm\r\n  );\r\n  const { permissions } = usePermissions();\r\n\r\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\r\n  const showSkeleton = !hasLoadedOnce && isLoadingRoles;\r\n  if (!isLoadingRoles && !hasLoadedOnce) {\r\n    setHasLoadedOnce(true);\r\n  }\r\n\r\n  const { errors, validateFields } = useRoleValidation(\r\n    editRole || registerRole,\r\n    !!editRole\r\n  );\r\n\r\n  const { submitRole } = useRoleApi();\r\n\r\n  const debouncedSearch = useDebouncedCallback((term: string) => {\r\n    setSearchTerm(term);\r\n    setCurrentPage(1);\r\n  }, 500);\r\n\r\n  const handleEditClick = (role: Role) => {\r\n    setEditRole(role);\r\n    setTempEditRole({ ...role });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleRegisterClick = () => {\r\n    setEditRole(null);\r\n    setRegisterRole({ id: 0, name: \"\", permissions: [] });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteClick = (role: Role) => {\r\n    setDeleteRole(role);\r\n    setConfirmationAction(\"delete\");\r\n    setIsConfirmationModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmedAction = async () => {\r\n    let roleData: Role | null = null;\r\n\r\n    if (confirmationAction === \"delete\") {\r\n      if (!deleteRole || !deleteRole.id) {\r\n        console.error(\"Error: No se puede eliminar un rol sin ID.\");\r\n        setAlert({\r\n          type: \"error\",\r\n          message: \"Error: No se puede eliminar un rol sin ID.\",\r\n          show: true,\r\n        });\r\n        return;\r\n      }\r\n      roleData = deleteRole;\r\n    } else {\r\n      roleData = confirmationAction === \"edit\" ? tempEditRole : registerRole;\r\n    }\r\n\r\n    if (!roleData) return;\r\n\r\n    const success = await submitRole(roleData, confirmationAction!);\r\n\r\n    if (success) {\r\n      setModalOpen(false);\r\n      setIsConfirmationModalOpen(false);\r\n      setFlag(true);\r\n\r\n      if (confirmationAction === \"edit\") {\r\n        setEditRole(tempEditRole);\r\n      }\r\n\r\n      await refetchRoles();\r\n\r\n      setAlert({\r\n        type: \"success\",\r\n        message: `Rol ${\r\n          confirmationAction === \"edit\"\r\n            ? \"editado\"\r\n            : confirmationAction === \"delete\"\r\n              ? \"eliminado\"\r\n              : \"registrado\"\r\n        } correctamente.`,\r\n        show: true,\r\n      });\r\n    } else {\r\n      setIsConfirmationModalOpen(false);\r\n      setAlert({\r\n        type: \"error\",\r\n        message: \"Lo sentimos, algo salió mal, inténtalo más tarde.\",\r\n        show: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFlag(false);\r\n\r\n    const isValid = await validateFields();\r\n    if (!isValid) {\r\n      return;\r\n    }\r\n\r\n    setConfirmationAction(editRole ? \"edit\" : \"register\");\r\n    setIsConfirmationModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setIsConfirmationModalOpen(false);\r\n    setFlag(true);\r\n  };\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n\r\n    if (name === \"addPermission\") {\r\n      const selectedPermission = permissions.find(\r\n        (perm) => perm.id === Number(value)\r\n      );\r\n      if (!selectedPermission) return;\r\n\r\n      if (tempEditRole) {\r\n        setTempEditRole((prev) => ({\r\n          ...prev!,\r\n          permissions: [...(prev!.permissions || []), selectedPermission],\r\n        }));\r\n      } else {\r\n        setRegisterRole((prev) => ({\r\n          ...prev,\r\n          permissions: [...(prev.permissions || []), selectedPermission],\r\n        }));\r\n      }\r\n    } else if (name === \"deletePermission\") {\r\n      if (tempEditRole) {\r\n        setTempEditRole((prev) => ({\r\n          ...prev!,\r\n          permissions: prev!.permissions?.filter(\r\n            (perm) => perm.id !== Number(value)\r\n          ),\r\n        }));\r\n      } else {\r\n        setRegisterRole((prev) => ({\r\n          ...prev,\r\n          permissions: prev.permissions?.filter(\r\n            (perm) => perm.id !== Number(value)\r\n          ),\r\n        }));\r\n      }\r\n    } else {\r\n      if (tempEditRole) {\r\n        setTempEditRole((prev) => ({\r\n          ...prev!,\r\n          [name]: value,\r\n        }));\r\n      } else {\r\n        setRegisterRole((prev) => ({\r\n          ...prev,\r\n          [name]: value,\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const goToNextPage = () => {\r\n    setCurrentPage((prevPage) => prevPage + 1);\r\n  };\r\n\r\n  const goToPreviousPage = () => {\r\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\r\n  };\r\n\r\n  const goToPage = (pageNumber: number) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  const handleEntriesPerPageChange = (\r\n    e: React.ChangeEvent<HTMLSelectElement>\r\n  ) => {\r\n    setEntriesPerPage(Number(e.target.value));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const headers: Header<Role>[] = [\r\n    { label: \"Id\", key: \"id\", type: \"number\" },\r\n    { label: \"Nombre\", key: \"name\", type: \"string\" },\r\n    { label: \"Permisos\", key: \"permissions\", type: \"array\", subKey: \"name\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-24 pb-10\">\r\n      <h1 className=\"text-3xl font-bold mb-6 text-center text-premium-primary dark:text-premium-primaryLight pb-5\">\r\n        Gestión de Roles\r\n      </h1>\r\n\r\n      <div className=\"mb-4 flex justify-center px-4 md:justify-end\">\r\n        <button\r\n          onClick={handleRegisterClick}\r\n          className=\"flex items-center space-x-2 whitespace-nowrap rounded-lg bg-green-600 px-6 py-2 text-white shadow-md transition-colors hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800\"\r\n        >\r\n          <Plus className=\"mr-2 size-6\" />\r\n          <span>Registrar Rol</span>\r\n        </button>\r\n      </div>\r\n\r\n      {showSkeleton ? (\r\n        <TableSkeleton />\r\n      ) : (\r\n        <Table\r\n          data={roles}\r\n          headers={headers}\r\n          totalEntries={totalEntries}\r\n          entry=\"roles\"\r\n          currentPage={currentPage}\r\n          goToPage={goToPage}\r\n          goToNextPage={goToNextPage}\r\n          goToPreviousPage={goToPreviousPage}\r\n          entriesPerPage={entriesPerPage}\r\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\r\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\r\n          onEditClick={handleEditClick}\r\n          onDeleteClick={handleDeleteClick}\r\n        />\r\n      )}\r\n\r\n      {modalOpen && (\r\n        <RoleModal\r\n          show={modalOpen}\r\n          onClose={() => {\r\n            setModalOpen(false);\r\n            setFlag(true);\r\n          }}\r\n          onSubmit={handleConfirmSubmit}\r\n          handleChange={handleChange}\r\n          role={tempEditRole || registerRole}\r\n          permissions={permissions}\r\n          errors={errors}\r\n          flag={flag}\r\n        />\r\n      )}\r\n\r\n      {isConfirmationModalOpen && (\r\n        <ModalConfirmation\r\n          isOpen={isConfirmationModalOpen}\r\n          onClose={handleCloseConfirmationModal}\r\n          onConfirm={handleConfirmedAction}\r\n          title=\"Confirmar Acción\"\r\n          message={`¿Estás seguro de que quieres ${confirmationAction === \"edit\" ? \"editar\" : \"registrar\"} este rol?`}\r\n          confirmLabel=\"Confirmar\"\r\n          cancelLabel=\"Cancelar\"\r\n        />\r\n      )}\r\n\r\n      {alert.show && (\r\n        <Alert\r\n          type={alert.type!}\r\n          message={alert.message}\r\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "solicitudes": {
        "[id]": {
          "page.tsx": "\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport ProjectView from \"@/app/ui/admin/projects/projectView/projectView\";\r\n\r\nexport default function ViewPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n  const params = useParams();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\r\n\r\n  if (!projectId) return null;\r\n\r\n  return <ProjectView projectId={Number(projectId)} isProperty={true} />;\r\n}\r\n"
        },
        "page.tsx": "\"use client\";\r\n\r\nimport { useState, useCallback } from \"react\";\r\nimport { useDebouncedCallback } from \"use-debounce\";\r\nimport { Eye, CheckCircle } from \"lucide-react\";\r\nimport { Request, Header } from \"@/lib/definitios\";\r\nimport { useRequests } from \"@/app/hooks/requests/useRequests\";\r\nimport { useRequestApi } from \"@/app/hooks/requests/useRequestApi\";\r\nimport { useRequestValidation } from \"@/app/hooks/requests/useRequestValidation\";\r\nimport Table from \"@/app/ui/admin/table/table\";\r\nimport TableSkeleton from \"@/app/ui/skeletons/admin/tableSkeleton\";\r\nimport RequestModal from \"@/app/ui/admin/requests/requestModal\";\r\nimport ModalConfirmation from \"@/app/ui/modals/admin/modalConfirmation\";\r\nimport Alert from \"@/app/ui/alert\";\r\n\r\nexport default function RequestsPage() {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\r\n  const [requestAction, setRequestAction] = useState<\r\n    \"approve\" | \"reject\" | \"revision\"\r\n  >(() => \"approve\");\r\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\r\n  const [isRequestModalOpen, setIsRequestModalOpen] = useState(false);\r\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\r\n\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  const { requests, totalEntries, isLoadingRequests } = useRequests(\r\n    currentPage,\r\n    entriesPerPage,\r\n    searchTerm,\r\n    refreshTrigger\r\n  );\r\n\r\n  const { errors, validateFields, validateField } = useRequestValidation();\r\n  const [flag, setFlag] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const showSkeleton = !hasLoadedOnce && isLoadingRequests;\r\n  if (!isLoadingRequests && !hasLoadedOnce) {\r\n    setHasLoadedOnce(true);\r\n  }\r\n\r\n  const [alert, setAlert] = useState({\r\n    type: \"\" as \"success\" | \"error\" | null,\r\n    message: \"\",\r\n    show: false,\r\n  });\r\n\r\n  const debouncedSearch = useDebouncedCallback((term: string) => {\r\n    setSearchTerm(term);\r\n    setCurrentPage(1);\r\n  }, 500);\r\n\r\n  const { processRequest } = useRequestApi();\r\n\r\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFlag(false);\r\n\r\n    const isValid = validateFields(message, requestAction);\r\n    if (!isValid) return;\r\n\r\n    setIsConfirmationModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setIsConfirmationModalOpen(false);\r\n    setFlag(true);\r\n  };\r\n\r\n  const handleConfirmedAction = async () => {\r\n    if (!selectedRequest || !message.trim() || !requestAction) {\r\n      return;\r\n    }\r\n\r\n    const success = await processRequest(\r\n      selectedRequest.id,\r\n      requestAction,\r\n      message,\r\n      selectedRequest.userEmail\r\n    );\r\n\r\n    closeConfirmationModal();\r\n    closeRequestModal();\r\n\r\n    if (success) {\r\n      setAlert({\r\n        type: \"success\",\r\n        message: `Solicitud ${\r\n          requestAction === \"approve\"\r\n            ? \"aprobada\"\r\n            : requestAction === \"reject\"\r\n              ? \"rechazada\"\r\n              : \"enviada a revisión\"\r\n        } correctamente.`,\r\n        show: true,\r\n      });\r\n\r\n      setRefreshTrigger((prev) => prev + 1);\r\n    } else {\r\n      setAlert({\r\n        type: \"error\",\r\n        message: \"Hubo un error al procesar la solicitud.\",\r\n        show: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const openRequestModal = (\r\n    request: Request,\r\n    action: \"approve\" | \"reject\" | \"revision\"\r\n  ) => {\r\n    setSelectedRequest(request);\r\n    setRequestAction(action);\r\n    setMessage(\"\");\r\n    setFlag(true);\r\n    setIsRequestModalOpen(true);\r\n  };\r\n\r\n  const closeRequestModal = () => {\r\n    setIsRequestModalOpen(false);\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const closeConfirmationModal = () => {\r\n    setIsConfirmationModalOpen(false);\r\n  };\r\n\r\n  const goToNextPage = useCallback(\r\n    () => setCurrentPage((prev) => prev + 1),\r\n    []\r\n  );\r\n\r\n  const goToPreviousPage = useCallback(\r\n    () => setCurrentPage((prev) => Math.max(prev - 1, 1)),\r\n    []\r\n  );\r\n\r\n  const goToPage = useCallback((page: number) => setCurrentPage(page), []);\r\n\r\n  const handleEntriesPerPageChange = (\r\n    e: React.ChangeEvent<HTMLSelectElement>\r\n  ) => {\r\n    setEntriesPerPage(Number(e.target.value));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const headers: Header<Request>[] = [\r\n    { label: \"ID\", key: \"id\", type: \"number\" },\r\n    { label: \"Fecha\", key: \"date\", type: \"date\" },\r\n    {\r\n      label: \"Operación\",\r\n      key: \"operation\",\r\n      type: \"status\",\r\n      statusMapping: {\r\n        agregar: {\r\n          label: \"Agregar\",\r\n          className:\r\n            \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\",\r\n        },\r\n        editar: {\r\n          label: \"Editar\",\r\n          className:\r\n            \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\",\r\n        },\r\n      },\r\n    },\r\n    { label: \"Mensaje\", key: \"responseMessage\", type: \"string\" },\r\n    { label: \"Usuario\", key: \"userEmail\", type: \"string\" },\r\n    { label: \"Propiedad\", key: \"projectName\", type: \"string\" },\r\n    {\r\n      label: \"Estado\",\r\n      key: \"statusRequestName\",\r\n      type: \"status\",\r\n      statusMapping: {\r\n        aprobado: {\r\n          label: \"Aprobado\",\r\n          className:\r\n            \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\",\r\n        },\r\n        rechazado: {\r\n          label: \"Rechazado\",\r\n          className:\r\n            \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\",\r\n        },\r\n        pendiente: {\r\n          label: \"Pendiente\",\r\n          className:\r\n            \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\",\r\n        },\r\n        revision: {\r\n          label: \"Revisión\",\r\n          className:\r\n            \"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200\",\r\n        },\r\n      },\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      icon: Eye,\r\n      title: \"Ver Propiedad\",\r\n      className: \"text-green-500 hover:text-green-600\",\r\n      redirectUrl: (item: Request) => `/admin/solicitudes/${item.projectId}`,\r\n      openInNewTab: false,\r\n    },\r\n    {\r\n      icon: CheckCircle,\r\n      title: \"Responder Solicitud\",\r\n      className: \"text-blue-500 hover:text-blue-600\",\r\n      onClick: (item: Request) => openRequestModal(item, \"approve\"),\r\n      shouldRender: (item: Request) =>\r\n        item.statusRequestName.toLowerCase() === \"pendiente\",\r\n    },\r\n  ];\r\n\r\n  const actionLabels = {\r\n    approve: {\r\n      title: \"Confirmar Aprobación\",\r\n      verb: \"aprobar\",\r\n      result: \"aprobada\",\r\n    },\r\n    reject: {\r\n      title: \"Confirmar Rechazo\",\r\n      verb: \"rechazar\",\r\n      result: \"rechazada\",\r\n    },\r\n    revision: {\r\n      title: \"Confirmar Envío a Revisión\",\r\n      verb: \"enviar a revisión\",\r\n      result: \"en revisión\",\r\n    },\r\n  };\r\n\r\n  const actionInfo = actionLabels[requestAction] ?? actionLabels[\"approve\"];\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-24 pb-10\">\r\n      <h1 className=\"mb-6 pb-5 text-center text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        Gestión de Solicitudes\r\n      </h1>\r\n\r\n      {showSkeleton ? (\r\n        <TableSkeleton />\r\n      ) : (\r\n        <Table<Request>\r\n          data={requests}\r\n          headers={headers}\r\n          totalEntries={totalEntries}\r\n          entry=\"solicitudes\"\r\n          currentPage={currentPage}\r\n          goToPage={goToPage}\r\n          goToNextPage={goToNextPage}\r\n          goToPreviousPage={goToPreviousPage}\r\n          entriesPerPage={entriesPerPage}\r\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\r\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\r\n          actions={actions}\r\n        />\r\n      )}\r\n\r\n      {isRequestModalOpen && selectedRequest && (\r\n        <RequestModal\r\n          show={isRequestModalOpen}\r\n          flag={flag}\r\n          onClose={closeRequestModal}\r\n          onSubmit={handleConfirmSubmit}\r\n          handleChange={(e) => {\r\n            setMessage(e.target.value);\r\n            validateField(\"messageError\", e.target.value);\r\n          }}\r\n          message={message}\r\n          actionType={requestAction}\r\n          errors={errors}\r\n          setRequestAction={(action) => {\r\n            setRequestAction(action);\r\n            validateField(\"actionTypeError\", action);\r\n            setFlag(false);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {isConfirmationModalOpen && selectedRequest && (\r\n        <ModalConfirmation\r\n          isOpen={isConfirmationModalOpen}\r\n          onClose={handleCloseConfirmationModal}\r\n          onConfirm={handleConfirmedAction}\r\n          title={actionInfo.title}\r\n          message={`¿Estás seguro de que deseas ${actionInfo.verb} esta solicitud? Una vez ${actionInfo.result}, no se podrá modificar la respuesta.`}\r\n          confirmLabel={\r\n            actionInfo.verb.charAt(0).toUpperCase() + actionInfo.verb.slice(1)\r\n          }\r\n          cancelLabel=\"Cancelar\"\r\n        />\r\n      )}\r\n\r\n      {alert.show && (\r\n        <Alert\r\n          type={alert.type!}\r\n          message={alert.message}\r\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "usuarios": {
        "page.tsx": "\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { useCallback } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Plus, Eye } from \"lucide-react\";\nimport { User, UserData, Header } from \"@/lib/definitios\";\nimport { useUsers } from \"@/app/hooks/users/useUsers\";\nimport { useUserValidation } from \"@/app/hooks/users/useUserValidation\";\nimport { useUserApi } from \"@/app/hooks/users/useUserApi\";\nimport { useUsersMetadata } from \"@/app/hooks/users/useUsersMetadata\";\nimport Table from \"@/app/ui/admin/table/table\";\nimport TableSkeleton from \"@/app/ui/skeletons/admin/tableSkeleton\";\nimport UserProjectsModal from \"@/app/ui/admin/users/userProjectsModal \";\nimport ModalConfirmation from \"@/app/ui/modals/admin/modalConfirmation\";\nimport Alert from \"@/app/ui/alert\";\n\nconst UserModal = dynamic(() => import(\"@/app/ui/admin/users/userModal\"), {\n  ssr: false,\n});\n\nexport default function UsersPage() {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [modalOpen, setModalOpen] = useState(false);\n  const [editUser, setEditUser] = useState<UserData | null>(null);\n  const [tempUser, setTempUser] = useState<UserData | null>(null);\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\n  const [isUserProjectsModalOpen, setIsUserProjectsModalOpen] = useState(false);\n  const [selectedUserId, setSelectedUserId] = useState<number | null>(null);\n  const [confirmationAction, setConfirmationAction] = useState<\n    \"register\" | \"edit\" | null\n  >(null);\n  const [flag, setFlag] = useState(true);\n  const [alert, setAlert] = useState({\n    type: \"\" as \"success\" | \"error\" | null,\n    message: \"\",\n    show: false,\n  });\n\n  const { users, totalEntries, isLoadingUsers, refetchUsers } = useUsers(\n    currentPage,\n    entriesPerPage,\n    searchTerm\n  );\n  const { roles, genders, memberships } = useUsersMetadata();\n\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\n  const showSkeleton = !hasLoadedOnce && isLoadingUsers;\n  if (!isLoadingUsers && !hasLoadedOnce) {\n    setHasLoadedOnce(true);\n  }\n\n  const { errors, validateFields } = useUserValidation(\n    tempUser || {},\n    !!editUser\n  );\n\n  const { submitUser } = useUserApi();\n\n  const debouncedSearch = useDebouncedCallback((term: string) => {\n    setSearchTerm(term);\n    setCurrentPage(1);\n  }, 500);\n\n  const filteredMemberships = useMemo(() => {\n    return memberships.filter((membership) => membership.id !== 1004);\n  }, [memberships]);\n\n  const handleEditClick = (user: User) => {\n    setEditUser(user);\n    setTempUser({ ...user });\n    setModalOpen(true);\n  };\n\n  const handleRegisterClick = () => {\n    setEditUser(null);\n    setTempUser({});\n    setModalOpen(true);\n  };\n\n  const handleConfirmedAction = async () => {\n    if (!tempUser) {\n      return;\n    }\n\n    const success = await submitUser(tempUser, confirmationAction!);\n\n    if (success) {\n      setModalOpen(false);\n      setIsConfirmationModalOpen(false);\n      setFlag(true);\n\n      if (confirmationAction === \"edit\") {\n        setEditUser(tempUser);\n      }\n\n      await refetchUsers();\n\n      setAlert({\n        type: \"success\",\n        message: `Usuario ${\n          confirmationAction === \"edit\" ? \"editado\" : \"registrado\"\n        } correctamente.`,\n        show: true,\n      });\n    } else {\n      setIsConfirmationModalOpen(false);\n      setAlert({\n        type: \"error\",\n        message: \"Lo sentimos, algo salió mal, inténtalo más tarde.\",\n        show: true,\n      });\n    }\n  };\n\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setFlag(false);\n\n    const isValid = await validateFields();\n\n    if (!isValid) {\n      return;\n    }\n\n    setConfirmationAction(editUser ? \"edit\" : \"register\");\n    setIsConfirmationModalOpen(true);\n  };\n\n  const handleCloseConfirmationModal = () => {\n    setIsConfirmationModalOpen(false);\n    setFlag(true);\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => {\n    const { name, value, type } = e.target;\n    const newValue =\n      type === \"checkbox\" ? (e.target as HTMLInputElement).checked : value;\n\n    const updateNestedValue = (obj: any, path: string, value: any) => {\n      const keys = path.split(\".\");\n      let current = obj;\n\n      keys.forEach((key, index) => {\n        if (index === keys.length - 1) {\n          current[key] = value;\n        } else {\n          if (!current[key]) current[key] = {};\n          current = current[key];\n        }\n      });\n\n      return { ...obj };\n    };\n\n    setTempUser((prev) => {\n      const updatedUser = updateNestedValue(prev || {}, name, newValue);\n      return updatedUser;\n    });\n  };\n\n  const goToNextPage = useCallback(() => {\n    setCurrentPage((prevPage) => prevPage + 1);\n  }, []);\n\n  const goToPreviousPage = useCallback(() => {\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\n  }, []);\n\n  const goToPage = useCallback((pageNumber: number) => {\n    setCurrentPage(pageNumber);\n  }, []);\n\n  const handleEntriesPerPageChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    setEntriesPerPage(Number(e.target.value));\n    setCurrentPage(1);\n  };\n\n  const openUserProjectsModal = (userId: number) => {\n    setSelectedUserId(userId);\n    setIsUserProjectsModalOpen(true);\n  };\n\n  const headers: Header<User>[] = [\n    { label: \"Id\", key: \"id\", type: \"number\" },\n    { label: \"Nombres\", key: \"names\", type: \"string\" },\n    { label: \"Apellidos\", key: \"lastnames\", type: \"string\" },\n    { label: \"Email\", key: \"email\", type: \"string\" },\n    { label: \"Teléfono\", key: \"phoneNumber\", type: \"string\" },\n    { label: \"Género\", key: \"gender.name\", type: \"string\" },\n    { label: \"Estado\", key: \"state\", type: \"boolean\" },\n    { label: \"Fecha de registro\", key: \"registrationDate\", type: \"date\" },\n    { label: \"Última conexión\", key: \"lastLogin\", type: \"date\" },\n    { label: \"Rol\", key: \"role.name\", type: \"string\" },\n    { label: \"Membresía\", key: \"membership.name\", type: \"string\" },\n    { label: \"Num. Propiedades\", key: \"totalProperties\", type: \"number\" },\n    { label: \"Prov. autenticación\", key: \"provider\", type: \"string\" },\n  ];\n\n  const actions = [\n    {\n      icon: Eye,\n      title: \"Ver Propiedades\",\n      className: \"text-green-500 hover:text-green-600\",\n      onClick: (item: User) => openUserProjectsModal(item.id),\n      shouldRender: (item: User) => (item.totalProperties ?? 0) > 0,\n    },\n  ];\n\n  return (\n    <div className=\"container mx-auto mt-24 pb-10\">\n      <h1 className=\"mb-6 pb-5 text-center text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        Gestión de Usuarios\n      </h1>\n      <div className=\"mb-4 flex justify-center px-4 md:justify-end\">\n        <button\n          onClick={handleRegisterClick}\n          className=\"flex items-center space-x-2 whitespace-nowrap rounded-lg bg-green-600 px-6 py-2 text-white shadow-md transition-colors hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800\"\n        >\n          <Plus className=\"mr-2 size-6\" />\n          <span>Registrar Usuario</span>\n        </button>\n      </div>\n\n      {showSkeleton ? (\n        <TableSkeleton />\n      ) : (\n        <Table\n          data={users}\n          headers={headers}\n          totalEntries={totalEntries}\n          entry=\"usuarios\"\n          currentPage={currentPage}\n          goToPage={goToPage}\n          goToNextPage={goToNextPage}\n          goToPreviousPage={goToPreviousPage}\n          entriesPerPage={entriesPerPage}\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\n          onEditClick={handleEditClick}\n          actions={actions}\n        />\n      )}\n\n      {modalOpen && (\n        <UserModal\n          show={modalOpen}\n          onClose={() => {\n            setModalOpen(false);\n            setFlag(true);\n          }}\n          onSubmit={handleConfirmSubmit}\n          handleChange={handleChange}\n          user={tempUser || {}}\n          roles={roles}\n          genders={genders}\n          memberships={filteredMemberships}\n          errors={errors || {}}\n          flag={flag}\n        />\n      )}\n\n      {isUserProjectsModalOpen && selectedUserId && (\n        <UserProjectsModal\n          show={isUserProjectsModalOpen}\n          onClose={() => setIsUserProjectsModalOpen(false)}\n          userId={selectedUserId}\n        />\n      )}\n\n      {isConfirmationModalOpen && (\n        <ModalConfirmation\n          isOpen={isConfirmationModalOpen}\n          onClose={handleCloseConfirmationModal}\n          onConfirm={handleConfirmedAction}\n          title=\"Confirmar Acción\"\n          message={`¿Estás seguro de que quieres ${\n            confirmationAction === \"edit\" ? \"editar\" : \"registrar\"\n          } este usuario?`}\n          confirmLabel=\"Confirmar\"\n          cancelLabel=\"Cancelar\"\n        />\n      )}\n\n      {alert.show && (\n        <Alert\n          type={alert.type!}\n          message={alert.message}\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\n        />\n      )}\n    </div>\n  );\n}\n"
      }
    },
    "api": {
      "auth": {
        "[...nextauth]": {
          "route.ts": "import { authOptions } from \"@/src/modules/auth\";\nimport NextAuth from \"next-auth\";\n\nconst handler = NextAuth(authOptions);\nexport { handler as GET, handler as POST };\n"
        },
        "register": {
          "route.ts": "import { NextResponse, NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { hash } from \"bcrypt\";\r\nimport { sendEmail } from \"@/lib/email/sendEmail\";\r\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  const body = await req.json();\r\n\r\n  const { names, lastnames, birthdate, email, phoneNumber, password } = body;\r\n\r\n  if (\r\n    !names ||\r\n    !lastnames ||\r\n    !birthdate ||\r\n    !email ||\r\n    !phoneNumber ||\r\n    !password\r\n  ) {\r\n    return NextResponse.json(\r\n      { error: \"Todos los campos son obligatorios\" },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  const hashedPassword = await hash(password, 10);\r\n\r\n  try {\r\n    await db.query(\"CALL register_user(?, ?, ?, ?, ?, ?)\", [\r\n      names,\r\n      lastnames,\r\n      birthdate,\r\n      email,\r\n      phoneNumber,\r\n      hashedPassword,\r\n    ]);\r\n\r\n    const html = generateEmailTemplate({\r\n      title: \"¡Tu cuenta ha sido creada exitosamente!\",\r\n      greeting: `Hola ${names},`,\r\n      intro:\r\n        \"Gracias por registrarte en EdifiK. Tu cuenta ha sido creada con éxito.\",\r\n      items: [\r\n        { label: \"Correo electrónico\", value: email },\r\n        { label: \"Teléfono\", value: phoneNumber },\r\n      ],\r\n      body: \"Ahora puedes acceder a tu cuenta y empezar a explorar nuestras funcionalidades.\",\r\n      buttonText: \"Iniciar sesión\",\r\n      buttonUrl: \"https://edifik.co/login\",\r\n    });\r\n\r\n    await sendEmail(email, \"Bienvenido a EdifiK\", html);\r\n\r\n    return NextResponse.json({ message: \"Usuario registrado exitosamente\" });\r\n  } catch (error: any) {\r\n    console.error(\"Error al registrar el usuario:\", error);\r\n\r\n    if (error.code === \"ER_SIGNAL_EXCEPTION\") {\r\n      return NextResponse.json(\r\n        { error: error.sqlMessage || \"Error al registrar el usuario\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { error: \"Error interno del servidor\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "reset-password": {
          "route.ts": "import { NextResponse, NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { compare, hash } from \"bcryptjs\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { sendEmail } from \"@/lib/email/sendEmail\";\r\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\r\n\r\nfunction generateTempCode(length = 6): string {\r\n  const chars =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  let code = \"\";\r\n  for (let i = 0; i < length; i++) {\r\n    code += chars.charAt(Math.floor(Math.random() * chars.length));\r\n  }\r\n  return code;\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n  const { email } = await req.json();\r\n\r\n  if (!email) {\r\n    return NextResponse.json(\r\n      { error: \"El correo electrónico es obligatorio\" },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  const tempPassword = generateTempCode();\r\n\r\n  try {\r\n    const hashedPassword = await hash(tempPassword, 10);\r\n\r\n    await db.query(\"CALL set_temporary_password(?, ?)\", [\r\n      email,\r\n      hashedPassword,\r\n    ]);\r\n\r\n    const html = generateEmailTemplate({\r\n      title: \"Código de recuperación de contraseña\",\r\n      greeting: \"Hola,\",\r\n      intro: \"Hemos recibido una solicitud para restablecer tu contraseña.\",\r\n      items: [{ label: \"Código temporal\", value: tempPassword }],\r\n      body: \"Usa este código como contraseña temporal para iniciar sesión. Una vez dentro, podrás cambiar tu contraseña desde tu perfil.\",\r\n      buttonText: \"Ir a iniciar sesión\",\r\n      buttonUrl: \"https://edifik.co/login\",\r\n    });\r\n\r\n    await sendEmail(email, \"Recuperación de contraseña - EdifiK\", html);\r\n\r\n    return NextResponse.json({\r\n      message: \"Código enviado al correo electrónico\",\r\n    });\r\n  } catch (error: any) {\r\n    console.error(\"Error al enviar código de recuperación:\", error);\r\n\r\n    if (error.code === \"ER_SIGNAL_EXCEPTION\") {\r\n      return NextResponse.json(\r\n        { error: error.sqlMessage || \"Error al generar el código\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { error: \"Error interno del servidor\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(req: NextRequest) {\r\n  const session = await getServerSession(authOptions);\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const id = session.user?.id;\r\n\r\n  const { currentPassword, newPassword } = await req.json();\r\n\r\n  if (!id || !currentPassword || !newPassword) {\r\n    return NextResponse.json(\r\n      { error: \"Todos los campos son obligatorios\" },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  try {\r\n    const [results] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_password(?)\",\r\n      [id]\r\n    );\r\n\r\n    const userPasswordRow = results[0]?.[0];\r\n\r\n    if (!userPasswordRow) {\r\n      return NextResponse.json(\r\n        { error: \"Usuario no encontrado\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    const storedPasswordHash = userPasswordRow.password;\r\n\r\n    const isMatch = await compare(currentPassword, storedPasswordHash);\r\n    if (!isMatch) {\r\n      return NextResponse.json(\r\n        { error: \"La contraseña actual no es correcta\" },\r\n        { status: 403 }\r\n      );\r\n    }\r\n\r\n    const newPasswordHash = await hash(newPassword, 10);\r\n\r\n    await db.query(\"CALL changed_password(?, ?)\", [id, newPasswordHash]);\r\n\r\n    return NextResponse.json({\r\n      message: \"Contraseña actualizada correctamente\",\r\n    });\r\n  } catch (error: any) {\r\n    console.error(\"Error al cambiar la contraseña:\", error);\r\n\r\n    if (error.code === \"ER_SIGNAL_EXCEPTION\") {\r\n      const message = error.sqlMessage || \"Error al cambiar la contraseña\";\r\n\r\n      if (message.includes(\"La contraseña actual no es correcta\")) {\r\n        return NextResponse.json({ error: message }, { status: 403 });\r\n      }\r\n\r\n      return NextResponse.json({ error: message }, { status: 400 });\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { error: \"Error interno del servidor\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        }
      },
      "check-name": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\n\r\nexport async function GET(request: Request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const table = searchParams.get(\"table\");\r\n    const name = searchParams.get(\"name\");\r\n    const id = searchParams.get(\"id\");\r\n\r\n    if (!name) {\r\n      return NextResponse.json(\r\n        { error: \"El nombre es requerido\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const procedureName = `check_${table}_name`;\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      `CALL ${procedureName}(?, ?)`,\r\n      [id || null, name]\r\n    );\r\n\r\n    const total = (result[0] as RowDataPacket[])[0]?.total || 0;\r\n\r\n    const response = NextResponse.json({ total }, { status: 200 });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Error al verificar el nombre\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "contact": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { sendEmail } from \"@/lib/email/sendEmail\";\r\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { name, phone, email, message, toEmail } = await req.json();\r\n\r\n    const html = generateEmailTemplate({\r\n      title: \"Nuevo mensaje de contacto\",\r\n      intro:\r\n        \"Has recibido un nuevo mensaje a través del formulario de contacto.\",\r\n      items: [\r\n        { label: \"Nombre\", value: name },\r\n        { label: \"Teléfono\", value: phone },\r\n        { label: \"Correo\", value: email },\r\n        { label: \"Mensaje\", value: message },\r\n      ],\r\n    });\r\n\r\n    await sendEmail(toEmail, \"Nuevo mensaje de contacto\", html);\r\n\r\n    return NextResponse.json({ ok: true });\r\n  } catch (error) {\r\n    console.error(\"❌ Error en el envío:\", error);\r\n    return NextResponse.json({ ok: false }, { status: 500 });\r\n  }\r\n}\r\n"
      },
      "memberships": {
        "route.ts": "import { NextRequest } from \"next/server\";\nimport { MembershipsController } from \"@/src/modules\";\nimport {\n  requireAuth,\n  requirePermission,\n  Permission,\n  handleHttpError,\n} from \"@/src/shared\";\n\nexport async function PUT(req: NextRequest) {\n  try {\n    await requireAuth();\n    await requirePermission(Permission.ManageMemberships);\n\n    return MembershipsController.update(req);\n  } catch (error) {\n    return handleHttpError(error);\n  }\n}\n"
      },
      "payments": {
        "route.ts": "import { NextRequest } from \"next/server\";\r\nimport { PaymentsController } from \"@/src/modules\";\r\nimport { handleHttpError } from \"@/src/shared\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    return PaymentsController.create(req);\r\n  } catch (error) {\r\n    return handleHttpError(error);\r\n  }\r\n}\r\n",
        "webhook": {
          "route.ts": "import { NextRequest } from \"next/server\";\r\nimport { PaymentsController } from \"@/src/modules\";\r\nimport { handleHttpError } from \"@/src/shared\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    return PaymentsController.webhook(req);\r\n  } catch (error) {\r\n    return handleHttpError(error);\r\n  }\r\n}\r\n"
        }
      },
      "projects": {
        "[id]": {
          "route.ts": "import { NextRequest, NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { Project } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET(\n  req: NextRequest,\n  context: { params: { id: string } }\n) {\n  try {\n    const session = await getServerSession(authOptions);\n    const permissions = session?.user?.permissions || [];\n\n    const hasPermission = permissions?.some(\n      (perm) =>\n        perm.name === \"Gestionar proyectos\" ||\n        perm.name === \"Gestionar propiedades\" ||\n        perm.name === \"Gestionar propiedades propias\"\n    );\n\n    const projectId = Number(context.params.id);\n\n    if (!projectId) {\n      return NextResponse.json({ message: \"ID inválido\" }, { status: 400 });\n    }\n\n    const { searchParams } = new URL(req.url);\n    const isProjectParam = searchParams.get(\"isProject\");\n    const isAdminParam = searchParams.get(\"isAdmin\");\n\n    if (isProjectParam === null) {\n      return NextResponse.json(\n        { error: \"El parámetro 'isProject' es requerido\" },\n        { status: 400 }\n      );\n    }\n\n    const isProject = parseInt(isProjectParam, 10);\n    const isAdmin = parseInt(isAdminParam ?? \"0\", 10);\n\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_project_by_id(?, ?, ?)\",\n      [projectId, isProject, isAdmin]\n    );\n\n    const [\n      projectsRows = [],\n      nearbyServicesRows = [],\n      commonAreasRows = [],\n      projectMediaRows = [],\n    ] = result;\n\n    if (projectsRows.length === 0) {\n      return NextResponse.json(\n        { error: \"Proyecto no encontrado\" },\n        { status: 404 }\n      );\n    }\n\n    const project: Project = {\n      id: projectsRows[0].id,\n      name: projectsRows[0].name,\n      state: projectsRows[0].state,\n      price: projectsRows[0].price,\n      totalArea: projectsRows[0].totalArea,\n      builtArea: projectsRows[0].builtArea,\n      freeHeight: projectsRows[0].freeHeight,\n      width: projectsRows[0].width,\n      length: projectsRows[0].length,\n      parkingSpots: projectsRows[0].parkingSpots,\n      elevator: projectsRows[0].elevator,\n      heavyParking: projectsRows[0].heavyParking,\n      availableUnits: projectsRows[0].availableUnits,\n      bathrooms: projectsRows[0].bathrooms,\n      bedrooms: projectsRows[0].bedrooms,\n      lobbies: projectsRows[0].lobbies,\n      towers: projectsRows[0].towers,\n      storageUnits: projectsRows[0].storageUnits,\n      socioeconomicLevel: projectsRows[0].socioeconomicLevel,\n      floorNumber: projectsRows[0].floorNumber,\n      yearBuilt: projectsRows[0].yearBuilt,\n      customizationOptions: projectsRows[0].customizationOptions,\n      terrace: projectsRows[0].terrace,\n      balcony: projectsRows[0].balcony,\n      garden: projectsRows[0].garden,\n      laundryArea: projectsRows[0].laundryArea,\n      complexName: projectsRows[0].complexName,\n      shortDescription: projectsRows[0].shortDescription,\n      detailedDescription: projectsRows[0].detailedDescription,\n      address: projectsRows[0].address,\n      latitude: Number(projectsRows[0].latitude),\n      longitude: Number(projectsRows[0].longitude),\n      availableDate: projectsRows[0].availableDate\n        ? new Date(projectsRows[0].availableDate)\n        : undefined,\n      propertyType: {\n        id: projectsRows[0].propertyTypeId,\n        name: projectsRows[0].propertyTypeName,\n      },\n      projectType: {\n        id: projectsRows[0].projectTypeId,\n        name: projectsRows[0].projectTypeName,\n      },\n      housingType: {\n        id: projectsRows[0].housingTypeId,\n        name: projectsRows[0].housingTypeName,\n      },\n      city: {\n        id: projectsRows[0].cityId,\n        name: projectsRows[0].cityName,\n        departament: {\n          id: projectsRows[0].departamentId,\n          name: projectsRows[0].departamentName,\n        },\n      },\n      membership: hasPermission\n        ? projectsRows[0].membership\n        : \"Membresía Privada\",\n      statusProject: {\n        id: projectsRows[0].statusProjectId,\n        name: projectsRows[0].statusProjectName,\n      },\n      ownerId: projectsRows[0].ownerId,\n      email: projectsRows[0].email,\n      phoneNumber: projectsRows[0].phoneNumber,\n      residentialProjectId: projectsRows[0].residentialProjectId,\n      warehouseProjectId: projectsRows[0].warehouseProjectId,\n      commonAreas: [],\n      nearbyServices: [],\n      projectMedia: [],\n    };\n\n    project.nearbyServices = nearbyServicesRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    project.commonAreas = commonAreasRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    project.projectMedia = projectMediaRows.map((row: any) => ({\n      id: row.id,\n      url: row.url,\n      tag: row.tag,\n      description: row.description,\n      projectId: row.project,\n      commonArea: row.commonAreaId,\n      imageType: row.imageTypeId,\n      type: row.commonAreaName ?? row.imageTypeName ?? \"Sin categoría\",\n    }));\n\n    const response = NextResponse.json({ project });\n\n    return response;\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"Error al buscar el proyecto\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n    const projectId = Number(params?.id);\n\n    if (!projectId) {\n      return NextResponse.json(\n        { error: \"Id del proyecto no proporcionado\" },\n        { status: 400 }\n      );\n    }\n\n    await db.query(\"CALL delete_project(?, ?)\", [projectId, userId]);\n\n    const response = NextResponse.json(\n      { message: \"Proyecto eliminado correctamente.\" },\n      { status: 200 }\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al eliminar el proyecto:\", error);\n    return NextResponse.json(\n      { error: \"Error al eliminar el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n"
        },
        "basic": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const [result] = await db.query<RowDataPacket[][]>(\"CALL get_projects()\");\r\n\r\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\r\n      result;\r\n\r\n    const totalEntries = totalEntriesRow.totalEntries || 0;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectView[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      cityName: row.cityName,\r\n      price: row.price,\r\n      area: row.area,\r\n      bathrooms: row.bathrooms,\r\n      parkingSpots: row.parkingSpots,\r\n      bedrooms: row.bedrooms,\r\n      images: projectMediaMap[row.id] || [],\r\n    }));\r\n\r\n    return NextResponse.json({ projects, totalEntries });\r\n  } catch (error) {\r\n    console.error(\"Error al obtener proyectos: \", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al obtener proyectos\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "home": {
          "company": {
            "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const url = new URL(req.url);\r\n    const searchParams = url.searchParams;\r\n\r\n    const numberProjects = parseInt(\r\n      searchParams.get(\"numberProjects\") || \"3\",\r\n      10\r\n    );\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_company_projects(?)\",\r\n      [numberProjects]\r\n    );\r\n    const [projectsRows = [], projectMediaRows = []] = result;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectView[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      cityName: row.cityName,\r\n      images: projectMediaMap[row.id] || [],\r\n    }));\r\n\r\n    const response = NextResponse.json({ projects });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error en la búsqueda de propiedades: \", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al buscar propiedades\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
          },
          "realEstate": {
            "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const url = new URL(req.url);\r\n    const searchParams = url.searchParams;\r\n\r\n    const numberProjects = parseInt(\r\n      searchParams.get(\"numberProjects\") || \"3\",\r\n      10\r\n    );\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_real_estate_projects(?)\",\r\n      [numberProjects]\r\n    );\r\n\r\n    const [projectsRows = [], projectMediaRows = []] = result;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectView[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      cityName: row.cityName,\r\n      price: row.price,\r\n      area: row.area,\r\n      bathrooms: row.bathrooms,\r\n      parkingSpots: row.parkingSpots,\r\n      bedrooms: row.bedrooms,\r\n      images: projectMediaMap[row.id] || [],\r\n    }));\r\n\r\n    const response = NextResponse.json({ projects });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error en la búsqueda de propiedades: \", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al buscar propiedades\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
          }
        },
        "metadata": {
          "basic-metadata": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport {\n  HousingType,\n  propertyType,\n  NearbyService,\n  CommonArea,\n} from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nfunction mapResults<T>(\n  result: RowDataPacket[] | undefined,\n  mapper: (row: any) => T\n): T[] {\n  if (!result) return [];\n  return result.map(mapper);\n}\n\nexport async function GET() {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_basic_metadata()\"\n    );\n\n    if (!result || result.length < 5) {\n      throw new Error(\"No se obtuvieron todos los resultados esperados.\");\n    }\n\n    const [\n      commonAreasResult,\n      housingTypesResult,\n      nearbyServicesResult,\n      propertyTypesResult,\n    ] = result;\n\n    const commonAreas: CommonArea[] = mapResults(commonAreasResult, (row) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const housingTypes: HousingType[] = mapResults(\n      housingTypesResult,\n      (row) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const nearbyServices: NearbyService[] = mapResults(\n      nearbyServicesResult,\n      (row) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const propertyTypes: propertyType[] = mapResults(\n      propertyTypesResult,\n      (row) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const response = NextResponse.json({\n      commonAreas,\n      housingTypes,\n      nearbyServices,\n      propertyTypes,\n    });\n\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de los datos: \", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los datos\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "cities": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { City, Departament } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nfunction mapResults<T>(\n  result: RowDataPacket[] | undefined,\n  mapper: (row: any) => T\n): T[] {\n  if (!result) return [];\n  return result.map(mapper);\n}\n\nexport async function GET() {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_cities_departaments()\"\n    );\n\n    const [departamentsResult, citiesResult] = result;\n\n    const departaments: Departament[] = mapResults(\n      departamentsResult,\n      (row) => ({\n        id: row.departamentId,\n        name: row.departamentName,\n      })\n    );\n\n    const cities: City[] = mapResults(citiesResult, (row) => ({\n      id: row.cityId,\n      name: row.cityName,\n      departament: {\n        id: row.departamentId,\n        name: row.departamentName,\n      },\n    }));\n\n    const response = NextResponse.json({ departaments, cities });\n\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de los datos: \", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los datos\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "image-types": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { ImageType } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET() {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const [result] = await db.query(\"CALL get_image_types()\");\n\n    const rows = (result as RowDataPacket[][])[0];\n\n    const ImageTypes: ImageType[] = rows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n      description: row.description,\n      maxImagesAllowed: row.maxImagesAllowed,\n      isRequired: row.isRequired,\n    }));\n\n    const response = NextResponse.json(ImageTypes);\n\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de tipos de imagenes: \", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los tipos de imagenes\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "project-media": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function POST(req: Request) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { projectMedia } = await req.json();\n\n    if (\n      !projectMedia ||\n      !Array.isArray(projectMedia) ||\n      projectMedia.length === 0\n    ) {\n      return NextResponse.json(\n        { error: \"El cuerpo de la solicitud no contiene datos válidos.\" },\n        { status: 400 }\n      );\n    }\n\n    await db.query(\"CALL insert_multiple_project_media(?)\", [\n      JSON.stringify(projectMedia),\n    ]);\n\n    const response = NextResponse.json({\n      message: \"Medios insertados correctamente.\",\n    });\n\n    return response;\n  } catch (error) {\n    console.error(\"❌ Error al insertar los medios:\", error);\n    return NextResponse.json(\n      { error: \"Error al insertar los medios.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(req: Request) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { projectMedia } = await req.json();\n\n    if (\n      !projectMedia ||\n      !Array.isArray(projectMedia) ||\n      projectMedia.length === 0\n    ) {\n      return NextResponse.json(\n        { error: \"El cuerpo de la solicitud no contiene datos válidos.\" },\n        { status: 400 }\n      );\n    }\n\n    await db.query(\"CALL update_multiple_project_media(?)\", [\n      JSON.stringify(projectMedia),\n    ]);\n\n    const response = NextResponse.json({\n      message: \"Medios actualizados correctamente.\",\n    });\n\n    return response;\n  } catch (error) {\n    console.error(\"❌ Error al actualizar los medios:\", error);\n    return NextResponse.json(\n      { error: \"Error al actualizar los medios.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(req: Request) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { mediaIds } = await req.json();\n\n    if (!mediaIds || !Array.isArray(mediaIds) || mediaIds.length === 0) {\n      return NextResponse.json(\n        {\n          error:\n            \"El cuerpo de la solicitud no contiene IDs válidos para eliminar.\",\n        },\n        { status: 400 }\n      );\n    }\n\n    await db.query(\"CALL delete_multiple_project_media(?)\", [\n      JSON.stringify(mediaIds),\n    ]);\n\n    const response = NextResponse.json({\n      message: \"Medios eliminados correctamente.\",\n    });\n\n    return response;\n  } catch (error) {\n    console.error(\"❌ Error al eliminar los medios:\", error);\n    return NextResponse.json(\n      { error: \"Error al eliminar los medios.\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport {\n  City,\n  HousingType,\n  propertyType,\n  NearbyService,\n  CommonArea,\n  MembershipSummary,\n} from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\n\nexport async function GET() {\n  try {\n    const [result] = await db.query<RowDataPacket[][]>(\"CALL get_metadata()\");\n\n    if (!result || result.length < 6) {\n      throw new Error(\"No se obtuvieron todos los resultados esperados.\");\n    }\n\n    const [\n      citiesRows = [],\n      commonAreasRows = [],\n      housingTypesRows = [],\n      nearbyServicesRows = [],\n      propertyTypesRows = [],\n      membershipsRows = [],\n    ] = result;\n\n    const cities: City[] = citiesRows.map((row: any) => ({\n      id: row.cityId,\n      name: row.cityName,\n      departament: {\n        id: row.departamentId,\n        name: row.departamentName,\n      },\n    }));\n\n    const commonAreas: CommonArea[] = commonAreasRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const housingTypes: HousingType[] = housingTypesRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const nearbyServices: NearbyService[] = nearbyServicesRows.map(\n      (row: any) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const propertyTypes: propertyType[] = propertyTypesRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const memberships: MembershipSummary[] = membershipsRows.map(\n      (row: any) => ({\n        id: row.membershipId,\n        name: row.membershipName,\n      })\n    );\n\n    const response = NextResponse.json({\n      cities,\n      commonAreas,\n      housingTypes,\n      nearbyServices,\n      propertyTypes,\n      memberships,\n    });\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al recuperar los datos:\", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los datos\" },\n      { status: 500 }\n    );\n  }\n}\n"
        },
        "owner": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { UserData } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n  const hasPermission = permissions?.some(\r\n    (perm) =>\r\n      perm.name === \"Gestionar proyectos\" ||\r\n      perm.name === \"Gestionar propiedades\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const email = searchParams.get(\"email\");\r\n\r\n    if (!email) {\r\n      return NextResponse.json(\r\n        { error: \"Debe proporcionar un nombre de usuario\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_owner(?)\",\r\n      [email]\r\n    );\r\n\r\n    if (!result || result.length === 0 || result[0].length === 0) {\r\n      return NextResponse.json(\r\n        { error: \"Usuario no encontrado\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    const userRow = result[0][0];\r\n\r\n    const user: UserData = {\r\n      id: userRow.id,\r\n      names: userRow.names,\r\n      lastnames: userRow.lastnames,\r\n      email: userRow.email,\r\n      phoneNumber: userRow.phoneNumber,\r\n    };\r\n\r\n    const response = NextResponse.json({ user });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al recuperar el usuario:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar el usuario\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\nimport { sendEmail } from \"@/lib/email/sendEmail\";\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\n\nconst formatDateForMySQL = (date: any) => {\n  if (!date) return null;\n  const validDate = date instanceof Date ? date : new Date(date);\n  if (isNaN(validDate.getTime())) {\n    throw new Error(\"Fecha inválida proporcionada\");\n  }\n  const year = validDate.getFullYear();\n  const month = String(validDate.getMonth() + 1).padStart(2, \"0\");\n  const day = String(validDate.getDate()).padStart(2, \"0\");\n\n  return `${year}-${month}-${day}`;\n};\n\nexport async function GET(req: Request) {\n  try {\n    const session = await getServerSession(authOptions);\n    const permissions = session?.user?.permissions || [];\n\n    const hasPermission = permissions?.some(\n      (perm) => perm.name === \"Gestionar proyectos\"\n    );\n\n    const url = new URL(req.url);\n    const searchParams = url.searchParams;\n\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\n    const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || \"\");\n    const price = parseInt(searchParams.get(\"price\") || \"\", 10) || null;\n    const area = searchParams.get(\"area\");\n    const bedrooms = searchParams.get(\"bedrooms\");\n    const bathrooms = searchParams.get(\"bathrooms\");\n    const lobbies = searchParams.get(\"lobbies\");\n    const projectTypeId = parseInt(\n      searchParams.get(\"projectTypeId\") || \"1\",\n      10\n    );\n\n    const minLat = searchParams.has(\"minLat\")\n      ? parseFloat(searchParams.get(\"minLat\")!)\n      : null;\n    const maxLat = searchParams.has(\"maxLat\")\n      ? parseFloat(searchParams.get(\"maxLat\")!)\n      : null;\n    const minLng = searchParams.has(\"minLng\")\n      ? parseFloat(searchParams.get(\"minLng\")!)\n      : null;\n    const maxLng = searchParams.has(\"maxLng\")\n      ? parseFloat(searchParams.get(\"maxLng\")!)\n      : null;\n\n    const parseCommaSeparated = (param: string | null): string | null =>\n      param ? JSON.stringify(param.split(\",\").map(Number)) : null;\n\n    const cities = parseCommaSeparated(searchParams.get(\"cities\"));\n    const propertyTypes = parseCommaSeparated(\n      searchParams.get(\"propertyTypes\")\n    );\n    const housingTypes = parseCommaSeparated(searchParams.get(\"housingTypes\"));\n    const memberships = parseCommaSeparated(searchParams.get(\"memberships\"));\n    const commonAreas = parseCommaSeparated(searchParams.get(\"commonAreas\"));\n    const nearbyServices = parseCommaSeparated(\n      searchParams.get(\"nearbyServices\")\n    );\n\n    const validatedPage = page > 0 ? page : 1;\n    const validatedPageSize = pageSize > 0 ? pageSize : 16;\n\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_projects_admin(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\n      [\n        validatedPage,\n        validatedPageSize,\n        cities || null,\n        propertyTypes || null,\n        housingTypes || null,\n        memberships || null,\n        price || null,\n        area || null,\n        bedrooms || null,\n        bathrooms || null,\n        lobbies || null,\n        projectTypeId || 1,\n        commonAreas || null,\n        nearbyServices || null,\n        searchTerm,\n        minLat || null,\n        maxLat || null,\n        minLng || null,\n        maxLng || null,\n      ]\n    );\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\n      result;\n\n    const totalEntries = totalEntriesRow.totalEntries || 0;\n\n    const projectMediaMap: Record<\n      number,\n      { url: string; tag: string; projectId: number }[]\n    > = {};\n    projectMediaRows.forEach((media: any) => {\n      if (!projectMediaMap[media.projectId]) {\n        projectMediaMap[media.projectId] = [];\n      }\n      projectMediaMap[media.projectId].push({\n        url: media.url,\n        tag: media.tag,\n        projectId: media.projectId,\n      });\n    });\n\n    const projects: ProjectSummary[] = projectsRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n      price: row.price || null,\n      totalArea: row.area,\n      bedrooms: row.bedrooms || null,\n      bathrooms: row.bathrooms || null,\n      parkingSpots: row.parkingSpots || null,\n      longitude: row.longitude as number,\n      latitude: row.latitude as number,\n      address: row.address,\n      city: {\n        id: row.cityId,\n        name: row.cityName,\n        departament: {\n          id: row.departamentId,\n          name: row.departamentName,\n        },\n      },\n      email: hasPermission ? row.email : \"Usuario Privado\",\n      projectMedia: projectMediaMap[row.id] || [],\n    }));\n\n    const response = NextResponse.json({ projects, totalEntries });\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de propiedades: \", error);\n    return NextResponse.json(\n      { error: \"Fallo al buscar propiedades\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(req: Request) {\n  const session = await getServerSession(authOptions);\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermissionToManageProperties =\n    permissions?.some((perm) => perm.name === \"Gestionar propiedades\") || false;\n\n  const client =\n    permissions?.some(\n      (perm) => perm.name === \"Gestionar propiedades propias\"\n    ) || false;\n\n  const hasPermission =\n    hasPermissionToManageProperties ||\n    permissions?.some(\n      (perm) =>\n        perm.name === \"Gestionar proyectos\" ||\n        perm.name === \"Gestionar propiedades propias\"\n    );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const projectData = await req.json();\n\n    const {\n      id,\n      name,\n      price,\n      builtArea,\n      totalArea,\n      freeHeight,\n      width,\n      length,\n      parkingSpots,\n      elevator,\n      heavyParking,\n      availableUnits,\n      bathrooms,\n      bedrooms,\n      lobbies,\n      towers,\n      storageUnits,\n      socioeconomicLevel,\n      floorNumber,\n      yearBuilt,\n      customizationOptions,\n      terrace,\n      balcony,\n      garden,\n      laundryArea,\n      complexName,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      availableDate,\n      propertyType,\n      housingType,\n      city,\n      membership,\n      projectType,\n      statusProject,\n      commonAreas,\n      nearbyServices,\n      residentialProjectId,\n      warehouseProjectId,\n      ownerId,\n      email,\n    } = projectData;\n\n    if (\n      !id ||\n      !name ||\n      !builtArea ||\n      !totalArea ||\n      !shortDescription ||\n      !detailedDescription ||\n      !address ||\n      !latitude ||\n      !longitude ||\n      !propertyType?.id ||\n      !city?.id ||\n      !city?.departament?.id\n    ) {\n      console.error(\"Faltan datos obligatorios para actualizar el proyecto.\");\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios para actualizar el proyecto.\" },\n        { status: 400 }\n      );\n    }\n\n    const commonAreaIds = commonAreas\n      ? JSON.stringify(commonAreas.map((area: { id: number }) => area.id))\n      : null;\n    const nearbyServiceIds = nearbyServices\n      ? JSON.stringify(\n          nearbyServices.map((service: { id: number }) => service.id)\n        )\n      : null;\n\n    const housingTypeId = housingType?.id || null;\n    const statusProjectId = statusProject?.id || null;\n\n    const queryParams = [\n      id,\n      name,\n      !client ? \"1\" : \"3\", //state\n      price,\n      builtArea,\n      totalArea,\n      freeHeight || null,\n      width || null,\n      length || null,\n      parkingSpots || 0,\n      elevator || 0,\n      availableUnits || 0,\n      heavyParking || null,\n      bedrooms || null,\n      bathrooms || 0,\n      lobbies || 0,\n      towers || null,\n      storageUnits || null,\n      socioeconomicLevel || null,\n      floorNumber || null,\n      yearBuilt || null,\n      customizationOptions || false,\n      balcony || false,\n      terrace || null,\n      garden || null,\n      laundryArea || false,\n      complexName || null,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      formatDateForMySQL(availableDate) || null,\n      city.id,\n      housingTypeId || null,\n      membership || 1001,\n      propertyType.id,\n      projectType.id,\n      statusProjectId || 1,\n      residentialProjectId || null,\n      warehouseProjectId || null,\n      commonAreaIds,\n      nearbyServiceIds,\n      hasPermissionToManageProperties\n        ? ownerId !== undefined && ownerId !== null\n          ? ownerId\n          : 1\n        : userId || null,\n    ];\n\n    const [result] = await db.query(\n      \"CALL update_project(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\n      queryParams\n    );\n\n    if (!result) {\n      console.error(\"No se pudo obtener la respuesta de la base de datos.\");\n      return NextResponse.json(\n        { error: \"No se pudo actualizar el proyecto correctamente.\" },\n        { status: 500 }\n      );\n    } else if (!client) {\n      const emailContent = generateEmailTemplate({\n        title: \"Propiedad Editada en EdifiK\",\n        intro:\n          \"Una propiedad ha sido modificada recientemente en la plataforma.\",\n        items: [\n          { label: \"Nombre de la Propiedad\", value: name },\n          {\n            label: \"Propietario\",\n            value: email ?? ownerId?.toString() ?? session.user.email,\n          },\n        ],\n        body: \"Le recomendamos revisar los cambios en el sistema administrativo.\",\n        buttonText: \"Ver propiedad\",\n        buttonUrl: \"https://edifik.co/admin/solicitudes\",\n      });\n\n      await sendEmail(\n        process.env.NEXT_PUBLIC_COMPANY_EMAIL ?? \"\",\n        \"Propiedad Editada en EdifiK\",\n        emailContent\n      );\n    }\n\n    const response = NextResponse.json(\n      {\n        message: \"Proyecto actualizado correctamente.\",\n      },\n      { status: 200 }\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al actualizar el proyecto:\", error);\n    return NextResponse.json(\n      { error: \"Error al actualizar el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(req: Request) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermissionToManageProperties =\n    permissions?.some((perm) => perm.name === \"Gestionar propiedades\") || false;\n\n  const client =\n    permissions?.some(\n      (perm) => perm.name === \"Gestionar propiedades propias\"\n    ) || false;\n\n  const hasPermission =\n    hasPermissionToManageProperties ||\n    permissions?.some(\n      (perm) =>\n        perm.name === \"Gestionar proyectos\" ||\n        perm.name === \"Gestionar propiedades propias\"\n    );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const projectData = await req.json();\n\n    const {\n      name,\n      price,\n      builtArea,\n      totalArea,\n      freeHeight,\n      width,\n      length,\n      parkingSpots,\n      elevator,\n      heavyParking,\n      availableUnits,\n      bathrooms,\n      bedrooms,\n      lobbies,\n      towers,\n      storageUnits,\n      socioeconomicLevel,\n      floorNumber,\n      yearBuilt,\n      customizationOptions,\n      terrace,\n      balcony,\n      garden,\n      laundryArea,\n      complexName,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      availableDate,\n      propertyType,\n      housingType,\n      city,\n      membership,\n      projectType,\n      statusProject,\n      commonAreas,\n      nearbyServices,\n      ownerId,\n      email,\n    } = projectData;\n\n    if (\n      !name ||\n      !builtArea ||\n      !totalArea ||\n      !shortDescription ||\n      !detailedDescription ||\n      !address ||\n      !latitude ||\n      !longitude ||\n      !propertyType?.id ||\n      !city?.id ||\n      !city?.departament?.id\n    ) {\n      console.error(\"Faltan datos obligatorios para crear el proyecto.\");\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios para crear el proyecto.\" },\n        { status: 400 }\n      );\n    }\n\n    const commonAreaIds = commonAreas\n      ? JSON.stringify(commonAreas.map((area: { id: number }) => area.id))\n      : null;\n    const nearbyServiceIds = nearbyServices\n      ? JSON.stringify(\n          nearbyServices.map((service: { id: number }) => service.id)\n        )\n      : null;\n\n    const housingTypeId = housingType?.id || null;\n    const statusProjectId = statusProject?.id || null;\n\n    const queryParams = [\n      name,\n      !client ? \"1\" : \"2\", //state\n      price,\n      builtArea,\n      totalArea,\n      freeHeight || null,\n      width || null,\n      length || null,\n      parkingSpots || 0,\n      elevator || 0,\n      availableUnits || 0,\n      heavyParking || null,\n      bedrooms || null,\n      bathrooms || 0,\n      lobbies || 0,\n      towers || null,\n      storageUnits || null,\n      socioeconomicLevel || null,\n      floorNumber || null,\n      yearBuilt || null,\n      customizationOptions || false,\n      balcony || false,\n      terrace || null,\n      garden || null,\n      laundryArea || false,\n      complexName || null,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      formatDateForMySQL(availableDate) || null,\n      city.id,\n      housingTypeId || null,\n      membership || 1001,\n      propertyType.id,\n      projectType.id,\n      statusProjectId || 1,\n      commonAreaIds,\n      nearbyServiceIds,\n      hasPermissionToManageProperties\n        ? ownerId !== undefined && ownerId !== null\n          ? ownerId\n          : 1\n        : userId || null,\n    ];\n\n    const [result] = await db.query(\n      \"CALL create_project(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\n      queryParams\n    );\n\n    const projectIdRow = (result as any[][])[0][0];\n    const projectId = projectIdRow?.projectId;\n\n    if (!projectId) {\n      console.error(\"No se pudo obtener el ID del proyecto.\");\n      return NextResponse.json(\n        { error: \"No se pudo crear el proyecto correctamente.\" },\n        { status: 500 }\n      );\n    } else if (client) {\n      const emailContent = generateEmailTemplate({\n        title: \"Nueva Propiedad Registrada\",\n        intro: \"Se ha registrado una nueva propiedad en la plataforma EdifiK.\",\n        items: [\n          { label: \"Nombre de la Propiedad\", value: name },\n          {\n            label: \"Propietario\",\n            value: email ?? ownerId?.toString() ?? session.user.email,\n          },\n        ],\n        body: \"Le recomendamos revisar y validar la información en el sistema administrativo.\",\n        buttonText: \"Ingresar a EdifiK\",\n        buttonUrl: \"https://edifik.co/solicitudes\",\n      });\n\n      await sendEmail(\n        process.env.NEXT_PUBLIC_COMPANY_EMAIL ?? \"\",\n        \"Nueva Propiedad Registrada en EdifiK\",\n        emailContent\n      );\n    }\n\n    const response = NextResponse.json(\n      {\n        message: \"Proyecto creado correctamente.\",\n        projectId,\n      },\n      { status: 200 }\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al crear la propiedad:\", error);\n    return NextResponse.json(\n      { error: \"Error al crear el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(req: Request) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const url = new URL(req.url);\n    const projectId = parseInt(url.searchParams.get(\"id\") || \"\", 10);\n\n    if (!projectId) {\n      return NextResponse.json(\n        { error: \"ID del proyecto no proporcionado o inválido.\" },\n        { status: 400 }\n      );\n    }\n\n    await db.query(\"CALL delete_project_state(?, ?)\", [projectId, userId]);\n\n    const response = NextResponse.json(\n      { message: \"Proyecto eliminado correctamente.\" },\n      { status: 200 }\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al eliminar el proyecto:\", error);\n    return NextResponse.json(\n      { error: \"Error al eliminar el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n"
      },
      "realEstate": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const url = new URL(req.url);\r\n    const searchParams = url.searchParams;\r\n\r\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n    const price = parseInt(searchParams.get(\"price\") || \"\", 10) || null;\r\n    const area = searchParams.get(\"area\");\r\n    const bedrooms = searchParams.get(\"bedrooms\");\r\n    const bathrooms = searchParams.get(\"bathrooms\");\r\n    const lobbies = searchParams.get(\"lobbies\");\r\n    const projectTypeId = parseInt(\r\n      searchParams.get(\"projectTypeId\") || \"2\",\r\n      10\r\n    );\r\n\r\n    const minLat = searchParams.has(\"minLat\")\r\n      ? parseFloat(searchParams.get(\"minLat\")!)\r\n      : null;\r\n    const maxLat = searchParams.has(\"maxLat\")\r\n      ? parseFloat(searchParams.get(\"maxLat\")!)\r\n      : null;\r\n    const minLng = searchParams.has(\"minLng\")\r\n      ? parseFloat(searchParams.get(\"minLng\")!)\r\n      : null;\r\n    const maxLng = searchParams.has(\"maxLng\")\r\n      ? parseFloat(searchParams.get(\"maxLng\")!)\r\n      : null;\r\n\r\n    const latitude = searchParams.has(\"latitude\")\r\n      ? parseFloat(searchParams.get(\"latitude\")!)\r\n      : null;\r\n    const longitude = searchParams.has(\"longitude\")\r\n      ? parseFloat(searchParams.get(\"longitude\")!)\r\n      : null;\r\n\r\n    const parseCommaSeparated = (param: string | null): string | null =>\r\n      param ? JSON.stringify(param.split(\",\").map(Number)) : null;\r\n\r\n    const cities = parseCommaSeparated(searchParams.get(\"cities\"));\r\n    const propertyTypes = parseCommaSeparated(\r\n      searchParams.get(\"propertyTypes\")\r\n    );\r\n    const housingTypes = parseCommaSeparated(searchParams.get(\"housingTypes\"));\r\n    const commonAreas = parseCommaSeparated(searchParams.get(\"commonAreas\"));\r\n    const nearbyServices = parseCommaSeparated(\r\n      searchParams.get(\"nearbyServices\")\r\n    );\r\n\r\n    const validatedPage = page > 0 ? page : 1;\r\n    const validatedPageSize = pageSize > 0 ? pageSize : 16;\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_properties(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\r\n      [\r\n        validatedPage,\r\n        validatedPageSize,\r\n        cities || null,\r\n        propertyTypes || null,\r\n        housingTypes || null,\r\n        price || null,\r\n        area || null,\r\n        bedrooms || null,\r\n        bathrooms || null,\r\n        lobbies || null,\r\n        commonAreas || null,\r\n        nearbyServices || null,\r\n        projectTypeId || 2,\r\n        minLat || null,\r\n        maxLat || null,\r\n        minLng || null,\r\n        maxLng || null,\r\n        latitude,\r\n        longitude,\r\n      ]\r\n    );\r\n\r\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\r\n      result;\r\n\r\n    const totalEntries = totalEntriesRow.totalEntries || 0;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectView[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      cityName: row.cityName,\r\n      price: row.price,\r\n      area: row.area,\r\n      bathrooms: row.bathrooms,\r\n      parkingSpots: row.parkingSpots,\r\n      bedrooms: row.bedrooms,\r\n      longitude: row.longitude,\r\n      latitude: row.latitude,\r\n      images: projectMediaMap[row.id] || [],\r\n    }));\r\n\r\n    const response = NextResponse.json({ projects, totalEntries });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error en la búsqueda de propiedades: \", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al buscar propiedades\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "requests": {
        "route.ts": "import { NextResponse, NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { Request } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport { sendEmail } from \"@/lib/email/sendEmail\";\r\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\r\n\r\nexport async function GET(req: NextRequest) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar solicitudes\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  const { searchParams } = new URL(req.url);\r\n\r\n  const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n  const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n  const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || null);\r\n\r\n  try {\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_requests(?, ?, ?)\",\r\n      [page, pageSize, searchTerm]\r\n    );\r\n\r\n    const [requestRows = [], [totalEntriesRow] = []] = result;\r\n\r\n    const totalEntries = totalEntriesRow?.totalEntries || 0;\r\n\r\n    const requests: Request[] = requestRows.map((row: any) => ({\r\n      id: row.id,\r\n      date: row.date,\r\n      operation: row.operation ? \"agregar\" : \"editar\",\r\n      responseMessage: row.responseMessage,\r\n      userId: row.userId,\r\n      userEmail: row.userEmail,\r\n      statusRequestName: row.statusRequestName,\r\n      projectId: row.projectId,\r\n      projectName: row.projectName,\r\n    }));\r\n\r\n    const response = NextResponse.json({\r\n      requests,\r\n      totalEntries,\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al recuperar las solicitudes:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar las solicitudes\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(req: NextRequest) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar solicitudes\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { id, statusId, responseMessage, userEmail } = await req.json();\r\n\r\n    if (!id || !statusId || !responseMessage || !userEmail) {\r\n      return NextResponse.json(\r\n        { error: \"Faltan datos obligatorios\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const [result] = await db.query(\"CALL update_request(?, ?, ?, ?)\", [\r\n      id,\r\n      statusId,\r\n      responseMessage,\r\n      userId,\r\n    ]);\r\n\r\n    const statusMap: Record<number, string> = {\r\n      2: \"aprobada\",\r\n      3: \"rechazada\",\r\n      4: \"enviada a revisión\",\r\n    };\r\n\r\n    const statusName = statusMap[statusId];\r\n    const subject = `Tu solicitud ha sido ${statusName}`;\r\n\r\n    const htmlContent = generateEmailTemplate({\r\n      title: subject,\r\n      greeting: \"Hola,\",\r\n      intro: `Hemos revisado tu solicitud y ha sido <strong>${statusName}</strong>.`,\r\n      body: `<strong>Respuesta del revisor:</strong> ${responseMessage}`,\r\n      buttonText: \"Ver mis propiedades\",\r\n      buttonUrl: \"https://edifik.co/usuario/mis-propiedades\",\r\n    });\r\n\r\n    await sendEmail(userEmail, subject, htmlContent);\r\n\r\n    const response = NextResponse.json(\r\n      { message: \"Solicitud actualizada correctamente\", result },\r\n      { status: 200 }\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al actualizar la solicitud:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al actualizar la solicitud\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n",
        "stream": {
          "route.ts": "import { NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: NextRequest) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return new Response(\"No autenticado\", { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar solicitudes\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return new Response(\"Acceso denegado\", { status: 403 });\r\n  }\r\n\r\n  const encoder = new TextEncoder();\r\n  const stream = new ReadableStream({\r\n    async start(controller) {\r\n      const sendEvent = (data: any) => {\r\n        try {\r\n          if (controller.desiredSize !== null) {\r\n            controller.enqueue(\r\n              encoder.encode(`data: ${JSON.stringify(data)}\\n\\n`)\r\n            );\r\n          }\r\n        } catch (err) {\r\n          console.error(\"⚠️ Error en sendEvent: Stream cerrado\", err);\r\n        }\r\n      };\r\n\r\n      const heartbeat = setInterval(() => {\r\n        if (controller.desiredSize !== null) {\r\n          sendEvent({ type: \"heartbeat\", message: \"Conexión activa\" });\r\n        }\r\n      }, 10000);\r\n\r\n      let lastRequests: any[] = [];\r\n\r\n      const checkForNewRequests = async () => {\r\n        try {\r\n          const [result] = await db.query<RowDataPacket[][]>(\r\n            \"CALL get_pending_requests()\"\r\n          );\r\n\r\n          const requestRows = result[0] || [];\r\n          const requests = requestRows.map((row: any) => ({\r\n            id: row.id,\r\n            date: row.date,\r\n            operation: row.operation ? \"agregar\" : \"editar\",\r\n            userEmail: row.userEmail,\r\n            statusRequestName: row.statusRequestName,\r\n            projectName: row.projectName,\r\n          }));\r\n\r\n          const hasChanged =\r\n            JSON.stringify(requests) !== JSON.stringify(lastRequests);\r\n\r\n          if (hasChanged) {\r\n            sendEvent({ type: \"newRequests\", data: requests });\r\n            lastRequests = requests;\r\n          }\r\n        } catch (error) {\r\n          console.error(\r\n            \"Error al recuperar las solicitudes pendientes:\",\r\n            error\r\n          );\r\n        }\r\n      };\r\n\r\n      const interval = setInterval(checkForNewRequests, 10000);\r\n\r\n      req.signal.onabort = () => {\r\n        console.warn(\"🔴 Conexión SSE cerrada por el cliente\");\r\n        clearInterval(interval);\r\n        clearInterval(heartbeat);\r\n        try {\r\n          controller.close();\r\n        } catch (err) {\r\n          console.error(\"⚠️ Error al cerrar el stream:\", err);\r\n        }\r\n      };\r\n    },\r\n  });\r\n\r\n  return new Response(stream, {\r\n    headers: {\r\n      \"Content-Type\": \"text/event-stream\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Connection: \"keep-alive\",\r\n    },\r\n  });\r\n}\r\n"
        }
      },
      "roles": {
        "permissions": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { Permission } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_permissions()\"\r\n    );\r\n\r\n    const [permissionsRows = []] = result;\r\n\r\n    const permission: Permission[] = permissionsRows.map(({ id, name }) => ({\r\n      id,\r\n      name,\r\n    }));\r\n\r\n    const response = NextResponse.json({\r\n      permission,\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al recuperar los permisos:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar los permisos\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport { Role, Permission } from \"@/lib/definitios\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  const { searchParams } = new URL(req.url);\r\n\r\n  const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n  const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n  const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || null);\r\n\r\n  try {\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_roles_with_permissions(?, ?, ?)\",\r\n      [page, pageSize, searchTerm]\r\n    );\r\n\r\n    const [rolesRows = [], [totalEntriesRow] = [], permissionRows = []] =\r\n      result;\r\n\r\n    const totalEntries = totalEntriesRow.totalEntries || 0;\r\n\r\n    const permissionsByRole = permissionRows.reduce(\r\n      (acc: Record<number, Permission[]>, row: any) => {\r\n        if (!acc[row.id_role]) {\r\n          acc[row.id_role] = [];\r\n        }\r\n        acc[row.id_role].push({\r\n          id: row.id_permission,\r\n          name: row.name_permission,\r\n        });\r\n        return acc;\r\n      },\r\n      {}\r\n    );\r\n\r\n    const roles: Role[] = rolesRows.map(({ id, name }: any) => ({\r\n      id,\r\n      name,\r\n      permissions: permissionsByRole[id] || [],\r\n    }));\r\n\r\n    const response = NextResponse.json({\r\n      roles,\r\n      totalEntries,\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar los roles\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { id, name, permissions } = await req.json();\r\n\r\n    if (!id || !name || !permissions) {\r\n      return NextResponse.json(\r\n        { error: \"Faltan datos obligatorios\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const permissionsJson = JSON.stringify(permissions);\r\n\r\n    await db.query(\"CALL update_role(?, ?, ?, ?)\", [\r\n      id,\r\n      name,\r\n      permissionsJson,\r\n      userId,\r\n    ]);\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Rol actualizado exitosamente\",\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al actualizar el rol:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al actualizar el rol\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { name, permissions } = await req.json();\r\n\r\n    if (!name || !permissions) {\r\n      return NextResponse.json(\r\n        { error: \"Faltan datos obligatorios\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const permissionsJson = JSON.stringify(permissions);\r\n\r\n    const result = await db.query(\"CALL create_role(?, ?, ?)\", [\r\n      name,\r\n      permissionsJson,\r\n      userId,\r\n    ]);\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Rol creado exitosamente\",\r\n      result,\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al crear el rol:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al crear el rol\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { id } = await req.json();\r\n\r\n    if (!id) {\r\n      return NextResponse.json(\r\n        { error: \"El ID del rol es obligatorio\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    await db.query(\"CALL delete_role(?, ?)\", [id, userId]);\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Rol eliminado exitosamente\",\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al eliminar el rol:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al eliminar el rol\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "s3": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { s3 } from \"@/lib/s3\";\r\nimport { PutObjectCommand, DeleteObjectCommand } from \"@aws-sdk/client-s3\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport sharp from \"sharp\";\r\n\r\nexport async function POST(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) =>\r\n      perm.name === \"Gestionar usuarios\" ||\r\n      perm.name === \"Gestionar proyectos\" ||\r\n      perm.name === \"Gestionar propiedades propias\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const data = await req.formData();\r\n    const file = data.get(\"file\") as File;\r\n    let folderPath = data.get(\"path\") as string;\r\n\r\n    if (!file || !folderPath) {\r\n      console.error(\"Faltan el archivo o la ruta de la carpeta.\");\r\n      return NextResponse.json(\r\n        { error: \"Falta la ruta del archivo o carpeta\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (!folderPath.endsWith(\"/\")) {\r\n      folderPath += \"/\";\r\n    }\r\n\r\n    const validMimeTypes = [\"image/jpeg\", \"image/png\", \"image/webp\"];\r\n    if (!validMimeTypes.includes(file.type)) {\r\n      return NextResponse.json(\r\n        {\r\n          error:\r\n            \"Formato de archivo no permitido. Solo imágenes (JPG, PNG, WEBP).\",\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const originalBuffer = await file.arrayBuffer();\r\n\r\n    const webpBuffer = await sharp(Buffer.from(originalBuffer))\r\n      .webp({ quality: 80 })\r\n      .toBuffer();\r\n\r\n    const fileKey = `${folderPath}${Date.now()}/${uuidv4()}.webp`;\r\n\r\n    const command = new PutObjectCommand({\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Key: fileKey,\r\n      Body: webpBuffer,\r\n      ContentType: \"image/webp\",\r\n    });\r\n\r\n    await s3.send(command);\r\n\r\n    const cloudFrontUrl = `https://${process.env.CLOUDFRONT_DOMAIN}/${fileKey}`;\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Imagen cargada con éxito y convertida a .webp\",\r\n      url: cloudFrontUrl,\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al cargar y convertir la imagen:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al cargar y convertir la imagen.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) =>\r\n      perm.name === \"Gestionar usuarios\" ||\r\n      perm.name === \"Gestionar proyectos\" ||\r\n      perm.name === \"Gestionar propiedades propias\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const { key } = await req.json();\r\n\r\n    if (!key) {\r\n      return NextResponse.json(\r\n        { error: \"Falta la clave del archivo o es inválida.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const command = new DeleteObjectCommand({\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Key: key,\r\n    });\r\n\r\n    await s3.send(command);\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Imagen eliminada correctamente de S3\",\r\n      deletedKey: key,\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"🚨 Error al borrar la imagen de S3:\", error);\r\n    return NextResponse.json(\r\n      { error: \"No se pudo eliminar la imagen. Intenta de nuevo.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "user": {
        "profile": {
          "route.ts": "import { NextResponse, NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { User, Gender } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const userId = session.user?.id;\r\n\r\n  try {\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_profile(?)\",\r\n      [userId]\r\n    );\r\n\r\n    const userRow = result[0]?.[0];\r\n    const genderRows = result[1] ?? [];\r\n\r\n    if (!userRow) {\r\n      return NextResponse.json(\r\n        { error: \"Usuario no encontrado\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    const user: User = {\r\n      id: userRow.id,\r\n      identityDocument: userRow.identityDocument,\r\n      names: userRow.names,\r\n      lastnames: userRow.lastnames,\r\n      birthdate: userRow.birthdate ? new Date(userRow.birthdate) : undefined,\r\n      email: userRow.email,\r\n      phoneNumber: userRow.phoneNumber,\r\n      gender: {\r\n        id: userRow.genderId,\r\n        name: userRow.genderName,\r\n      },\r\n      role: {} as any,\r\n      membership: {} as any,\r\n      provider: userRow.providerId,\r\n    };\r\n\r\n    const genders: Gender[] = genderRows.map((row) => ({\r\n      id: row.genderId,\r\n      name: row.genderName,\r\n    }));\r\n\r\n    return NextResponse.json({ user, genders });\r\n  } catch (error) {\r\n    console.error(\"Error al obtener el perfil:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al obtener el perfil\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(req: NextRequest) {\r\n  const session = await getServerSession(authOptions);\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const userId = session.user?.id;\r\n  const body = await req.json();\r\n\r\n  const { identityDocument, names, lastnames, birthdate, phoneNumber, gender } =\r\n    body;\r\n\r\n  try {\r\n    await db.query(\"CALL update_user_profile(?, ?, ?, ?, ?, ?, ?)\", [\r\n      userId,\r\n      identityDocument,\r\n      names,\r\n      lastnames,\r\n      birthdate || null,\r\n      phoneNumber,\r\n      (gender.id === 0 ? null : gender.id) || null,\r\n    ]);\r\n\r\n    return NextResponse.json({ message: \"Perfil actualizado correctamente\" });\r\n  } catch (error) {\r\n    console.error(\"Error al actualizar el perfil:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al actualizar el perfil\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    if (!session) {\r\n      return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n    }\r\n\r\n    const userId = parseInt(session?.user?.id ?? \"0\", 10);\r\n    const url = new URL(req.url);\r\n    const searchParams = url.searchParams;\r\n\r\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n    const statusProject = parseInt(\r\n      searchParams.get(\"statusProject\") || \"2\",\r\n      10\r\n    );\r\n    const validatedPage = page > 0 ? page : 1;\r\n    const validatedPageSize = pageSize > 0 ? pageSize : 16;\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_projects(?, ?, ?, ?)\",\r\n      [userId, validatedPage, validatedPageSize, statusProject]\r\n    );\r\n\r\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\r\n      result;\r\n    const totalEntries = totalEntriesRow?.totalEntries || 0;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectSummary[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      price: row.price || null,\r\n      totalArea: row.area,\r\n      bedrooms: row.bedrooms || null,\r\n      bathrooms: row.bathrooms || null,\r\n      parkingSpots: row.parkingSpots || null,\r\n      longitude: row.longitude as number,\r\n      latitude: row.latitude as number,\r\n      address: row.address,\r\n      city: {\r\n        id: row.cityId,\r\n        name: row.cityName,\r\n        departament: {\r\n          id: row.departamentId,\r\n          name: row.departamentName,\r\n        },\r\n      },\r\n      projectMedia: projectMediaMap[row.id] || [],\r\n    }));\r\n\r\n    return NextResponse.json({ projects, totalEntries });\r\n  } catch (error) {\r\n    console.error(\"Error al obtener proyectos del usuario:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al obtener proyectos del usuario\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar propiedades propias\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const url = new URL(req.url);\r\n    const projectId = parseInt(url.searchParams.get(\"id\") || \"\", 10);\r\n\r\n    if (!projectId) {\r\n      return NextResponse.json(\r\n        { error: \"ID del proyecto no proporcionado o inválido.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    await db.query(\"CALL delete_user_project(?, ?)\", [projectId, userId]);\r\n\r\n    const response = NextResponse.json(\r\n      { message: \"Proyecto eliminado correctamente.\" },\r\n      { status: 200 }\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al eliminar el proyecto:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al eliminar el proyecto.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "users": {
        "check-email": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { checkUserEmailController } from \"@/src/modules/users\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const email = searchParams.get(\"email\") ?? \"\";\r\n\r\n    const result = await checkUserEmailController(email);\r\n\r\n    return NextResponse.json(result);\r\n  } catch (error: any) {\r\n    return NextResponse.json(\r\n      { error: error.message ?? \"Error interno del servidor\" },\r\n      { status: 400 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "emails": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { searchUserEmailsController } from \"@/src/modules/users\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const searchTerm = searchParams.get(\"searchTerm\") ?? \"\";\r\n\r\n    const result = await searchUserEmailsController(searchTerm);\r\n\r\n    return NextResponse.json(result);\r\n  } catch (error: any) {\r\n    if (error.statusCode) {\r\n      return NextResponse.json(\r\n        { error: error.message },\r\n        { status: error.statusCode }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { error: \"Error interno del servidor\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "metadata": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { getUsersMetadataController } from \"@/src/modules/users\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const metadata = await getUsersMetadataController();\r\n    return NextResponse.json(metadata);\r\n  } catch (error: any) {\r\n    if (error.name === \"ForbiddenError\") {\r\n      return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n    }\r\n\r\n    if (error.name === \"UnauthorizedError\") {\r\n      return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n    }\r\n\r\n    console.error(\"Users metadata error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar los datos\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "projects": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    if (!session) {\r\n      return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n    }\r\n\r\n    const permissions = session?.user?.permissions;\r\n\r\n    const hasPermission = permissions?.some(\r\n      (perm) => perm.name === \"Gestionar usuarios\"\r\n    );\r\n\r\n    if (!hasPermission) {\r\n      return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n    }\r\n\r\n    const url = new URL(req.url);\r\n    const searchParams = url.searchParams;\r\n\r\n    const userId = parseInt(searchParams.get(\"userId\") || \"0\", 10);\r\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n\r\n    if (!userId || userId <= 0) {\r\n      return NextResponse.json(\r\n        { error: \"ID de usuario inválido\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const validatedPage = page > 0 ? page : 1;\r\n    const validatedPageSize = pageSize > 0 ? pageSize : 16;\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_project_list(?, ?, ?)\",\r\n      [userId, validatedPage, validatedPageSize]\r\n    );\r\n\r\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\r\n      result;\r\n    const totalEntries = totalEntriesRow.totalEntries || 0;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectSummary[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      price: row.price || null,\r\n      totalArea: row.area,\r\n      bedrooms: row.bedrooms || null,\r\n      bathrooms: row.bathrooms || null,\r\n      parkingSpots: row.parkingSpots || null,\r\n      longitude: row.longitude as number,\r\n      latitude: row.latitude as number,\r\n      address: row.address,\r\n      city: {\r\n        id: row.cityId,\r\n        name: row.cityName,\r\n        departament: {\r\n          id: row.departamentId,\r\n          name: row.departamentName,\r\n        },\r\n      },\r\n      projectMedia: projectMediaMap[row.id] || [],\r\n    }));\r\n\r\n    const response = NextResponse.json({ projects, totalEntries });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error en la búsqueda de proyectos del usuario: \", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al buscar proyectos del usuario\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\nimport { requirePermission, Permission } from \"@/src/shared\";\nimport {\n  getUsersController,\n  updateUserController,\n  createUserController,\n} from \"@/src/modules/users\";\n\nexport async function GET(req: Request) {\n  await requirePermission(Permission.ManageUsers);\n\n  const { searchParams } = new URL(req.url);\n\n  const page = Number(searchParams.get(\"page\") ?? 1);\n  const pageSize = Number(searchParams.get(\"pageSize\") ?? 10);\n  const searchTerm = searchParams.get(\"searchTerm\");\n\n  const result = await getUsersController({\n    page,\n    pageSize,\n    searchTerm,\n  });\n\n  return NextResponse.json(result);\n}\n\nexport async function PUT(req: Request) {\n  await requirePermission(Permission.ManageUsers);\n\n  const body = await req.json();\n\n  const result = await updateUserController(body);\n\n  return NextResponse.json(result);\n}\n\nexport async function POST(req: Request) {\n  await requirePermission(Permission.ManageUsers);\n\n  try {\n    const body = await req.json();\n    const result = await createUserController(body);\n\n    return NextResponse.json(result);\n  } catch (error: any) {\n    return NextResponse.json(\n      { error: error.message ?? \"Error al crear usuario\" },\n      { status: 500 }\n    );\n  }\n}\n"
      }
    },
    "bim": {
      "page.tsx": "import { Metadata } from \"next\";\r\nimport BimHero from \"@/app/ui/bim/bimHero\";\r\nimport BrandsShowcase from \"@/app/ui/bim/brandsShowcase\";\r\nimport PitchSection from \"@/app/ui/bim/pitchSection\";\r\nimport ProjectsGallerySection from \"@/app/ui/bim/projectsGallerySection\";\r\nimport WhoWeAreSection from \"@/app/ui/bim/whoWeAreSection\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"BIM | Tecnología en EdifiK\",\r\n  description:\r\n    \"Descubre cómo la metodología BIM transforma la planificación, diseño y construcción de nuestros proyectos inmobiliarios en EdifiK.\",\r\n};\r\n\r\nexport default function page() {\r\n  return (\r\n    <div>\r\n      <BimHero />\r\n\r\n      <BrandsShowcase />\r\n\r\n      <PitchSection />\r\n\r\n      <ProjectsGallerySection />\r\n\r\n      <WhoWeAreSection />\r\n    </div>\r\n  );\r\n}\r\n"
    },
    "contactanos": {
      "page.tsx": "import { Metadata } from \"next\";\nimport HeroSection from \"@/app/ui/home/heroSection\";\nimport ContactSection from \"../ui/contact/contactSection\";\nimport ContactDetailsSection from \"@/app/ui/contact/contactDetailsSection\";\nimport Map from \"@/app/ui/realEstate/project/map\";\n\nexport const metadata: Metadata = {\n  title: \"Contáctanos | EdifiK\",\n  description:\n    \"¿Tienes preguntas o deseas más información? Nuestro equipo está listo para ayudarte en tu camino inmobiliario.\",\n};\n\nexport default function ContactPage() {\n  return (\n    <>\n      <HeroSection\n        srcImage=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia3.webp\"\n        altImage=\"Contactanos\"\n        title=\"Contáctanos\"\n        description=\"Estamos aquí para ayudarte con tus proyectos de construcción y diseño.\"\n      />\n\n      <ContactSection />\n\n      <hr className=\"mx-auto w-5/6 border-t border-white\" />\n\n      <ContactDetailsSection />\n\n      <hr className=\"mx-auto w-5/6 border-t border-white\" />\n\n      <div className=\"px-4 sm:px-6 lg:px-12 pb-12 w-full\">\n        <div className=\"w-full h-96 overflow-hidden rounded-lg border border-white\">\n          <Map coordinates={{ lat: 4.5709, lng: -74.2973 }} />\n        </div>\n      </div>\n    </>\n  );\n}\n"
    },
    "data": {
      "serverProjectService.ts": "import { Project } from \"@/lib/definitios\";\r\n\r\nexport async function getProjectById(\r\n  id: number,\r\n  isProject: boolean = false,\r\n  isAdmin: boolean = false\r\n): Promise<Project | null> {\r\n  try {\r\n    const query = `?isProject=${isProject ? 1 : 0}&isAdmin=${isAdmin ? 1 : 0}`;\r\n    const res = await fetch(\r\n      `${process.env.NEXT_PUBLIC_API_URL}/api/projects/${id}${query}`,\r\n      {\r\n        cache: \"no-store\",\r\n      }\r\n    );\r\n\r\n    if (!res.ok) {\r\n      console.error(\"Error en la respuesta del servidor\");\r\n      return null;\r\n    }\r\n\r\n    const data = await res.json();\r\n    return data.project as Project;\r\n  } catch (error) {\r\n    console.error(\"Error al obtener proyecto:\", error);\r\n    return null;\r\n  }\r\n}\r\n"
    },
    "favicon.ico": "(binary)",
    "fonts": {
      "fonts.ts": "import { Poppins, Inter } from \"next/font/google\";\n\nexport const poppins = Poppins({\n  subsets: [\"latin\"],\n  weight: [\"300\", \"400\", \"500\", \"700\"],\n});\n\nexport const inter = Inter({\n  subsets: [\"latin\"],\n  weight: [\"300\", \"400\", \"500\", \"700\"],\n});\n"
    },
    "globals.css": "@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  /* PREMIUM */\n  --premium-primary: #d4af37;\n  --premium-primary-light: #e1bf64;\n  --premium-primary-dark: #b79522;\n\n  --premium-secondary: #0d0d0d;\n  --premium-secondary-light: #1c1c1c;\n  --premium-secondary-dark: #000000;\n\n  --premium-background: #f5f5f5;\n  --premium-background-light: #fafafa;\n  --premium-background-dark: #e5e5e5;\n  --premium-background-alt: #ffffff;\n\n  --premium-text-primary: #333333;\n  --premium-text-secondary: #4d4d4d;\n  --premium-text-placeholder: #9e9e9e;\n\n  --premium-border-color: #e1bf64;\n  --premium-border-color-hover: #d4af37;\n\n  /* CLIENT */\n  --client-primary: #000917;\n  --client-primary-light: #1c2030;\n  --client-primary-dark: #00070f;\n  --client-primary-hover: #0b0d19;\n\n  --client-secondary: #979ca3;\n  --client-secondary-light: #b1b3b9;\n  --client-secondary-dark: #7f8288;\n  --client-secondary-hover: #8d9096;\n\n  --client-accent: #9a5939;\n  --client-accent-light: #b26755;\n  --client-accent-dark: #7f472e;\n  --client-accent-hover: #8d5032;\n\n  --client-white: #ffffff;\n  --client-white-off: #f8f8f8;\n\n  --client-background: #0f0f0f;\n  --client-background-light: #2e2e2e;\n  --client-background-dark: #121212;\n  --client-background-alt: #191919;\n\n  --client-text-primary: #fafafa;\n  --client-text-secondary: #bfbfbf;\n  --client-text-placeholder: #777777;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --premium-secondary: #1a1a1a;\n    --premium-secondary-light: #2e2e2e;\n    --premium-secondary-dark: #121212;\n\n    --premium-background: #1a1a1a;\n    --premium-background-light: #2e2e2e;\n    --premium-background-dark: #121212;\n    --premium-background-alt: #2b2b2b;\n\n    --premium-text-primary: #e5e5e5;\n    --premium-text-secondary: #bfbfbf;\n    --premium-text-placeholder: #777777;\n\n    --premium-border-color: #a67c00;\n    --premium-border-color-hover: #b79522;\n  }\n}\n\n@layer utilities {\n  .animation-pause {\n    animation-play-state: paused;\n  }\n}\n\n::-webkit-scrollbar {\n  width: 12px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--background);\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: var(--primary);\n  border-radius: 10px;\n  border: 3px solid var(--background);\n}\n\n* {\n  scrollbar-width: thin;\n  scrollbar-color: var(--primary) var(--background);\n}\n",
    "hooks": {
      "auth": {
        "register": {
          "useRegisterUser.ts": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface RegisterUserInput {\r\n  names: string;\r\n  lastnames: string;\r\n  birthdate: string;\r\n  email: string;\r\n  phoneNumber: string;\r\n  password: string;\r\n}\r\n\r\ninterface UseRegisterUserResult {\r\n  registerUser: (data: RegisterUserInput) => Promise<boolean>;\r\n  loading: boolean;\r\n  error: string | null;\r\n  success: boolean;\r\n}\r\n\r\nexport function useRegisterUser(): UseRegisterUserResult {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const registerUser = async (data: RegisterUserInput) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/auth/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const { error } = await res.json();\r\n        throw new Error(error || \"Error al registrar el usuario\");\r\n      }\r\n\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err: any) {\r\n      setError(err.message || \"Error inesperado\");\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { registerUser, loading, error, success };\r\n}\r\n"
        },
        "resetPassword": {
          "useChangePassword.ts": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface ChangePasswordInput {\r\n  currentPassword: string;\r\n  newPassword: string;\r\n}\r\n\r\ninterface UseChangePasswordResult {\r\n  changePassword: (data: ChangePasswordInput) => Promise<boolean>;\r\n  loading: boolean;\r\n  error: string | null;\r\n  success: boolean;\r\n}\r\n\r\nexport function useChangePassword(): UseChangePasswordResult {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const changePassword = async (\r\n    data: ChangePasswordInput\r\n  ): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/auth/reset-password\", {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      const result = await res.json();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(result.error || \"No se pudo cambiar la contraseña.\");\r\n      }\r\n\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err: any) {\r\n      setError(err.message || \"Error inesperado\");\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { changePassword, loading, error, success };\r\n}\r\n",
          "useResetPassword.ts": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface UseResetPasswordResult {\r\n  resetPassword: (email: string) => Promise<boolean>;\r\n  loading: boolean;\r\n  error: string | null;\r\n  success: boolean;\r\n}\r\n\r\nexport function useResetPassword(): UseResetPasswordResult {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const resetPassword = async (email: string): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/auth/reset-password\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const { error } = await res.json();\r\n        throw new Error(\r\n          error || \"Error al solicitar recuperación de contraseña\"\r\n        );\r\n      }\r\n\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err: any) {\r\n      setError(err.message || \"Error inesperado\");\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { resetPassword, loading, error, success };\r\n}\r\n"
        },
        "useAuth.ts": "import { useSession, signIn, signOut } from \"next-auth/react\";\r\n\r\nexport const useAuth = () => {\r\n  const { data: session, status } = useSession();\r\n\r\n  const login = async (email: string, password: string) => {\r\n    return await signIn(\"credentials\", {\r\n      redirect: false,\r\n      email,\r\n      password,\r\n    });\r\n  };\r\n\r\n  const logout = () => signOut();\r\n\r\n  return {\r\n    user: session?.user,\r\n    isAuthenticated: !!session?.user,\r\n    isLoading: status === \"loading\",\r\n    login,\r\n    logout,\r\n  };\r\n};\r\n"
      },
      "checkName": {
        "useCheckName.ts": "import { useState, useCallback } from \"react\";\r\n\r\nexport const useCheckName = () => {\r\n  const [isChecking, setIsChecking] = useState(false);\r\n  const [totalMatches, setTotalMatches] = useState<number | null>(null);\r\n  const [cachedResults, setCachedResults] = useState<Record<string, number>>(\r\n    {}\r\n  );\r\n\r\n  const checkName = useCallback(\r\n    async (table: string, name: string, id?: number) => {\r\n      if (!table || !name) return 0;\r\n\r\n      if (cachedResults[name]) {\r\n        return cachedResults[name];\r\n      }\r\n\r\n      setIsChecking(true);\r\n      try {\r\n        const url = new URL(`/api/check-name`, window.location.origin);\r\n        url.searchParams.append(\"table\", table);\r\n        url.searchParams.append(\"name\", name);\r\n        if (id !== undefined) url.searchParams.append(\"id\", String(id));\r\n\r\n        const response = await fetch(url.toString());\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error verificando el nombre: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        const total = data.total || 0;\r\n\r\n        setCachedResults((prev) => ({ ...prev, [name]: total }));\r\n        setTotalMatches(total);\r\n\r\n        return total;\r\n      } catch (error) {\r\n        console.error(\r\n          `Error verificando el nombre en la tabla ${table}:`,\r\n          error\r\n        );\r\n        setTotalMatches(null);\r\n        return 0;\r\n      } finally {\r\n        setIsChecking(false);\r\n      }\r\n    },\r\n    [cachedResults]\r\n  );\r\n\r\n  return { isChecking, totalMatches, checkName };\r\n};\r\n"
      },
      "memberships": {
        "useMemberships.ts": "import { useState, useEffect } from \"react\";\nimport { Membership } from \"@/lib/definitios\";\n\nexport const useMemberships = (\n  currentPage: number,\n  entriesPerPage: number,\n  searchTerm: string,\n  refreshTrigger: number\n) => {\n  const [memberships, setMemberships] = useState<Membership[]>([]);\n  const [totalEntries, setTotalEntries] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchMemberships = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(\n          `/api/memberships?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\n            searchTerm\n          )}`\n        );\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch memberships\");\n        }\n        const data = await response.json();\n        setMemberships(data.memberships);\n        setTotalEntries(data.totalEntries);\n      } catch (error) {\n        console.error(\"Error fetching memberships:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchMemberships();\n  }, [currentPage, entriesPerPage, searchTerm, refreshTrigger]);\n\n  return { memberships, totalEntries, isLoading };\n};\n",
        "useMembershipUpdate.ts": "import { useState } from \"react\";\nimport { Membership } from \"@/lib/definitios\";\n\nexport const useMembershipUpdate = () => {\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [updateError, setUpdateError] = useState<string | null>(null);\n\n  const updateMembership = async (membership: Membership): Promise<boolean> => {\n    setIsUpdating(true);\n    setUpdateError(null);\n\n    try {\n      const response = await fetch(\"/api/memberships\", {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(membership),\n      });\n\n      if (!response.ok) {\n        const { error } = await response.json();\n        throw new Error(error || \"Error al actualizar la membresía\");\n      }\n\n      return true;\n    } catch (error: any) {\n      console.error(\"Error al actualizar la membresía:\", error.message);\n      setUpdateError(error.message);\n      return false;\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  return { updateMembership, isUpdating, updateError };\n};\n",
        "useMembershipValidation.ts": "import { useState } from \"react\";\nimport { useCheckName } from \"../checkName/useCheckName\";\n\nexport const useMembershipValidation = (membership: any, isEdit: boolean) => {\n  const [errors, setErrors] = useState({\n    nameError: \"\",\n    benefitsError: \"\",\n    discountThreeMonthsError: \"\",\n    discountSixMonthsError: \"\",\n    discountTwelveMonthsError: \"\",\n    maxProjectsError: \"\",\n  });\n\n  const { checkName } = useCheckName();\n\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\n    switch (fieldName) {\n      case \"nameError\":\n        return !value ? \"El nombre es obligatorio.\" : \"\";\n      case \"benefitsError\":\n        return !value ? \"La descripción de los beneficios es obligatoria.\" : \"\";\n      case \"discountThreeMonthsError\":\n        return value > 100\n          ? \"El porcentaje de descuento debe ser menor o igual a 100.\"\n          : \"\";\n      case \"discountSixMonthsError\":\n        return value > 100\n          ? \"El porcentaje de descuento debe ser menor o igual a 100.\"\n          : \"\";\n      case \"discountTwelveMonthsError\":\n        return value > 100\n          ? \"El porcentaje de descuento debe ser menor o igual a 100.\"\n          : \"\";\n      case \"maxProjectsError\":\n        return value <= 0 ? \"Debe haber al menos 1 propiedad.\" : \"\";\n      default:\n        return \"\";\n    }\n  };\n\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\n    let errorMessage = getErrorMessage(fieldName, value);\n\n    if (fieldName === \"nameError\" && value) {\n      const total = await checkName(\n        \"membership\",\n        value,\n        isEdit ? membership.id : undefined\n      );\n\n      if (total > 0) {\n        errorMessage = \"El nombre de la membresía ya está en uso, elige otro.\";\n      }\n    }\n\n    setErrors((prevErrors) => ({\n      ...prevErrors,\n      [fieldName]: errorMessage,\n    }));\n  };\n\n  const validateFields = async () => {\n    const newErrors: typeof errors = {\n      nameError: getErrorMessage(\"nameError\", membership.name),\n      benefitsError: getErrorMessage(\"benefitsError\", membership.benefits),\n      discountThreeMonthsError: getErrorMessage(\n        \"discountThreeMonthsError\",\n        membership.discountThreeMonths\n      ),\n      discountSixMonthsError: getErrorMessage(\n        \"discountSixMonthsError\",\n        membership.discountSixMonths\n      ),\n      discountTwelveMonthsError: getErrorMessage(\n        \"discountTwelveMonthsError\",\n        membership.discountTwelveMonths\n      ),\n      maxProjectsError: getErrorMessage(\n        \"maxProjectsError\",\n        membership.maxProjects\n      ),\n    };\n\n    if (membership.name) {\n      const total = await checkName(\n        \"membership\",\n        membership.name,\n        isEdit ? membership.id : undefined\n      );\n\n      if (total > 0) {\n        newErrors.nameError =\n          \"El nombre de la membresía ya está en uso, elige otro.\";\n      }\n    }\n\n    setErrors(newErrors);\n\n    return Object.values(newErrors).every((error) => error === \"\");\n  };\n\n  return { errors, validateFields, validateField };\n};\n"
      },
      "projects": {
        "basic": {
          "useGetBasicProjects.ts": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\n\r\nexport function useGetBasicProjects() {\r\n  const [projects, setProjects] = useState<ProjectView[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\r\n\r\n  const fetchProjects = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setErrorProjects(null);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/projects/basic\");\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          `Error fetching basic projects: ${response.statusText}`\r\n        );\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      setProjects(data.projects || []);\r\n      setTotalEntries(data.totalEntries || 0);\r\n    } catch (error: any) {\r\n      if (error.name !== \"AbortError\") {\r\n        setErrorProjects(error.message || \"Error desconocido\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchProjects();\r\n  }, [fetchProjects]);\r\n\r\n  return {\r\n    projects,\r\n    totalEntries,\r\n    isLoading,\r\n    errorProjects,\r\n  };\r\n}\r\n"
        },
        "createEditProject": {
          "useBasicProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport { useCheckName } from \"../../checkName/useCheckName\";\r\n\r\nexport const useBasicProjectValidation = (\r\n  formData: ProjectData,\r\n  isProperty: boolean,\r\n  isEdit: boolean\r\n) => {\r\n  const [errors, setErrors] = useState({\r\n    nameError: \"\",\r\n    emailError: \"\",\r\n    shortDescriptionError: \"\",\r\n    detailedDescriptionError: \"\",\r\n    propertyTypeError: \"\",\r\n    projectTypeError: \"\",\r\n  });\r\n\r\n  const { checkName } = useCheckName();\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"emailError\":\r\n        if (isProperty && value) {\r\n          if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n            return \"Ingrese un correo electrónico válido.\";\r\n          }\r\n          if (!formData.ownerId) {\r\n            return \"El correo ingresado no pertenece a un usuario registrado.\";\r\n          }\r\n        }\r\n        return \"\";\r\n      case \"shortDescriptionError\":\r\n        return !value ? \"El resumen breve es obligatorio.\" : \"\";\r\n      case \"detailedDescriptionError\":\r\n        return !value ? \"La descripción completa es obligatoria.\" : \"\";\r\n      case \"propertyTypeError\":\r\n        return !value || !value.id ? \"Seleccione el tipo de propiedad.\" : \"\";\r\n      case \"projectTypeError\":\r\n        return isProperty && (!value || !value.id)\r\n          ? \"Seleccione la finalidad de la propiedad.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\r\n    let errorMessage = getErrorMessage(fieldName, value);\r\n\r\n    if (!isProperty && fieldName === \"nameError\" && value) {\r\n      const total = await checkName(\r\n        \"project\",\r\n        value,\r\n        isEdit ? formData.id : undefined\r\n      );\r\n\r\n      if (total) {\r\n        errorMessage = \"El nombre del proyecto ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: errorMessage,\r\n    }));\r\n  };\r\n\r\n  const validateFields = async () => {\r\n    const newErrors: typeof errors = {\r\n      nameError: getErrorMessage(\"nameError\", formData.name),\r\n      emailError: getErrorMessage(\"emailError\", formData.email),\r\n      shortDescriptionError: getErrorMessage(\r\n        \"shortDescriptionError\",\r\n        formData.shortDescription\r\n      ),\r\n      detailedDescriptionError: getErrorMessage(\r\n        \"detailedDescriptionError\",\r\n        formData.detailedDescription\r\n      ),\r\n      propertyTypeError: getErrorMessage(\r\n        \"propertyTypeError\",\r\n        formData.propertyType\r\n      ),\r\n      projectTypeError: getErrorMessage(\r\n        \"projectTypeError\",\r\n        formData.projectType\r\n      ),\r\n    };\r\n\r\n    if (formData.email && !formData.ownerId) {\r\n      const foundUser = await checkName(\"user\", formData.email);\r\n      if (!foundUser) {\r\n        newErrors.emailError =\r\n          \"El correo ingresado no pertenece a un usuario registrado.\";\r\n      }\r\n    }\r\n\r\n    if (!isProperty && formData.name) {\r\n      const total = await checkName(\r\n        \"project\",\r\n        formData.name,\r\n        isEdit ? formData.id : undefined\r\n      );\r\n\r\n      if (total) {\r\n        newErrors.nameError =\r\n          \"El nombre del proyecto ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useDetailsProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport const useDetailsProjectValidation = (formData: ProjectData) => {\r\n  const [errors, setErrors] = useState({\r\n    priceError: \"\",\r\n    housingTypeError: \"\",\r\n  });\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: any) => {\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: value ? \"\" : getErrorMessage(fieldName, value),\r\n    }));\r\n  };\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"priceError\":\r\n        return (formData.projectType?.id === 2 ||\r\n          formData.projectType?.id === 3) &&\r\n          !value\r\n          ? \"El precio es obligatorio y debe ser mayor que 0.\"\r\n          : \"\";\r\n      case \"housingTypeError\":\r\n        return (formData.propertyType?.id === 1001 ||\r\n          formData.propertyType?.id === 1002) &&\r\n          !value\r\n          ? \"Seleccione un tipo de vivienda.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateFields = () => {\r\n    const newErrors: typeof errors = {\r\n      priceError: getErrorMessage(\"priceError\", formData.price),\r\n      housingTypeError: getErrorMessage(\r\n        \"housingTypeError\",\r\n        formData.housingType\r\n      ),\r\n    };\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useFeaturesProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport const useFeaturesProjectValidation = (formData: ProjectData) => {\r\n  const [errors, setErrors] = useState({\r\n    builtAreaError: \"\",\r\n    totalAreaError: \"\",\r\n    bathroomsError: \"\",\r\n    bedroomsError: \"\",\r\n    lobbiesError: \"\",\r\n    freeHeightError: \"\",\r\n    widthError: \"\",\r\n    lengthError: \"\",\r\n    towersError: \"\",\r\n    socioeconomicLevelError: \"\",\r\n    yearBuiltError: \"\",\r\n  });\r\n\r\n  const shouldShowField = (field: string) => {\r\n    const propertyTypeId = formData.propertyType?.id;\r\n\r\n    const fieldsFor1001And1002 = [\r\n      \"socioeconomicLevel\",\r\n      \"yearBuilt\",\r\n      \"bedrooms\",\r\n      \"storageUnits\",\r\n      \"balcony\",\r\n      \"laundryArea\",\r\n      \"customizationOptions\",\r\n    ];\r\n\r\n    const fieldsFor1001 = [\"terrace\", \"garden\"];\r\n    const fieldsFor1001_1002_1004 = [\"bathrooms\", \"lobbies\"];\r\n    const fieldsFor1002_1003_1004 = [\"elevator\"];\r\n    const fieldsFor1002 = [\"towers\", \"floorNumber\"];\r\n    const fieldsFor1004_1003_1005 = [\"freeHeight\"];\r\n    const fieldsFor1005_1006_1007 = [\"width\", \"length\"];\r\n    const fieldsFor1005 = [\"heavyParking\"];\r\n\r\n    if (fieldsFor1001And1002.includes(field)) {\r\n      return propertyTypeId === 1001 || propertyTypeId === 1002;\r\n    }\r\n    if (fieldsFor1001.includes(field)) {\r\n      return propertyTypeId === 1001;\r\n    }\r\n    if (fieldsFor1001_1002_1004.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004\r\n      );\r\n    }\r\n    if (fieldsFor1002_1003_1004.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1004\r\n      );\r\n    }\r\n    if (fieldsFor1002.includes(field)) {\r\n      return propertyTypeId === 1002;\r\n    }\r\n    if (fieldsFor1004_1003_1005.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1004 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1005\r\n      );\r\n    }\r\n    if (fieldsFor1005_1006_1007.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007\r\n      );\r\n    }\r\n    if (fieldsFor1005.includes(field)) {\r\n      return propertyTypeId === 1005;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"builtAreaError\":\r\n        return !value ? \"El área construida es obligatoria.\" : \"\";\r\n      case \"totalAreaError\":\r\n        return !value ? \"El área total es obligatoria.\" : \"\";\r\n      case \"bathroomsError\":\r\n        return !value ? \"El número de baños es obligatorio.\" : \"\";\r\n      case \"bedroomsError\":\r\n        return !value ? \"El número de habitaciones es obligatorio.\" : \"\";\r\n      case \"lobbiesError\":\r\n        return !value ? \"El número de salas de estar es obligatorio.\" : \"\";\r\n      case \"freeHeightError\":\r\n        return !value ? \"La altura libre es obligatoria.\" : \"\";\r\n      case \"widthError\":\r\n        return !value ? \"El ancho es obligatorio.\" : \"\";\r\n      case \"lengthError\":\r\n        return !value ? \"El largo es obligatorio.\" : \"\";\r\n      case \"towersError\":\r\n        return formData.projectType?.id === 1 && !value\r\n          ? \"El número de torres es obligatorio.\"\r\n          : \"\";\r\n      case \"socioeconomicLevelError\":\r\n        return (formData.projectType?.id === 2 ||\r\n          formData.projectType?.id === 3) &&\r\n          !value\r\n          ? \"El estrato es obligatorio.\"\r\n          : \"\";\r\n      case \"yearBuiltError\":\r\n        return (formData.projectType?.id === 2 ||\r\n          formData.projectType?.id === 3) &&\r\n          !value\r\n          ? \"El año de construcción es obligatorio.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: any) => {\r\n    const field = fieldName.replace(\"Error\", \"\");\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: shouldShowField(field)\r\n        ? getErrorMessage(fieldName, value)\r\n        : \"\",\r\n    }));\r\n  };\r\n\r\n  const validateFields = () => {\r\n    const newErrors: Partial<typeof errors> = {};\r\n\r\n    Object.keys(errors).forEach((errorKey) => {\r\n      const fieldName = errorKey.replace(\"Error\", \"\");\r\n      if (shouldShowField(fieldName)) {\r\n        newErrors[errorKey as keyof typeof errors] = getErrorMessage(\r\n          errorKey as keyof typeof errors,\r\n          formData[fieldName as keyof ProjectData]\r\n        );\r\n      } else {\r\n        newErrors[errorKey as keyof typeof errors] = \"\";\r\n      }\r\n    });\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      ...newErrors,\r\n    }));\r\n\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useImagesProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData, ImageType, Media } from \"@/lib/definitios\";\r\n\r\nexport const useImagesProjectValidation = (\r\n  formData: ProjectData,\r\n  imagesTypes: ImageType[]\r\n) => {\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const imagesByCategory: Record<string, Media[]> = {};\r\n  const imageTagsByCategory: Record<string, string[]> = {};\r\n  const imageDescriptionsByCategory: Record<string, string[]> = {};\r\n\r\n  (formData.media || []).forEach((media) => {\r\n    if (!imagesByCategory[media.type]) {\r\n      imagesByCategory[media.type] = [];\r\n      imageTagsByCategory[media.type] = [];\r\n      imageDescriptionsByCategory[media.type] = [];\r\n    }\r\n    imagesByCategory[media.type].push(media);\r\n    imageTagsByCategory[media.type].push(media.tag);\r\n    imageDescriptionsByCategory[media.type].push(media.description || \"\");\r\n  });\r\n\r\n  const getErrorMessage = (fieldName: string) => {\r\n    if (fieldName.includes(\"-tag-\"))\r\n      return \"El nombre de la imagen es obligatorio.\";\r\n    if (fieldName.includes(\"-description-\"))\r\n      return \"La descripción es obligatoria.\";\r\n    return \"Campo obligatorio.\";\r\n  };\r\n\r\n  const validateField = (fieldName: string, value: any) => {\r\n    setErrors((prevErrors) => {\r\n      const newErrors = { ...prevErrors };\r\n\r\n      if (value.trim() === \"\") {\r\n        console.warn(`⚠️ Campo vacío detectado: ${fieldName}`);\r\n        newErrors[fieldName] = getErrorMessage(fieldName);\r\n      } else {\r\n        delete newErrors[fieldName];\r\n      }\r\n\r\n      return JSON.stringify(prevErrors) !== JSON.stringify(newErrors)\r\n        ? { ...newErrors }\r\n        : prevErrors;\r\n    });\r\n  };\r\n\r\n  const validateFields = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    imagesTypes.forEach((type) => {\r\n      if (\r\n        type.isRequired &&\r\n        (!imagesByCategory[type.name] ||\r\n          imagesByCategory[type.name].length === 0)\r\n      ) {\r\n        newErrors[type.name] =\r\n          `Debe subir al menos una imagen para ${type.name}.`;\r\n      }\r\n    });\r\n\r\n    formData.commonAreas?.forEach((area) => {\r\n      if (\r\n        !imagesByCategory[area.name] ||\r\n        imagesByCategory[area.name].length === 0\r\n      ) {\r\n        newErrors[area.name] =\r\n          `Debe subir al menos una imagen para ${area.name}.`;\r\n      }\r\n    });\r\n\r\n    Object.entries(imagesByCategory).forEach(([category, files]) => {\r\n      files.forEach((_, index) => {\r\n        if (!imageTagsByCategory[category]?.[index]) {\r\n          newErrors[`${category}-tag-${index}`] =\r\n            \"El nombre de la imagen es obligatorio.\";\r\n        }\r\n\r\n        if (\r\n          imagesTypes.find((type) => type.name === category)?.id === 1005 &&\r\n          !imageDescriptionsByCategory[category]?.[index]\r\n        ) {\r\n          newErrors[`${category}-description-${index}`] =\r\n            \"La descripción es obligatoria.\";\r\n        }\r\n      });\r\n    });\r\n\r\n    setErrors({ ...newErrors });\r\n\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useLocationProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport const useLocationProjectValidation = (formData: ProjectData) => {\r\n  const [errors, setErrors] = useState({\r\n    departamentError: \"\",\r\n    cityError: \"\",\r\n    addressError: \"\",\r\n    mapAddressError: \"\",\r\n  });\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: any) => {\r\n    if (fieldName === \"mapAddressError\" && typeof value === \"string\") {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        mapAddressError: value.trim()\r\n          ? \"\"\r\n          : getErrorMessage(\"mapAddressError\", value),\r\n      }));\r\n    } else {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        [fieldName]: value ? \"\" : getErrorMessage(fieldName, value),\r\n      }));\r\n    }\r\n  };\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"departamentError\":\r\n        return !value ? \"El departamento es obligatorio.\" : \"\";\r\n      case \"cityError\":\r\n        return !value ? \"La ciudad es obligatoria.\" : \"\";\r\n      case \"addressError\":\r\n        return !value?.trim() ? \"La dirección pública es obligatoria.\" : \"\";\r\n      case \"mapAddressError\":\r\n        return !value?.trim() ? \"La ubicación en el mapa es obligatoria.\" : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateFields = (mapAddress: string) => {\r\n    const newErrors: typeof errors = {\r\n      departamentError: getErrorMessage(\r\n        \"departamentError\",\r\n        formData.city?.departament?.id\r\n      ),\r\n      cityError: getErrorMessage(\"cityError\", formData.city?.id),\r\n      addressError: getErrorMessage(\"addressError\", formData.address),\r\n      mapAddressError: getErrorMessage(\"mapAddressError\", mapAddress),\r\n    };\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n"
        },
        "home": {
          "useHomeProjects.ts": "\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\n\r\nexport function useHomeProjects(numberProjects: number, isProperty: boolean) {\r\n  const [projects, setProjects] = useState<ProjectView[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProjects = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const response = await fetch(\r\n          `/api/projects/home/${isProperty ? \"realEstate\" : \"company\"}?numberProjects=${numberProjects}`\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error fetching company projects: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        setProjects(data.projects || []);\r\n      } catch (error: any) {\r\n        setError(error.message || \"Error desconocido\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProjects();\r\n  }, [numberProjects]);\r\n\r\n  return { projects, isLoading, error };\r\n}\r\n"
        },
        "metadata": {
          "imageTypes": {
            "useImageTypes.ts": "import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { ImageType } from \"@/lib/definitios\";\n\nexport default function useImageTypes() {\n  const [imagesTypes, setImagesTypes] = useState<ImageType[]>([]);\n  const [loadingImages, setLoadingImages] = useState<boolean>(true);\n  const [errorImages, setErrorImages] = useState<string | null>(null);\n\n  const fetchImages = useCallback(async () => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    try {\n      setLoadingImages(true);\n\n      const response = await fetch(\"/api/projects/metadata/image-types\", {\n        signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      const data: ImageType[] = await response.json();\n      setImagesTypes(data);\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        setErrorImages(err.message || \"Error desconocido\");\n      }\n    } finally {\n      setLoadingImages(false);\n    }\n\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    fetchImages();\n  }, [fetchImages]);\n\n  const memoizedImagesTypes = useMemo(() => imagesTypes, [imagesTypes]);\n\n  return { imagesTypes: memoizedImagesTypes, loadingImages, errorImages };\n}\n"
          },
          "location": {
            "useAddressSearch.ts": "import { useState } from \"react\";\n\ninterface SearchResult {\n  display_name: string;\n  lat: string;\n  lon: string;\n  address: { [key: string]: string };\n}\n\nexport function useAddressSearch() {\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const searchAddress = async (query: string) => {\n    if (!query) return;\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&q=${query}`\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Error en la búsqueda de dirección\");\n      }\n      const data: SearchResult[] = await response.json();\n      setResults(data);\n    } catch (err: any) {\n      setError(err.message || \"Error desconocido\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { results, loading, error, searchAddress };\n}\n",
            "useLocations.ts": "import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { City, Departament } from \"@/lib/definitios\";\n\ninterface LocationsData {\n  departaments: Departament[];\n  cities: City[];\n}\n\nexport default function useLocations() {\n  const [locations, setLocations] = useState<LocationsData | null>(null);\n  const [loadingLocations, setLoadingLocations] = useState<boolean>(true);\n  const [errorLocations, setErrorLocations] = useState<string | null>(null);\n\n  const fetchLocations = useCallback(async () => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    try {\n      setLoadingLocations(true);\n\n      const response = await fetch(\"/api/projects/metadata/cities\", { signal });\n\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      const data: LocationsData = await response.json();\n      setLocations(data);\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        setErrorLocations(err.message || \"Error desconocido\");\n      }\n    } finally {\n      setLoadingLocations(false);\n    }\n\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    fetchLocations();\n  }, [fetchLocations]);\n\n  const memoizedLocations = useMemo(() => locations, [locations]);\n\n  return { locations: memoizedLocations, loadingLocations, errorLocations };\n}\n"
          },
          "projectMedia": {
            "useProjectMediaApi.ts": "import { useState, useCallback } from \"react\";\r\nimport { ProjectMedia } from \"@/lib/definitios\";\r\n\r\nexport function useProjectMediaApi() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<boolean>(false);\r\n\r\n  const insertProjectMedia = useCallback(\r\n    async (projectMedia: ProjectMedia[]) => {\r\n      if (!projectMedia || projectMedia.length === 0) {\r\n        console.warn(\"⚠️ No se proporcionaron datos para insertar.\");\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n      setSuccess(false);\r\n\r\n      try {\r\n        const formattedProjectMedia = projectMedia.map((media) => ({\r\n          url: media.url,\r\n          tag: media.tag,\r\n          description: media.description ?? null,\r\n          projectId: media.projectId,\r\n          commonAreaId: media.commonArea ?? null,\r\n          imageTypeId: media.imageType ?? null,\r\n        }));\r\n\r\n        const response = await fetch(\"/api/projects/metadata/project-media\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ projectMedia: formattedProjectMedia }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const data = await response.json();\r\n          throw new Error(data.error || \"Error desconocido al insertar media.\");\r\n        }\r\n\r\n        setSuccess(true);\r\n      } catch (err: any) {\r\n        console.error(\"❌ Error al insertar projectMedia:\", err);\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const updateProjectMedia = useCallback(\r\n    async (\r\n      projectMedia: { id: number; tag: string; description?: string }[]\r\n    ) => {\r\n      if (!projectMedia || projectMedia.length === 0) {\r\n        console.warn(\"⚠️ No se proporcionaron datos para actualizar.\");\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n      setSuccess(false);\r\n\r\n      try {\r\n        const response = await fetch(\"/api/projects/metadata/project-media\", {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ projectMedia }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const data = await response.json();\r\n          throw new Error(\r\n            data.error || \"Error desconocido al actualizar media.\"\r\n          );\r\n        }\r\n\r\n        setSuccess(true);\r\n      } catch (err: any) {\r\n        console.error(\"❌ Error al actualizar projectMedia:\", err);\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const deleteProjectMedia = useCallback(async (mediaIds: number[]) => {\r\n    if (!mediaIds || mediaIds.length === 0) {\r\n      console.warn(\"⚠️ No se proporcionaron IDs para eliminar.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/projects/metadata/project-media\", {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ mediaIds: mediaIds }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(\r\n          data.error || \"Error desconocido al eliminar projectMedia.\"\r\n        );\r\n      }\r\n\r\n      setSuccess(true);\r\n    } catch (err: any) {\r\n      console.error(\"❌ Error al eliminar projectMedia:\", err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    insertProjectMedia,\r\n    updateProjectMedia,\r\n    deleteProjectMedia,\r\n    loading,\r\n    error,\r\n    success,\r\n  };\r\n}\r\n"
          },
          "useBasicMetadata.ts": "import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport {\n  CommonArea,\n  HousingType,\n  NearbyService,\n  propertyType,\n  Category,\n} from \"@/lib/definitios\";\n\ninterface BasicMetadata {\n  commonAreas: CommonArea[];\n  housingTypes: HousingType[];\n  nearbyServices: NearbyService[];\n  propertyTypes: propertyType[];\n  categories: Category[];\n}\n\nexport default function useBasicMetadata() {\n  const [metadata, setMetadata] = useState<BasicMetadata | null>(null);\n  const [loadingMetadata, setLoadingMetadata] = useState<boolean>(true);\n  const [errorMetadata, setErrorMetadata] = useState<string | null>(null);\n\n  const fetchMetadata = useCallback(async () => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    try {\n      setLoadingMetadata(true);\n      const response = await fetch(\"/api/projects/metadata/basic-metadata\", {\n        signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      const data: BasicMetadata = await response.json();\n      setMetadata(data);\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        setErrorMetadata(err.message || \"Error desconocido\");\n      }\n    } finally {\n      setLoadingMetadata(false);\n    }\n\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    fetchMetadata();\n  }, [fetchMetadata]);\n\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\n\n  return { metadata: memoizedMetadata, loadingMetadata, errorMetadata };\n}\n",
          "useProjectsMetadata.ts": "import { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport {\r\n  City,\r\n  CommonArea,\r\n  HousingType,\r\n  NearbyService,\r\n  propertyType,\r\n  MembershipSummary,\r\n} from \"@/lib/definitios\";\r\n\r\ntype Metadata = {\r\n  cities: City[];\r\n  commonAreas: CommonArea[];\r\n  housingTypes: HousingType[];\r\n  nearbyServices: NearbyService[];\r\n  propertyTypes: propertyType[];\r\n  memberships: MembershipSummary[];\r\n};\r\n\r\nexport const useProjectsMetadata = () => {\r\n  const [metadata, setMetadata] = useState<Metadata>({\r\n    cities: [],\r\n    commonAreas: [],\r\n    housingTypes: [],\r\n    nearbyServices: [],\r\n    propertyTypes: [],\r\n    memberships: [],\r\n  });\r\n  const [isLoadingMetadata, setIsLoadingMetadata] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchMetadata = useCallback(async () => {\r\n    if (metadata.cities.length > 0) return;\r\n\r\n    setIsLoadingMetadata(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/projects/metadata\");\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error fetching metadata: ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMetadata(data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching metadata:\", err);\r\n      setError((err as Error).message || \"Error desconocido\");\r\n    } finally {\r\n      setIsLoadingMetadata(false);\r\n    }\r\n  }, [metadata]);\r\n\r\n  useEffect(() => {\r\n    fetchMetadata();\r\n  }, [fetchMetadata]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n\r\n  return { metadata: memoizedMetadata, isLoadingMetadata, error };\r\n};\r\n"
        },
        "owner": {
          "useOwner.ts": "import { useState, useEffect } from \"react\";\r\nimport { UserData } from \"@/lib/definitios\";\r\n\r\nexport const useOwner = (email: string) => {\r\n  const [owner, setOwner] = useState<UserData | null>(null);\r\n  const [isLoadingUser, setIsLoadingUser] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchUser = async () => {\r\n    if (!email) {\r\n      setError(\"Debe proporcionar un email de usuario.\");\r\n      setIsLoadingUser(false);\r\n      return;\r\n    }\r\n\r\n    setIsLoadingUser(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(\r\n        `/api/projects/owner?email=${encodeURIComponent(email)}`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error al obtener usuario: ${response.statusText}`);\r\n      }\r\n      const data = await response.json();\r\n      setOwner(data.user);\r\n    } catch (error) {\r\n      console.error(\"Error al obtener usuario:\", error);\r\n      setError(\"No se pudo recuperar la información del usuario.\");\r\n    } finally {\r\n      setIsLoadingUser(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [email]);\r\n\r\n  return { owner, isLoadingUser, error, refetchUser: fetchUser };\r\n};\r\n"
        },
        "useColombianLocations.ts": "import { useEffect, useState } from \"react\";\n\ninterface Departament {\n  id: number;\n  name: string;\n}\n\ninterface City {\n  id: number;\n  name: string;\n  departamentId: number;\n}\n\ninterface ColombianLocations {\n  departaments: Departament[];\n  cities: Record<number, City[]>;\n}\n\nexport default function useColombianLocations() {\n  const [locations, setLocations] = useState<ColombianLocations>({\n    departaments: [],\n    cities: {},\n  });\n\n  useEffect(() => {\n    const fetchLocations = async () => {\n      try {\n        const response = await fetch(\n          \"https://raw.githubusercontent.com/marcovega/colombia-json/master/colombia.min.json\"\n        );\n\n        const data = await response.json();\n\n        const departaments: Departament[] = data.map(\n          (dept: any, index: number) => ({\n            id: index + 1,\n            name: dept.departamento,\n          })\n        );\n\n        const cities = data.reduce(\n          (acc: Record<number, City[]>, dept: any, index: number) => {\n            acc[index + 1] = dept.ciudades.map(\n              (cityName: string, cityIndex: number) => ({\n                id: cityIndex + 1,\n                name: cityName,\n                departamentId: index + 1,\n              })\n            );\n            return acc;\n          },\n          {}\n        );\n\n        setLocations({ departaments, cities });\n      } catch (error) {\n        console.error(\"Error al cargar los departamentos y ciudades:\", error);\n      }\n    };\n\n    fetchLocations();\n  }, []);\n\n  return locations;\n}\n",
        "useDeleteProject.ts": "import { useState, useCallback } from \"react\";\r\n\r\nconst useDeleteProject = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<boolean>(false);\r\n\r\n  const deleteProject = useCallback(async (projectId: number) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const response = await fetch(`/api/projects/${projectId}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || \"Error al eliminar el proyecto.\");\r\n      }\r\n\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"❌ Error al eliminar el proyecto:\", err);\r\n      setError(err.message);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return { deleteProject, loading, error, success };\r\n};\r\n\r\nexport default useDeleteProject;\r\n",
        "useGetProjects.ts": "\"use client\";\n\nimport { useState, useEffect, useCallback, useRef } from \"react\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\ninterface UseProjectsOptions {\n  entriesPerPage: number;\n  selectedButtons: Record<string, number[]>;\n  currentProjects: ProjectSummary[];\n  projectTypeId: number | null;\n  bounds?: google.maps.LatLngBounds | null;\n  showMap: boolean;\n}\n\nexport function useGetProjects({\n  entriesPerPage,\n  selectedButtons,\n  currentProjects,\n  projectTypeId,\n  bounds = null,\n  showMap,\n}: UseProjectsOptions) {\n  const [projects, setProjects] = useState<ProjectSummary[]>(currentProjects);\n  const [totalEntries, setTotalEntries] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\n\n  const pageRef = useRef(1);\n\n  const [lastFetchedFilters, setLastFetchedFilters] = useState<{\n    searchTerm: string;\n    selectedButtons: Record<string, number[]>;\n    projectTypeId: number | null;\n    showMap: boolean;\n    bounds: google.maps.LatLngBounds | undefined;\n  }>({\n    searchTerm: \"\",\n    selectedButtons: {},\n    projectTypeId: null,\n    showMap: false,\n    bounds: undefined,\n  });\n\n  const debouncedSearch = useDebouncedCallback((term: string) => {\n    setSearchTerm(term);\n    resetProjects();\n  }, 300);\n\n  const resetProjects = useCallback(() => {\n    setProjects([]);\n    setCurrentPage(1);\n    pageRef.current = 1;\n  }, []);\n\n  const fetchProjects = useCallback(\n    async (isLoadMore = false, page = 1, bounds?: google.maps.LatLngBounds) => {\n      if (isLoading) {\n        return;\n      }\n\n      const currentFilters = {\n        searchTerm,\n        selectedButtons,\n        projectTypeId,\n        showMap,\n        bounds,\n      };\n\n      if (\n        !isLoadMore &&\n        JSON.stringify(currentFilters) === JSON.stringify(lastFetchedFilters)\n      ) {\n        return;\n      }\n\n      setLastFetchedFilters(currentFilters);\n      setIsLoading(true);\n\n      try {\n        const params = new URLSearchParams({\n          page: page.toString(),\n          pageSize: entriesPerPage.toString(),\n          searchTerm,\n          ...(projectTypeId ? { projectTypeId: projectTypeId.toString() } : {}),\n          ...Object.fromEntries(\n            Object.entries(selectedButtons).map(([key, value]) => [\n              key,\n              value.join(\",\"),\n            ])\n          ),\n        });\n\n        if (bounds) {\n          params.append(\"minLat\", bounds.getSouthWest().lat().toString());\n          params.append(\"maxLat\", bounds.getNorthEast().lat().toString());\n          params.append(\"minLng\", bounds.getSouthWest().lng().toString());\n          params.append(\"maxLng\", bounds.getNorthEast().lng().toString());\n        }\n\n        const response = await fetch(`/api/projects?${params.toString()}`);\n\n        if (!response.ok) {\n          throw new Error(`Error fetching projects: ${response.statusText}`);\n        }\n\n        const data = await response.json();\n\n        const newProjects: ProjectSummary[] = data.projects;\n\n        setProjects((prev) =>\n          isLoadMore\n            ? [\n                ...prev,\n                ...newProjects.filter(\n                  (p) => !prev.some((prop) => prop.id === p.id)\n                ),\n              ]\n            : newProjects\n        );\n\n        setTotalEntries(data.totalEntries);\n      } catch (error: any) {\n        if (error.name !== \"AbortError\") {\n          setErrorProjects(error.message || \"Error desconocido\");\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [\n      entriesPerPage,\n      isLoading,\n      searchTerm,\n      selectedButtons,\n      projectTypeId,\n      showMap,\n      bounds,\n    ]\n  );\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      fetchProjects(false, 1, showMap && bounds !== null ? bounds : undefined);\n    }, 500);\n\n    return () => clearTimeout(timeoutId);\n  }, [searchTerm, selectedButtons, projectTypeId, showMap, bounds]);\n\n  const fetchMoreProjects = useCallback(() => {\n    if (isLoading) return;\n\n    setIsLoading(true);\n\n    setCurrentPage((prevPage) => {\n      const nextPage = prevPage + 1;\n\n      fetchProjects(\n        true,\n        nextPage,\n        showMap && bounds !== null ? bounds : undefined\n      ).finally(() => setIsLoading(false));\n\n      return nextPage;\n    });\n  }, [isLoading, fetchProjects, showMap, bounds]);\n\n  const refreshProjects = useCallback(() => {\n    setProjects([]);\n    setCurrentPage(1);\n    fetchProjects(false, 1, showMap && bounds !== null ? bounds : undefined);\n  }, [fetchProjects, showMap, bounds]);\n\n  return {\n    projects,\n    totalEntries,\n    fetchMoreProjects,\n    debouncedSearch,\n    resetProjects,\n    refreshProjects,\n    isLoading,\n    errorProjects,\n  };\n}\n",
        "useProjectApi.ts": "import { useState } from \"react\";\nimport { ProjectData } from \"@/lib/definitios\";\n\nexport function useProjectApi() {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const submitProject = async (\n    projectData: ProjectData | number,\n    action: \"create\" | \"edit\" | \"delete\"\n  ): Promise<number | boolean | null> => {\n    setIsProcessing(true);\n    setError(null);\n    try {\n      let method = \"POST\";\n      let body: string | undefined = JSON.stringify(projectData);\n      let url = \"/api/projects\";\n\n      if (action === \"edit\") {\n        method = \"PUT\";\n      } else if (action === \"delete\") {\n        method = \"DELETE\";\n        body = undefined;\n        url = `/api/projects?id=${projectData}`;\n      }\n\n      const response = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body,\n      });\n\n      if (!response.ok) {\n        const { error } = await response.json();\n        throw new Error(error || \"Error al procesar el proyecto.\");\n      }\n\n      if (action === \"create\") {\n        const data = await response.json();\n        return data.projectId;\n      }\n\n      return true;\n    } catch (err: any) {\n      console.error(\"Error al procesar el proyecto:\", err.message);\n      setError(err.message || \"Error desconocido\");\n      return null;\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return { submitProject, isProcessing, error };\n}\n",
        "useProjectById.ts": "\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Project } from \"@/lib/definitios\";\n\ninterface ProjectData {\n  project: Project;\n}\n\nexport function useProjectById(\n  id?: number,\n  isProject?: boolean,\n  isAdmin?: boolean\n) {\n  const [project, setProject] = useState<Project | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchProject = async () => {\n      try {\n        setLoading(true);\n        const isProjectFlag = isProject ? 1 : 0;\n        const query = `?isProject=${isProjectFlag}&isAdmin=${isAdmin ? 1 : 0}`;\n\n        const response = await fetch(`/api/projects/${id}${query}`);\n\n        if (!response.ok) {\n          throw new Error(\"Propiedad no encontrada\");\n        }\n\n        const data: ProjectData = await response.json();\n        setProject(data.project);\n        setError(null);\n      } catch (error) {\n        setError(error instanceof Error ? error.message : \"Error desconocido\");\n        setProject(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProject();\n  }, [id, isProject]);\n\n  return { project, loading, error };\n}\n"
      },
      "realEstate": {
        "useGetProperties.ts": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\n\r\ninterface UseGetPropertiesOptions {\r\n  entriesPerPage: number;\r\n  selectedButtons: Record<string, number[]>;\r\n  projectTypeId: number | null;\r\n  bounds?: google.maps.LatLngBounds | null;\r\n  showMap: boolean;\r\n  searchCoords?: { latitude: number; longitude: number } | null;\r\n}\r\n\r\nexport function useGetProperties({\r\n  entriesPerPage,\r\n  selectedButtons,\r\n  projectTypeId,\r\n  bounds = null,\r\n  showMap,\r\n  searchCoords = null,\r\n}: UseGetPropertiesOptions) {\r\n  const [projects, setProjects] = useState<ProjectView[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\r\n\r\n  const pageRef = useRef(1);\r\n\r\n  const [lastFetchedFilters, setLastFetchedFilters] = useState<{\r\n    selectedButtons: Record<string, number[]>;\r\n    projectTypeId: number | null;\r\n    showMap: boolean;\r\n    bounds: google.maps.LatLngBounds | undefined;\r\n    searchCoords: { latitude: number; longitude: number } | null;\r\n  }>({\r\n    selectedButtons: {},\r\n    projectTypeId: null,\r\n    showMap: false,\r\n    bounds: undefined,\r\n    searchCoords: null,\r\n  });\r\n\r\n  const resetProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n    pageRef.current = 1;\r\n  }, []);\r\n\r\n  const fetchProjects = useCallback(\r\n    async (isLoadMore = false, page = 1, bounds?: google.maps.LatLngBounds) => {\r\n      if (isLoading) {\r\n        return;\r\n      }\r\n\r\n      const currentFilters = {\r\n        selectedButtons,\r\n        projectTypeId,\r\n        showMap,\r\n        bounds,\r\n        searchCoords,\r\n      };\r\n\r\n      const areFiltersEqual = (\r\n        a: typeof currentFilters,\r\n        b: typeof lastFetchedFilters\r\n      ): boolean => {\r\n        return (\r\n          JSON.stringify(a.selectedButtons) ===\r\n            JSON.stringify(b.selectedButtons) &&\r\n          a.projectTypeId === b.projectTypeId &&\r\n          a.showMap === b.showMap &&\r\n          JSON.stringify(a.bounds) === JSON.stringify(b.bounds) &&\r\n          ((!a.searchCoords && !b.searchCoords) ||\r\n            (a.searchCoords?.latitude === b.searchCoords?.latitude &&\r\n              a.searchCoords?.longitude === b.searchCoords?.longitude))\r\n        );\r\n      };\r\n\r\n      if (!isLoadMore && areFiltersEqual(currentFilters, lastFetchedFilters)) {\r\n        return;\r\n      }\r\n\r\n      setLastFetchedFilters(currentFilters);\r\n      setIsLoading(true);\r\n\r\n      try {\r\n        const params = new URLSearchParams({\r\n          page: page.toString(),\r\n          pageSize: entriesPerPage.toString(),\r\n          ...(projectTypeId ? { projectTypeId: projectTypeId.toString() } : {}),\r\n          ...Object.fromEntries(\r\n            Object.entries(selectedButtons).map(([key, value]) => [\r\n              key,\r\n              value.join(\",\"),\r\n            ])\r\n          ),\r\n        });\r\n\r\n        if (bounds) {\r\n          params.append(\"minLat\", bounds.getSouthWest().lat().toString());\r\n          params.append(\"maxLat\", bounds.getNorthEast().lat().toString());\r\n          params.append(\"minLng\", bounds.getSouthWest().lng().toString());\r\n          params.append(\"maxLng\", bounds.getNorthEast().lng().toString());\r\n        }\r\n\r\n        if (searchCoords) {\r\n          params.append(\"latitude\", searchCoords.latitude.toString());\r\n          params.append(\"longitude\", searchCoords.longitude.toString());\r\n        }\r\n\r\n        const response = await fetch(`/api/realEstate?${params.toString()}`);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error fetching projects: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        const newProjects: ProjectView[] = data.projects;\r\n\r\n        setProjects((prev) =>\r\n          isLoadMore\r\n            ? [\r\n                ...prev,\r\n                ...newProjects.filter(\r\n                  (p) => !prev.some((prop) => prop.id === p.id)\r\n                ),\r\n              ]\r\n            : newProjects\r\n        );\r\n\r\n        setTotalEntries(data.totalEntries);\r\n      } catch (error: any) {\r\n        if (error.name !== \"AbortError\") {\r\n          setErrorProjects(error.message || \"Error desconocido\");\r\n        }\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [\r\n      entriesPerPage,\r\n      isLoading,\r\n      selectedButtons,\r\n      projectTypeId,\r\n      showMap,\r\n      bounds,\r\n      searchCoords,\r\n    ]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n    pageRef.current = 1;\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      fetchProjects(false, 1, showMap && bounds !== null ? bounds : undefined);\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [selectedButtons, projectTypeId, showMap, bounds, searchCoords]);\r\n\r\n  const fetchMoreProjects = useCallback(() => {\r\n    if (isLoading) return;\r\n\r\n    setIsLoading(true);\r\n\r\n    setCurrentPage((prevPage) => {\r\n      const nextPage = prevPage + 1;\r\n\r\n      fetchProjects(\r\n        true,\r\n        nextPage,\r\n        showMap && bounds !== null ? bounds : undefined\r\n      ).finally(() => setIsLoading(false));\r\n\r\n      return nextPage;\r\n    });\r\n  }, [isLoading, fetchProjects, showMap, bounds]);\r\n\r\n  return {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreProjects,\r\n    resetProjects,\r\n    isLoading,\r\n    errorProjects,\r\n  };\r\n}\r\n"
      },
      "requests": {
        "usePendingRequests.ts": "import { useState, useEffect } from \"react\";\r\nimport { Request } from \"@/lib/definitios\";\r\n\r\nexport const usePendingRequests = () => {\r\n  const [requests, setRequests] = useState<Request[]>([]);\r\n  const [isLoadingRequests, setIsLoadingRequests] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const eventSource = new EventSource(\"/api/requests/stream\");\r\n\r\n    eventSource.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      if (data.type === \"newRequests\") {\r\n        setRequests(() => {\r\n          return data.data;\r\n        });\r\n      }\r\n    };\r\n\r\n    eventSource.onerror = () => {\r\n      console.error(\"⚠️ Error en SSE\");\r\n      eventSource.close();\r\n    };\r\n\r\n    setIsLoadingRequests(false);\r\n\r\n    return () => {\r\n      eventSource.close();\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    requests,\r\n    isLoadingRequests,\r\n  };\r\n};\r\n",
        "useRequestApi.ts": "import { useState } from \"react\";\r\n\r\nexport const useRequestApi = () => {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const processRequest = async (\r\n    requestId: number,\r\n    action: \"approve\" | \"reject\" | \"revision\",\r\n    message: string,\r\n    userEmail: string\r\n  ): Promise<boolean> => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n\r\n    if (!message.trim()) {\r\n      setError(\"El mensaje de respuesta es obligatorio.\");\r\n      setIsProcessing(false);\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const statusId = action === \"approve\" ? 2 : action === \"reject\" ? 3 : 4;\r\n\r\n      const response = await fetch(`/api/requests`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          id: requestId,\r\n          statusId,\r\n          responseMessage: message,\r\n          userEmail: userEmail,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || \"Error al procesar la solicitud\");\r\n      }\r\n\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"Error al procesar la solicitud:\", err.message);\r\n      setError(err.message || \"Error desconocido\");\r\n      return false;\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return { processRequest, isProcessing, error };\r\n};\r\n",
        "useRequests.ts": "import { useState, useEffect } from \"react\";\r\nimport { Request } from \"@/lib/definitios\";\r\n\r\nexport const useRequests = (\r\n  currentPage: number,\r\n  entriesPerPage: number,\r\n  searchTerm: string,\r\n  refreshTrigger: number\r\n) => {\r\n  const [requests, setRequests] = useState<Request[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [isLoadingRequests, setIsLoadingRequests] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      setIsLoadingRequests(true);\r\n      try {\r\n        const response = await fetch(\r\n          `/api/requests?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\r\n            searchTerm\r\n          )}`\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\"Error fetching requests\");\r\n        }\r\n        const data = await response.json();\r\n        setRequests(data.requests);\r\n        setTotalEntries(data.totalEntries);\r\n      } catch (error) {\r\n        console.error(\"Error fetching requests:\", error);\r\n      } finally {\r\n        setIsLoadingRequests(false);\r\n      }\r\n    };\r\n    fetchRequests();\r\n  }, [currentPage, entriesPerPage, searchTerm, refreshTrigger]);\r\n\r\n  return { requests, totalEntries, isLoadingRequests };\r\n};\r\n",
        "useRequestValidation.ts": "import { useState } from \"react\";\r\n\r\nexport const useRequestValidation = () => {\r\n  const [errors, setErrors] = useState<{\r\n    messageError: string;\r\n    actionTypeError: string;\r\n  }>({\r\n    messageError: \"\",\r\n    actionTypeError: \"\",\r\n  });\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: string) => {\r\n    switch (fieldName) {\r\n      case \"messageError\":\r\n        return value.trim() ? \"\" : \"El mensaje de respuesta es obligatorio.\";\r\n      case \"actionTypeError\":\r\n        return [\"approve\", \"reject\", \"revision\"].includes(value)\r\n          ? \"\"\r\n          : \"Debe seleccionar un estado válido.\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: string) => {\r\n    const errorMessage = getErrorMessage(fieldName, value);\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: errorMessage,\r\n    }));\r\n  };\r\n\r\n  const validateFields = (message: string, actionType: string) => {\r\n    const newErrors = {\r\n      messageError: getErrorMessage(\"messageError\", message),\r\n      actionTypeError: getErrorMessage(\"actionTypeError\", actionType),\r\n    };\r\n\r\n    setErrors(newErrors);\r\n\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n"
      },
      "roles": {
        "usePermissions.ts": "import { useState, useEffect } from \"react\";\r\nimport { Permission } from \"@/lib/definitios\";\r\n\r\nexport const usePermissions = () => {\r\n  const [permissions, setPermissions] = useState<Permission[]>([]);\r\n  const [isLoadingPermissions, setIsLoadingPermissions] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchPermissions = async () => {\r\n      setIsLoadingPermissions(true);\r\n      try {\r\n        const response = await fetch(\"/api/roles/permissions\");\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error en la busqueda de permisos: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        setPermissions(data.permission);\r\n      } catch (error) {\r\n        console.error(\"Error en la busqueda de permisos:\", error);\r\n      } finally {\r\n        setIsLoadingPermissions(false);\r\n      }\r\n    };\r\n\r\n    fetchPermissions();\r\n  }, []);\r\n\r\n  return { permissions, isLoadingPermissions };\r\n};\r\n",
        "useRoleApi.ts": "import { useState } from \"react\";\r\nimport { Role } from \"@/lib/definitios\";\r\n\r\nexport const useRoleApi = () => {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const submitRole = async (\r\n    role: Role,\r\n    action: \"register\" | \"edit\" | \"delete\"\r\n  ): Promise<boolean> => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const method =\r\n        action === \"delete\" ? \"DELETE\" : action === \"edit\" ? \"PUT\" : \"POST\";\r\n\r\n      const response = await fetch(\"/api/roles\", {\r\n        method,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(role),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || \"Error al procesar el rol\");\r\n      }\r\n\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"Error al procesar el rol:\", err.message);\r\n      setError(err.message || \"Error desconocido\");\r\n      return false;\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return { submitRole, isProcessing, error };\r\n};\r\n",
        "useRoles.ts": "import { useState, useEffect } from \"react\";\r\nimport { Role } from \"@/lib/definitios\";\r\n\r\nexport const useRoles = (\r\n  currentPage: number,\r\n  entriesPerPage: number,\r\n  searchTerm: string\r\n) => {\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [isLoadingRoles, setIsLoadingRoles] = useState(true);\r\n\r\n  const fetchRoles = async () => {\r\n    setIsLoadingRoles(true);\r\n    try {\r\n      const response = await fetch(\r\n        `/api/roles?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\r\n          searchTerm\r\n        )}`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error fetching roles: ${response.statusText}`);\r\n      }\r\n      const data = await response.json();\r\n      setRoles(data.roles);\r\n      setTotalEntries(data.totalEntries);\r\n    } catch (error) {\r\n      console.error(\"Error fetching roles:\", error);\r\n    } finally {\r\n      setIsLoadingRoles(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n  }, [currentPage, entriesPerPage, searchTerm]);\r\n\r\n  return { roles, totalEntries, isLoadingRoles, refetchRoles: fetchRoles };\r\n};\r\n",
        "useRoleValidation.ts": "import { useState } from \"react\";\r\nimport { useCheckName } from \"../checkName/useCheckName\";\r\n\r\nexport const useRoleValidation = (role: any, isEdit: boolean) => {\r\n  const [errors, setErrors] = useState({\r\n    nameError: \"\",\r\n    permissionsError: \"\",\r\n  });\r\n\r\n  const { checkName } = useCheckName();\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"nameError\":\r\n        return !value ? \"El nombre del rol es obligatorio.\" : \"\";\r\n      case \"permissionsError\":\r\n        return !value || value.length === 0\r\n          ? \"El rol debe tener al menos un permiso asignado.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\r\n    let errorMessage = getErrorMessage(fieldName, value);\r\n\r\n    if (fieldName === \"nameError\" && value) {\r\n      const total = await checkName(\r\n        \"role\",\r\n        value,\r\n        isEdit ? role.id : undefined\r\n      );\r\n\r\n      if (total > 0) {\r\n        errorMessage = \"El nombre del rol ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: errorMessage,\r\n    }));\r\n  };\r\n\r\n  const validateFields = async () => {\r\n    const newErrors: typeof errors = {\r\n      nameError: getErrorMessage(\"nameError\", role.name),\r\n      permissionsError: getErrorMessage(\"permissionsError\", role.permissions),\r\n    };\r\n\r\n    if (role.name) {\r\n      const total = await checkName(\r\n        \"role\",\r\n        role.name,\r\n        isEdit ? role.id : undefined\r\n      );\r\n\r\n      if (total > 0) {\r\n        newErrors.nameError = \"El nombre del rol ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n"
      },
      "s3": {
        "useDeleteImagesS3.ts": "import { useState, useCallback } from \"react\";\r\nimport { extractS3KeyFromUrl } from \"@/utils/extractS3KeyFromUrl\";\r\n\r\nexport function useDeleteImagesS3() {\r\n  const [deleteStatus, setDeleteStatus] = useState<string | null>(null);\r\n  const [deleteProgress, setDeleteProgress] = useState<number>(0);\r\n\r\n  const deleteImages = useCallback(async (imageUrls: string[]) => {\r\n    if (imageUrls.length === 0) {\r\n      console.warn(\"⚠️ No se proporcionaron imágenes para eliminar.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setDeleteStatus(\"Eliminando imágenes...\");\r\n      setDeleteProgress(0);\r\n\r\n      const deleteResults = await Promise.allSettled(\r\n        imageUrls.map(async (url, index) => {\r\n          const s3Key = extractS3KeyFromUrl(url);\r\n          if (!s3Key) {\r\n            console.warn(\r\n              `❌ No se pudo extraer la clave de S3 de la URL: ${url}`\r\n            );\r\n            return null;\r\n          }\r\n\r\n          const response = await fetch(\"/api/s3/projects/images/delete\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ key: s3Key }),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error(`❌ Error al eliminar la imagen: ${s3Key}`);\r\n          }\r\n\r\n          setDeleteProgress(Math.round(((index + 1) / imageUrls.length) * 100));\r\n\r\n          return s3Key;\r\n        })\r\n      );\r\n\r\n      const successfulDeletes = deleteResults\r\n        .filter((result) => result.status === \"fulfilled\")\r\n        .map((result) => (result as PromiseFulfilledResult<string>).value);\r\n\r\n      const failedDeletes = deleteResults.filter(\r\n        (result) => result.status === \"rejected\"\r\n      );\r\n\r\n      if (failedDeletes.length > 0) {\r\n        console.warn(\r\n          \"❌ Algunas imágenes no se pudieron eliminar:\",\r\n          failedDeletes\r\n        );\r\n        setDeleteStatus(\"Algunas imágenes no se pudieron eliminar.\");\r\n      } else {\r\n        setDeleteStatus(\"Imágenes eliminadas satisfactoriamente.\");\r\n      }\r\n\r\n      return successfulDeletes;\r\n    } catch (error) {\r\n      console.error(\"❌ Error al eliminar imágenes:\", error);\r\n      setDeleteStatus(\"Error al eliminar imágenes.\");\r\n      throw error;\r\n    } finally {\r\n      setDeleteProgress(100);\r\n    }\r\n  }, []);\r\n\r\n  return { deleteImages, deleteStatus, deleteProgress };\r\n}\r\n",
        "useS3ImagesApi.ts": "import { useState, useCallback } from \"react\";\r\nimport { extractS3KeyFromUrl } from \"@/utils/extractS3KeyFromUrl\";\r\nimport { Media, ProjectMedia } from \"@/lib/definitios\";\r\n\r\nexport function useS3ImagesApi() {\r\n  const [status, setStatus] = useState<string | null>(null);\r\n  const [progress, setProgress] = useState<number>(0);\r\n\r\n  const processImage = async (file: File): Promise<File> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = (event) => {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n          const canvas = document.createElement(\"canvas\");\r\n          const maxWidth = 1200;\r\n          const maxHeight = 700;\r\n\r\n          let width = img.width;\r\n          let height = img.height;\r\n          if (width > maxWidth || height > maxHeight) {\r\n            if (width / height > maxWidth / maxHeight) {\r\n              width = maxWidth;\r\n              height = Math.round((maxWidth * img.height) / img.width);\r\n            } else {\r\n              height = maxHeight;\r\n              width = Math.round((maxHeight * img.width) / img.height);\r\n            }\r\n          }\r\n\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n\r\n          const ctx = canvas.getContext(\"2d\");\r\n          if (ctx) {\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n\r\n            canvas.toBlob(\r\n              (blob) => {\r\n                if (blob) {\r\n                  const webpFile = new File([blob], file.name, {\r\n                    type: \"image/webp\",\r\n                  });\r\n                  resolve(webpFile);\r\n                } else {\r\n                  reject(new Error(\"Error al procesar la imagen\"));\r\n                }\r\n              },\r\n              \"image/webp\",\r\n              0.75\r\n            );\r\n          }\r\n        };\r\n        img.onerror = () => reject(new Error(\"Error cargando la imagen\"));\r\n        img.src = event.target?.result as string;\r\n      };\r\n\r\n      reader.onerror = () => reject(new Error(\"Error leyendo el archivo\"));\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const uploadImages = useCallback(\r\n    async (\r\n      projectId: number,\r\n      media: Media[],\r\n      propertyTypeName: string\r\n    ): Promise<ProjectMedia[]> => {\r\n      const controller = new AbortController();\r\n      const signal = controller.signal;\r\n\r\n      try {\r\n        setStatus(\"Procesando y subiendo imágenes...\");\r\n        setProgress(0);\r\n\r\n        const processedMedia = await Promise.allSettled(\r\n          media.map(async (item, index) => {\r\n            const processedFile =\r\n              typeof item.file === \"string\"\r\n                ? null\r\n                : await processImage(item.file);\r\n\r\n            if (!processedFile) {\r\n              console.warn(\r\n                `🔹 Se omitió la subida de ${item.file} porque es una URL existente.`\r\n              );\r\n              return null;\r\n            }\r\n\r\n            const formData = new FormData();\r\n            formData.append(\"file\", processedFile);\r\n            formData.append(\r\n              \"path\",\r\n              `projects/images/${propertyTypeName}/${projectId}/${item.type}/`\r\n            );\r\n\r\n            const response = await fetch(\"/api/s3\", {\r\n              method: \"POST\",\r\n              body: formData,\r\n              signal,\r\n            });\r\n\r\n            if (!response.ok) {\r\n              throw new Error(\r\n                `Error al cargar la imagen: ${processedFile.name}`\r\n              );\r\n            }\r\n\r\n            const { url } = await response.json();\r\n\r\n            setProgress(Math.round(((index + 1) / media.length) * 100));\r\n\r\n            return {\r\n              url,\r\n              tag: item.tag,\r\n              description: item.description,\r\n              projectId,\r\n              commonArea:\r\n                item.category === \"commonArea\" ? item.idType : undefined,\r\n              imageType:\r\n                item.category === \"imageType\" ? item.idType : undefined,\r\n            } as ProjectMedia;\r\n          })\r\n        );\r\n\r\n        const successfulUploads = processedMedia\r\n          .filter((result) => result.status === \"fulfilled\")\r\n          .map(\r\n            (result) => (result as PromiseFulfilledResult<ProjectMedia>).value\r\n          );\r\n\r\n        const failedUploads = processedMedia.filter(\r\n          (result) => result.status === \"rejected\"\r\n        );\r\n\r\n        if (failedUploads.length > 0) {\r\n          console.warn(\r\n            \"⚠️ Algunas imágenes no se pudieron subir:\",\r\n            failedUploads\r\n          );\r\n          setStatus(\"Algunas imágenes no se pudieron subir.\");\r\n        } else {\r\n          setStatus(\"Imágenes subidas satisfactoriamente.\");\r\n        }\r\n\r\n        return successfulUploads;\r\n      } catch (error) {\r\n        console.error(\"🚨 Error al subir imágenes:\", error);\r\n        setStatus(\"Error al subir imágenes.\");\r\n        throw error;\r\n      } finally {\r\n        setProgress(100);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const deleteImages = useCallback(async (imageUrls: string[]) => {\r\n    if (imageUrls.length === 0) {\r\n      console.warn(\"⚠️ No se proporcionaron imágenes para eliminar.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setStatus(\"Eliminando imágenes...\");\r\n      setProgress(0);\r\n\r\n      const deleteResults = await Promise.allSettled(\r\n        imageUrls.map(async (url, index) => {\r\n          const s3Key = extractS3KeyFromUrl(url);\r\n          if (!s3Key) {\r\n            console.warn(\r\n              `❌ No se pudo extraer la clave de S3 de la URL: ${url}`\r\n            );\r\n            return null;\r\n          }\r\n\r\n          const response = await fetch(\"/api/s3\", {\r\n            method: \"DELETE\",\r\n            body: JSON.stringify({ key: s3Key }),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error(`❌ Error al eliminar la imagen: ${s3Key}`);\r\n          }\r\n\r\n          setProgress(Math.round(((index + 1) / imageUrls.length) * 100));\r\n\r\n          return s3Key;\r\n        })\r\n      );\r\n\r\n      const successfulDeletes = deleteResults\r\n        .filter((result) => result.status === \"fulfilled\")\r\n        .map((result) => (result as PromiseFulfilledResult<string>).value);\r\n\r\n      const failedDeletes = deleteResults.filter(\r\n        (result) => result.status === \"rejected\"\r\n      );\r\n\r\n      if (failedDeletes.length > 0) {\r\n        console.warn(\r\n          \"❌ Algunas imágenes no se pudieron eliminar:\",\r\n          failedDeletes\r\n        );\r\n        setStatus(\"Algunas imágenes no se pudieron eliminar.\");\r\n      } else {\r\n        setStatus(\"Imágenes eliminadas satisfactoriamente.\");\r\n      }\r\n\r\n      return successfulDeletes;\r\n    } catch (error) {\r\n      console.error(\"❌ Error al eliminar imágenes:\", error);\r\n      setStatus(\"Error al eliminar imágenes.\");\r\n      throw error;\r\n    } finally {\r\n      setProgress(100);\r\n    }\r\n  }, []);\r\n\r\n  return { uploadImages, deleteImages, status, progress };\r\n}\r\n",
        "useUploadImagesS3.ts": "import { useState, useCallback } from \"react\";\nimport { Media, ProjectMedia } from \"@/lib/definitios\";\n\nexport function useUploadImagesS3() {\n  const [uploadStatus, setUploadStatus] = useState<string | null>(null);\n  const [uploadProgress, setUploadProgress] = useState<number>(0);\n\n  const processImage = async (file: File): Promise<File> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = document.createElement(\"canvas\");\n          const maxWidth = 1200;\n          const maxHeight = 700;\n\n          let width = img.width;\n          let height = img.height;\n          if (width > maxWidth || height > maxHeight) {\n            if (width / height > maxWidth / maxHeight) {\n              width = maxWidth;\n              height = Math.round((maxWidth * img.height) / img.width);\n            } else {\n              height = maxHeight;\n              width = Math.round((maxHeight * img.width) / img.height);\n            }\n          }\n\n          canvas.width = width;\n          canvas.height = height;\n\n          const ctx = canvas.getContext(\"2d\");\n          if (ctx) {\n            ctx.drawImage(img, 0, 0, width, height);\n\n            canvas.toBlob(\n              (blob) => {\n                if (blob) {\n                  const webpFile = new File([blob], file.name, {\n                    type: \"image/webp\",\n                  });\n                  resolve(webpFile);\n                } else {\n                  reject(new Error(\"Error al procesar la imagen\"));\n                }\n              },\n              \"image/webp\",\n              0.75\n            );\n          }\n        };\n        img.onerror = () => reject(new Error(\"Error cargando la imagen\"));\n        img.src = event.target?.result as string;\n      };\n\n      reader.onerror = () => reject(new Error(\"Error leyendo el archivo\"));\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const uploadImages = useCallback(\n    async (\n      projectId: number,\n      media: Media[],\n      propertyTypeName: string\n    ): Promise<ProjectMedia[]> => {\n      const controller = new AbortController();\n      const signal = controller.signal;\n\n      try {\n        setUploadStatus(\"Procesando y cargando imágenes...\");\n        setUploadProgress(0);\n\n        const processedMedia = await Promise.allSettled(\n          media.map(async (item, index) => {\n            const processedFile =\n              typeof item.file === \"string\"\n                ? null\n                : await processImage(item.file);\n\n            if (!processedFile) {\n              console.warn(\n                `🔹 Se omitió la subida de ${item.file} porque es una URL existente.`\n              );\n              return null;\n            }\n\n            const formData = new FormData();\n            formData.append(\"file\", processedFile);\n            formData.append(\n              \"path\",\n              `projects/images/${propertyTypeName}/${projectId}/${item.type}/`\n            );\n\n            const response = await fetch(\"/api/s3/projects/images/upload\", {\n              method: \"POST\",\n              body: formData,\n              signal,\n            });\n\n            if (!response.ok) {\n              throw new Error(\n                `Error al cargar la imagen: ${\n                  typeof item.file === \"string\"\n                    ? \"URL existente\"\n                    : item.file.name\n                }`\n              );\n            }\n\n            const { url } = await response.json();\n\n            setUploadProgress(Math.round(((index + 1) / media.length) * 100));\n\n            return {\n              url,\n              tag: item.tag,\n              description: item.description,\n              projectId,\n              commonArea:\n                item.category === \"commonArea\" ? item.idType : undefined,\n              imageType:\n                item.category === \"imageType\" ? item.idType : undefined,\n            } as ProjectMedia;\n          })\n        );\n\n        const successfulUploads = processedMedia\n          .filter((result) => result.status === \"fulfilled\")\n          .map(\n            (result) => (result as PromiseFulfilledResult<ProjectMedia>).value\n          );\n\n        const failedUploads = processedMedia.filter(\n          (result) => result.status === \"rejected\"\n        );\n\n        if (failedUploads.length > 0) {\n          console.warn(\"Algunas imágenes no se pudieron subir:\", failedUploads);\n          setUploadStatus(\"Algunas imágenes no se pudieron subir.\");\n        } else {\n          setUploadStatus(\"Imágenes subidas satisfactoriamente.\");\n        }\n\n        return successfulUploads;\n      } catch (error) {\n        console.error(\"Error al subir imágenes:\", error);\n        setUploadStatus(\"Error al subir imágenes.\");\n        throw error;\n      } finally {\n        setUploadProgress(100);\n      }\n    },\n    []\n  );\n\n  return { uploadImages, uploadStatus, uploadProgress };\n}\n"
      },
      "useBodyOverflow .ts": "import { useEffect } from \"react\";\n\nexport const useBodyOverflow = (isOpen: boolean) => {\n  useEffect(() => {\n    document.body.style.overflow = isOpen ? \"hidden\" : \"auto\";\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n};\n",
      "useIsLgUp.ts": "import { useEffect, useState } from \"react\";\r\n\r\nexport function useIsLgUp() {\r\n  const [isLgUp, setIsLgUp] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkScreen = () => {\r\n      setIsLgUp(window.innerWidth >= 1024);\r\n    };\r\n\r\n    checkScreen();\r\n    window.addEventListener(\"resize\", checkScreen);\r\n\r\n    return () => window.removeEventListener(\"resize\", checkScreen);\r\n  }, []);\r\n\r\n  return isLgUp;\r\n}\r\n",
      "user": {
        "useGetMyProjects.ts": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\n\r\ninterface UseMyProjectsOptions {\r\n  entriesPerPage: number;\r\n  statusProject: \"pendiente\" | \"aceptado\" | \"revision\";\r\n}\r\n\r\nexport function useGetMyProjects({\r\n  entriesPerPage,\r\n  statusProject,\r\n}: UseMyProjectsOptions) {\r\n  const [projects, setProjects] = useState<ProjectSummary[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\r\n\r\n  const statusMap = {\r\n    pendiente: \"1\",\r\n    aceptado: \"5\",\r\n    revision: \"4\",\r\n  };\r\n\r\n  const resetProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n  }, []);\r\n\r\n  const fetchMyProjects = useCallback(\r\n    async (isLoadMore = false, page = 1) => {\r\n      setIsLoading(true);\r\n      const controller = new AbortController();\r\n      const signal = controller.signal;\r\n\r\n      try {\r\n        const params = new URLSearchParams({\r\n          page: page.toString(),\r\n          pageSize: entriesPerPage.toString(),\r\n          statusProject: statusMap[statusProject],\r\n        });\r\n\r\n        const response = await fetch(`/api/user?${params.toString()}`, {\r\n          signal,\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error al obtener tus propiedades: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        const newProjects: ProjectSummary[] = data.projects;\r\n\r\n        setProjects((prev) =>\r\n          isLoadMore\r\n            ? [\r\n                ...prev,\r\n                ...newProjects.filter(\r\n                  (p) => !prev.some((prop) => prop.id === p.id)\r\n                ),\r\n              ]\r\n            : newProjects\r\n        );\r\n\r\n        setTotalEntries(data.totalEntries);\r\n      } catch (error: any) {\r\n        if (error.name !== \"AbortError\") {\r\n          setErrorProjects(error.message || \"Error desconocido\");\r\n        }\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n\r\n      return () => controller.abort();\r\n    },\r\n    [entriesPerPage, statusProject]\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetchMyProjects(false, 1);\r\n  }, [statusProject]);\r\n\r\n  const fetchMoreMyProjects = useCallback(() => {\r\n    if (!isLoading) {\r\n      const nextPage = currentPage + 1;\r\n      setCurrentPage(nextPage);\r\n      fetchMyProjects(true, nextPage);\r\n    }\r\n  }, [currentPage, isLoading, fetchMyProjects]);\r\n\r\n  const refreshMyProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n    fetchMyProjects(false, 1);\r\n  }, [fetchMyProjects]);\r\n\r\n  return {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreMyProjects,\r\n    resetProjects,\r\n    refreshMyProjects,\r\n    isLoading,\r\n    errorProjects,\r\n  };\r\n}\r\n",
        "useUpdateUserProfile.ts": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface UpdateProfileInput {\r\n  identityDocument?: string;\r\n  names?: string;\r\n  lastnames?: string;\r\n  birthdate?: Date;\r\n  phoneNumber?: string;\r\n  genderId?: number;\r\n}\r\n\r\ninterface UseUpdateUserProfileResult {\r\n  updateUserProfile: (data: UpdateProfileInput) => Promise<boolean>;\r\n  loading: boolean;\r\n  error: string | null;\r\n  success: boolean;\r\n}\r\n\r\nexport function useUpdateUserProfile(): UseUpdateUserProfileResult {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const updateUserProfile = async (data: UpdateProfileInput) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/user/profile\", {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const { error } = await res.json();\r\n        throw new Error(error || \"Error al actualizar el perfil\");\r\n      }\r\n\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err: any) {\r\n      setError(err.message || \"Error inesperado\");\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { updateUserProfile, loading, error, success };\r\n}\r\n",
        "useUserProfile.ts": "\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { User, Gender } from \"@/lib/definitios\";\r\n\r\ninterface UseUserProfileResult {\r\n  user: User | null;\r\n  genders: Gender[];\r\n  loading: boolean;\r\n  error: string | null;\r\n}\r\n\r\nexport function useUserProfile(): UseUserProfileResult {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [genders, setGenders] = useState<Gender[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUserProfile = async () => {\r\n      try {\r\n        const res = await fetch(\"/api/user/profile\");\r\n        if (!res.ok) {\r\n          const { error } = await res.json();\r\n          throw new Error(error || \"Error al obtener el perfil\");\r\n        }\r\n\r\n        const data = await res.json();\r\n        setUser(data.user);\r\n        setGenders(data.genders || []);\r\n      } catch (err: any) {\r\n        setError(err.message || \"Error inesperado\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserProfile();\r\n  }, []);\r\n\r\n  return { user, genders, loading, error };\r\n}\r\n",
        "useUserProjectApi.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport function useUserProjectApi() {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const submitUserProject = async (\r\n    projectData: ProjectData | number,\r\n    action: \"create\" | \"edit\" | \"delete\"\r\n  ): Promise<number | boolean | null> => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n\r\n    try {\r\n      let method = \"POST\";\r\n      let body: string | undefined = JSON.stringify(projectData);\r\n      let url = \"/api/user\";\r\n\r\n      if (action === \"edit\") {\r\n        method = \"PUT\";\r\n      } else if (action === \"delete\") {\r\n        method = \"DELETE\";\r\n        body = undefined;\r\n        url = `/api/user?id=${projectData}`;\r\n      }\r\n\r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || \"Error al procesar tu propiedad.\");\r\n      }\r\n\r\n      if (action === \"create\") {\r\n        const data = await response.json();\r\n        return data.projectId;\r\n      }\r\n\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"Error al procesar tu propiedad:\", err.message);\r\n      setError(err.message || \"Error desconocido\");\r\n      return null;\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return { submitUserProject, isProcessing, error };\r\n}\r\n"
      },
      "userDarkMode.ts": "import { useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\" | \"auto\";\n\nexport default function useDarkMode() {\n  const [theme, setTheme] = useState<Theme>(\"auto\");\n\n  useEffect(() => {\n    const savedTheme = (localStorage.getItem(\"theme\") as Theme) || \"auto\";\n    applyTheme(savedTheme);\n    setTheme(savedTheme);\n\n    const handleSystemChange = (e: MediaQueryListEvent) => {\n      if (theme === \"auto\") {\n        applyTheme(e.matches ? \"dark\" : \"light\");\n      }\n    };\n\n    window\n      .matchMedia(\"(prefers-color-scheme: dark)\")\n      .addEventListener(\"change\", handleSystemChange);\n\n    return () => {\n      window\n        .matchMedia(\"(prefers-color-scheme: dark)\")\n        .removeEventListener(\"change\", handleSystemChange);\n    };\n  }, [theme]);\n\n  const applyTheme = (newTheme: Theme) => {\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\",\n    ).matches;\n    const themeToApply =\n      newTheme === \"auto\" ? (prefersDark ? \"dark\" : \"light\") : newTheme;\n\n    document.documentElement.classList.remove(\"light\", \"dark\");\n    document.documentElement.classList.add(themeToApply);\n  };\n\n  const toggleTheme = (newTheme: Theme) => {\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    applyTheme(newTheme);\n  };\n\n  return { theme, toggleTheme };\n}\n",
      "users": {
        "useCheckEmail.ts": "import { useCallback, useState } from \"react\";\r\n\r\nexport function useCheckEmail() {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const checkEmailExists = useCallback(\r\n    async (email: string): Promise<number | null> => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const response = await fetch(\r\n          `/api/users/check-email?email=${encodeURIComponent(email)}`,\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data?.id ?? null;\r\n      } catch (err) {\r\n        console.error(\"Error al verificar email:\", err);\r\n        setError(\"Error al verificar el correo electrónico.\");\r\n        return null;\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  return { checkEmailExists, loading, error };\r\n}\r\n",
        "useGetUserProjects.ts": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\nimport { useDebouncedCallback } from \"use-debounce\";\r\n\r\ninterface UseUserProjectsOptions {\r\n  userId: number;\r\n  entriesPerPage: number;\r\n}\r\n\r\nexport function useGetUserProjects({\r\n  userId,\r\n  entriesPerPage,\r\n}: UseUserProjectsOptions) {\r\n  const [projects, setProjects] = useState<ProjectSummary[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\r\n\r\n  const debouncedSearch = useDebouncedCallback((term: string) => {\r\n    setSearchTerm(term);\r\n    resetProjects();\r\n  }, 300);\r\n\r\n  const resetProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n  }, []);\r\n\r\n  const fetchUserProjects = useCallback(\r\n    async (isLoadMore = false, page = 1) => {\r\n      if (isLoading || userId <= 0) return;\r\n      setIsLoading(true);\r\n      const controller = new AbortController();\r\n      const signal = controller.signal;\r\n\r\n      try {\r\n        const params = new URLSearchParams({\r\n          userId: userId.toString(),\r\n          page: page.toString(),\r\n          pageSize: entriesPerPage.toString(),\r\n          searchTerm,\r\n        });\r\n\r\n        const response = await fetch(\r\n          `/api/users/projects?${params.toString()}`,\r\n          { signal }\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error fetching user projects: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        const newProjects: ProjectSummary[] = data.projects;\r\n\r\n        setProjects((prev) =>\r\n          isLoadMore\r\n            ? [\r\n                ...prev,\r\n                ...newProjects.filter(\r\n                  (p) => !prev.some((prop) => prop.id === p.id)\r\n                ),\r\n              ]\r\n            : newProjects\r\n        );\r\n\r\n        setTotalEntries(data.totalEntries);\r\n      } catch (error: any) {\r\n        if (error.name !== \"AbortError\") {\r\n          setErrorProjects(error.message || \"Error desconocido\");\r\n        }\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n\r\n      return () => controller.abort();\r\n    },\r\n    [entriesPerPage, isLoading, searchTerm, userId]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      fetchUserProjects(false, 1);\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [searchTerm, userId]);\r\n\r\n  const fetchMoreUserProjects = useCallback(() => {\r\n    if (!isLoading) {\r\n      const nextPage = currentPage + 1;\r\n      setCurrentPage(nextPage);\r\n      fetchUserProjects(true, nextPage);\r\n    }\r\n  }, [currentPage, isLoading, fetchUserProjects]);\r\n\r\n  const refreshUserProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n    fetchUserProjects(false, 1);\r\n  }, [fetchUserProjects]);\r\n\r\n  return {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreUserProjects,\r\n    debouncedSearch,\r\n    resetProjects,\r\n    refreshUserProjects,\r\n    isLoading,\r\n    errorProjects,\r\n  };\r\n}\r\n",
        "useSearchEmails.ts": "import { useState, useCallback } from \"react\";\r\n\r\ninterface EmailResult {\r\n  id: number;\r\n  email: string;\r\n}\r\n\r\nexport function useSearchEmails() {\r\n  const [emails, setEmails] = useState<EmailResult[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchEmails = useCallback(async (searchTerm: string) => {\r\n    if (!searchTerm.trim()) {\r\n      setEmails([]);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `/api/users/emails?searchTerm=${encodeURIComponent(searchTerm)}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error: ${response.statusText}`);\r\n      }\r\n\r\n      const data: EmailResult[] = await response.json();\r\n      setEmails(data);\r\n    } catch (err) {\r\n      console.error(\"Error al buscar emails:\", err);\r\n      setError(\"Error al obtener los correos electrónicos.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return { emails, loading, error, fetchEmails };\r\n}\r\n",
        "useUserApi.ts": "import { useState } from \"react\";\nimport { UserData } from \"@/lib/definitios\";\n\nexport const useUserApi = () => {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const submitUser = async (\n    user: UserData,\n    action: \"register\" | \"edit\"\n  ): Promise<boolean> => {\n    setIsProcessing(true);\n    setError(null);\n\n    try {\n      const method = action === \"edit\" ? \"PUT\" : \"POST\";\n\n      const response = await fetch(\"/api/users\", {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(user),\n      });\n\n      if (!response.ok) {\n        const { error } = await response.json();\n        throw new Error(error || \"Error al procesar el usuario\");\n      }\n\n      return true;\n    } catch (err: any) {\n      console.error(\"Error al procesar el usuario:\", err.message);\n      setError(err.message || \"Error desconocido\");\n      return false;\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return { submitUser, isProcessing, error };\n};\n",
        "useUsers.ts": "import { useState, useEffect, useCallback } from \"react\";\nimport { User } from \"@/lib/definitios\";\n\nexport const useUsers = (\n  currentPage: number,\n  entriesPerPage: number,\n  searchTerm: string\n) => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [totalEntries, setTotalEntries] = useState(0);\n  const [isLoadingUsers, setIsLoadingUsers] = useState(true);\n\n  const fetchUsers = useCallback(async () => {\n    setIsLoadingUsers(true);\n    try {\n      const response = await fetch(\n        `/api/users?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\n          searchTerm\n        )}`\n      );\n\n      if (!response.ok) {\n        throw new Error(`Error fetching users: ${response.statusText}`);\n      }\n      const data = await response.json();\n      setUsers(data.users);\n      setTotalEntries(data.totalEntries);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    } finally {\n      setIsLoadingUsers(false);\n    }\n  }, [currentPage, entriesPerPage, searchTerm]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  return { users, totalEntries, isLoadingUsers, refetchUsers: fetchUsers };\n};\n",
        "useUsersMetadata.ts": "import { useState, useEffect } from \"react\";\r\nimport { Role, Gender, MembershipSummary } from \"@/lib/definitios\";\r\n\r\nexport const useUsersMetadata = () => {\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [genders, setGenders] = useState<Gender[]>([]);\r\n  const [memberships, setMemberships] = useState<MembershipSummary[]>([]);\r\n  const [isLoadingUsersMetadata, setIsLoadingUsersMetadata] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchUsersMetadata = async () => {\r\n      setIsLoadingUsersMetadata(true);\r\n      try {\r\n        const response = await fetch(\"/api/users/metadata\");\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error en la busqueda de datos de usuario: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        setRoles(data.roles);\r\n        setGenders(data.genders);\r\n        setMemberships(data.memberships);\r\n      } catch (error) {\r\n        console.error(\"Error en la busqueda de datos de usuario:\", error);\r\n      } finally {\r\n        setIsLoadingUsersMetadata(false);\r\n      }\r\n    };\r\n\r\n    fetchUsersMetadata();\r\n  }, []);\r\n\r\n  return { roles, genders, memberships, isLoadingUsersMetadata };\r\n};\r\n",
        "useUserValidation.ts": "import { useState } from \"react\";\nimport { useCheckName } from \"../checkName/useCheckName\";\n\nexport const useUserValidation = (user: any, isEdit: boolean) => {\n  const [errors, setErrors] = useState({\n    namesError: \"\",\n    lastnamesError: \"\",\n    emailError: \"\",\n    phoneNumberError: \"\",\n    genderError: \"\",\n    roleError: \"\",\n    membershipError: \"\",\n  });\n  const { checkName } = useCheckName();\n\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\n    switch (fieldName) {\n      case \"namesError\":\n        return !value ? \"El nombre es obligatorio.\" : \"\";\n      case \"lastnamesError\":\n        return !value ? \"El apellido es obligatorio.\" : \"\";\n      case \"emailError\":\n        return !value\n          ? \"El correo electrónico es obligatorio.\"\n          : !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)\n            ? \"El correo electrónico no es válido.\"\n            : \"\";\n      case \"phoneNumberError\":\n        return !value\n          ? \"El número de teléfono es obligatorio.\"\n          : !/^\\d{10}$/.test(value)\n            ? \"El número de teléfono debe tener 10 dígitos.\"\n            : \"\";\n      case \"genderError\":\n        return !value ? \"El género es obligatorio.\" : \"\";\n      case \"roleError\":\n        return !value ? \"El rol es obligatorio.\" : \"\";\n      case \"membershipError\":\n        return !value ? \"La membresía es obligatoria.\" : \"\";\n      default:\n        return \"\";\n    }\n  };\n\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\n    let errorMessage = getErrorMessage(fieldName, value);\n\n    setErrors((prevErrors) => ({\n      ...prevErrors,\n      [fieldName]: errorMessage,\n    }));\n  };\n\n  const validateFields = async () => {\n    const newErrors: typeof errors = {\n      namesError: getErrorMessage(\"namesError\", user.names),\n      lastnamesError: getErrorMessage(\"lastnamesError\", user.lastnames),\n      emailError: getErrorMessage(\"emailError\", user.email),\n      phoneNumberError: getErrorMessage(\"phoneNumberError\", user.phoneNumber),\n      genderError: getErrorMessage(\"genderError\", user.gender?.id),\n      roleError: getErrorMessage(\"roleError\", user.role?.id),\n      membershipError: getErrorMessage(\"membershipError\", user.membership?.id),\n    };\n\n    setErrors(newErrors);\n\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve(Object.values(newErrors).every((error) => error === \"\"));\n      }, 0);\n    });\n  };\n\n  return { errors, validateFields, validateField };\n};\n"
      }
    },
    "inmobiliaria": {
      "[id]": {
        "page.tsx": "import type { Metadata } from \"next\";\nimport { getProjectById } from \"@/app/data/serverProjectService\";\nimport ClientProperty from \"@/app/ui/realEstate/clientProperty\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport async function generateMetadata({\n  params,\n}: {\n  params: { id: string };\n}): Promise<Metadata> {\n  const id = Number(params.id);\n  const project = await getProjectById(id, false, false);\n\n  return {\n    title: project?.name ? `${project.name} | EdifiK` : \"Propiedad | EdifiK\",\n    description:\n      project?.shortDescription ||\n      \"Descubre esta increíble propiedad con EdifiK.\",\n    openGraph: {\n      title: project?.name || \"Propiedad en EdifiK\",\n      description:\n        project?.shortDescription || \"Propiedad destacada en EdifiK.\",\n      url: `http://edifik.co/inmobiliaria/${params.id}`,\n      siteName: \"EdifiK\",\n      type: \"website\",\n    },\n  };\n}\n\nexport default function PropertyPage({ params }: { params: { id: string } }) {\n  return <ClientProperty id={params.id} />;\n}\n"
      },
      "page.tsx": "import type { Metadata } from \"next\";\nimport ClientRealEstatePage from \"../ui/realEstate/clientRealStatePage\";\n\nexport const metadata: Metadata = {\n  title: \"Inmobiliaria | EdifiK\",\n  description:\n    \"Descubre propiedades en venta, arriendo y sobre planos con filtros, mapas, y toda la información que necesitas.\",\n};\n\nexport default function RealEstatePage() {\n  return <ClientRealEstatePage />;\n}\n"
    },
    "layout.tsx": "import { inter } from \"@/app/fonts/fonts\";\nimport { Providers } from \"./providers\";\nimport GoogleMapsProvider from \"./ui/googleMapsProvider\";\nimport LayoutWrapper from \"./ui/layoutWrapper\";\nimport type { Metadata } from \"next\";\nimport { BRAND } from \"@/src/config/brand\";\nimport \"./globals.css\";\n\nexport const metadata: Metadata = {\n  title: {\n    default: BRAND.name,\n    template: `%s | ${BRAND.name}`,\n  },\n  description: BRAND.description,\n  openGraph: {\n    siteName: BRAND.name,\n    url: BRAND.appUrl,\n    type: \"website\",\n  },\n};\n\nexport default function Layout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"es\">\n      <body\n        className={`${inter.className} flex min-h-screen flex-col bg-client-background antialiased`}\n      >\n        <Providers>\n          <GoogleMapsProvider>\n            <LayoutWrapper>\n              <main className=\"flex flex-col flex-grow gap-12\">{children}</main>\n            </LayoutWrapper>\n          </GoogleMapsProvider>\n        </Providers>\n      </body>\n    </html>\n  );\n}\n",
    "login": {
      "forget-password": {
        "page.tsx": "import type { Metadata } from \"next\";\nimport ClientForgetPasswordPage from \"@/app/ui/login/clientForgetPasswordPage\";\n\nexport const metadata: Metadata = {\n  title: \"Recuperar Contraseña | EdifiK\",\n  description:\n    \"Recupera el acceso a tu cuenta en EdifiK ingresando tu correo electrónico registrado.\",\n};\n\nexport default function RecoverPasswordPage() {\n  return <ClientForgetPasswordPage />;\n}\n"
      },
      "layout.tsx": "import { inter } from \"@/app/fonts/fonts\";\nimport { Providers } from \"../providers\";\n\nexport default function LoginLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <div\n      className={`${inter.className} min-h-screen bg-client-background antialiased`}\n    >\n      <Providers>{children}</Providers>\n    </div>\n  );\n}\n",
      "page.tsx": "import { Metadata } from \"next\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport Logo from \"../ui/header/logo\";\nimport LoginForm from \"../ui/login/loginForm\";\nimport AuthProviders from \"../ui/login/authProviders\";\n\nexport const metadata: Metadata = {\n  title: \"Iniciar Sesión | EdifiK\",\n  description:\n    \"Accede a tu cuenta para gestionar tus propiedades, proyectos y membresías en la plataforma inmobiliaria EdifiK.\",\n};\n\nexport default function LoginPage() {\n  return (\n    <div className=\"relative w-full\">\n      <div className=\"absolute inset-0 w-full h-screen sm:hidden\">\n        <Image\n          src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia4.webp\"\n          alt=\"Edificio moderno\"\n          fill\n          objectFit=\"cover\"\n          className=\"absolute inset-0 w-full h-full\"\n        />\n      </div>\n\n      <div className=\"relative flex sm:flex-row sm:items-center\">\n        <div className=\"w-full overflow-y-scroll sm:overflow-hidden sm:w-1/2 flex flex-col justify-center py-10 sm:py-0 px-6 sm:px-10 lg:px-16 space-y-8 lg:space-y-4 bg-client-background sm:bg-transparent sm:relative z-10 sm:z-0 rounded-lg sm:rounded-none m-4 sm:m-0 sm:min-h-screen\">\n          <div className=\"-translate-x-6\">\n            <Logo />\n          </div>\n\n          <h1 className=\"text-3xl font-bold text-client-text mb-2\">\n            Bienvenido a Edifik\n          </h1>\n\n          <p className=\"text-client-textSecondary\">\n            Accede a tu cuenta y descubre soluciones innovadoras para tu próximo\n            proyecto.\n          </p>\n\n          <div className=\"space-y-2\">\n            <LoginForm />\n            <AuthProviders />\n          </div>\n\n          <div className=\"flex flex-row justify-center items-center\">\n            <p className=\"text-client-textSecondary\">¿No tienes una cuenta?</p>\n\n            <Link\n              href=\"/login/register\"\n              className=\"ml-2 text-client-text transition hover:underline\"\n            >\n              Registrate\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"w-1/2 h-screen relative hidden sm:block\">\n          <Image\n            src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia4.webp\"\n            alt=\"Edificio moderno\"\n            fill\n            objectFit=\"cover\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "register": {
        "page.tsx": "import { Metadata } from \"next\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport Logo from \"@/app/ui/header/logo\";\nimport RegisterForm from \"@/app/ui/login/register/registerForm\";\nimport AuthProviders from \"@/app/ui/login/authProviders\";\n\nexport const metadata: Metadata = {\n  title: \"Crear Cuenta | EdifiK\",\n  description:\n    \"Regístrate en EdifiK y comienza a publicar tus propiedades o explorar nuestros proyectos inmobiliarios.\",\n};\n\nexport default function RegisterPage() {\n  return (\n    <div className=\"relative  w-full\">\n      <div className=\"absolute inset-0 w-full h-screen sm:hidden\">\n        <Image\n          src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia4.webp\"\n          alt=\"Edificio moderno\"\n          fill\n          objectFit=\"cover\"\n          className=\"absolute inset-0 w-full h-full\"\n        />\n      </div>\n\n      <div className=\"relative h-full flex sm:flex-row sm:items-center\">\n        <div className=\"w-full sm:w-1/2 flex flex-col justify-center py-10 sm:py-0 px-6 sm:px-10 lg:px-16 space-y-8 lg:space-y-4 bg-client-background sm:bg-transparent sm:relative z-10 sm:z-0 bg-opacity-10 sm:bg-opacity-100 rounded-lg sm:rounded-none m-4 sm:m-0 overflow-y-auto sm:min-h-screen\">\n          <div className=\"-translate-x-6\">\n            <Logo />\n          </div>\n\n          <h1 className=\"text-3xl font-bold text-client-text mb-2\">\n            Crea tu cuenta\n          </h1>\n\n          <p className=\"text-client-textSecondary mb-2\">\n            Únete y comienza a explorar nuevas oportunidades.\n          </p>\n\n          <div className=\"space-y-2\">\n            <RegisterForm />\n            <AuthProviders />\n          </div>\n\n          <div className=\"flex justify-center mt-4\">\n            <p className=\"text-client-textSecondary\">¿Ya tienes una cuenta?</p>\n            <Link\n              href=\"/login\"\n              className=\"ml-2 text-client-text transition hover:underline\"\n            >\n              Inicia sesión\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"hidden sm:block sm:w-1/2 h-screen fixed right-0 top-0\">\n          <Image\n            src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia4.webp\"\n            alt=\"Registro\"\n            fill\n            objectFit=\"cover\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"
      }
    },
    "membresias": {
      "page.tsx": "import { Metadata } from \"next\";\r\nimport ClientMembershipsPage from \"../ui/memberships/clientMembershipsPage\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Membresías | EdifiK\",\r\n  description:\r\n    \"Activa una membresía para publicar más propiedades, mejorar tu visibilidad y acceder a herramientas premium.\",\r\n};\r\n\r\nexport default function MembershipsPage() {\r\n  return <ClientMembershipsPage />;\r\n}\r\n"
    },
    "nosotros": {
      "page.tsx": "import { Metadata } from \"next\";\nimport HeroSection from \"@/app/ui/home/heroSection\";\nimport AboutSection from \"@/app/ui/about/aboutSection\";\nimport Timeline from \"../ui/about/timeline\";\nimport TeamSection from \"../ui/about/teamSection\";\nimport StatsSection from \"../ui/about/statsSection\";\nimport VisionMisionSection from \"@/app/ui/about/visionMisionSection\";\nimport SocialSection from \"@/app/ui/about/socialSection\";\nimport CertificationSenction from \"@/app/ui/about/certificationSection\";\n\nexport const metadata: Metadata = {\n  title: \"¿Quiénes somos? | EdifiK\",\n  description:\n    \"Conoce al equipo detrás de EdifiK y nuestra misión de transformar el mercado inmobiliario en Colombia.\",\n};\n\nexport default function AboutUsPage() {\n  return (\n    <>\n      <HeroSection\n        srcImage=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/QuintasLago/QuintasLago6.webp\"\n        altImage=\"Vista del interior de un proyecto de EdifiK\"\n        title=\"Sobre Nosotros\"\n        description=\"Conoce más sobre EdifiK y nuestro compromiso con la calidad y la innovación.\"\n      />\n\n      <div className=\"flex flex-col flex-grow bg-client-backgroundAlt\">\n        <div className=\"mb-12\">\n          <AboutSection />\n        </div>\n\n        <div className=\"mb-12\">\n          <Timeline />\n        </div>\n\n        {/*\n        <TeamSection />\n        */}\n\n        <div className=\"mb-12\">\n          <StatsSection />\n        </div>\n\n        <VisionMisionSection />\n\n        <SocialSection />\n\n        {/*\n        <CertificationSenction />\n        */}\n      </div>\n    </>\n  );\n}\n"
    },
    "page.tsx": "import { Metadata } from \"next\";\nimport HeroSection from \"./ui/home/heroSection\";\nimport WordCarousel from \"./ui/home/wordCarousel\";\nimport ProjectsSection from \"./ui/home/projectsSection\";\nimport AboutUsSection from \"./ui/home/abaoutUsSection\";\nimport RealEstateSection from \"./ui/home/realEstateSection\";\nimport TestimonialCarousel from \"./ui/home/testimonialCarousel\";\nimport ModelsSection from \"./ui/home/modelsSection\";\n\nexport const metadata: Metadata = {\n  title: \"Inicio | EdifiK\",\n  description:\n    \"Explora las mejores propiedades, proyectos y servicios inmobiliarios en un solo lugar con EdifiK.\",\n};\n\nexport default function Home() {\n  return (\n    <>\n      <HeroSection\n        srcImage=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/Modelos.webp\"\n        altImage=\"Imagen Inicio\"\n        title=\"Diseñamos sueños, Construimos realidades\"\n        description=\"Fusionamos diseño, emoción y estrategia para ayudarte a elegir y construir el espacio perfecto\"\n        objectPosition=\"top\"\n      />\n\n      <WordCarousel />\n\n      <ProjectsSection />\n\n      <AboutUsSection />\n\n      <RealEstateSection />\n\n      <div className=\"px-6 sm:px-20 lg:px-28\">\n        <TestimonialCarousel />\n      </div>\n\n      <div className=\"px-6\">\n        <ModelsSection />\n      </div>\n    </>\n  );\n}\n",
    "providers.tsx": "\"use client\";\nimport { SessionProvider } from \"next-auth/react\";\nimport { Session } from \"next-auth\";\n\nexport function Providers({\n  children,\n  session,\n}: {\n  children: React.ReactNode;\n  session?: Session | null;\n}) {\n  return <SessionProvider session={session}>{children}</SessionProvider>;\n}\n",
    "proyectos": {
      "[id]": {
        "page.tsx": "import type { Metadata } from \"next\";\nimport ClientProject from \"@/app/ui/projects/clientProject\";\nimport { getProjectById } from \"@/app/data/serverProjectService\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport async function generateMetadata({\n  params,\n}: {\n  params: { id: string };\n}): Promise<Metadata> {\n  const id = Number(params.id);\n  const project = await getProjectById(id, true, false);\n\n  return {\n    title: project?.name ? `${project.name} | EdifiK` : \"Proyecto | EdifiK\",\n    description:\n      project?.shortDescription ||\n      \"Conoce este proyecto inmobiliario exclusivo de EdifiK.\",\n    openGraph: {\n      title: project?.name || \"Proyecto en EdifiK\",\n      description: project?.shortDescription || \"Proyecto destacado en EdifiK.\",\n      url: `http://edifik.co/proyectos/${params.id}`,\n      siteName: \"EdifiK\",\n      type: \"website\",\n    },\n  };\n}\n\nexport default function ProjectPage({ params }: { params: { id: string } }) {\n  return <ClientProject id={params.id} />;\n}\n"
      },
      "page.tsx": "import type { Metadata } from \"next\";\r\nimport ClientProjectsPage from \"../ui/projects/clientProjectPage\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Nuestros Proyectos | EdifiK\",\r\n  description:\r\n    \"Conoce los proyectos inmobiliarios desarrollados por EdifiK, pensados para transformar espacios con calidad, diseño y visión de futuro.\",\r\n};\r\n\r\nexport default function ProjectPage() {\r\n  return <ClientProjectsPage />;\r\n}\r\n"
    },
    "ui": {
      "about": {
        "aboutSection.tsx": "import Image from \"next/image\";\r\n\r\nexport default function AboutSection() {\r\n  return (\r\n    <section className=\"p-4 lg:px-10 lg:pb-10 mx-auto grid grid-cols-1 gap-10 lg:grid-cols-2 text-client-text bg-client-background\">\r\n      <div className=\"md:mx-8 text-center lg:text-left\">\r\n        <h1 className=\"mb-10 text-3xl font-bold text-client-text lg:text-5xl\">\r\n          Te damos la bienvenida a EdifiK\r\n        </h1>\r\n\r\n        <h2 className=\"mb-10 text-xl font-medium lg:text-4xl\">\r\n          ¿Quiénes Somos?\r\n        </h2>\r\n\r\n        <p className=\"text-justify text-sm lg:text-base text-client-textPlaceholder\">\r\n          Somos EdifiK, tu socio ideal en diseño y desarrollo de proyectos\r\n          arquitectónicos. Especializados en metodología BIM, nos dedicamos a\r\n          crear y planificar cada etapa de tu proyecto con precisión y\r\n          eficiencia. Desde el modelado y renderizado hasta la planificación\r\n          detallada, garantizamos soluciones innovadoras que transforman tus\r\n          ideas en realidades tangibles. Con EdifiK, cada proyecto es una\r\n          oportunidad para plasmar tus ideas y volverlas realidad.\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"mx-auto grid grid-cols-1 justify-center gap-5 text-center\">\r\n        <Image\r\n          className=\"self-center object-cover rounded-lg\"\r\n          src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/about/QuienesSomos.webp\"\r\n          alt=\"Arquitecto trabajando\"\r\n          width={400}\r\n          height={300}\r\n          priority\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "certificationCard.tsx": "import Image from \"next/image\";\n\ninterface CertificationCardProps {\n  title: string;\n  description: string;\n  imageSrc: string;\n  bgColor: string;\n}\n\nexport default function CertificationCard({\n  title,\n  description,\n  imageSrc,\n  bgColor,\n}: CertificationCardProps) {\n  return (\n    <div className=\"col-span-3 mx-auto flex w-full md:col-span-1\">\n      <div\n        className={`flex w-full flex-col justify-between rounded-lg border px-6 py-8 text-center shadow ${bgColor} border-white`}\n      >\n        <div className=\"px-2 py-0\">\n          <h3 className=\"mb-5 text-center text-white text-xl font-semibold uppercase leading-6 tracking-wider md:text-3xl\">\n            {title}\n          </h3>\n\n          <p className=\"text-justify font-light text-client-primaryLight\">\n            {description}\n          </p>\n        </div>\n\n        <div className=\"mt-8 justify-center text-center\">\n          <Image\n            src={imageSrc}\n            alt={`Certificado de ${title}`}\n            width={500}\n            height={150}\n            className=\"mx-auto\"\n            priority\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "certificationSection.tsx": "import CertificationCard from \"./certificationCard\";\r\n\r\nexport default function CertificationSenction() {\r\n  return (\r\n    <section className=\"relative mx-auto bg-client-backgroundLight px-4 md:px-20 py-8 md:py-12 lg:py-16\">\r\n      <div className=\"max-w-3xl text-center md:mx-auto\">\r\n        <h2 className=\"text-center text-2xl font-semibold text-client-white md:text-4xl\">\r\n          Estamos Certificados\r\n        </h2>\r\n\r\n        <hr className=\"mx-auto my-2 w-1/3 border-t border-white\" />\r\n      </div>\r\n\r\n      <div className=\"mt-14 flex items-stretch justify-center md:mt-20\">\r\n        <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n          <CertificationCard\r\n            title=\"BIM\"\r\n            description=\"Certificación en metodología BIM, garantizando calidad y precisión.\"\r\n            imageSrc=\"/images/BIM-Logo.png\"\r\n            bgColor=\"bg-client-secondaryLight\"\r\n          />\r\n\r\n          <CertificationCard\r\n            title=\"Certificación 2\"\r\n            description=\"Certificación en construcción ecológica.\"\r\n            imageSrc=\"/images/BIM-Logo.png\"\r\n            bgColor=\"bg-client-accentLight\"\r\n          />\r\n\r\n          <CertificationCard\r\n            title=\"Certificación 3\"\r\n            description=\"Reconocimiento por seguridad en la construcción.\"\r\n            imageSrc=\"/images/BIM-Logo.png\"\r\n            bgColor=\"bg-client-secondary\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "socialResponsibility.tsx": "import Image from \"next/image\";\nimport { Check } from \"lucide-react\";\n\ninterface Point {\n  title: string;\n  description: string;\n}\n\ninterface SocialResponsibilityProps {\n  title: string;\n  description: string;\n  points: Point[];\n  imageSrc: string;\n  imagePosition: \"left\" | \"right\";\n}\n\nexport default function SocialResponsibility({\n  title,\n  description,\n  points,\n  imageSrc,\n  imagePosition,\n}: SocialResponsibilityProps) {\n  const isImageLeft = imagePosition === \"left\";\n\n  return (\n    <section>\n      <div className=\"mx-auto mb-10 px-4 md:px-10 grid grid-cols-1 gap-8 md:grid-cols-2 lg:gap-10\">\n        {isImageLeft && (\n          <div className=\"mx-auto h-full grid grid-cols-1 gap-5 px-4 md:px-20 pt-5 w-full sm:px-0 lg:px-10\">\n            <Image\n              className=\"h-full w-full self-stretch object-cover xl:self-stretch rounded-lg\"\n              src={imageSrc}\n              alt={title}\n              width={768}\n              height={768}\n              priority\n            />\n          </div>\n        )}\n\n        <div className=\"lg:mx-8\">\n          <div className=\"mb-10\">\n            <h2 className=\"mb-5 text-2xl font-semibold text-white md:text-4xl\">\n              {title}\n            </h2>\n\n            <p className=\"text-justify text-sm text-client-textPlaceholder md:text-base lg:text-left\">\n              {description}\n            </p>\n          </div>\n\n          <div className=\"mx-auto grid gap-8 gap-y-4\">\n            {points.map((point, index) => (\n              <div key={index} className=\"flex max-w-none flex-row\">\n                <div className=\"flex justify-center pt-1\">\n                  <Check\n                    className=\"h-7 w-7 rounded-full bg-client-accent p-1 text-white\"\n                    aria-hidden=\"true\"\n                  />\n                </div>\n\n                <div>\n                  <h3 className=\"ml-2 text-xl leading-6 font-medium text-white md:text-3xl rtl:ml-0 rtl:mr-2\">\n                    {point.title}\n                  </h3>\n\n                  <p className=\"ml-2 mt-3 text-client-textPlaceholder rtl:ml-0 rtl:mr-2\">\n                    {point.description}\n                  </p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {!isImageLeft && (\n          <div className=\"mx-auto h-full grid grid-cols-1 gap-5 px-4 md:px-20 pt-5 w-full sm:px-0 lg:px-10\">\n            <Image\n              className=\"h-full w-full self-stretch object-cover xl:self-stretch rounded-lg\"\n              src={imageSrc}\n              alt={title}\n              width={768}\n              height={768}\n              priority\n            />\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n",
        "socialSection.tsx": "import SocialResponsibility from \"./socialResponsibility\";\r\n\r\nexport default function SocialSection() {\r\n  return (\r\n    <div className=\"-translate-y-10 bg-client-background pt-12\">\r\n      <SocialResponsibility\r\n        title=\"Diseño con propósito\"\r\n        description=\"En EdifiK creemos que la arquitectura debe servir a las personas, al entorno y al futuro, generando impacto positivo en cada proyecto.\"\r\n        points={[\r\n          {\r\n            title: \"Arquitectura con sentido social\",\r\n            description:\r\n              \"Diseñamos espacios accesibles y funcionales que mejoran la calidad de vida.\",\r\n          },\r\n          {\r\n            title: \"Construcción sostenible\",\r\n            description:\r\n              \"Aplicamos BIM, diseño bioclimático y materiales ecoeficientes para reducir el impacto ambiental.\",\r\n          },\r\n          {\r\n            title: \"Impulso a la economía local\",\r\n            description:\r\n              \"Generamos empleo digno y apoyamos proveedores y mano de obra regional.\",\r\n          },\r\n        ]}\r\n        imageSrc=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/about/ResponsabilidadSocial1.webp\"\r\n        imagePosition=\"right\"\r\n      />\r\n\r\n      <hr className=\"mx-auto mt-2 mb-6 w-5/6 border-t border-white bg-transparent\" />\r\n\r\n      <SocialResponsibility\r\n        title=\"Compromiso con la comunidad\"\r\n        description=\"Construimos con propósito: cada espacio es una oportunidad para transformar vidas, comunidades y entornos sostenibles.\"\r\n        points={[\r\n          {\r\n            title: \"Diseño para el bienestar\",\r\n            description:\r\n              \"Creamos espacios emocionalmente conectados, usando principios de neuroarquitectura.\",\r\n          },\r\n          {\r\n            title: \"Innovación responsable\",\r\n            description:\r\n              \"Integramos tecnologías modernas sin perder el enfoque humano y social del diseño.\",\r\n          },\r\n          {\r\n            title: \"Educación y conciencia social\",\r\n            description:\r\n              \"Promovemos la formación en sostenibilidad entre nuestros equipos y comunidades.\",\r\n          },\r\n        ]}\r\n        imageSrc=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/about/ResponsabilidadSocial2.webp\"\r\n        imagePosition=\"left\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
        "statsSection.tsx": "\"use client\";\n\nimport { useEffect, useRef } from \"react\";\n\ninterface Stat {\n  label: string;\n  value: number;\n  bgColor: string;\n  textColor: string;\n}\n\nconst StatCard = ({ label, value, bgColor, textColor }: Stat) => (\n  <div\n    className={`w-full p-4 md:w-1/2 lg:w-1/4 ${bgColor} ${textColor} text-center`}\n  >\n    <h3 className=\"text-4xl font-bold\" data-target={value}>\n      0\n    </h3>\n    <p className=\"mt-2\">{label}</p>\n  </div>\n);\n\nconst stats: Stat[] = [\n  {\n    label: \"Años en el Mercado\",\n    value: 2,\n    bgColor: \"bg-client-accentLight\",\n    textColor: \"text-white\",\n  },\n  {\n    label: \"Proyectos Realizados\",\n    value: 22,\n    bgColor: \"bg-white\",\n    textColor: \"text-client-primary\",\n  },\n  {\n    label: \"Proyectos en Desarrollo\",\n    value: 3,\n    bgColor: \"bg-client-primaryLight\",\n    textColor: \"text-white\",\n  },\n  {\n    label: \"Familias Agradecidas\",\n    value: 28,\n    bgColor: \"bg-client-accentLight\",\n    textColor: \"text-white\",\n  },\n];\n\nexport default function StatsSection() {\n  const sectionRef = useRef<HTMLElement>(null);\n\n  useEffect(() => {\n    function animateNumbers() {\n      const counters =\n        sectionRef.current?.querySelectorAll<HTMLHeadingElement>(\n          \"h3[data-target]\"\n        );\n      if (!counters) return;\n\n      counters.forEach((counter) => {\n        const updateCount = () => {\n          const target = parseInt(counter.getAttribute(\"data-target\") || \"0\");\n          const count = +counter.textContent!;\n          const increment = Math.ceil(target / 200);\n\n          if (count < target) {\n            counter.textContent = (count + increment).toString();\n            setTimeout(updateCount, 10);\n          } else {\n            counter.textContent = `${target}+`;\n          }\n        };\n        updateCount();\n      });\n    }\n\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          animateNumbers();\n          observer.disconnect();\n        }\n      });\n    });\n\n    if (sectionRef.current) {\n      observer.observe(sectionRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  return (\n    <div className=\"relative flex items-center justify-center bg-transparent\">\n      <section\n        id=\"animated-section\"\n        ref={sectionRef}\n        className=\"absolute z-10 flex w-full flex-wrap justify-center lg:w-4/5\"\n      >\n        {stats.map((stat, index) => (\n          <StatCard\n            key={index}\n            label={stat.label}\n            value={stat.value}\n            bgColor={stat.bgColor}\n            textColor={stat.textColor}\n          />\n        ))}\n      </section>\n    </div>\n  );\n}\n",
        "teamMember.tsx": "import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport FacebookIcon from \"../icons/facebookIcon\";\r\nimport XIcon from \"../icons/xIcon\";\r\nimport InstagramIcon from \"../icons/instagramIcon\";\r\n\r\ninterface TeamMemberProps {\r\n  name: string;\r\n  title: string;\r\n  imageSrc: string;\r\n}\r\n\r\nexport default function TeamMember({ name, title, imageSrc }: TeamMemberProps) {\r\n  return (\r\n    <div className=\"overflow-hidden w-full shadow-lg\">\r\n      <Image\r\n        className=\"w-full rounded-lg object-cover\"\r\n        src={imageSrc}\r\n        alt={title}\r\n        width={500}\r\n        height={300}\r\n      />\r\n\r\n      <div className=\"p-6 text-center\">\r\n        <h3 className=\"text-lg font-medium text-white\">{name}</h3>\r\n\r\n        <p className=\"text-client-textPlaceholder\">{title}</p>\r\n\r\n        <div className=\"mt-4 flex justify-center space-x-3\">\r\n          <Link href=\"https://www.facebook.com\" passHref>\r\n            <FacebookIcon className=\"h-5 w-5 text-gray-500 hover:text-gray-600\" />\r\n          </Link>\r\n\r\n          <Link href=\"https://www.x.com\" passHref>\r\n            <XIcon className=\"h-5 w-5 text-gray-500 hover:text-gray-600\" />\r\n          </Link>\r\n\r\n          <Link href=\"https://www.instagram.com\" passHref>\r\n            <InstagramIcon className=\"h-5 w-5 text-gray-500 hover:text-gray-600\" />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "teamSection.tsx": "import TeamMember from \"./teamMember\";\n\nexport default function TeamSection() {\n  return (\n    <>\n      <section id=\"nuestro-equipo\" className=\"p-4 md:p-10\">\n        <div className=\"mx-auto px-4 text-center sm:px-6 lg:px-10\">\n          <h2 className=\"text-center text-2xl font-semibold text-white lg:text-4xl\">\n            Fundadores\n          </h2>\n\n          <hr className=\"mx-auto my-2 w-1/4 border-t border-white\" />\n        </div>\n\n        <div className=\"mx-auto mt-10 flex h-auto w-auto flex-col items-center justify-center px-6 sm:px-8 md:flex-row md:items-stretch lg:px-10 md:space-x-4\">\n          <TeamMember\n            name=\"Andrés Trujillo\"\n            title=\"Presidente\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n\n          <TeamMember\n            name=\"Alejandro Torres\"\n            title=\"Vice Presidente\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n        </div>\n      </section>\n\n      <hr className=\"mx-auto my-2 w-5/6 border-t border-white bg-transparent\" />\n\n      <section className=\"p-4 pb-52 sm:pb-44 md:pb-20 md:p-10\">\n        <div className=\"mx-auto px-4 text-center sm:px-6 lg:px-10\">\n          <h2 className=\"text-center text-2xl font-semibold text-white lg:text-4xl\">\n            Nuestro Equipo\n          </h2>\n\n          <hr className=\"mx-auto my-2 w-1/4 border-t border-white\" />\n        </div>\n\n        <div className=\"mx-8 mt-10 flex h-auto w-auto flex-col items-stretch justify-center px-6 sm:px-8 md:flex-row lg:mx-40 lg:px-10 md:space-x-4\">\n          <TeamMember\n            name=\"Andrés Trujillo\"\n            title=\"Arquitecto\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n\n          <TeamMember\n            name=\"Yecid García\"\n            title=\"Arquitecto\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n        </div>\n      </section>\n    </>\n  );\n}\n",
        "timeline.tsx": "\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport TimelineElement from \"./timeLineElement\";\n\nexport default function Timeline() {\n  const timeLineRef = useRef<HTMLDivElement>(null);\n  const [currentTranslate, setCurrentTranslate] = useState(0);\n  const [currentIndexCircle, setCurrentIndexCircle] = useState(0);\n\n  const prevButtonRef = useRef<HTMLButtonElement>(null);\n  const nextButtonRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    const timeLineElements = document.querySelectorAll(\".timeline-element\");\n    const itemElement = document.querySelector(\".flex-none\") as HTMLElement;\n    const itemWidth = itemElement.offsetWidth;\n    const maxIndex = timeLineElements.length - 1;\n\n    function updateCircles() {\n      timeLineElements.forEach((element, index) => {\n        const circle = element.querySelector(\".circle\")!;\n        if (index === currentIndexCircle) {\n          circle.classList.add(\"bg-client-accentLight\");\n          circle.classList.remove(\"bg-transparent\");\n        } else {\n          circle.classList.remove(\"bg-accentLight\");\n          circle.classList.add(\"bg-transparent\");\n        }\n      });\n    }\n\n    updateCircles();\n\n    const prevButton = prevButtonRef.current;\n    const nextButton = nextButtonRef.current;\n    const timeLine = timeLineRef.current;\n\n    const handlePrevClick = () => {\n      if (currentTranslate < 0) {\n        setCurrentTranslate((prev) => prev + itemWidth);\n        timeLine!.style.transform = `translateX(${\n          currentTranslate + itemWidth\n        }px)`;\n      }\n      if (currentIndexCircle > 0) {\n        setCurrentIndexCircle((prev) => Math.max(0, prev - 1));\n        updateCircles();\n      }\n    };\n\n    const handleNextClick = () => {\n      const maxTranslate = -(\n        timeLine!.scrollWidth - timeLine!.parentElement!.offsetWidth\n      );\n      if (currentTranslate > maxTranslate) {\n        setCurrentTranslate((prev) => prev - itemWidth);\n        timeLine!.style.transform = `translateX(${\n          currentTranslate - itemWidth\n        }px)`;\n      }\n      if (currentIndexCircle < maxIndex) {\n        setCurrentIndexCircle((prev) => Math.min(maxIndex, prev + 1));\n        updateCircles();\n      }\n    };\n\n    prevButton?.addEventListener(\"click\", handlePrevClick);\n    nextButton?.addEventListener(\"click\", handleNextClick);\n\n    return () => {\n      prevButton?.removeEventListener(\"click\", handlePrevClick);\n      nextButton?.removeEventListener(\"click\", handleNextClick);\n    };\n  }, [currentTranslate, currentIndexCircle]);\n\n  useEffect(() => {\n    const timeLineElements = document.querySelectorAll(\".timeline-element\");\n\n    timeLineElements.forEach((element) => {\n      const images = element.querySelectorAll(\".image\");\n      let currentIndex = 0;\n      let interval: NodeJS.Timeout;\n\n      function showNextImage() {\n        images[currentIndex].classList.add(\"hidden\");\n        currentIndex = (currentIndex + 1) % images.length;\n        images[currentIndex].classList.remove(\"hidden\");\n      }\n\n      function startImageRotation() {\n        interval = setInterval(showNextImage, 1000);\n      }\n\n      function stopImageRotation() {\n        clearInterval(interval);\n        images.forEach((img, index) =>\n          img.classList.toggle(\"hidden\", index !== 0)\n        );\n        currentIndex = 0;\n      }\n\n      const imageContainer = element.querySelector(\".image-container\")!;\n      imageContainer.addEventListener(\"mouseenter\", startImageRotation);\n      imageContainer.addEventListener(\"mouseleave\", stopImageRotation);\n\n      return () => {\n        imageContainer.removeEventListener(\"mouseenter\", startImageRotation);\n        imageContainer.removeEventListener(\"mouseleave\", stopImageRotation);\n      };\n    });\n  }, []);\n\n  return (\n    <section className=\"p-10 lg:p-14 bg-client-backgroundAlt\">\n      <div className=\"xl:w-3/4 bg-transparent mx-auto\">\n        <h2 className=\"text-center text-3xl font-bold text-white lg:text-4xl\">\n          Nuestra Historia\n        </h2>\n\n        <hr className=\"mx-auto my-2 w-1/3 border-t border-white\" />\n\n        <div className=\"lg:mt-15 relative mt-10 flex h-auto w-full\">\n          <button\n            ref={prevButtonRef}\n            className=\"absolute -left-10 z-10 p-2 self-center bg-client-primaryLight rounded-full hover:bg-client-secondaryDark transition-all\"\n          >\n            <ChevronLeft className=\"w-6 h-6 text-client-text\" />\n          </button>\n\n          <div className=\"flex w-full overflow-hidden\">\n            <div\n              ref={timeLineRef}\n              id=\"timeLine\"\n              className=\"flex whitespace-nowrap transition-transform duration-500\"\n            >\n              <TimelineElement\n                ImageSrc1=\"/images/image2.jpg\"\n                ImageSrc2=\"/images/image3.jpg\"\n                ImageSrc3=\"/images/image4.jpg\"\n                ImageTitle=\"Quintas del Lago\"\n                year=\"15 enero 2024\"\n                title=\"Quintas del Lago\"\n                description=\"Quintas del Lago es un proyecto de vivienda campestre sostenible en Villavicencio, con 86 lotes distribuidos en 12 etapas, rodeado de lagos, zonas verdes y senderos ecológicos.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image5.jpg\"\n                ImageSrc2=\"/images/image6.jpg\"\n                ImageSrc3=\"/images/image7.jpg\"\n                ImageTitle=\"Project 2022\"\n                year=\"2022\"\n                title=\"Quintas del Lago 2\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image8.jpg\"\n                ImageSrc2=\"/images/image9.jpg\"\n                ImageSrc3=\"/images/image10.jpg\"\n                ImageTitle=\"Project 2021\"\n                year=\"2021\"\n                title=\"Quintas del Lago 3\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image11.jpg\"\n                ImageSrc2=\"/images/image12.jpg\"\n                ImageSrc3=\"/images/image13.jpg\"\n                ImageTitle=\"Edificio San Carlos\"\n                year=\"16 mayo 2024\"\n                title=\"Edificio San Carlos en Florencia Caquetá\"\n                description=\"Edificio San Carlos es un exclusivo proyecto de vivienda en Florencia, Caquetá. Ofrece apartamentos de 1, 2 y 3 habitaciones, con zonas sociales como terraza, BBQ, jacuzzi y lobby. Su entorno natural, alta valorización y desarrollo.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image14.jpg\"\n                ImageSrc2=\"/images/image15.jpg\"\n                ImageSrc3=\"/images/image16.jpg\"\n                ImageTitle=\"Project 2019\"\n                year=\"2019\"\n                title=\"Quintas del Lago 5\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image17.jpg\"\n                ImageSrc2=\"/images/image18.jpg\"\n                ImageSrc3=\"/images/image19.jpg\"\n                ImageTitle=\"Project 2018\"\n                year=\"2018\"\n                title=\"Quintas del Lago 6\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n            </div>\n          </div>\n\n          <button\n            ref={nextButtonRef}\n            className=\"absolute -right-10 z-10 p-2 self-center bg-client-primaryLight rounded-full hover:bg-client-secondaryDark transition-all\"\n          >\n            <ChevronRight className=\"w-6 h-6 text-client-text\" />\n          </button>\n\n          <div className=\"pointer-events-none absolute right-0 top-0 h-full w-32 bg-gradient-to-l from-client-backgroundAlt to-transparent\" />\n        </div>\n      </div>\n    </section>\n  );\n}\n",
        "timeLineElement.tsx": "import Image from \"next/image\";\n\ninterface TimelineElementProps {\n  ImageSrc1: string;\n  ImageSrc2: string;\n  ImageSrc3: string;\n  ImageTitle: string;\n  year: string;\n  title: string;\n  description: string;\n  isActive: boolean;\n}\n\nexport default function TimelineElement({\n  ImageSrc1,\n  ImageSrc2,\n  ImageSrc3,\n  ImageTitle,\n  year,\n  title,\n  description,\n  isActive,\n}: TimelineElementProps) {\n  return (\n    <div className=\"timeline-element relative flex w-64 flex-none flex-col py-4\">\n      <div className=\"image-container group relative mx-auto mb-4 rounded-lg overflow-hidden\">\n        <Image\n          src={ImageSrc1}\n          alt={`Imagen del proyecto ${ImageTitle} - 1`}\n          width={208}\n          height={128}\n          className=\"image object-cover\"\n          priority\n        />\n\n        <Image\n          src={ImageSrc2}\n          alt={`Imagen del proyecto ${ImageTitle} - 2`}\n          width={208}\n          height={128}\n          className=\"image hidden object-cover\"\n          priority\n        />\n\n        <Image\n          src={ImageSrc3}\n          alt={`Imagen del proyecto ${ImageTitle} - 3`}\n          width={208}\n          height={128}\n          className=\"image hidden object-cover\"\n          priority\n        />\n      </div>\n\n      <div className=\"flex items-center\">\n        <span\n          className={`circle h-5 w-5 rounded-full border-2 ${\n            isActive ? \"bg-client-accentLight\" : \"bg-transparent\"\n          } border-client-accentLight`}\n          aria-label={`Paso del timeline: ${year}`}\n        />\n        <div className=\"h-0.5 w-full bg-client-accentLight\" />\n      </div>\n\n      <h3 className=\"mx-5 mb-10 mt-5 text-left text-xl font-medium text-client-accentDark lg:text-3xl\">\n        {year}\n      </h3>\n\n      <h4 className=\"mx-5 mb-4 pr-4 text-left text-lg font-semibold text-white lg:text-2xl\">\n        {title}\n      </h4>\n\n      <p className=\"mx-5 w-full overflow-hidden text-ellipsis whitespace-normal pr-4 text-left text-sm md:text-lg text-client-textPlaceholder\">\n        {description}\n      </p>\n    </div>\n  );\n}\n",
        "visionMisionCard.tsx": "import Image from \"next/image\";\n\ninterface VisionMisionCardProps {\n  title: string;\n  description: string;\n  imageSrc: string;\n  bgColor: string;\n}\n\nexport default function VisionMisionCard({\n  title,\n  description,\n  imageSrc,\n  bgColor,\n}: VisionMisionCardProps) {\n  return (\n    <div className=\"col-span-3 mx-auto flex w-full overflow-hidden md:col-span-1\">\n      <div\n        className={`flex flex-col justify-stretch rounded-lg border px-10 py-8 text-center shadow ${bgColor} border-white`}\n      >\n        <h3 className=\"mb-5 text-2xl font-semibold uppercase tracking-wider text-white\">\n          {title}\n        </h3>\n\n        <p className=\"mb-10 text-justify font-light text-sm md:text-lg text-client-primaryLight\">\n          {description}\n        </p>\n\n        <div className=\"mt-auto flex justify-center\">\n          <Image\n            className=\"self-end h-full object-cover object-bottom\"\n            src={imageSrc}\n            alt={`Imagen representativa de ${title}`}\n            width={500}\n            height={300}\n            priority\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "visionMisionSection.tsx": "import VisionMisionCard from \"./visionMisionCard\";\r\n\r\nexport default function VisionMisionSection() {\r\n  return (\r\n    <section\r\n      id=\"mision-vision\"\r\n      className=\"px-4 py-8 md:p-10 -translate-y-10 bg-client-backgroundLight\"\r\n    >\r\n      <div className=\"bg-transparent mx-auto pt-44 md:pt-16 lg:pt-8 py-12\">\r\n        <div className=\"max-w-3xl text-center md:mx-auto md:pt-10\">\r\n          <h2 className=\"text-2xl font-semibold text-client-text md:text-4xl\">\r\n            Nuestra Visión y Misión\r\n          </h2>\r\n\r\n          <hr className=\"mx-auto my-2 w-1/3 border-t border-white\" />\r\n        </div>\r\n\r\n        <div className=\"mt-14 flex items-stretch justify-center md:mt-20\">\r\n          <div className=\"grid grid-cols-1 gap-10 md:grid-cols-2\">\r\n            <VisionMisionCard\r\n              title=\"Visión\"\r\n              description=\"Ser una empresa referente en Colombia y Latinoamérica en el desarrollo de proyectos arquitectónicos e inmobiliarios integrales, reconocida por su innovación, su enfoque humano y su capacidad de transformar ideas en realidades tangibles.\r\n              Aspiramos a consolidarnos como una marca confiable, estratégica y emocionalmente cercana, que une el diseño con el negocio, la arquitectura con el bienestar, y la construcción con la experiencia de vivir.\"\r\n              imageSrc=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/about/Mision.webp\"\r\n              bgColor=\"bg-client-secondaryLight\"\r\n            />\r\n\r\n            <VisionMisionCard\r\n              title=\"Misión\"\r\n              description=\"En Edifik, somos una empresa de arquitectura e inmobiliaria que diseña, construye y comercializa espacios con propósito.\r\n              Combinamos la creatividad del diseño arquitectónico, la eficiencia constructiva y la inteligencia del mercado inmobiliario para ofrecer soluciones completas, sostenibles y emocionalmente conectadas.\r\n              Nuestro compromiso es acompañar a cada cliente desde la idea hasta la entrega, desde el diseño hasta la venta, creando espacios que se habitan, se valoran y se sienten.\"\r\n              imageSrc=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/about/Vision2.webp\"\r\n              bgColor=\"bg-client-accentLight\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"
      },
      "admin": {
        "adminCard.tsx": "import Link from \"next/link\";\r\nimport React from \"react\";\r\n\r\ninterface AdminCardProps {\r\n  href: string;\r\n  Icon: React.ElementType;\r\n  title: string;\r\n  description: string;\r\n}\r\n\r\nconst AdminCard: React.FC<AdminCardProps> = React.memo(\r\n  ({ href, Icon, title, description }) => {\r\n    return (\r\n      <Link href={href}>\r\n        <div className=\"h-full rounded-lg bg-premium-backgroundAlt p-6 text-center shadow-md transition-shadow duration-300 hover:bg-premium-backgroundDark hover:shadow-lg dark:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark\">\r\n          <Icon className=\"mx-auto mb-4 h-10 w-10 text-premium-primary dark:text-premium-primaryLight\" />\r\n          <h2 className=\"text-2xl font-semibold text-premium-textPrimary dark:text-premium-textPrimary\">\r\n            {title}\r\n          </h2>\r\n          <p className=\"mt-2 text-premium-textSecondary dark:text-premium-textSecondary\">\r\n            {description}\r\n          </p>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n);\r\n\r\nexport default AdminCard;\r\n",
        "adminFooter.tsx": "\"use client\";\n\nimport dynamic from \"next/dynamic\";\n\nexport default function AdminFooter() {\n  return (\n    <footer className=\"w-full border-t border-premium-borderColor bg-premium-background py-6 text-premium-textSecondary dark:border-premium-borderColorHover dark:bg-premium-secondaryDark dark:text-premium-textPlaceholder\">\n      <div className=\"container mx-auto flex flex-col items-center justify-between px-4 text-sm md:flex-row\">\n        <span className=\"text-center text-premium-textPrimary md:text-left dark:text-premium-textSecondary\">\n          &copy; 2025 EdifiK - Administración. Todos los derechos reservados.\n        </span>\n\n        {/*\n        <Link\n          href=\"/admin/documentacion\"\n          className=\"flex items-center space-x-1 text-premium-primaryDark transition-colors duration-300 hover:text-premium-primary dark:text-premium-primaryLight dark:hover:text-premium-primaryDark\"\n          aria-label=\"Documentación\"\n        >\n          <BookText className=\"h-5 w-5\" />\n          <span className=\"text-sm font-medium\">Documentación</span>\n        </Link>*/}\n      </div>\n    </footer>\n  );\n}\n",
        "adminHeader.tsx": "\"use client\";\n\nimport { usePathname } from \"next/navigation\";\nimport { useSession } from \"next-auth/react\";\nimport clsx from \"clsx\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport {\n  Building2,\n  House,\n  Users,\n  ShieldCheck,\n  Tag,\n  ClipboardList,\n} from \"lucide-react\";\nimport AdminMenuButton from \"./adminMenuButton\";\n\nexport default function AdminHeader() {\n  const { data: session } = useSession();\n  const pathname = usePathname();\n\n  const menuItems = [\n    {\n      path: \"/admin/proyectos\",\n      label: \"Proyectos\",\n      icon: Building2,\n      permission: \"Gestionar proyectos\",\n    },\n    {\n      path: \"/admin/propiedades\",\n      label: \"Propiedades\",\n      icon: House,\n      permission: \"Gestionar propiedades\",\n    },\n    {\n      path: \"/admin/usuarios\",\n      label: \"Usuarios\",\n      icon: Users,\n      permission: \"Gestionar usuarios\",\n    },\n    {\n      path: \"/admin/roles\",\n      label: \"Roles\",\n      icon: ShieldCheck,\n      permission: \"Gestionar roles\",\n    },\n    {\n      path: \"/admin/membresias\",\n      label: \"Membresías\",\n      icon: Tag,\n      permission: \"Gestionar membresias\",\n    },\n    {\n      path: \"/admin/solicitudes\",\n      label: \"Solicitudes\",\n      icon: ClipboardList,\n      permission: \"Gestionar solicitudes\",\n    },\n  ];\n\n  const userPermissions = session?.user?.permissions || [];\n  const filteredMenuItems = menuItems.filter(({ permission }) =>\n    userPermissions.some((perm) => perm.name === permission)\n  );\n\n  const canManageRequests = userPermissions.some(\n    (perm) => perm.name === \"Gestionar solicitudes\"\n  );\n\n  const getLinkClasses = (path: string) =>\n    pathname.startsWith(path)\n      ? \"text-premium-primary dark:text-premium-primaryLight font-semibold\"\n      : \"text-premium-textPrimary dark:text-premium-textSecondary hover:text-premium-primary dark:hover:text-premium-primaryLight\";\n\n  return (\n    <header className=\"fixed space-x-3 left-0 top-0 z-50 min-h-16 w-full bg-premium-background bg-opacity-90 text-premium-textPrimary shadow-md dark:bg-premium-secondaryDark dark:text-premium-textPrimary flex items-center justify-between py-1 px-4\">\n      <Link\n        href=\"/admin\"\n        className={clsx(\n          \"flex flex-col items-center text-center transition-colors duration-300\",\n          getLinkClasses(\"/admin\")\n        )}\n      >\n        <div className=\"flex items-center justify-start w-[100px] h-[40px]\">\n          <Image\n            src=\"/images/logo.webp\"\n            alt=\"Logo de EdifiK\"\n            width={100}\n            height={40}\n            loading=\"lazy\"\n            className={clsx(\n              \"w-auto h-auto max-w-[100px] max-h-[40px] transition duration-300\",\n              \"dark:bg-transparent\",\n              \"bg-gray-800 p-1 rounded-md shadow-md\"\n            )}\n          />\n        </div>\n        <span>Admin Panel</span>\n      </Link>\n\n      <nav\n        className=\"flex-1 justify-center space-x-6 items-center min-h-9 hidden md:flex\"\n        aria-label=\"Navegación de administrador\"\n      >\n        {filteredMenuItems.length > 0 ? (\n          filteredMenuItems.map(({ path, label }) => (\n            <Link\n              key={path}\n              href={path}\n              className={clsx(\n                \"group relative transition-colors duration-300\",\n                getLinkClasses(path)\n              )}\n            >\n              {label}\n              <span\n                className={clsx(\n                  \"absolute bottom-0 left-0 h-[2px] bg-premium-primary transition-all duration-300 dark:bg-premium-primaryLight\",\n                  pathname.startsWith(path)\n                    ? \"w-full\"\n                    : \"w-0 group-hover:w-full\"\n                )}\n              />\n            </Link>\n          ))\n        ) : (\n          <div className=\"flex items-center justify-center w-full text-premium-textSecondary\">\n            <p>Cargando menú...</p>\n          </div>\n        )}\n      </nav>\n\n      <div className=\"flex items-center justify-end space-x-4\">\n        <AdminMenuButton\n          menuItems={filteredMenuItems}\n          canManageRequests={canManageRequests}\n        />\n      </div>\n    </header>\n  );\n}\n",
        "adminMenuButton.tsx": "\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { signOut } from \"next-auth/react\";\nimport Link from \"next/link\";\nimport clsx from \"clsx\";\nimport { Menu, LucideIcon } from \"lucide-react\";\nimport NotificationBell from \"./notificationBell\";\n\nexport default function AdminMenuButton({\n  menuItems,\n  canManageRequests,\n}: {\n  menuItems: { path: string; label: string; icon: LucideIcon }[];\n  canManageRequests: boolean;\n}) {\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const toggleDropdown = () => setIsDropdownOpen((prev) => !prev);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node)\n      ) {\n        setIsDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div ref={dropdownRef} className=\"relative inline-block text-left\">\n      <div className=\"flex items-center space-x-4\">\n        {canManageRequests && <NotificationBell />}\n\n        <button\n          onClick={toggleDropdown}\n          className=\"flex items-center justify-center p-2 rounded-md text-premium-secondary transition-all hover:text-premium-primary focus:outline-none dark:text-premium-textPrimary dark:hover:text-premium-primaryLight\"\n          type=\"button\"\n          aria-expanded={isDropdownOpen}\n          aria-haspopup=\"menu\"\n        >\n          <Menu className=\"h-6 w-6 transition-transform duration-300 hover:scale-110\" />\n        </button>\n      </div>\n\n      {isDropdownOpen && (\n        <div\n          onClick={() => setIsDropdownOpen(false)}\n          className=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 sm:hidden\"\n        />\n      )}\n\n      {isDropdownOpen && (\n        <>\n          <div\n            className={clsx(\n              \"fixed inset-0 bg-black  bg-opacity-50 transition-opacity duration-300 sm:hidden\",\n              isDropdownOpen ? \"block\" : \"hidden\"\n            )}\n            onClick={() => setIsDropdownOpen(false)}\n          />\n\n          <div\n            className={clsx(\n              \"sm:absolute sm:top-full sm:right-0 sm:w-56 sm:rounded-md bg-premium-background dark:bg-premium-secondary shadow-lg z-50 mt-2\",\n              \"fixed top-0 right-0 h-full w-64 transform transition-transform duration-300 ease-in-out\",\n              isDropdownOpen ? \"translate-x-0\" : \"translate-x-full\",\n              \"sm:translate-x-0 sm:absolute sm:h-auto sm:shadow-lg\"\n            )}\n            role=\"menu\"\n          >\n            <div className=\"flex items-center justify-between p-4 border-b border-premium-borderColor dark:border-premium-borderColorHover sm:hidden\">\n              <span className=\"text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\n                Menú\n              </span>\n              <button\n                onClick={() => setIsDropdownOpen(false)}\n                className=\"text-premium-textPrimary dark:text-premium-textSecondary hover:text-red-500\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <ul className=\"py-2 space-y-2\">\n              {menuItems?.map(({ path, label, icon: Icon }) => (\n                <li key={path}>\n                  <Link\n                    href={path}\n                    onClick={() => setIsDropdownOpen(false)}\n                    className=\"flex items-center gap-3 px-6 py-3 text-premium-textPrimary dark:text-premium-textSecondary hover:bg-premium-backgroundDark dark:hover:bg-premium-secondaryLight transition-all\"\n                  >\n                    <Icon className=\"w-5 h-5 text-premium-primary dark:text-premium-primaryLight\" />\n                    {label}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n\n            <div className=\"border-t border-premium-borderColor dark:border-premium-borderColorHover py-2\">\n              <button\n                onClick={() => {\n                  setIsDropdownOpen(false);\n                  signOut({ callbackUrl: \"/\" });\n                }}\n                className=\"block w-full text-left px-6 py-3 text-red-500 hover:bg-red-600 hover:text-white transition-all\"\n              >\n                Cerrar Sesión\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n",
        "memberships": {
          "membershipModal.tsx": "import dynamic from \"next/dynamic\";\nimport { Membership } from \"@/lib/definitios\";\nimport { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\nimport ModalHeader from \"../../modals/admin/modalHeader\";\nimport ModalFooter from \"../../modals/admin/modalFooter\";\n\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/admin/formInput\"), {\n  ssr: false,\n});\nconst FormTextArea = dynamic(\n  () => import(\"@/app/ui/modals/admin/formTextArea\"),\n  {\n    ssr: false,\n  }\n);\n\ninterface MembershipModalProps {\n  show: boolean;\n  onClose: () => void;\n  onSubmit: (e: React.FormEvent) => void;\n  handleChange: (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => void;\n  membership: Membership;\n  errors: {\n    nameError: string;\n    benefitsError: string;\n    discountThreeMonthsError: string;\n    discountSixMonthsError: string;\n    discountTwelveMonthsError: string;\n    maxProjectsError: string;\n  };\n}\n\nexport default function MembershipModal({\n  show,\n  onClose,\n  onSubmit,\n  handleChange,\n  membership,\n  errors,\n}: MembershipModalProps) {\n  useBodyOverflow(show);\n\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\n        {/* Header */}\n        <ModalHeader title={\"Editar Membersía\"} onClose={onClose} />\n\n        {/* body */}\n        <form\n          id=\"membershipForm\"\n          onSubmit={onSubmit}\n          noValidate\n          className=\"h-[60vh] space-y-4 overflow-y-auto px-6 py-4\"\n        >\n          <FormInput\n            label=\"Nombre\"\n            type=\"text\"\n            name=\"name\"\n            value={membership.name || \"\"}\n            placeholder=\"Nombre de la membresía\"\n            maxLength={50}\n            onChange={handleChange}\n            error={errors.nameError}\n          />\n\n          <FormTextArea\n            label=\"Descripción\"\n            name=\"benefits\"\n            value={membership.benefits || \"\"}\n            placeholder=\"Descripción de la membresía\"\n            onChange={handleChange}\n            error={errors.benefitsError}\n            rows={3}\n            maxLength={950}\n          />\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Precio\"\n              type=\"text\"\n              name=\"price\"\n              value={membership.price || \"\"}\n              placeholder=\"Precio\"\n              onChange={handleChange}\n              min={0}\n            />\n\n            <FormInput\n              label=\"Propiedades destacados\"\n              type=\"number\"\n              name=\"projectsFeatured\"\n              value={membership.projectsFeatured || \"\"}\n              placeholder=\"Cantidad de propiedades destacadas\"\n              onChange={handleChange}\n              min={0}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Cantidad máxima de propiedades\"\n              type=\"number\"\n              name=\"maxProjects\"\n              value={membership.maxProjects || \"\"}\n              placeholder=\"Máximo de propiedades permitidas\"\n              onChange={handleChange}\n              min={0}\n            />\n\n            <FormInput\n              label=\"Descuento 3 meses (%)\"\n              type=\"number\"\n              name=\"discountThreeMonths\"\n              value={membership.discountThreeMonths || \"\"}\n              placeholder=\"Descuento en %\"\n              onChange={handleChange}\n              min={0}\n              max={100}\n            />\n\n            <FormInput\n              label=\"Descuento 6 meses (%)\"\n              type=\"number\"\n              name=\"discountSixMonths\"\n              value={membership.discountSixMonths || \"\"}\n              placeholder=\"Descuento en %\"\n              onChange={handleChange}\n              min={0}\n              max={100}\n            />\n\n            <FormInput\n              label=\"Descuento 12 meses (%)\"\n              type=\"number\"\n              name=\"discountTwelveMonths\"\n              value={membership.discountTwelveMonths || \"\"}\n              placeholder=\"Descuento en %\"\n              onChange={handleChange}\n              min={0}\n              max={100}\n            />\n          </div>\n        </form>\n\n        {/* Footer */}\n        <ModalFooter onClose={onClose} formId=\"membershipForm\" />\n      </div>\n    </div>\n  );\n}\n"
        },
        "notificationBell.tsx": "\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport clsx from \"clsx\";\r\nimport { Bell, ArrowRight } from \"lucide-react\";\r\nimport { usePendingRequests } from \"@/app/hooks/requests/usePendingRequests\";\r\nimport NotificationSkeleton from \"../skeletons/admin/notificationSkeleton\";\r\n\r\nexport default function NotificationBell() {\r\n  const router = useRouter();\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const { requests: notifications, isLoadingRequests } = usePendingRequests();\r\n  const [unreadNotifications, setUnreadNotifications] = useState(\r\n    notifications.length\r\n  );\r\n\r\n  const notificationRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const eventSource = new EventSource(\"/api/requests/stream\");\r\n\r\n    eventSource.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n\r\n      if (!data.data || !Array.isArray(data.data)) {\r\n        console.warn(\"⚠️ Respuesta inválida en SSE:\", data);\r\n        return;\r\n      }\r\n\r\n      setUnreadNotifications(() => data.data.length);\r\n    };\r\n\r\n    eventSource.onerror = () => {\r\n      console.error(\"⚠️ Error en SSE\");\r\n      eventSource.close();\r\n    };\r\n\r\n    return () => {\r\n      eventSource.close();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        notificationRef.current &&\r\n        !notificationRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowNotifications(false);\r\n      }\r\n    };\r\n\r\n    if (showNotifications) {\r\n      document.addEventListener(\"click\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClickOutside);\r\n    };\r\n  }, [showNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      !showNotifications &&\r\n      unreadNotifications === 0 &&\r\n      notifications.length > 0\r\n    ) {\r\n      setUnreadNotifications(notifications.length);\r\n    }\r\n  }, [notifications]);\r\n\r\n  const handleToggleNotifications = () => {\r\n    if (!showNotifications && unreadNotifications > 0) {\r\n      setUnreadNotifications(0);\r\n    }\r\n    setShowNotifications((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"relative flex items-center justify-center\"\r\n      ref={notificationRef}\r\n    >\r\n      <button\r\n        className={clsx(\r\n          \"p-2 rounded-md cursor-pointer transition-all\",\r\n          \"text-premium-secondary dark:text-premium-textPrimary\",\r\n          \"hover:text-premium-primary dark:hover:text-premium-primaryLight\"\r\n        )}\r\n        onClick={handleToggleNotifications}\r\n      >\r\n        <Bell className=\"h-6 w-6\" />\r\n      </button>\r\n\r\n      {unreadNotifications > 0 && (\r\n        <div className=\"absolute -top-1 -right-1 flex items-center justify-center\">\r\n          <span className=\"absolute w-5 h-5 rounded-full bg-red-500 opacity-75 animate-ping\" />\r\n          <span className=\"relative w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-md transition-all duration-500\">\r\n            {unreadNotifications}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {showNotifications && (\r\n        <div\r\n          className={clsx(\r\n            \"fixed top-14 right-4 md:right-4 h-auto max-h-[80vh] w-[90vw] max-w-[400px] bg-premium-background dark:bg-premium-secondary\",\r\n            \"shadow-lg border border-premium-borderColor dark:border-premium-borderColorHover rounded-md\",\r\n            \"overflow-y-auto transition-transform duration-300 ease-in-out\",\r\n            showNotifications ? \"translate-x-0\" : \"translate-x-full\"\r\n          )}\r\n        >\r\n          <div className=\"p-4 border-b border-premium-borderColor dark:border-premium-borderColorHover flex justify-between items-center\">\r\n            <span className=\"text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\r\n              Notificaciones\r\n            </span>\r\n            <button\r\n              className=\"text-premium-textPrimary dark:text-premium-textSecondary hover:text-premium-primary dark:hover:text-premium-primaryLight\"\r\n              onClick={() => setShowNotifications(false)}\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n\r\n          {isLoadingRequests ? (\r\n            <NotificationSkeleton />\r\n          ) : notifications.length > 0 ? (\r\n            <ul className=\"divide-y divide-premium-borderColor dark:divide-premium-borderColorHover\">\r\n              {notifications.map((notif) => (\r\n                <li\r\n                  key={notif.id}\r\n                  className=\"px-3 py-2 flex items-center justify-between hover:bg-premium-backgroundDark dark:hover:bg-premium-secondaryLight transition-all cursor-pointer\"\r\n                  onClick={() => {\r\n                    setShowNotifications(false);\r\n                    router.push(\"/admin/solicitudes\");\r\n                  }}\r\n                >\r\n                  <div className=\"flex flex-col gap-1 flex-1\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span\r\n                        className={clsx(\r\n                          \"px-2 py-1 text-xs font-semibold text-white rounded-full\",\r\n                          notif.operation === \"agregar\"\r\n                            ? \"bg-green-600\"\r\n                            : \"bg-blue-600\"\r\n                        )}\r\n                      >\r\n                        {notif.operation}\r\n                      </span>\r\n                      <p className=\"text-sm text-premium-primary dark:text-premium-primaryLight font-semibold\">\r\n                        {notif.projectName}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <p className=\"text-xs text-premium-textSecondary\">\r\n                      {notif.userEmail}\r\n                    </p>\r\n                    <p className=\"text-xs text-premium-textSecondary\">\r\n                      {new Date(notif.date).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                  <ArrowRight className=\"h-4 w-4 text-premium-primary dark:text-premium-primaryLight ml-2\" />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p className=\"p-4 text-center text-premium-textSecondary\">\r\n              No hay solicitudes pendientes.\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
        "projects": {
          "createEditProject": {
            "basicProjectForm.tsx": "import { useState, useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { propertyType, ProjectData } from \"@/lib/definitios\";\nimport { useBasicProjectValidation } from \"@/app/hooks/projects/createEditProject/useBasicProjectValidation\";\nimport { useCheckEmail } from \"@/app/hooks/users/useCheckEmail\";\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\nimport FormInput from \"@/app/ui/modals/admin/formInput\";\nimport FormSelect from \"@/app/ui/modals/admin/formSelect\";\nimport FormCheckbox from \"@/app/ui/modals/admin/formCheckbox\";\nimport FormTextarea from \"@/app/ui/modals/admin/formTextArea\";\nimport FormSearchEmail from \"../../../modals/admin/formSearchEmail\";\n\ninterface BasicProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  propertyTypes: propertyType[];\n  currentStep: number;\n  totalSteps: number;\n  isProperty: boolean;\n  isEdit: boolean;\n  hasPermission?: boolean;\n}\n\nexport default function BasicProjectForm({\n  formData,\n  onChange,\n  propertyTypes,\n  onPrevious,\n  currentStep,\n  totalSteps,\n  isProperty,\n  isEdit,\n  onNext,\n  hasPermission,\n}: BasicProjectFormProps) {\n  const { errors, validateFields, validateField } = useBasicProjectValidation(\n    formData,\n    isProperty,\n    isEdit\n  );\n  const { checkEmailExists } = useCheckEmail();\n  const [ownerEmail, setOwnerEmail] = useState(formData.email || \"\");\n\n  const handleEmailChange = (email: string, ownerId: number | undefined) => {\n    setOwnerEmail(email);\n    onChange({ email, ownerId });\n  };\n\n  const propertyOptions = useMemo(\n    () => propertyTypes.map((type) => ({ id: type.id, name: type.name })),\n    [propertyTypes]\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      const { name, value } = e.target;\n      if (formData[name as keyof ProjectData] !== value) {\n        onChange({ [name]: value });\n        validateField(`${name}Error` as keyof typeof errors, value);\n      }\n    },\n    [onChange, validateField, formData]\n  );\n\n  const handleCheckboxChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      onChange({ membership: e.target.checked ? 1004 : 1001 });\n    },\n    [onChange]\n  );\n\n  const handleSelectChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const { name, value } = e.target;\n      const selectedId = parseInt(value, 10);\n\n      if (name === \"propertyType\") {\n        const selectedPropertyType = propertyTypes.find(\n          (type) => type.id === selectedId\n        );\n        if (selectedPropertyType) {\n          onChange({ propertyType: selectedPropertyType });\n          validateField(\"propertyTypeError\", selectedPropertyType);\n        }\n      }\n\n      if (name === \"projectType\") {\n        if (selectedId === 2 || selectedId === 3) {\n          onChange({\n            projectType: {\n              id: selectedId,\n              name: selectedId === 2 ? \"Venta\" : \"Arriendo\",\n            },\n          });\n          validateField(\"projectTypeError\", { id: selectedId });\n        }\n      }\n    },\n    [onChange, propertyTypes, validateField]\n  );\n\n  const handleNext = useCallback(\n    async (e?: React.FormEvent) => {\n      e?.preventDefault();\n\n      if (formData.email && !formData.ownerId) {\n        const ownerId = await checkEmailExists(formData.email);\n\n        if (!ownerId) {\n          await validateField(\"emailError\", formData.email);\n          return;\n        }\n\n        await new Promise((resolve) => {\n          onChange({ ownerId });\n          setTimeout(resolve, 0);\n        });\n      }\n\n      const isValid = await validateFields();\n      if (!isValid) return;\n\n      onNext();\n    },\n    [\n      validateFields,\n      onNext,\n      checkEmailExists,\n      formData,\n      onChange,\n      validateField,\n    ]\n  );\n\n  const tooltipTexts = useMemo(\n    () => ({\n      name: \"Nombre del proyecto que se mostrará al público.\",\n      propertyType: isProperty\n        ? \"Seleccione el tipo de propiedad que más se ajuste.\"\n        : \"Seleccione el tipo de propiedad que más se ajuste a su proyecto.\",\n      projectType:\n        \"Seleccione si la propiedad va a estar en venta o en arriendo.\",\n      shortDescription: isProperty\n        ? \"Escriba un resumen breve que describa las principales características de la propiedad.\"\n        : \"Escriba un resumen breve que describa las principales características del proyecto.\",\n      detailedDescription: isProperty\n        ? \"Incluya una descripción detallada que explique las características principales de la propiedad.\"\n        : \"Incluya una descripción detallada que explique las características principales del proyecto.\",\n    }),\n    [isProperty]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        Datos Básicos\n      </h2>\n      <form onSubmit={handleNext} className=\"space-y-6\">\n        {!isProperty && (\n          <FormInput\n            label={\n              isProperty ? \"Nombre de la propiedad\" : \"Nombre del proyecto\"\n            }\n            type=\"text\"\n            name=\"name\"\n            value={formData.name || \"\"}\n            placeholder={\n              isProperty\n                ? \"Ingrese el nombre de la propiedad\"\n                : \"Ingrese el nombre del proyecto\"\n            }\n            maxLength={100}\n            onChange={handleChange}\n            error={errors.nameError}\n            tooltipText={tooltipTexts.name}\n          />\n        )}\n\n        <div\n          className={clsx(\n            \"grid grid-cols-1 gap-4\",\n            isProperty && \"sm:grid-cols-2\"\n          )}\n        >\n          <FormSelect\n            label=\"Tipo de propiedad\"\n            name=\"propertyType\"\n            value={formData.propertyType?.id || \"\"}\n            options={propertyOptions}\n            onChange={handleSelectChange}\n            error={errors.propertyTypeError}\n            tooltipText={tooltipTexts.propertyType}\n          />\n\n          {isProperty && (\n            <FormSelect\n              label=\"Finalidad de la propiedad\"\n              name=\"projectType\"\n              value={formData.projectType?.id || \"\"}\n              options={[\n                { id: 2, name: \"Venta\" },\n                { id: 3, name: \"Arriendo\" },\n              ]}\n              onChange={handleSelectChange}\n              error={errors.projectTypeError}\n              tooltipText={tooltipTexts.projectType}\n            />\n          )}\n        </div>\n\n        {isProperty && hasPermission && (\n          <FormSearchEmail\n            label=\"Correo del Propietario\"\n            value={ownerEmail}\n            onChange={setOwnerEmail}\n            onSelect={(email, ownerId) => handleEmailChange(email, ownerId)}\n            error={errors.emailError}\n            tooltipText=\"Seleccione el propietario de la propiedad (si es un proyecto propio de la empresa puedes omitir este campo).\"\n          />\n        )}\n\n        <FormTextarea\n          label=\"Resumen breve\"\n          name=\"shortDescription\"\n          value={formData.shortDescription || \"\"}\n          placeholder=\"Agregue un resumen breve\"\n          tooltipText={tooltipTexts.shortDescription}\n          onChange={handleChange}\n          error={errors.shortDescriptionError}\n          rows={3}\n          maxLength={150}\n        />\n\n        <FormTextarea\n          label=\"Descripción completa\"\n          name=\"detailedDescription\"\n          value={formData.detailedDescription || \"\"}\n          placeholder=\"Agregue una descripción completa y detallada\"\n          tooltipText={tooltipTexts.detailedDescription}\n          onChange={handleChange}\n          error={errors.detailedDescriptionError}\n          rows={6}\n          maxLength={1500}\n        />\n\n        <FormCheckbox\n          label=\"Propio de la empresa\"\n          name=\"membership\"\n          checked={formData.membership === 1004}\n          onChange={handleCheckboxChange}\n          className=\"h-4 w-4 rounded border-gray-300 text-premium-primary focus:ring-premium-primary\"\n        />\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
            "detailsProjectForm.tsx": "import { useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport {\n  CommonArea,\n  NearbyService,\n  HousingType,\n  ProjectData,\n} from \"@/lib/definitios\";\nimport { formatNumber } from \"@/utils/formatters\";\nimport { useDetailsProjectValidation } from \"@/app/hooks/projects/createEditProject/useDetailsProjectValidation\";\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\nimport FormInput from \"@/app/ui/modals/admin/formInput\";\nimport FormSelect from \"@/app/ui/modals/admin/formSelect\";\nimport FormMultiSelect from \"@/app/ui/modals/admin/formMultiSelect\";\nimport FormDatePicker from \"@/app/ui/modals/admin/formDatePicker\";\n\ninterface DetailsProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n  commonAreas: CommonArea[];\n  nearbyServices: NearbyService[];\n  housingTypes: HousingType[];\n}\n\nexport default function DetailsProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n  commonAreas,\n  nearbyServices,\n  housingTypes,\n}: DetailsProjectFormProps) {\n  const { errors, validateFields, validateField } =\n    useDetailsProjectValidation(formData);\n\n  const handlePriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/[^0-9]/g, \"\");\n    const numericValue = value ? parseInt(value, 10) : 0;\n\n    onChange({ price: numericValue });\n    validateField(\"priceError\", numericValue);\n  };\n\n  const handleChangeText = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { name, value } = e.target;\n      if (formData[name as keyof ProjectData] !== value) {\n        onChange({ [name]: value });\n        validateField(`${name}Error` as keyof typeof errors, value);\n      }\n    },\n    [onChange, validateField, formData]\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { name, value, type } = e.target;\n      const updatedValue =\n        type === \"number\" ? (value === \"\" ? \"\" : parseFloat(value)) : value;\n\n      if (formData[name as keyof ProjectData] !== updatedValue) {\n        onChange({ [name]: updatedValue });\n        validateField(`${name}Error` as keyof typeof errors, updatedValue);\n      }\n    },\n    [onChange, validateField, formData]\n  );\n\n  const handleDateChange = (date: Date | null) => {\n    onChange({ availableDate: date ?? undefined });\n    validateField(\"dateError\" as keyof typeof errors, date);\n  };\n\n  const handleSelectChange = useCallback(\n    (\n      e: React.ChangeEvent<HTMLSelectElement>,\n      name: \"commonAreas\" | \"nearbyServices\" | \"housingType\"\n    ) => {\n      const id = parseInt(e.target.value, 10);\n      if (!id) return;\n\n      if (name === \"housingType\") {\n        const selectedHousingType = housingTypes.find((type) => type.id === id);\n        if (selectedHousingType && formData.housingType?.id !== id) {\n          onChange({ housingType: selectedHousingType });\n        }\n        return;\n      }\n\n      const selectedItem =\n        name === \"commonAreas\"\n          ? commonAreas.find((area) => area.id === id)\n          : nearbyServices.find((service) => service.id === id);\n\n      if (\n        selectedItem &&\n        !formData[name]?.some((item) => item.id === selectedItem.id)\n      ) {\n        onChange({ [name]: [...(formData[name] || []), selectedItem] });\n      }\n    },\n    [onChange, formData, housingTypes, commonAreas, nearbyServices]\n  );\n\n  const handleRemoveTag = useCallback(\n    (id: number, name: \"commonAreas\" | \"nearbyServices\") => {\n      const updatedItems =\n        formData[name]?.filter((item) => item.id !== id) || [];\n      onChange({ [name]: updatedItems });\n    },\n    [onChange, formData]\n  );\n\n  const handleNext = (e?: React.FormEvent) => {\n    e?.preventDefault();\n    const isValid = validateFields();\n    if (isValid) {\n      onNext();\n    }\n  };\n\n  const isProject = formData.projectType?.id === 1;\n  const isProperty =\n    formData.projectType?.id === 2 || formData.projectType?.id === 3;\n  const isApartmentOrHouse =\n    formData.propertyType?.id === 1001 || formData.propertyType?.id === 1002;\n\n  const tooltipTexts = useMemo(\n    () => ({\n      price: isProperty\n        ? \"Indique el precio de la propiedad.\"\n        : \"Indique el precio por unidad del proyecto.\",\n      availableUnits:\n        \"Especifique el número de unidades disponibles para este proyecto.\",\n      housingType: \"Seleccione el tipo de vivienda.\",\n      availableDate:\n        \"Seleccione la fecha estimada para la entrega del proyecto (mes/año).\",\n      complexName: \"Nombre del conjunto residencial (si aplica).\",\n      commonAreas: isProperty\n        ? \"Seleccione las áreas comunes disponibles en la propiedad.\"\n        : \"Seleccione las áreas comunes disponibles en el proyecto.\",\n      nearbyServices: isProperty\n        ? \"Seleccione los servicios cercanos a la propiedad.\"\n        : \"Seleccione los servicios cercanos al proyecto.\",\n    }),\n    [formData.projectType?.id]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {isProject ? \"Detalles del Proyecto\" : \"Detalles de la Propiedad\"}\n      </h2>\n\n      <form onSubmit={handleNext} className=\"space-y-6\">\n        <div\n          className={clsx(\n            \"grid gap-4\",\n            isProperty ? \"grid-cols-1\" : \"grid-cols-1 sm:grid-cols-2\"\n          )}\n        >\n          <FormInput\n            label=\"Precio\"\n            type=\"text\"\n            name=\"price\"\n            value={formData.price ? formatNumber(formData.price) : \"\"}\n            onChange={handlePriceChange}\n            placeholder=\"Ingrese el precio\"\n            error={errors.priceError}\n            tooltipText={tooltipTexts.price}\n          />\n\n          {isProject && (\n            <FormInput\n              label=\"Unidades Disponibles\"\n              type=\"number\"\n              name=\"availableUnits\"\n              value={formData.availableUnits || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de unidades disponibles\"\n              min={0}\n              tooltipText={tooltipTexts.availableUnits}\n            />\n          )}\n        </div>\n\n        {(isApartmentOrHouse || isProject) && (\n          <div\n            className={clsx(\n              \"grid grid-cols-1 gap-4\",\n              isApartmentOrHouse && isProject && \"sm:grid-cols-2\"\n            )}\n          >\n            {isApartmentOrHouse && (\n              <FormSelect\n                label=\"Tipo de Vivienda\"\n                name=\"housingType\"\n                value={formData.housingType?.id || \"\"}\n                options={housingTypes}\n                onChange={(e) => handleSelectChange(e, \"housingType\")}\n                error={errors.housingTypeError}\n                tooltipText={tooltipTexts.housingType}\n              />\n            )}\n\n            {isProject && (\n              <FormDatePicker\n                label=\"Fecha Estimada de Entrega\"\n                name=\"availableDate\"\n                value={formData.availableDate ?? null}\n                onChange={handleDateChange}\n                tooltipText={tooltipTexts.availableDate}\n              />\n            )}\n          </div>\n        )}\n\n        {formData.propertyType?.id === 1002 && isProperty && (\n          <FormInput\n            label=\"Nombre del conjunto\"\n            type=\"text\"\n            name=\"complexName\"\n            value={formData.complexName || \"\"}\n            onChange={handleChangeText}\n            maxLength={100}\n            placeholder=\"Ingrese el nombre del proyecto\"\n            tooltipText={tooltipTexts.complexName}\n          />\n        )}\n\n        <FormMultiSelect\n          label=\"Áreas Comunes\"\n          name=\"commonAreas\"\n          selectedItems={formData.commonAreas || []}\n          options={commonAreas}\n          onSelect={handleSelectChange}\n          onRemove={handleRemoveTag}\n          tooltipText={tooltipTexts.commonAreas}\n        />\n\n        <FormMultiSelect\n          label=\"Servicios Cercanos\"\n          name=\"nearbyServices\"\n          selectedItems={formData.nearbyServices || []}\n          options={nearbyServices}\n          onSelect={handleSelectChange}\n          onRemove={handleRemoveTag}\n          tooltipText={tooltipTexts.nearbyServices}\n        />\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
            "featuresProjectForm.tsx": "import { useCallback, useMemo } from \"react\";\nimport { ProjectData } from \"@/lib/definitios\";\nimport { useFeaturesProjectValidation } from \"@/app/hooks/projects/createEditProject/useFeaturesProjectValidation\";\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\nimport FormInput from \"@/app/ui/modals/admin/formInput\";\nimport FormSelect from \"@/app/ui/modals/admin/formSelect\";\nimport FormCheckboxToggle from \"@/app/ui/modals/admin/formCheckboxToggle\";\n\ninterface FeaturesProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n}\n\nexport default function FeaturesProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n}: FeaturesProjectFormProps) {\n  const { errors, validateFields, validateField } =\n    useFeaturesProjectValidation(formData);\n\n  const shouldShowField = useCallback(\n    (field: string) => {\n      const propertyTypeId = formData.propertyType?.id;\n\n      const conditions: Record<string, boolean> = {\n        socioeconomicLevel: propertyTypeId === 1001 || propertyTypeId === 1002,\n        yearBuilt: propertyTypeId === 1001 || propertyTypeId === 1002,\n        bedrooms: propertyTypeId === 1001 || propertyTypeId === 1002,\n        storageUnits: propertyTypeId === 1001 || propertyTypeId === 1002,\n        balcony: propertyTypeId === 1001 || propertyTypeId === 1002,\n        laundryArea: propertyTypeId === 1001 || propertyTypeId === 1002,\n        customizationOptions:\n          propertyTypeId === 1001 || propertyTypeId === 1002,\n        terrace: propertyTypeId === 1001,\n        garden: propertyTypeId === 1001,\n        bathrooms:\n          propertyTypeId === 1001 ||\n          propertyTypeId === 1002 ||\n          propertyTypeId === 1004,\n        lobbies:\n          propertyTypeId === 1001 ||\n          propertyTypeId === 1002 ||\n          propertyTypeId === 1004,\n        elevator: propertyTypeId === 1001 || propertyTypeId === 1002,\n        towers: propertyTypeId === 1002,\n        floorNumber: propertyTypeId === 1002,\n        freeHeight:\n          propertyTypeId === 1004 ||\n          propertyTypeId === 1003 ||\n          propertyTypeId === 1005,\n        width:\n          propertyTypeId === 1005 ||\n          propertyTypeId === 1006 ||\n          propertyTypeId === 1007,\n        length:\n          propertyTypeId === 1005 ||\n          propertyTypeId === 1006 ||\n          propertyTypeId === 1007,\n        heavyParking: propertyTypeId === 1005,\n      };\n\n      return conditions[field] ?? false;\n    },\n    [formData.propertyType?.id]\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { name, value, type } = e.target;\n      const updatedValue =\n        type === \"number\" ? (value === \"\" ? \"\" : parseFloat(value)) : value;\n\n      onChange({ [name]: updatedValue });\n      validateField(`${name}Error` as keyof typeof errors, updatedValue);\n    },\n    [onChange, validateField, errors]\n  );\n\n  const handleSelectChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const { name, value } = e.target;\n      const selectedValue = parseInt(value, 10);\n\n      onChange({ [name]: selectedValue });\n      validateField(`${name}Error` as keyof typeof errors, selectedValue);\n    },\n    [onChange, validateField, errors]\n  );\n\n  const handleNext = useCallback(\n    (e?: React.FormEvent) => {\n      e?.preventDefault();\n      if (validateFields()) {\n        onNext();\n      }\n    },\n    [validateFields, onNext]\n  );\n\n  const tooltipTexts = useMemo(\n    () => ({\n      totalArea:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese el área total de la propiedad en metros cuadrados.\"\n          : \"Ingrese el área total del proyecto en metros cuadrados.\",\n      builtArea:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese el área construida de la propiedad en metros cuadrados, considerando únicamente las áreas cubiertas.\"\n          : \"Ingrese el área construida del proyecto en metros cuadrados, considerando únicamente las áreas cubiertas.\",\n      socioeconomicLevel:\n        \"Seleccione el nivel socioeconómico asignado a la propiedad según la clasificación oficial del sector.\",\n      yearBuilt:\n        \"Seleccione el año en que la propiedad fue construida o su estructura original terminada.\",\n      bedrooms:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Especifique cuántas habitaciones tiene la propiedad.\"\n          : \"Especifique cuántas habitaciones tendrá el proyecto.\",\n      bathrooms:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Indique la cantidad total de baños que tiene la propiedad.\"\n          : \"Indique la cantidad total de baños que estarán incluidos en el proyecto.\",\n      lobbies:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese el número de salas de estar (salones o lobbies) que tiene la propiedad.\"\n          : \"Ingrese el número de salas de estar (salones o lobbies) que tendrá el proyecto.\",\n      freeHeight:\n        \"Especifique la altura libre del proyecto en metros, considerando el espacio disponible entre el suelo y el techo.\",\n      width:\n        \"Indique el frente total del proyecto en metros. Este valor corresponde a la dimensión horizontal.\",\n      length:\n        \"Especifique el fondo total del proyecto en metros. Este valor corresponde a la dimensión vertical.\",\n      heavyParking:\n        \"Indique cuántos espacios de parqueo estarán disponibles para vehículos pesados.\",\n      towers:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Indique la torre en la que se encuentra la propiedad (si aplica).\"\n          : \"Ingrese la cantidad de torres que tendrá el proyecto, si corresponde.\",\n      floorNumber:\n        \"Ingrese el número de piso donde se encuentra el apartamento. Por ejemplo, '3' para el tercer piso.\",\n      storageUnits:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Especifique el número total de depósitos (bodegas o cuartos de almacenamiento) disponibles para la propiedad.\"\n          : \"Especifique el número total de depósitos (bodegas o cuartos de almacenamiento) disponibles en el proyecto.\",\n      parkingSpots:\n        \"Especifique el número total de espacios de parqueo que estarán disponibles.\",\n    }),\n    [formData.projectType?.id]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {formData.projectType?.id === 1\n          ? \"Características del Proyecto\"\n          : \"Características de la Propiedad\"}\n      </h2>\n\n      <form onSubmit={handleNext} className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n          <FormInput\n            label=\"Área Total (m²)\"\n            type=\"number\"\n            name=\"totalArea\"\n            min={0}\n            value={formData.totalArea || \"\"}\n            onChange={handleChange}\n            placeholder=\"Área total\"\n            error={errors.totalAreaError}\n            tooltipText={tooltipTexts.totalArea}\n          />\n\n          <FormInput\n            label=\"Área Construida (m²)\"\n            type=\"number\"\n            name=\"builtArea\"\n            min={0}\n            value={formData.builtArea || \"\"}\n            onChange={handleChange}\n            placeholder=\"Área construida\"\n            error={errors.builtAreaError}\n            tooltipText={tooltipTexts.builtArea}\n          />\n\n          {shouldShowField(\"socioeconomicLevel\") &&\n            (formData.projectType?.id === 2 ||\n              formData.projectType?.id === 3) && (\n              <FormSelect\n                label=\"Nivel Socioeconómico\"\n                name=\"socioeconomicLevel\"\n                value={formData.socioeconomicLevel || \"\"}\n                onChange={handleSelectChange}\n                options={[1, 2, 3, 4, 5, 6].map((level) => ({\n                  id: level,\n                  name: `Estrato ${level}`,\n                }))}\n                error={errors.socioeconomicLevelError}\n                tooltipText={tooltipTexts.socioeconomicLevel}\n              />\n            )}\n\n          {shouldShowField(\"yearBuilt\") &&\n            (formData.projectType?.id === 2 ||\n              formData.projectType?.id === 3) && (\n              <FormSelect\n                label=\"Año de Construcción\"\n                name=\"yearBuilt\"\n                value={formData.yearBuilt || \"\"}\n                onChange={handleSelectChange}\n                options={Array.from(\n                  { length: new Date().getFullYear() - 1950 + 1 },\n                  (_, i) => ({\n                    id: 1950 + i,\n                    name: (1950 + i).toString(),\n                  })\n                )}\n                error={errors.yearBuiltError}\n                tooltipText={tooltipTexts.yearBuilt}\n              />\n            )}\n\n          {shouldShowField(\"bedrooms\") && (\n            <FormInput\n              label=\"Número de Habitaciones\"\n              type=\"number\"\n              name=\"bedrooms\"\n              min={0}\n              value={formData.bedrooms || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de habitaciones\"\n              error={errors.bedroomsError}\n              tooltipText={tooltipTexts.bedrooms}\n            />\n          )}\n\n          {shouldShowField(\"bathrooms\") && (\n            <FormInput\n              label=\"Número de Baños\"\n              type=\"number\"\n              name=\"bathrooms\"\n              min={0}\n              value={formData.bathrooms || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de baños\"\n              error={errors.bathroomsError}\n              tooltipText={tooltipTexts.bathrooms}\n            />\n          )}\n\n          {shouldShowField(\"lobbies\") && (\n            <FormInput\n              label=\"Número de Salas de Estar\"\n              type=\"number\"\n              name=\"lobbies\"\n              min={0}\n              value={formData.lobbies || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de salas de estar\"\n              error={errors.lobbiesError}\n              tooltipText={tooltipTexts.lobbies}\n            />\n          )}\n\n          {shouldShowField(\"freeHeight\") && (\n            <FormInput\n              label=\"Altura Libre (m)\"\n              type=\"number\"\n              name=\"freeHeight\"\n              min={0}\n              value={formData.freeHeight || \"\"}\n              onChange={handleChange}\n              placeholder=\"Altura libre\"\n              error={errors.freeHeightError}\n              tooltipText={tooltipTexts.freeHeight}\n            />\n          )}\n\n          {shouldShowField(\"width\") && (\n            <FormInput\n              label=\"Frente (m)\"\n              type=\"number\"\n              name=\"width\"\n              min={0}\n              value={formData.width || \"\"}\n              onChange={handleChange}\n              placeholder=\"Medida del frente\"\n              error={errors.widthError}\n              tooltipText={tooltipTexts.width}\n            />\n          )}\n\n          {shouldShowField(\"length\") && (\n            <FormInput\n              label=\"Fondo (m)\"\n              type=\"number\"\n              name=\"length\"\n              min={0}\n              value={formData.length || \"\"}\n              onChange={handleChange}\n              placeholder=\"Medida del fondo\"\n              error={errors.lengthError}\n              tooltipText={tooltipTexts.length}\n            />\n          )}\n\n          {shouldShowField(\"heavyParking\") && (\n            <FormInput\n              label={\n                formData.propertyType?.id === 1005\n                  ? \"Espacios de Parqueo Privado\"\n                  : \"Espacios de Parqueo Pesado\"\n              }\n              type=\"number\"\n              name=\"heavyParking\"\n              min={0}\n              value={formData.heavyParking || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de parqueos para vehículos pesados\"\n              tooltipText={tooltipTexts.heavyParking}\n            />\n          )}\n\n          {shouldShowField(\"towers\") && (\n            <FormInput\n              label={\n                formData.projectType?.id === 2 || formData.projectType?.id === 3\n                  ? \"Número de Torre\"\n                  : \"Número de Torres\"\n              }\n              type=\"number\"\n              name=\"towers\"\n              min={0}\n              value={formData.towers || \"\"}\n              onChange={handleChange}\n              placeholder={\n                formData.projectType?.id === 1\n                  ? \"Número de torres\"\n                  : \"Número de torre\"\n              }\n              error={\n                formData.projectType?.id === 1 ? errors.towersError : undefined\n              }\n              tooltipText={tooltipTexts.towers}\n            />\n          )}\n\n          {shouldShowField(\"floorNumber\") &&\n            (formData.projectType?.id === 2 ||\n              formData.projectType?.id === 3) && (\n              <FormInput\n                label=\"Número de Piso\"\n                type=\"number\"\n                name=\"floorNumber\"\n                min={0}\n                value={formData.floorNumber || \"\"}\n                onChange={handleChange}\n                placeholder=\"Número de piso\"\n                tooltipText={tooltipTexts.floorNumber}\n              />\n            )}\n\n          {shouldShowField(\"storageUnits\") && (\n            <FormInput\n              label=\"Depósitos\"\n              type=\"number\"\n              name=\"storageUnits\"\n              min={0}\n              value={formData.storageUnits || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de depósitos\"\n              tooltipText={tooltipTexts.storageUnits}\n            />\n          )}\n\n          <FormInput\n            label={\n              formData.propertyType?.id === 1005\n                ? \"Espacios de Parqueo Sociales\"\n                : \"Espacios de Parqueo\"\n            }\n            type=\"number\"\n            name=\"parkingSpots\"\n            min={0}\n            value={formData.parkingSpots || \"\"}\n            onChange={handleChange}\n            placeholder=\"Número de espacios de parqueo\"\n            tooltipText={tooltipTexts.parkingSpots}\n          />\n        </div>\n\n        {(formData.propertyType?.id === 1001 ||\n          formData.propertyType?.id === 1002) && (\n          <div>\n            <h3 className=\"mb-4 text-center text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\n              Características Adicionales\n            </h3>\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n              {shouldShowField(\"elevator\") && (\n                <FormCheckboxToggle\n                  label=\"Elevador\"\n                  name=\"elevator\"\n                  checked={formData.elevator || false}\n                  onChange={(checked) => onChange({ elevator: checked })}\n                />\n              )}\n\n              {shouldShowField(\"terrace\") && (\n                <FormCheckboxToggle\n                  label=\"Terraza\"\n                  name=\"terrace\"\n                  checked={formData.terrace || false}\n                  onChange={(checked) => onChange({ terrace: checked })}\n                />\n              )}\n\n              {shouldShowField(\"balcony\") && (\n                <FormCheckboxToggle\n                  label=\"Balcón\"\n                  name=\"balcony\"\n                  checked={formData.balcony || false}\n                  onChange={(checked) => onChange({ balcony: checked })}\n                />\n              )}\n\n              {shouldShowField(\"garden\") && (\n                <FormCheckboxToggle\n                  label=\"Jardín\"\n                  name=\"garden\"\n                  checked={formData.garden || false}\n                  onChange={(checked) => onChange({ garden: checked })}\n                />\n              )}\n\n              {shouldShowField(\"laundryArea\") && (\n                <FormCheckboxToggle\n                  label=\"Área de Lavado\"\n                  name=\"laundryArea\"\n                  checked={formData.laundryArea || false}\n                  onChange={(checked) => onChange({ laundryArea: checked })}\n                />\n              )}\n\n              {shouldShowField(\"customizationOptions\") &&\n                (formData.projectType?.id === 2 ||\n                  formData.projectType?.id === 3) && (\n                  <FormCheckboxToggle\n                    label=\"Opciones de Personalización\"\n                    name=\"customizationOptions\"\n                    checked={formData.customizationOptions || false}\n                    onChange={(checked) =>\n                      onChange({ customizationOptions: checked })\n                    }\n                  />\n                )}\n            </div>\n          </div>\n        )}\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
            "imagesProjectForm.tsx": "\"use client\";\n\nimport { useState, ChangeEvent, useEffect, useCallback, useMemo } from \"react\";\nimport { ProjectData, ImageType, Media } from \"@/lib/definitios\";\nimport { useImagesProjectValidation } from \"@/app/hooks/projects/createEditProject/useImagesProjectValidation\";\nimport ImageUploadSection from \"./imageUploadSection\";\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\nimport ModalAlert from \"../../../modals/admin/modalAlert\";\n\ninterface UploadImagesFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n  imagesTypes: ImageType[];\n  onSubmit: (media: Media[], validateFields: () => boolean) => void;\n}\n\nexport default function ImagesProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n  imagesTypes,\n  onSubmit,\n}: UploadImagesFormProps) {\n  const [initialized, setInitialized] = useState(false);\n  const [expandedSections, setExpandedSections] = useState<\n    Record<string, boolean>\n  >({});\n  const [showAlert, setShowAlert] = useState(false);\n  const [alertMessage, setAlertMessage] = useState(\"\");\n\n  const { errors, validateFields, validateField } = useImagesProjectValidation(\n    formData,\n    imagesTypes\n  );\n\n  const imagesByCategory = useMemo(() => {\n    const grouped: Record<string, Media[]> = {};\n    (formData.media || []).forEach((media) => {\n      if (!grouped[media.type]) {\n        grouped[media.type] = [];\n      }\n      grouped[media.type].push(media);\n    });\n\n    return grouped;\n  }, [formData.media]);\n\n  useEffect(() => {\n    if (!formData.projectMedia || initialized) return;\n\n    const transformedMedia: Media[] = formData.projectMedia.map((media) => ({\n      id: media.id?.toString() || \"\",\n      tag: media.tag || \"\",\n      file: media.url.startsWith(\"http\") ? media.url : new File([], media.url),\n      description: media.description || \"\",\n      idType: media.imageType || media.commonArea || 0,\n      type: media.type || \"\",\n      category: media.imageType ? \"imageType\" : \"commonArea\",\n    }));\n\n    onChange({ media: transformedMedia });\n    setInitialized(true);\n  }, [formData.projectMedia]);\n\n  useEffect(() => {\n    setExpandedSections(\n      imagesTypes.reduce((acc, item) => ({ ...acc, [item.name]: false }), {})\n    );\n  }, [imagesTypes]);\n\n  useEffect(() => {\n    if (!formData.media || formData.media.length === 0) return;\n    setTimeout(() => {\n      validateFields();\n    }, 100);\n  }, [formData.media]);\n\n  const toggleSection = useCallback((category: string) => {\n    setExpandedSections((prev) => ({ ...prev, [category]: !prev[category] }));\n  }, []);\n\n  const handleImageChange = useCallback(\n    (\n      category: string,\n      categoryId: number,\n      isImageType: boolean,\n      event: ChangeEvent<HTMLInputElement>\n    ) => {\n      if (!event.target.files || event.target.files.length === 0) return;\n\n      const selectedFiles = Array.from(event.target.files);\n\n      const newMedia = selectedFiles.map((file) => ({\n        file,\n        tag: \"\",\n        description: \"\",\n        idType: categoryId,\n        type: category,\n        category: isImageType ? \"imageType\" : \"commonArea\",\n      }));\n\n      const updatedMedia = [...(formData.media || []), ...newMedia];\n\n      onChange({ media: updatedMedia });\n    },\n    [onChange, formData.media, imagesTypes]\n  );\n\n  const handleRemoveImage = useCallback(\n    (category: string, index: number) => {\n      const imageToRemove = imagesByCategory[category]?.[index];\n      if (!imageToRemove) {\n        console.error(\n          `❌ No se encontró la imagen en la categoría ${category}`\n        );\n        return;\n      }\n\n      const updatedMedia = (formData.media || []).filter(\n        (media) => media.file !== imageToRemove.file\n      );\n\n      onChange({ media: updatedMedia });\n    },\n    [onChange, formData.media, imagesByCategory]\n  );\n\n  const handleTagChange = useCallback(\n    (category: string, index: number, tag: string) => {\n      if (!formData.media) return;\n\n      const imageToUpdate = imagesByCategory[category]?.[index];\n      if (!imageToUpdate) {\n        console.error(\n          `❌ No se encontró la imagen en ${category} con índice ${index}`\n        );\n        return;\n      }\n\n      const updatedMedia = formData.media.map((mediaItem) =>\n        mediaItem.file === imageToUpdate.file\n          ? { ...mediaItem, tag }\n          : mediaItem\n      );\n      onChange({ media: updatedMedia });\n\n      setTimeout(() => {\n        validateField(`${category}-tag-${index}`, tag);\n      }, 100);\n    },\n    [formData.media, imagesByCategory, onChange, validateField]\n  );\n\n  const handleDescriptionChange = useCallback(\n    (category: string, index: number, description: string) => {\n      if (!formData.media) return;\n\n      const imageToUpdate = imagesByCategory[category]?.[index];\n      if (!imageToUpdate) {\n        console.error(\n          `❌ No se encontró la imagen en ${category} con índice ${index}`\n        );\n        return;\n      }\n\n      const updatedMedia = formData.media.map((mediaItem) =>\n        mediaItem.file === imageToUpdate.file\n          ? { ...mediaItem, description }\n          : mediaItem\n      );\n\n      onChange({ media: updatedMedia });\n\n      setTimeout(() => {\n        validateField(`${category}-description-${index}`, description);\n      }, 100);\n    },\n    [formData.media, imagesByCategory, onChange, validateField]\n  );\n\n  const handleSubmit = useCallback(() => {\n    if (validateFields()) {\n      const mediaData: Media[] =\n        formData.media?.map((mediaItem) => ({\n          tag: mediaItem.tag || \"\",\n          file: mediaItem.file,\n          description: mediaItem.description || \"\",\n          idType: mediaItem.idType || 0,\n          type: mediaItem.type,\n          category: mediaItem.category,\n        })) || [];\n\n      onSubmit(mediaData, validateFields);\n      onNext();\n    }\n  }, [validateFields, formData.media, onSubmit, onNext]);\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark space-y-3\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {formData.projectType?.id === 1\n          ? \"Subir Imágenes del Proyecto\"\n          : \"Subir Imágenes de la Propiedad\"}\n      </h2>\n\n      {imagesTypes.map((type) => (\n        <ImageUploadSection\n          key={type.name}\n          imageType={type}\n          category=\"imageType\"\n          expanded={expandedSections[type.name]}\n          images={\n            imagesByCategory[type.name]?.map((media) =>\n              typeof media.file === \"string\"\n                ? media.file\n                : URL.createObjectURL(media.file)\n            ) || []\n          }\n          tags={imagesByCategory[type.name]?.map((img) => img.tag) || []}\n          descriptions={\n            imagesByCategory[type.name]?.map((img) => img.description || \"\") ||\n            []\n          }\n          error={errors[type.name] || null}\n          errors={{ ...errors }}\n          onToggleExpand={() => toggleSection(type.name)}\n          onImageChange={(e) => handleImageChange(type.name, type.id, true, e)}\n          onRemoveImage={(index) => handleRemoveImage(type.name, index)}\n          onTagChange={(index, newTag) =>\n            handleTagChange(type.name, index, newTag)\n          }\n          onDescriptionChange={(index, newDescription) =>\n            handleDescriptionChange(type.name, index, newDescription)\n          }\n        />\n      ))}\n\n      {formData.commonAreas && formData.commonAreas.length > 0 && (\n        <h3 className=\"my-6 text-center text-xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n          Subir imágenes de las áreas comunes\n        </h3>\n      )}\n\n      {formData.commonAreas?.map((area) => (\n        <ImageUploadSection\n          key={area.name}\n          imageType={{\n            id: area.id,\n            name: area.name,\n            maxImagesAllowed: 5,\n            isRequired: true,\n          }}\n          category=\"commonArea\"\n          expanded={expandedSections[area.name] || false}\n          images={imagesByCategory[area.name]?.map((media) => media.file) || []}\n          tags={imagesByCategory[area.name]?.map((media) => media.tag) || []}\n          descriptions={\n            imagesByCategory[area.name]?.map(\n              (media) => media.description || \"\"\n            ) || []\n          }\n          error={errors[area.name] || null}\n          errors={{ ...errors }}\n          onToggleExpand={() => toggleSection(area.name)}\n          onImageChange={(e) => handleImageChange(area.name, area.id, false, e)}\n          onRemoveImage={(index) => handleRemoveImage(area.name, index)}\n          onTagChange={(index, newTag) =>\n            handleTagChange(area.name, index, newTag)\n          }\n          onDescriptionChange={(index, newDescription) =>\n            handleDescriptionChange(area.name, index, newDescription)\n          }\n        />\n      ))}\n\n      <StepNavigationButtons\n        currentStep={currentStep}\n        totalSteps={totalSteps}\n        onPrevious={onPrevious}\n        onNext={handleSubmit}\n      />\n\n      <ModalAlert\n        title=\"Advertencia\"\n        message={alertMessage}\n        isOpen={showAlert}\n        onClose={() => setShowAlert(false)}\n      />\n    </div>\n  );\n}\n",
            "imageUploadSection.tsx": "import { useMemo, useCallback } from \"react\";\nimport clsx from \"clsx\";\nimport { ChevronDown } from \"lucide-react\";\nimport { ImageType } from \"@/lib/definitios\";\nimport ImageWithTag from \"./imageWithTag\";\nimport FormErrorMessage from \"../../../modals/formErrorMessage\";\n\ninterface ImageUploadSectionProps {\n  imageType: ImageType;\n  category: string;\n  expanded: boolean;\n  images: (File | string)[];\n  tags: string[];\n  descriptions: string[];\n  error: string | null;\n  errors: Record<string, string>;\n  onToggleExpand: () => void;\n  onImageChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onRemoveImage: (index: number) => void;\n  onTagChange: (index: number, tag: string) => void;\n  onDescriptionChange: (index: number, description: string) => void;\n}\n\nexport default function ImageUploadSection({\n  imageType,\n  category,\n  expanded,\n  images,\n  tags,\n  descriptions,\n  error,\n  errors,\n  onToggleExpand,\n  onImageChange,\n  onRemoveImage,\n  onTagChange,\n  onDescriptionChange,\n}: ImageUploadSectionProps) {\n  const handleRemoveImage = useCallback(\n    (index: number) => onRemoveImage(index),\n    [onRemoveImage]\n  );\n\n  const handleTagChange = useCallback(\n    (index: number, newTag: string) => {\n      onTagChange(index, newTag);\n    },\n    [onTagChange]\n  );\n\n  const handleDescriptionChange = useCallback(\n    (index: number, newDescription: string) => {\n      onDescriptionChange(index, newDescription);\n    },\n    [onDescriptionChange]\n  );\n\n  const imageList = useMemo(() => {\n    return images.map((file, index) => (\n      <ImageWithTag\n        key={`${imageType.name}-${index}`}\n        id={`${imageType.name}-${index}`}\n        file={typeof file === \"string\" ? file : URL.createObjectURL(file)}\n        tag={tags[index] || \"\"}\n        description={descriptions[index] || \"\"}\n        imageTypeId={imageType.id}\n        category={category}\n        onRemove={() => handleRemoveImage(index)}\n        onTagChange={(newTag) => handleTagChange(index, newTag)}\n        onDescriptionChange={(newDescription) =>\n          handleDescriptionChange(index, newDescription)\n        }\n        error={errors[`${imageType.name}-tag-${index}`]}\n        descriptionError={errors[`${imageType.name}-description-${index}`]}\n      />\n    ));\n  }, [\n    images,\n    tags,\n    descriptions,\n    errors,\n    handleRemoveImage,\n    handleTagChange,\n    handleDescriptionChange,\n  ]);\n\n  const handleImageChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (!event.target.files) return;\n\n      const selectedFiles = Array.from(event.target.files);\n      const totalImages = images.length + selectedFiles.length;\n\n      if (\n        imageType.maxImagesAllowed &&\n        totalImages > imageType.maxImagesAllowed\n      ) {\n        alert(\n          `Solo puedes subir hasta ${imageType.maxImagesAllowed} imagen${\n            imageType.maxImagesAllowed > 1 ? \"es\" : \"\"\n          } para ${imageType.name}`\n        );\n        return;\n      }\n\n      onImageChange(event);\n    },\n    [images.length, imageType.maxImagesAllowed, imageType.name, onImageChange]\n  );\n\n  return (\n    <div\n      className={clsx(\n        \"rounded-md pb-1 transition bg-premium-backgroundDark hover:bg-premium-background dark:bg-premium-background dark:hover:bg-premium-backgroundLight\",\n        error ? \"border border-red-500\" : \"border-none\"\n      )}\n    >\n      <div\n        className=\"flex flex-col cursor-pointer p-4 space-y-3\"\n        onClick={onToggleExpand}\n      >\n        <div className=\"flex items-center justify-between\">\n          <h4 className=\"text-lg font-semibold text-premium-textPrimary\">\n            {imageType.name}\n          </h4>\n          <ChevronDown\n            className={clsx(\n              \"transition-transform duration-300 text-premium-textPrimary dark:text-premium-textSecondary\",\n              expanded && \"rotate-180\"\n            )}\n          />\n        </div>\n\n        {imageType.description && (\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            {imageType.description}\n          </p>\n        )}\n      </div>\n\n      {expanded && (\n        <div className=\"px-4 pb-4\">\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            multiple\n            onChange={handleImageChange}\n            className={clsx(\n              \"mt-2 w-full rounded-lg px-3 py-2 text-premium-textPrimary\",\n              error ? \"border-red-500\" : \"border-none\"\n            )}\n          />\n          <p className=\"ml-2 mt-1 text-sm text-gray-600 dark:text-gray-400\">\n            {images.length} archivo(s) subido(s)\n          </p>\n\n          {error && <FormErrorMessage error={error} />}\n\n          <div className=\"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3\">\n            {imageList}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n",
            "imageWithTag.tsx": "import { useEffect, useState, useCallback } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { X } from \"lucide-react\";\n\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/admin/formInput\"), {\n  ssr: false,\n});\nconst FormTextArea = dynamic(\n  () => import(\"@/app/ui/modals/admin/formTextArea\"),\n  {\n    ssr: false,\n  }\n);\n\ninterface ImageWithTagProps {\n  id?: string;\n  file: File | string;\n  tag: string;\n  description: string;\n  imageTypeId: number;\n  category: string;\n  onRemove: () => void;\n  onTagChange: (newTag: string) => void;\n  onDescriptionChange: (newDescription: string) => void;\n  error?: string;\n  descriptionError?: string;\n}\n\nexport default function ImageWithTag({\n  id,\n  file,\n  tag,\n  description,\n  imageTypeId,\n  category,\n  onRemove,\n  onTagChange,\n  onDescriptionChange,\n  error,\n  descriptionError,\n}: ImageWithTagProps) {\n  const [imageUrl, setImageUrl] = useState<string | null>(null);\n  const [localTag, setLocalTag] = useState(tag);\n  const [localDescription, setLocalDescription] = useState(description);\n\n  useEffect(() => {\n    if (!file) {\n      console.error(\"❌ No se recibió archivo en ImageWithTag.\");\n      return;\n    }\n\n    if (typeof file === \"string\") {\n      setImageUrl(encodeURI(file));\n    } else {\n      const url = URL.createObjectURL(file);\n      setImageUrl(url);\n\n      return () => URL.revokeObjectURL(url);\n    }\n  }, [file]);\n\n  useEffect(() => {\n    setLocalTag(tag);\n  }, [tag]);\n\n  useEffect(() => {\n    setLocalDescription(description);\n  }, [description]);\n\n  const handleTagChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setLocalTag(e.target.value);\n    onTagChange(e.target.value);\n  };\n\n  const handleDescriptionChange = useCallback(\n    (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n      setLocalDescription(e.target.value);\n      onDescriptionChange(e.target.value);\n    },\n    [onDescriptionChange]\n  );\n\n  return (\n    <div className=\"relative w-full rounded-md border border-gray-300 bg-premium-backgroundLight p-3 dark:border-gray-700 dark:bg-premium-backgroundDark space-y-4\">\n      {imageUrl && (\n        <div\n          className=\"relative h-32 w-full rounded-md bg-cover bg-center\"\n          style={{ backgroundImage: `url(${imageUrl})` }}\n        >\n          <button\n            type=\"button\"\n            className=\"absolute right-2 top-2 rounded-full bg-gray-400 p-1 text-white transition hover:bg-gray-600\"\n            onClick={onRemove}\n            aria-label=\"Eliminar imagen\"\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n        </div>\n      )}\n\n      <FormInput\n        id={id}\n        label=\"Nombre\"\n        type=\"text\"\n        name=\"tag\"\n        value={localTag}\n        onChange={handleTagChange}\n        placeholder=\"Nombre\"\n        maxLength={100}\n        error={error}\n        tooltipText=\"Ingrese un nombre para la imagen.\"\n      />\n\n      {imageTypeId === 1005 && category === \"imageType\" && (\n        <FormTextArea\n          label=\"Descripción\"\n          name=\"description\"\n          value={localDescription}\n          onChange={handleDescriptionChange}\n          placeholder=\"Descripción\"\n          maxLength={100}\n          error={descriptionError}\n          tooltipText=\"Ingrese una breve descripción del plano.\"\n          rows={4}\n        />\n      )}\n    </div>\n  );\n}\n",
            "locationProjectForm.tsx": "import { useCallback, useMemo, memo } from \"react\";\nimport { ProjectData, City, Departament } from \"@/lib/definitios\";\nimport { useLocationProjectValidation } from \"@/app/hooks/projects/createEditProject/useLocationProjectValidation\";\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\nimport LocationMap from \"../locationMap\";\nimport FormSearchAddress from \"../../../modals/admin/formSearchAddress\";\nimport FormSelect from \"../../../modals/admin/formSelect\";\nimport FormInput from \"../../../modals/admin/formInput\";\n\ninterface LocationProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n  departaments: Departament[];\n  cities: City[];\n  mapAddress: string;\n  setMapAddress: (value: string) => void;\n}\n\nfunction LocationProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n  departaments,\n  cities,\n  mapAddress,\n  setMapAddress,\n}: LocationProjectFormProps) {\n  const { errors, validateFields, validateField } =\n    useLocationProjectValidation(formData);\n\n  const propertyOptions = useMemo(\n    () => departaments.map((dep) => ({ id: dep.id, name: dep.name })),\n    [departaments]\n  );\n\n  const cityOptions = useMemo(\n    () =>\n      cities\n        .filter(\n          (city) => city.departament.id === formData.city?.departament?.id\n        )\n        .map((city) => ({ id: city.id, name: city.name })),\n    [cities, formData.city?.departament?.id]\n  );\n\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\n\n  const handleDepartamentChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const departamentId = parseInt(e.target.value);\n      const selectedDepartament = departaments.find(\n        (dep) => dep.id === departamentId\n      );\n\n      if (\n        selectedDepartament &&\n        selectedDepartament.id !== formData.city?.departament?.id\n      ) {\n        onChange({\n          city: { id: 0, name: \"\", departament: selectedDepartament },\n          address: \"\",\n          latitude: undefined,\n          longitude: undefined,\n        });\n        validateField(\"departamentError\", departamentId);\n      }\n    },\n    [onChange, validateField, formData.city?.departament?.id, departaments]\n  );\n\n  const handleCityChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const cityId = parseInt(e.target.value);\n      const selectedCity = cities.find((city) => city.id === cityId);\n\n      if (selectedCity && selectedCity.id !== formData.city?.id) {\n        onChange({\n          city: selectedCity,\n          address: \"\",\n          latitude: undefined,\n          longitude: undefined,\n        });\n        validateField(\"cityError\", cityId);\n      }\n    },\n    [onChange, validateField, formData.city?.id, cities]\n  );\n\n  const handleAddressSelect = useCallback(\n    async (placeId: string, description: string) => {\n      const placesService = new google.maps.places.PlacesService(\n        document.createElement(\"div\")\n      );\n\n      placesService.getDetails({ placeId }, (place, status) => {\n        if (\n          status === google.maps.places.PlacesServiceStatus.OK &&\n          place?.geometry?.location\n        ) {\n          const lat = place.geometry.location.lat();\n          const lng = place.geometry.location.lng();\n\n          const geocoder = new google.maps.Geocoder();\n          geocoder.geocode({ location: { lat, lng } }, (results, status) => {\n            if (status === google.maps.GeocoderStatus.OK && results?.length) {\n              const formattedAddress = results[0].formatted_address;\n              const foundCity = results.find((result) =>\n                result.types.includes(\"locality\")\n              );\n              const foundDepartment = results.find((result) =>\n                result.types.includes(\"administrative_area_level_1\")\n              );\n\n              const cityName =\n                foundCity?.formatted_address.split(\",\")[0].trim() || \"\";\n              const departmentName =\n                foundDepartment?.formatted_address.split(\",\")[0].trim() || \"\";\n\n              const selectedCity = cities.find(\n                (c) => c.name.toLowerCase() === cityName.toLowerCase()\n              );\n              const selectedDepartment = departaments.find(\n                (d) => d.name.toLowerCase() === departmentName.toLowerCase()\n              );\n\n              if (\n                selectedCity?.id !== formData.city?.id ||\n                selectedDepartment?.id !== formData.city?.departament?.id\n              ) {\n                onChange({\n                  address: formattedAddress,\n                  latitude: lat,\n                  longitude: lng,\n                  city: selectedCity || {\n                    id: 0,\n                    name: \"Ciudad desconocida\",\n                    departament: selectedDepartment || {\n                      id: 0,\n                      name: \"Departamento desconocido\",\n                    },\n                  },\n                });\n              } else {\n                onChange({ address: formattedAddress });\n              }\n\n              validateField(\"addressError\", formattedAddress);\n            }\n          });\n        }\n      });\n    },\n    [\n      onChange,\n      validateField,\n      formData.city?.id,\n      formData.city?.departament?.id,\n      cities,\n      departaments,\n    ]\n  );\n\n  const handleNext = (e?: React.FormEvent) => {\n    e?.preventDefault();\n\n    if (formData.projectType?.id !== 1) {\n      const propertyTypeName = formData.propertyType?.name || \"Propiedad\";\n      const projectTypeName = formData.projectType?.name || \"\";\n      const cityName = formData.city?.name || \"\";\n      const departamentName = formData.city?.departament?.name || \"\";\n      const generatedName =\n        `${propertyTypeName} en ${projectTypeName} en ${cityName}, ${departamentName}`.trim();\n\n      onChange({ name: generatedName });\n    }\n\n    if (validateFields(mapAddress)) {\n      onNext();\n    }\n  };\n\n  const tooltipTexts = useMemo(\n    () => ({\n      departament:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Seleccione el departamento donde se encuentra la propiedad.\"\n          : \"Seleccione el departamento donde se encuentra el proyecto.\",\n      city:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Seleccione la ciudad correspondiente la propiedad.\"\n          : \"Seleccione la ciudad correspondiente al proyecto.\",\n      address:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese la dirección de la propiedad.\"\n          : \"Ingrese la dirección del proyecto.\",\n    }),\n    [formData.projectType?.id]\n  );\n\n  const handleMapAddressChange = useCallback((value: string) => {\n    setMapAddress(value);\n  }, []);\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {formData.projectType?.id\n          ? \"Ubicación del Proyecto\"\n          : \"Ubicación de la Propiedad\"}\n      </h2>\n\n      <form className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n          <FormSelect\n            label=\"Departamento\"\n            name=\"departament\"\n            value={formData.city?.departament?.id || \"\"}\n            options={propertyOptions}\n            onChange={handleDepartamentChange}\n            error={errors.departamentError}\n            tooltipText={tooltipTexts.departament}\n          />\n\n          <FormSelect\n            label=\"Ciudad\"\n            name=\"city\"\n            value={formData.city?.id || \"\"}\n            options={cityOptions}\n            onChange={handleCityChange}\n            error={errors.cityError}\n            tooltipText={tooltipTexts.city}\n          />\n        </div>\n\n        <div className=\"relative z-20 space-y-4\">\n          <FormInput\n            label=\"Dirección Pública\"\n            name=\"address\"\n            type=\"text\"\n            placeholder=\"Ej: Calle 123 #45-67, Barrio XYZ\"\n            value={formData.address || \"\"}\n            onChange={(e) => onChange({ address: e.target.value })}\n            error={errors.addressError}\n            tooltipText=\"Ingresa la dirección que se mostrará públicamente.\"\n          />\n\n          <FormSearchAddress\n            label=\"Ubicación en el Mapa\"\n            value={mapAddress || \"\"}\n            onChange={handleMapAddressChange}\n            onSelect={handleAddressSelect}\n            error={errors.mapAddressError}\n            isLoaded={isMapsReady}\n            tooltipText=\"Busca la dirección en el mapa para obtener la ubicación exacta.\"\n          />\n        </div>\n\n        <div className=\"relative h-64 w-full\">\n          <LocationMap\n            isLoaded={isMapsReady}\n            coordinates={{\n              lat:\n                typeof formData.latitude === \"number\"\n                  ? formData.latitude\n                  : 4.5709,\n              lng:\n                typeof formData.longitude === \"number\"\n                  ? formData.longitude\n                  : -74.2973,\n            }}\n            onLocationSelect={(coords) => {\n              setMapAddress(coords.address ?? \"\");\n\n              const selectedCity = cities.find((c) => c.name === coords.city);\n              const selectedDepartment = departaments.find(\n                (d) => d.name === coords.department\n              );\n\n              const currentCityId = formData.city?.id || 0;\n              const currentDepartmentId = formData.city?.departament?.id || 0;\n\n              if (\n                selectedCity?.id !== currentCityId ||\n                selectedDepartment?.id !== currentDepartmentId\n              ) {\n                onChange({\n                  latitude: coords.lat,\n                  longitude: coords.lng,\n                  city: selectedCity || {\n                    id: 0,\n                    name: \"Ciudad desconocida\",\n                    departament: selectedDepartment || {\n                      id: 0,\n                      name: \"Departamento desconocido\",\n                    },\n                  },\n                });\n              } else {\n                onChange({\n                  latitude: coords.lat,\n                  longitude: coords.lng,\n                });\n              }\n            }}\n            showUserLocationButton={true}\n          />\n        </div>\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n\nexport default memo(LocationProjectForm);\n",
            "progressBar.tsx": "import dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ClipboardList = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ClipboardList)\n);\nconst MapPin = dynamic(() => import(\"lucide-react\").then((mod) => mod.MapPin));\nconst Building2 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building2)\n);\nconst List = dynamic(() => import(\"lucide-react\").then((mod) => mod.List));\nconst Images = dynamic(() => import(\"lucide-react\").then((mod) => mod.Images));\n\ntype ProgressBarProps = {\n  currentStep: number;\n};\n\nconst steps = [\n  { icon: ClipboardList, title: \"Datos básicos\" },\n  { icon: MapPin, title: \"Ubicación\" },\n  { icon: Building2, title: \"Características\" },\n  { icon: List, title: \"Resumen\" },\n  { icon: Images, title: \"Imágenes\" },\n];\n\nexport default function ProgressBar({ currentStep }: ProgressBarProps) {\n  return (\n    <div className=\"mx-auto flex w-full max-w-xl items-center justify-center\">\n      {steps.map((step, index) => {\n        const Icon = step.icon;\n        const isLastStep = index === steps.length - 1;\n        const isActive = currentStep >= index;\n\n        return (\n          <div\n            key={index}\n            className={clsx(\"flex items-center\", !isLastStep && \"flex-1\")}\n          >\n            <div\n              className={clsx(\n                \"z-10 flex h-12 w-12 items-center justify-center rounded-full transition-colors duration-300\",\n                isActive\n                  ? \"bg-premium-primary text-white dark:bg-premium-primaryLight\"\n                  : \"bg-premium-backgroundDark text-premium-textSecondary dark:bg-premium-backgroundLight dark:text-premium-textPlaceholder\"\n              )}\n            >\n              <div title={step.title}>\n                <Icon size={25} />\n              </div>\n            </div>\n\n            {!isLastStep && (\n              <div\n                className={clsx(\n                  \"h-1 transition-colors duration-300\",\n                  currentStep > index\n                    ? \"bg-premium-borderColor dark:bg-premium-borderColorHover\"\n                    : \"bg-premium-backgroundDark dark:bg-premium-backgroundLight\"\n                )}\n                style={{\n                  width: \"calc(100% - 2.25rem)\",\n                  marginLeft: \"-4px\",\n                }}\n              />\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n",
            "projectForm.tsx": "\"use client\";\r\n\r\nimport { useEffect, useCallback, useMemo, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ProjectData, Media } from \"@/lib/definitios\";\r\nimport useLocations from \"@/app/hooks/projects/metadata/location/useLocations\";\r\nimport useBasicMetadata from \"@/app/hooks/projects/metadata/useBasicMetadata\";\r\nimport useImageTypes from \"@/app/hooks/projects/metadata/imageTypes/useImageTypes\";\r\nimport useDeleteProject from \"@/app/hooks/projects/useDeleteProject\";\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport { useS3ImagesApi } from \"@/app/hooks/s3/useS3ImagesApi\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport { useProjectMediaApi } from \"@/app/hooks/projects/metadata/projectMedia/useProjectMediaApi\";\r\nimport ProgressBar from \"@/app/ui/admin/projects/createEditProject/progressBar\";\r\nimport BasicProjectForm from \"@/app/ui/admin/projects/createEditProject/basicProjectForm\";\r\nimport LocationProjectForm from \"@/app/ui/admin/projects/createEditProject/locationProjectForm\";\r\nimport FeaturesProjectForm from \"@/app/ui/admin/projects/createEditProject/featuresProjectForm\";\r\nimport DetailsProjectForm from \"@/app/ui/admin/projects/createEditProject/detailsProjectForm\";\r\nimport ImagesProjectForm from \"@/app/ui/admin/projects/createEditProject/imagesProjectForm\";\r\nimport ModalConfirmation from \"@/app/ui/modals/admin/modalConfirmation\";\r\nimport CreateProjectSkeleton from \"@/app/ui/skeletons/admin/createProjectSkeleton\";\r\nimport Loader from \"@/app/ui/loader\";\r\n\r\ninterface ProjectFormProps {\r\n  isEdit: boolean;\r\n  isProperty: boolean;\r\n  projectId?: number;\r\n  hasPermission?: boolean;\r\n}\r\n\r\nexport default function ProjectForm({\r\n  isEdit,\r\n  isProperty,\r\n  projectId,\r\n  hasPermission,\r\n}: ProjectFormProps) {\r\n  const projectQuery = isEdit\r\n    ? useProjectById(projectId, !isProperty)\r\n    : { project: null, loading: false };\r\n  const { project, loading: loadingProject } = projectQuery;\r\n\r\n  const [projectData, setProjectData] = useState<Partial<ProjectData>>(\r\n    isEdit ? {} : { projectType: { id: 1, name: \"Sobre Planos\" }, media: [] }\r\n  );\r\n\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const totalSteps = 5;\r\n  const router = useRouter();\r\n\r\n  const { locations } = useLocations();\r\n  const { metadata } = useBasicMetadata();\r\n  const { imagesTypes } = useImageTypes();\r\n  const { submitProject } = useProjectApi();\r\n  const { deleteProject } = useDeleteProject();\r\n  const { uploadImages, deleteImages } = useS3ImagesApi();\r\n  const { insertProjectMedia, updateProjectMedia, deleteProjectMedia } =\r\n    useProjectMediaApi();\r\n  const [loading, setLoading] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [mediaToSubmit, setMediaToSubmit] = useState<Media[] | null>(null);\r\n  const [mapAddress, _setMapAddress] = useState(isEdit ? \"Ubicación\" : \"\");\r\n  const mapAddressRef = useRef(mapAddress);\r\n\r\n  const setMapAddress = (value: string) => {\r\n    mapAddressRef.current = value;\r\n    _setMapAddress(value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isEdit && project && Object.keys(project).length > 0) {\r\n      setProjectData((prev) => ({\r\n        ...prev,\r\n        ...project,\r\n      }));\r\n\r\n      setMapAddress(project.address || \"\");\r\n    }\r\n  }, [isEdit, project]);\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"\";\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [loading]);\r\n\r\n  const handleUpdateProject = useCallback(\r\n    (updatedData: Partial<ProjectData>) => {\r\n      setProjectData((prevData) => {\r\n        const newData = structuredClone({ ...prevData, ...updatedData });\r\n        return newData;\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleNextStep = useCallback(() => {\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep((prevStep) => prevStep + 1);\r\n    }\r\n  }, [currentStep, totalSteps]);\r\n\r\n  const handlePreviousStep = useCallback(() => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep((prevStep) => prevStep - 1);\r\n    }\r\n  }, [currentStep]);\r\n\r\n  const handleSubmit = useCallback(\r\n    (data: Partial<ProjectData>) => {\r\n      handleUpdateProject(data);\r\n      handleNextStep();\r\n    },\r\n    [handleUpdateProject, handleNextStep]\r\n  );\r\n\r\n  const handleFinalSubmit = async (media: Media[]) => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const finalProjectData = { ...projectData, media };\r\n\r\n      const projectId = await createOrUpdateProject(finalProjectData);\r\n      if (!projectId) {\r\n        console.error(\"❌ No se pudo obtener un ID de proyecto válido.\");\r\n        return;\r\n      }\r\n\r\n      if (isEdit) {\r\n        await handleEditMedia(projectId, media);\r\n      } else {\r\n        await handleNewMedia(projectId, media);\r\n      }\r\n\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"success\",\r\n          message: isEdit\r\n            ? isProperty\r\n              ? \"Propiedad editada exitosamente.\"\r\n              : \"Proyecto editado exitosamente.\"\r\n            : isProperty\r\n              ? \"Propiedad creada exitosamente.\"\r\n              : \"Proyecto creado exitosamente.\",\r\n        })\r\n      );\r\n    } catch (err) {\r\n      console.error(\"❌ Error durante el proceso:\", err);\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"error\",\r\n          message: \"Hubo un problema al procesar el proyecto.\",\r\n        })\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n      router.push(isProperty ? \"/admin/propiedades\" : \"/admin/proyectos\");\r\n    }\r\n  };\r\n\r\n  const createOrUpdateProject = async (projectData: Partial<ProjectData>) => {\r\n    const result = await submitProject(projectData, isEdit ? \"edit\" : \"create\");\r\n\r\n    if (isEdit) {\r\n      if (!result) {\r\n        console.error(\"❌ Error al editar el proyecto.\");\r\n        sessionStorage.setItem(\r\n          \"projectMessage\",\r\n          JSON.stringify({\r\n            type: \"error\",\r\n            message: \"Error al editar el proyecto.\",\r\n          })\r\n        );\r\n        return null;\r\n      }\r\n      return projectData.id ?? null;\r\n    } else {\r\n      if (typeof result === \"number\") return result;\r\n\r\n      console.error(\"❌ Error al crear el proyecto.\");\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"error\",\r\n          message: \"Error al crear el proyecto.\",\r\n        })\r\n      );\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleEditMedia = async (projectId: number, media: Media[]) => {\r\n    const existingMedia = media.filter((m) => typeof m.file === \"string\");\r\n    const newMedia = media.filter((m) => m.file instanceof File);\r\n\r\n    const mediaUrls = existingMedia.map((m) => m.file as string);\r\n    const previousMediaUrls = projectData.projectMedia?.map((m) => m.url) || [];\r\n\r\n    await deleteUnusedImages(previousMediaUrls, mediaUrls);\r\n\r\n    if (newMedia.length > 0) {\r\n      await uploadAndInsertMedia(projectId, newMedia);\r\n    }\r\n\r\n    await updateExistingMedia(media);\r\n  };\r\n\r\n  const handleNewMedia = async (projectId: number, media: Media[]) => {\r\n    await uploadAndInsertMedia(projectId, media);\r\n  };\r\n\r\n  const deleteUnusedImages = async (\r\n    previousUrls: string[],\r\n    currentUrls: string[]\r\n  ) => {\r\n    const imagesToDelete = previousUrls.filter(\r\n      (url) => !currentUrls.includes(url)\r\n    );\r\n\r\n    if (imagesToDelete.length > 0) {\r\n      await deleteImages(imagesToDelete);\r\n\r\n      const mediaIdsToDelete =\r\n        projectData.projectMedia\r\n          ?.filter((m) => imagesToDelete.includes(m.url))\r\n          .map((m) => m.id)\r\n          .filter((id): id is number => id !== undefined) || [];\r\n\r\n      if (mediaIdsToDelete.length > 0) {\r\n        await deleteProjectMedia(mediaIdsToDelete);\r\n      }\r\n    }\r\n  };\r\n\r\n  const uploadAndInsertMedia = async (projectId: number, media: Media[]) => {\r\n    const uploadResult = await uploadImages(\r\n      projectId,\r\n      media,\r\n      projectData.propertyType?.name ?? \"default\"\r\n    );\r\n\r\n    if (!uploadResult || uploadResult.length === 0) {\r\n      console.error(\r\n        \"❌ No se pudieron subir imágenes. Eliminando el proyecto...\"\r\n      );\r\n      await deleteProject(projectId);\r\n      throw new Error(\"Error al subir las imágenes. Proyecto eliminado.\");\r\n    }\r\n\r\n    try {\r\n      await insertProjectMedia(uploadResult);\r\n    } catch (error) {\r\n      console.error(\r\n        \"❌ Error al insertar imágenes en la base de datos. Eliminando el proyecto...\"\r\n      );\r\n      await deleteProject(projectId);\r\n      throw new Error(\r\n        \"Error al insertar imágenes en la BD. Proyecto eliminado.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const updateExistingMedia = async (media: Media[]): Promise<void> => {\r\n    const mediaToUpdate =\r\n      projectData.projectMedia\r\n        ?.map((original) => {\r\n          const updated = media.find(\r\n            (m) => typeof m.file === \"string\" && m.file === original.url\r\n          );\r\n\r\n          if (\r\n            updated &&\r\n            (updated.tag.trim() !== original.tag.trim() ||\r\n              (updated.description?.trim() || \"\") !==\r\n                (original.description?.trim() || \"\"))\r\n          ) {\r\n            return {\r\n              id: original.id!,\r\n              tag: updated.tag,\r\n              description: updated.description ?? \"\",\r\n            };\r\n          }\r\n          return null;\r\n        })\r\n        .filter(\r\n          (item): item is { id: number; tag: string; description: string } =>\r\n            item !== null\r\n        ) || [];\r\n\r\n    if (mediaToUpdate.length > 0) {\r\n      await updateProjectMedia(mediaToUpdate);\r\n    }\r\n  };\r\n\r\n  const handleOpenModal = (media: Media[], validateFields: () => boolean) => {\r\n    setProjectData((prevData) => ({\r\n      ...prevData,\r\n      media,\r\n    }));\r\n\r\n    setTimeout(() => {\r\n      if (!validateFields()) {\r\n        console.error(\"🚨 Validación fallida antes de abrir el modal.\");\r\n        return;\r\n      }\r\n      setMediaToSubmit(media);\r\n      setIsModalOpen(true);\r\n    }, 100);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setMediaToSubmit(null);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleConfirmSubmit = async () => {\r\n    if (!mediaToSubmit) return;\r\n\r\n    handleCloseModal();\r\n\r\n    setTimeout(() => {\r\n      setLoading(true);\r\n    }, 100);\r\n\r\n    try {\r\n      await handleFinalSubmit(mediaToSubmit);\r\n    } catch (error) {\r\n      console.error(\"Error en la confirmación de envío:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n      handleCloseModal();\r\n    }\r\n  };\r\n\r\n  const currentForm = useMemo(() => {\r\n    if (!metadata || !locations || (loadingProject && isEdit)) {\r\n      return <CreateProjectSkeleton />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {currentStep === 0 && (\r\n          <BasicProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            propertyTypes={metadata.propertyTypes}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            isProperty={isProperty}\r\n            isEdit={isEdit}\r\n            hasPermission={hasPermission}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 1 && (\r\n          <LocationProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            departaments={locations.departaments}\r\n            cities={locations.cities}\r\n            mapAddress={mapAddressRef.current}\r\n            setMapAddress={setMapAddress}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 2 && (\r\n          <FeaturesProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 3 && (\r\n          <DetailsProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            commonAreas={metadata.commonAreas}\r\n            nearbyServices={metadata.nearbyServices}\r\n            housingTypes={metadata.housingTypes}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 4 && (\r\n          <ImagesProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleOpenModal}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            imagesTypes={imagesTypes}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }, [currentStep, metadata, locations, projectData]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      {loading && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n          <Loader size={50} />\r\n        </div>\r\n      )}\r\n\r\n      <h1 className=\"mb-10 mt-24 text-center text-3xl font-semibold text-premium-primary lg:mt-20 dark:text-premium-primaryLight\">\r\n        {isEdit ? \"Editar \" : \"Agregar \"}\r\n        {isProperty ? \"Propiedad\" : \"Proyecto\"}\r\n      </h1>\r\n\r\n      <div className=\"mx-auto mb-10 text-center\">\r\n        <ProgressBar currentStep={currentStep} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 mx-auto max-w-3xl\">{currentForm}</div>\r\n\r\n      <ModalConfirmation\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        onConfirm={handleConfirmSubmit}\r\n        title=\"Confirmar Acción\"\r\n        message={\r\n          isEdit\r\n            ? \"¿Deseas guardar los cambios?\"\r\n            : \"¿Estás seguro de que quieres subir este proyecto?\"\r\n        }\r\n        confirmLabel=\"Confirmar\"\r\n        cancelLabel=\"Cancelar\"\r\n      />\r\n\r\n      <div className=\"mt-4 text-center\">\r\n        <button\r\n          className=\"rounded-md bg-premium-secondary px-4 py-2 text-white transition-colors hover:bg-premium-secondaryLight dark:bg-premium-secondaryDark dark:hover:bg-premium-secondaryLight\"\r\n          onClick={() =>\r\n            router.push(isProperty ? \"/admin/propiedades\" : \"/admin/proyectos\")\r\n          }\r\n        >\r\n          Volver\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
          },
          "filter": {
            "filterMapControls.tsx": "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { ChevronDown, SlidersHorizontal, House, Map } from \"lucide-react\";\nimport clsx from \"clsx\";\n\ninterface FilterMapControlsProps {\n  isProperty: boolean;\n  filterOpen: boolean;\n  setFilterOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  showMap: boolean;\n  setShowMap: React.Dispatch<React.SetStateAction<boolean>>;\n  totalEntries: number;\n}\n\nexport default function FilterMapControls({\n  isProperty,\n  filterOpen,\n  setFilterOpen,\n  showMap,\n  setShowMap,\n  totalEntries = 0,\n}: FilterMapControlsProps) {\n  const toggleFilterVisibility = useCallback(() => {\n    setFilterOpen((prev) => !prev);\n  }, [setFilterOpen]);\n\n  const handleToggleMap = useCallback(() => {\n    setShowMap((prev) => !prev);\n    setFilterOpen(false);\n  }, [setShowMap]);\n\n  return (\n    <div className=\"flex items-center gap-x-2 sm:gap-x-4 mt-4 justify-between\">\n      <button\n        onClick={toggleFilterVisibility}\n        className=\"flex items-center space-x-2 whitespace-nowrap rounded-full border border-premium-borderColor bg-transparent px-6 py-2 transition-colors hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\"\n      >\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\n          Filtro\n        </span>\n        <SlidersHorizontal className=\"w-4 h-4 text-premium-textPrimary dark:text-premium-textPrimary\" />\n        <ChevronDown\n          className={clsx(\n            \"text-premium-textPrimary transition-transform duration-300 dark:text-premium-textPrimary\",\n            filterOpen && \"rotate-180\"\n          )}\n        />\n      </button>\n\n      <p className=\"text-premium-textPrimary dark:text-premium-textPrimary flex flex-col sm:flex-row items-center\">\n        <span>{totalEntries}</span>\n        <span className=\"sm:ml-1\">resultados</span>\n      </p>\n\n      {isProperty && (\n        <button\n          onClick={handleToggleMap}\n          className=\"flex items-center space-x-2 whitespace-nowrap rounded-full border border-premium-borderColor bg-transparent px-6 py-2 transition-colors hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\"\n        >\n          <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\n            {showMap ? \"Propiedades\" : \"Mapa\"}\n          </span>\n          {showMap ? (\n            <House\n              size={18}\n              className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\n            />\n          ) : (\n            <Map\n              size={18}\n              className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\n            />\n          )}\n        </button>\n      )}\n    </div>\n  );\n}\n",
            "filterNumericCounter.tsx": "import dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ninterface NumericCounterProps {\n  label: string;\n  icon: React.ReactNode;\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n  value: number;\n  increment: () => void;\n  decrement: () => void;\n}\n\nexport default function FilterNumericCounter({\n  label,\n  icon,\n  isOpen,\n  setIsOpen,\n  value,\n  increment,\n  decrement,\n}: NumericCounterProps) {\n  return (\n    <>\n      <div\n        className=\"flex transform cursor-pointer items-center justify-between transition-transform duration-200 hover:scale-105 hover:font-semibold\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <div\n          className={clsx(\n            \"flex items-center space-x-2 text-lg font-medium\",\n            value > 0\n              ? \"text-premium-primary dark:text-premium-primaryLight\"\n              : \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        >\n          {icon}\n          <span>{label}</span>\n        </div>\n        <ChevronDown\n          className={clsx(\n            \"transform transition-transform duration-300\",\n            isOpen && \"rotate-180\",\n            \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        />\n      </div>\n\n      {isOpen && (\n        <div className=\"mt-2 flex items-center justify-center space-x-1 px-10\">\n          <button\n            onClick={() => value > 0 && decrement()}\n            className=\"flex h-8 w-8 items-center justify-center rounded-l-md bg-premium-background text-premium-textSecondary transition-colors hover:bg-premium-primary hover:text-white dark:bg-premium-backgroundDark dark:text-premium-textPrimary\"\n          >\n            -\n          </button>\n          <input\n            readOnly\n            type=\"text\"\n            value={value}\n            className=\"w-12 border border-premium-borderColor bg-premium-background text-center text-premium-textPrimary dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary\"\n          />\n          <button\n            onClick={increment}\n            className=\"flex h-8 w-8 items-center justify-center rounded-r-md bg-premium-background text-premium-textSecondary transition-colors hover:bg-premium-primary hover:text-white dark:bg-premium-backgroundDark dark:text-premium-textPrimary\"\n          >\n            +\n          </button>\n        </div>\n      )}\n    </>\n  );\n}\n",
            "filterOption.tsx": "import dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ninterface FilterOptionProps {\n  label: string;\n  icon: React.ReactNode;\n  items: { id: number; name: string }[];\n  selectedItems: number[];\n  onToggleItem: (id: number) => void;\n  isOpen: boolean;\n  onToggleOpen: () => void;\n}\n\nexport default function FilterOption({\n  label,\n  icon,\n  items,\n  selectedItems,\n  onToggleItem,\n  isOpen,\n  onToggleOpen,\n}: FilterOptionProps) {\n  return (\n    <>\n      <div\n        role=\"button\"\n        aria-expanded={isOpen}\n        tabIndex={0}\n        className=\"mb-4 flex transform cursor-pointer items-center justify-between transition-transform duration-200 hover:scale-105 hover:font-semibold\"\n        onClick={onToggleOpen}\n        onKeyDown={(e) => e.key === \"Enter\" && onToggleOpen()}\n      >\n        <div\n          className={clsx(\n            \"flex items-center space-x-2 text-lg font-medium\",\n            selectedItems.length\n              ? \"text-premium-primary dark:text-premium-primaryLight\"\n              : \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        >\n          {icon}\n          <span>{label}</span>\n        </div>\n\n        <ChevronDown\n          className={clsx(\n            \"transform transition-transform duration-300\",\n            isOpen && \"rotate-180\",\n            \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        />\n      </div>\n\n      {isOpen && (\n        <div className=\"mb-7 space-y-1 pr-4\">\n          {items.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => onToggleItem(item.id)}\n              className={clsx(\n                \"relative overflow-hidden rounded-full border px-3 py-2 text-xs transition-colors duration-300\",\n                \"border-premium-borderColor dark:border-premium-borderColorHover\",\n                selectedItems.includes(item.id)\n                  ? \"bg-premium-primary text-white dark:bg-premium-primaryLight\"\n                  : \"bg-transparent hover:bg-premium-backgroundLight dark:hover:bg-premium-backgroundDark\"\n              )}\n            >\n              <span className=\"relative z-10 text-premium-textPrimary dark:text-premium-textPrimary\">\n                {item.name}\n              </span>\n            </button>\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n",
            "filterOptionWithSlider.tsx": "import { useState, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ninterface FilterOptionWithSliderProps {\n  label: string;\n  icon: React.ReactNode;\n  value: number;\n  min: number;\n  max: number;\n  step: number;\n  onChange: (value: number) => void;\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n  category: string;\n  prefixText: string;\n  suffixText: string;\n}\n\nexport default function FilterOptionWithSlider({\n  label,\n  icon,\n  value,\n  min,\n  max,\n  step,\n  onChange,\n  isOpen,\n  setIsOpen,\n  category,\n  prefixText,\n  suffixText,\n}: FilterOptionWithSliderProps) {\n  const [sliderValue, setSliderValue] = useState(value);\n\n  const handleSliderChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = parseInt(event.target.value, 10);\n    setSliderValue(newValue);\n  };\n\n  const handleSliderComplete = () => {\n    onChange(sliderValue);\n  };\n\n  useEffect(() => {\n    setSliderValue(value);\n  }, [value]);\n\n  const formatDisplayValue = (value: number) => {\n    if (value >= 1000000000) {\n      const newValue = value / 1000000000;\n      return `${newValue.toFixed(3)}M`;\n    } else if (value >= 1000000) {\n      const newValue = value / 1000000;\n      return Number.isInteger(newValue)\n        ? `${newValue}M`\n        : `${newValue.toFixed(1)}M`;\n    } else if (value >= 100000) {\n      const newValue = value / 1000;\n      return Number.isInteger(newValue)\n        ? `${newValue}K`\n        : `${newValue.toFixed(1)}K`;\n    } else if (value >= 1000) {\n      const newValue = value / 1000;\n      return newValue.toFixed(3);\n    } else {\n      return value.toString();\n    }\n  };\n\n  return (\n    <>\n      <div\n        className=\"mb-4 flex transform cursor-pointer items-center justify-between text-premium-textPrimary transition-transform duration-200 hover:scale-105 hover:font-semibold dark:text-premium-textPrimary\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <div\n          className={clsx(\n            \"flex items-center space-x-2 text-lg font-medium\",\n            sliderValue > 1\n              ? \"text-premium-primary dark:text-premium-primaryLight\"\n              : \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        >\n          {icon}\n          <span>{label}</span>\n        </div>\n        <ChevronDown\n          className={clsx(\n            \"transform transition-transform duration-300\",\n            isOpen && \"rotate-180\",\n            \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        />\n      </div>\n\n      {isOpen && (\n        <div className=\"mb-6 flex flex-col items-center space-y-2 px-4\">\n          <input\n            type=\"range\"\n            min={min}\n            max={max}\n            step={sliderValue > 10000000 ? 10000000 : step}\n            value={sliderValue}\n            onChange={handleSliderChange}\n            onMouseUp={handleSliderComplete}\n            onTouchEnd={handleSliderComplete}\n            className=\"h-1 w-full cursor-pointer appearance-none rounded-full bg-premium-primary dark:bg-premium-primaryLight\"\n          />\n\n          <style jsx>{`\n            input[type=\"range\"]::-webkit-slider-thumb {\n              appearance: none;\n              height: 20px;\n              width: 20px;\n              background-color: var(--premium-primary);\n              border-radius: 50%;\n              cursor: pointer;\n              border: 2px solid var(--premium-backgroundAlt);\n            }\n\n            input[type=\"range\"]::-moz-range-thumb {\n              height: 20px;\n              width: 20px;\n              background-color: var(--premium-primary);\n              border-radius: 50%;\n              cursor: pointer;\n              border: 2px solid var(--premium-backgroundAlt);\n            }\n\n            input[type=\"range\"]::-ms-thumb {\n              height: 20px;\n              width: 20px;\n              background-color: var(--premium-primary);\n              border-radius: 50%;\n              cursor: pointer;\n              border: 2px solid var(--premium-backgroundAlt);\n            }\n          `}</style>\n\n          {sliderValue > 1 && (\n            <div className=\"text-center text-base text-premium-textPrimary dark:text-premium-textPrimary\">\n              <span>{prefixText} </span>\n\n              <span className=\"text-2xl font-bold\">\n                {category === \"price\" ? \"$\" : \"+\"}\n                {formatDisplayValue(sliderValue)}\n              </span>\n\n              <span> {suffixText}</span>\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n}\n",
            "mapToggleButton.tsx": "\"use client\";\r\n\r\nimport { House, Map } from \"lucide-react\";\r\n\r\ninterface MapToggleButtonProps {\r\n  showMap: boolean;\r\n  setShowMap: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nexport default function MapToggleButton({\r\n  showMap,\r\n  setShowMap,\r\n}: MapToggleButtonProps) {\r\n  const handleClick = () => {\r\n    setShowMap((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    showMap && (\r\n      <button\r\n        className=\"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 flex items-center space-x-2 rounded-full border border-premium-borderColor bg-premium-background px-4 py-3 text-sm shadow-lg transition-colors hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:bg-premium-backgroundLigth dark:hover:bg-premium-backgroundDark\"\r\n        onClick={handleClick}\r\n      >\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          {showMap ? \"Propiedades\" : \"Mapa\"}\r\n        </span>\r\n        {showMap ? (\r\n          <House\r\n            size={18}\r\n            className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\r\n          />\r\n        ) : (\r\n          <Map\r\n            size={18}\r\n            className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\r\n          />\r\n        )}\r\n      </button>\r\n    )\r\n  );\r\n}\r\n",
            "projectFilter.tsx": "\"use client\";\n\nimport { memo, useState, useEffect, useRef } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport FilterOption from \"./filterOption\";\nimport FilterNumericCounter from \"./filterNumericCounter\";\nimport FilterOptionWithSlider from \"./filterOptionWithSlider\";\nimport FilterSkeleton from \"../../../skeletons/admin/filterSkeleton\";\n\nconst Building2 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building2)\n);\nconst Building = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building)\n);\nconst House = dynamic(() => import(\"lucide-react\").then((mod) => mod.House));\nconst DollarSign = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.DollarSign)\n);\nconst Bed = dynamic(() => import(\"lucide-react\").then((mod) => mod.Bed));\nconst Toilet = dynamic(() => import(\"lucide-react\").then((mod) => mod.Toilet));\nconst Sofa = dynamic(() => import(\"lucide-react\").then((mod) => mod.Sofa));\nconst Warehouse = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Warehouse)\n);\nconst ConciergeBell = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ConciergeBell)\n);\nconst X = dynamic(() => import(\"lucide-react\").then((mod) => mod.X));\nconst Crown = dynamic(() => import(\"lucide-react\").then((mod) => mod.Crown));\nconst Ruler = dynamic(() => import(\"lucide-react\").then((mod) => mod.Ruler));\n\ntype Category =\n  | \"cities\"\n  | \"propertyTypes\"\n  | \"housingTypes\"\n  | \"commonAreas\"\n  | \"nearbyServices\"\n  | \"memberships\"\n  | \"bedrooms\"\n  | \"bathrooms\"\n  | \"lobbies\"\n  | \"price\"\n  | \"area\";\n\ninterface ProjectFilterProps {\n  isProperty: boolean;\n  selectedButtons: Record<Category, number[]>;\n  setSelectedButtons: React.Dispatch<\n    React.SetStateAction<Record<Category, number[]>>\n  >;\n  setFilterOpen: (open: boolean) => void;\n  priceRange: { min: number; max: number };\n  areaRange: { min: number; max: number };\n  metadata: any;\n  isLoading: boolean;\n}\n\nconst ProjectFilter = ({\n  isProperty,\n  selectedButtons,\n  setSelectedButtons,\n  setFilterOpen,\n  priceRange,\n  areaRange,\n  metadata,\n  isLoading,\n}: ProjectFilterProps) => {\n  const [isOpen, setIsOpen] = useState<Record<Category, boolean>>({\n    cities: false,\n    propertyTypes: false,\n    housingTypes: false,\n    commonAreas: false,\n    nearbyServices: false,\n    memberships: false,\n    bedrooms: false,\n    bathrooms: false,\n    lobbies: false,\n    price: false,\n    area: false,\n  });\n\n  const [isFixed, setIsFixed] = useState(false);\n  const filterRef = useRef<HTMLDivElement>(null);\n\n  const toggleOpen = (category: Category) => {\n    setIsOpen((prevState) => ({\n      ...prevState,\n      [category]: !prevState[category],\n    }));\n  };\n\n  const [bottomReached, setBottomReached] = useState(false);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const filterTop = filterRef.current?.getBoundingClientRect().top ?? 0;\n      const scrollY = window.scrollY;\n      const bottomOffset = 30;\n\n      if (scrollY >= filterTop + bottomOffset && !bottomReached) {\n        setIsFixed(true);\n      } else {\n        setIsFixed(false);\n      }\n\n      const pageHeight = document.documentElement.scrollHeight;\n      const windowHeight = window.innerHeight;\n      if (windowHeight + scrollY >= pageHeight - 200) {\n        setBottomReached(true);\n        setIsFixed(false);\n      } else {\n        setBottomReached(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [bottomReached]);\n\n  const updateFilterValue = (\n    category: Category,\n    newValue: number | number[]\n  ) => {\n    setSelectedButtons((prevSelected) => ({\n      ...prevSelected,\n      [category]: Array.isArray(newValue) ? newValue : [newValue],\n    }));\n  };\n\n  const changeCount = (\n    category: \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n    increment: boolean\n  ) => {\n    setSelectedButtons((prevSelected) => ({\n      ...prevSelected,\n      [category]: [\n        Math.max(\n          0,\n          Math.min(prevSelected[category][0] + (increment ? 1 : -1), 3)\n        ),\n      ],\n    }));\n  };\n\n  const handleToggleItem = (category: Category, id: number) => {\n    setSelectedButtons((prevSelected) => {\n      const selectedItems = prevSelected[category];\n      return {\n        ...prevSelected,\n        [category]: selectedItems.includes(id)\n          ? selectedItems.filter((itemId) => itemId !== id)\n          : [...selectedItems, id],\n      };\n    });\n  };\n\n  const resetFilters = () => {\n    setSelectedButtons({\n      cities: [],\n      propertyTypes: [],\n      housingTypes: [],\n      commonAreas: [],\n      nearbyServices: [],\n      memberships: [],\n      bedrooms: [0],\n      bathrooms: [0],\n      lobbies: [0],\n      price: [0],\n      area: [1],\n    });\n  };\n\n  if (isLoading) return <FilterSkeleton />;\n\n  return (\n    <div\n      ref={filterRef}\n      className={`w-full rounded-lg bg-premium-background py-4 shadow-md transition-all duration-300 ease-in-out sm:w-72 md:w-80 dark:bg-premium-backgroundDark ${\n        isFixed ? \"sticky top-32 z-10 lg:top-20\" : \"\"\n      }`}\n    >\n      <div className=\"mt-1 space-y-6\">\n        <div className=\"flex items-center justify-between rounded-md pl-2 pr-6\">\n          <button\n            onClick={resetFilters}\n            className=\"transform px-4 py-1 text-lg font-medium text-premium-textPrimary transition-transform duration-200 hover:scale-110 hover:font-semibold dark:text-premium-textPrimary\"\n          >\n            Borrar filtros\n          </button>\n          <div\n            className=\"flex cursor-pointer items-center text-premium-textPrimary dark:text-premium-textPrimary\"\n            onClick={() => setFilterOpen(false)}\n          >\n            <X className=\"transform transition-transform duration-200 hover:scale-125\" />\n          </div>\n        </div>\n\n        <hr className=\"border-premium-borderColor dark:border-premium-borderColorHover\" />\n\n        <div className=\"space-y-4 overflow-x-hidden px-3 py-1 sm:max-h-[65vh] sm:overflow-y-auto\">\n          {/* Main filters */}\n          {[\n            {\n              label: \"Ciudades\",\n              icon: <Building2 />,\n              items: metadata.cities,\n              category: \"cities\" as Category,\n            },\n            {\n              label: \"Tipos de Inmueble\",\n              icon: <Building />,\n              items: metadata.propertyTypes,\n              category: \"propertyTypes\" as Category,\n            },\n            {\n              label: \"Tipos de Vivienda\",\n              icon: <House />,\n              items: metadata.housingTypes,\n              category: \"housingTypes\" as Category,\n            },\n            {\n              label: \"Áreas Comunes\",\n              icon: <Warehouse />,\n              items: metadata.commonAreas,\n              category: \"commonAreas\" as Category,\n            },\n            {\n              label: \"Servicios Cercanos\",\n              icon: <ConciergeBell />,\n              items: metadata.nearbyServices,\n              category: \"nearbyServices\" as Category,\n            },\n            {\n              label: \"Membresía\",\n              icon: <Crown />,\n              items: metadata.memberships,\n              category: \"memberships\" as Category,\n            },\n          ].map(({ label, icon, items, category }) => (\n            <FilterOption\n              key={category}\n              label={label}\n              icon={icon}\n              items={items}\n              selectedItems={selectedButtons[category]}\n              onToggleItem={(id) => handleToggleItem(category, id)}\n              isOpen={isOpen[category]}\n              onToggleOpen={() => toggleOpen(category)}\n            />\n          ))}\n\n          {/* Filters with sliders */}\n          {[\n            ...(isProperty\n              ? [\n                  {\n                    label: \"Precio\",\n                    icon: <DollarSign />,\n                    value: selectedButtons.price[0] || 0,\n                    min: priceRange.min || 0,\n                    max: priceRange.max || 0,\n                    step: 100000,\n                    category: \"price\" as Category,\n                    prefixText: \"Desde\",\n                    suffixText: \"COP\",\n                  },\n                ]\n              : []),\n            {\n              label: \"Área\",\n              icon: <Ruler />,\n              value: selectedButtons.area[0] || 0,\n              min: areaRange.min || 0,\n              max: areaRange.max || 0,\n              step: 100,\n              category: \"area\" as Category,\n              prefixText: \"Desde\",\n              suffixText: \"m²\",\n            },\n          ].map(\n            ({\n              label,\n              icon,\n              value,\n              min,\n              max,\n              step,\n              category,\n              prefixText,\n              suffixText,\n            }) => (\n              <FilterOptionWithSlider\n                key={category}\n                label={label}\n                icon={icon}\n                value={value}\n                min={min}\n                max={max}\n                step={step}\n                onChange={(newValue) => updateFilterValue(category, newValue)}\n                isOpen={isOpen[category]}\n                setIsOpen={() => toggleOpen(category)}\n                category={category}\n                prefixText={prefixText}\n                suffixText={suffixText}\n              />\n            )\n          )}\n\n          {/* Filters with counters */}\n          {[\n            {\n              label: \"Nº de habitaciones\",\n              icon: <Bed />,\n              category: \"bedrooms\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n            },\n            {\n              label: \"Nº de baños\",\n              icon: <Toilet />,\n              category: \"bathrooms\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n            },\n            {\n              label: \"Nº de salas de estar\",\n              icon: <Sofa />,\n              category: \"lobbies\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n            },\n          ].map(({ label, icon, category }) => (\n            <FilterNumericCounter\n              key={category}\n              label={label}\n              icon={icon}\n              isOpen={isOpen[category]}\n              setIsOpen={() => toggleOpen(category)}\n              value={selectedButtons[category][0]}\n              increment={() => changeCount(category, true)}\n              decrement={() => changeCount(category, false)}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(ProjectFilter);\n"
          },
          "locationMap.tsx": "\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { GoogleMap } from \"@react-google-maps/api\";\nimport { Plus, Minus, LocateFixed } from \"lucide-react\";\nimport Loader from \"../../loader\";\n\nconst mapContainerStyle = {\n  width: \"100%\",\n  height: \"100%\",\n};\n\nconst DEFAULT_CENTER = { lat: 4.5709, lng: -74.2973 };\n\nexport default function LocationMap({\n  coordinates,\n  onLocationSelect,\n  isLoaded,\n  onUpdateAddress,\n  showUserLocationButton,\n}: {\n  showUserLocationButton?: boolean;\n  coordinates: { lat: number; lng: number };\n  onLocationSelect: (location: {\n    lat: number;\n    lng: number;\n    address?: string;\n    city?: string;\n    department?: string;\n  }) => void;\n\n  isLoaded: boolean;\n  onUpdateAddress?: (address: string) => void;\n}) {\n  const [mapCenter, setMapCenter] = useState(coordinates || DEFAULT_CENTER);\n\n  const mapRef = useRef<google.maps.Map | null>(null);\n\n  const markerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(\n    null\n  );\n  const userMarkerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(\n    null\n  );\n\n  useEffect(() => {\n    async function updateMarkers() {\n      if (isLoaded && mapRef.current) {\n        const { AdvancedMarkerElement } = (await google.maps.importLibrary(\n          \"marker\"\n        )) as any;\n\n        if (markerRef.current) {\n          markerRef.current.map = null;\n          markerRef.current = null;\n        }\n\n        if (coordinates.lat && coordinates.lng) {\n          markerRef.current = new AdvancedMarkerElement({\n            position: coordinates,\n            map: mapRef.current,\n            title: \"Ubicación seleccionada\",\n          });\n\n          mapRef.current.panTo(coordinates);\n        }\n      }\n    }\n\n    updateMarkers();\n  }, [isLoaded, coordinates]);\n\n  const handleMapLoad = (map: google.maps.Map) => {\n    mapRef.current = map;\n\n    if (coordinates.lat && coordinates.lng) {\n      map.panTo(coordinates);\n      map.setZoom(15);\n\n      if (!markerRef.current) {\n        google.maps\n          .importLibrary(\"marker\")\n          .then(({ AdvancedMarkerElement }: any) => {\n            markerRef.current = new AdvancedMarkerElement({\n              position: coordinates,\n              map,\n              title: \"Ubicación seleccionada\",\n            });\n          });\n      }\n    }\n  };\n\n  const handleMapClick = (event: google.maps.MapMouseEvent) => {\n    if (event.latLng) {\n      const newCoordinates = {\n        lat: event.latLng.lat(),\n        lng: event.latLng.lng(),\n      };\n\n      if (userMarkerRef.current) {\n        userMarkerRef.current.map = null;\n        userMarkerRef.current = null;\n      }\n\n      setMapCenter(newCoordinates);\n\n      const geocoder = new google.maps.Geocoder();\n      geocoder.geocode({ location: newCoordinates }, (results, status) => {\n        if (\n          status === google.maps.GeocoderStatus.OK &&\n          results !== null &&\n          results.length > 0\n        ) {\n          const formattedAddress = results[0].formatted_address;\n          const foundCity = results.find((result) =>\n            result.types.includes(\"locality\")\n          );\n          const foundDepartment = results.find((result) =>\n            result.types.includes(\"administrative_area_level_1\")\n          );\n\n          const cityName =\n            foundCity?.formatted_address.split(\",\")[0].trim() || \"\";\n          const departmentName =\n            foundDepartment?.formatted_address.split(\",\")[0].trim() || \"\";\n\n          onLocationSelect({\n            lat: newCoordinates.lat,\n            lng: newCoordinates.lng,\n            address: formattedAddress,\n            city: cityName,\n            department: departmentName,\n          });\n\n          if (onUpdateAddress) {\n            onUpdateAddress(formattedAddress);\n          }\n        }\n      });\n    }\n  };\n\n  const handleZoomIn = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! + 1);\n    }\n  };\n\n  const handleZoomOut = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! - 1);\n    }\n  };\n\n  const handleGoToUserLocation = () => {\n    const map = mapRef.current;\n    if (navigator.geolocation && map) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const userCoords = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n\n          setMapCenter(userCoords);\n          map.panTo(userCoords);\n          map.setZoom(16);\n\n          const { AdvancedMarkerElement } = (await google.maps.importLibrary(\n            \"marker\"\n          )) as any;\n\n          if (userMarkerRef.current) {\n            userMarkerRef.current.map = null;\n          }\n\n          userMarkerRef.current = new AdvancedMarkerElement({\n            position: userCoords,\n            map: map,\n          });\n\n          const geocoder = new google.maps.Geocoder();\n          geocoder.geocode({ location: userCoords }, (results, status) => {\n            if (\n              status === google.maps.GeocoderStatus.OK &&\n              results !== null &&\n              results.length > 0\n            ) {\n              const formattedAddress = results[0].formatted_address;\n              let cityName = \"\";\n              let departmentName = \"\";\n\n              results.forEach((result) => {\n                result.address_components.forEach((component) => {\n                  if (component.types.includes(\"locality\")) {\n                    cityName = component.long_name;\n                  }\n                  if (component.types.includes(\"administrative_area_level_1\")) {\n                    departmentName = component.long_name;\n                  }\n                });\n              });\n\n              if (!cityName) {\n                results.forEach((result) => {\n                  result.address_components.forEach((component) => {\n                    if (component.types.includes(\"sublocality\")) {\n                      cityName = component.long_name;\n                    }\n                    if (\n                      component.types.includes(\"political\") &&\n                      !departmentName\n                    ) {\n                      departmentName = component.long_name;\n                    }\n                  });\n                });\n              }\n\n              onLocationSelect({\n                lat: userCoords.lat,\n                lng: userCoords.lng,\n                address: formattedAddress,\n                city: cityName,\n                department: departmentName,\n              });\n\n              if (onUpdateAddress) {\n                onUpdateAddress(formattedAddress);\n              }\n            }\n          });\n        },\n        (error) => {\n          console.warn(\"No se pudo obtener la ubicación del usuario.\", error);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0,\n        }\n      );\n    }\n  };\n\n  if (!isLoaded) {\n    return (\n      <div className=\"flex justify-center items-center w-full h-full\">\n        <Loader size={48} />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <GoogleMap\n        mapContainerStyle={mapContainerStyle}\n        center={mapCenter}\n        zoom={15}\n        onLoad={handleMapLoad}\n        onClick={handleMapClick}\n        options={{\n          zoomControl: false,\n          streetViewControl: false,\n          mapTypeControl: false,\n          fullscreenControl: false,\n          mapTypeId: \"roadmap\",\n          mapId: \"78a223abe416be2b\",\n        }}\n      />\n\n      <div className=\"absolute top-4 left-4 z-10 flex flex-col bg-white shadow-lg rounded-md\">\n        <button\n          type=\"button\"\n          className=\"flex items-center justify-center w-10 h-10 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomIn}\n        >\n          <Plus size={24} />\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"flex items-center justify-center w-10 h-10 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomOut}\n        >\n          <Minus size={24} />\n        </button>\n\n        {showUserLocationButton && (\n          <button\n            type=\"button\"\n            className=\"flex items-center justify-center w-10 h-10 bg-white text-gray-700 hover:bg-gray-100\"\n            onClick={handleGoToUserLocation}\n          >\n            <LocateFixed size={24} />\n          </button>\n        )}\n      </div>\n    </>\n  );\n}\n",
          "priceMarker.tsx": "\"use client\";\n\nimport { useEffect } from \"react\";\n//import L from \"leaflet\";\n//import { useMap } from \"react-leaflet\";\n\ntype PriceMarkerProps = {\n  position: [number, number];\n  price: number;\n  onClick: () => void;\n  isSelected: boolean;\n};\n\nexport default function PriceMarker({\n  position,\n  price,\n  onClick,\n  isSelected,\n}: PriceMarkerProps) {\n  const map = useMap();\n\n  useEffect(() => {\n    const marker = L.marker(position, {\n      icon: L.divIcon({\n        html: `<button class=\"text-white font-semibold py-2 px-3 rounded-full shadow-md ${\n          isSelected\n            ? \"bg-premium-primaryDark dark:bg-premium-primaryDark\"\n            : \"bg-premium-primary dark:bg-premium-primary hover:bg-premium-primaryLight focus:outline-none focus:bg-premium-primaryDark dark:focus:bg-premium-primaryDark\"\n        }\">$${price.toLocaleString()}</button>`,\n        iconAnchor: [12, 41],\n        popupAnchor: [0, -41],\n        className: \"\",\n      }),\n    }).addTo(map);\n\n    marker.on(\"click\", onClick);\n\n    return () => {\n      map.removeLayer(marker);\n    };\n  }, [map, position, price, onClick, isSelected]);\n\n  return null;\n}\n",
          "projectCardAdmin.tsx": "import { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\nimport { X } from \"lucide-react\";\nimport { ProjectMedia } from \"@/lib/definitios\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\n\nconst Edit = dynamic(() => import(\"lucide-react\").then((mod) => mod.Edit));\nconst Trash2 = dynamic(() => import(\"lucide-react\").then((mod) => mod.Trash2));\nconst User = dynamic(() => import(\"lucide-react\").then((mod) => mod.User));\n\ninterface ProjectCardAdminProps {\n  id: number;\n  images: ProjectMedia[];\n  name: string;\n  location: string;\n  price?: number;\n  area: number;\n  bedrooms?: number;\n  bathrooms?: number;\n  parkingSpots?: number;\n  email?: string;\n  isFromMap: boolean;\n  onClose?: (() => void) | null;\n  url: string;\n  urlEdit: string;\n  onDelete: (id: number, name: string) => void;\n  permission?: boolean;\n  onShowUser?: (name: string) => void;\n}\n\nexport default function ProjectCardAdmin({\n  id,\n  images,\n  name,\n  location,\n  price,\n  area,\n  bedrooms,\n  bathrooms,\n  parkingSpots,\n  email,\n  isFromMap,\n  onClose,\n  url,\n  urlEdit,\n  onDelete,\n  permission,\n  onShowUser,\n}: ProjectCardAdminProps) {\n  const router = useRouter();\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isHovered, setIsHovered] = useState(false);\n\n  useEffect(() => {\n    if (isHovered) {\n      const interval = setInterval(\n        () => setCurrentImage((prev) => (prev + 1) % images.length),\n        1000\n      );\n      return () => clearInterval(interval);\n    }\n  }, [isHovered, images.length]);\n\n  return (\n    <div className=\"transform rounded-lg bg-transparent transition-transform duration-300 hover:scale-105 dark:bg-transparent\">\n      <Link href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <div\n          className={clsx(\n            \"relative max-w-xs cursor-pointer overflow-hidden rounded-lg bg-premium-secondary shadow-md shadow-premium-secondary dark:bg-premium-secondaryDark dark:shadow-md dark:shadow-white\",\n            isFromMap ? \"z-20\" : \"z-0 h-[370px]\"\n          )}\n          onMouseEnter={() => setIsHovered(true)}\n          onMouseLeave={() => {\n            setIsHovered(false);\n            setCurrentImage(0);\n          }}\n        >\n          <div className=\"relative flex h-full flex-col rounded-lg bg-premium-background dark:bg-premium-secondaryDark\">\n            {onClose && (\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  onClose();\n                }}\n                className=\"absolute right-2 top-2 z-20 rounded-full bg-black bg-opacity-50 p-2 text-white transition-all hover:bg-opacity-75\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            )}\n\n            <div\n              className={clsx(\n                \"relative z-0 w-full overflow-hidden\",\n                !isFromMap ? \"h-full flex-shrink-0\" : \"h-72\"\n              )}\n            >\n              {images.map((img, index) => (\n                <Image\n                  key={index}\n                  src={img.url}\n                  alt={img.tag}\n                  fill\n                  priority={index === 0}\n                  loading={index === 0 ? \"eager\" : \"lazy\"}\n                  sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                  className={clsx(\n                    \"absolute left-0 top-0 h-full w-full object-cover transition-opacity duration-1000 ease-in-out\",\n                    index === currentImage ? \"opacity-100\" : \"opacity-0\"\n                  )}\n                />\n              ))}\n            </div>\n\n            {price && (\n              <div className=\"absolute left-2 top-2 z-50 rounded-full bg-black bg-opacity-75 px-2 py-1 text-sm text-white\">\n                ${price.toLocaleString()}\n              </div>\n            )}\n\n            <div className=\"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-premium-secondaryDark via-premium-secondaryDark to-transparent px-2 pb-2 pt-16 dark:from-black dark:via-gray-800\">\n              <h3 className=\"line-clamp-1 break-words text-lg font-semibold leading-tight text-white\">\n                {location}\n              </h3>\n\n              <p className=\"truncate break-all leading-tight w-full overflow-hidden text-sm text-gray-300\">\n                {name}\n              </p>\n\n              {id && permission && (\n                <p className=\"text-xs text-gray-300\">id: {id}</p>\n              )}\n\n              {email && permission && (\n                <p className=\"truncate break-all leading-tight text-xs text-gray-300 w-full overflow-hidden\">\n                  Usuario: {email}\n                </p>\n              )}\n\n              <div className=\"flex items-center text-xs text-gray-300 divide-x divide-gray-400 dark:divide-gray-600\">\n                {area > 0 && <p className=\"pr-2\">{area}m²</p>}\n                {bedrooms && <p className=\"pl-2 pr-2\">{bedrooms} Hab.</p>}\n                {bathrooms && <p className=\"pl-2 pr-2\">{bathrooms} Baños.</p>}\n                {parkingSpots && <p className=\"pl-2\">{parkingSpots} Parq.</p>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Link>\n\n      <div className=\"absolute right-2 top-2 z-50 flex space-x-1\">\n        {email && (\n          <button\n            title=\"Propietario\"\n            onClick={(e) => {\n              e.preventDefault();\n              if (email && onShowUser) {\n                onShowUser(email);\n              }\n            }}\n            className=\"rounded-full bg-green-500 p-2 text-white transition-colors hover:bg-green-600\"\n          >\n            <User className=\"h-4 w-4\" />\n          </button>\n        )}\n\n        <button\n          title=\"Editar\"\n          onClick={(e) => {\n            e.preventDefault();\n            router.push(urlEdit);\n          }}\n          className=\"rounded-full bg-blue-500 p-2 text-white transition-colors hover:bg-blue-600\"\n        >\n          <Edit className=\"h-4 w-4\" />\n        </button>\n\n        <button\n          title=\"Eliminar\"\n          onClick={(e) => {\n            e.preventDefault();\n            onDelete(id, name);\n          }}\n          className=\"rounded-full bg-red-500 p-2 text-white transition-colors hover:bg-red-600\"\n        >\n          <Trash2 className=\"h-4 w-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n",
          "projectManager.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\nimport Link from \"next/link\";\r\nimport { Plus, Search, ShoppingCart, KeySquare } from \"lucide-react\";\r\nimport { useGetProjects } from \"@/app/hooks/projects/useGetProjects\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport { useOwner } from \"@/app/hooks/projects/owner/useOwner\";\r\nimport FilterMapControls from \"@/app/ui/admin/projects/filter/filterMapControls\";\r\nimport Alert from \"@/app/ui/alert\";\r\nimport ProjectSkeletonList from \"../../skeletons/projectSkeletonList\";\r\n\r\nconst MapToggleButton = dynamic(() => import(\"./filter/mapToggleButton\"), {\r\n  ssr: false,\r\n});\r\nconst ProjectsContainer = dynamic(\r\n  () => import(\"@/app/ui/admin/projects/projectsContainer\"),\r\n  {\r\n    loading: () => <ProjectSkeletonList />,\r\n    ssr: false,\r\n  }\r\n);\r\nconst OwnerModal = dynamic(\r\n  () => import(\"../../realEstate/project/ownerModal\"),\r\n  {\r\n    ssr: false,\r\n  }\r\n);\r\nconst ModalConfirmation = dynamic(\r\n  () => import(\"@/app/ui/modals/admin/modalConfirmation\"),\r\n  { ssr: false }\r\n);\r\n\r\nexport default function ProjectManager({\r\n  isProperty,\r\n  projectTypeId,\r\n  setProjectTypeId,\r\n}: {\r\n  isProperty: boolean;\r\n  projectTypeId: number;\r\n  setProjectTypeId?: (id: number) => void;\r\n}) {\r\n  const { data: session } = useSession();\r\n  const userPermissions = session?.user?.permissions || [];\r\n  const permission = userPermissions.some(\r\n    (perm) =>\r\n      perm.name ===\r\n      (isProperty ? \"Gestionar propiedades\" : \"Gestionar proyectos\")\r\n  );\r\n\r\n  const [selectedButtons, setSelectedButtons] = useState<\r\n    Record<string, number[]>\r\n  >({\r\n    cities: [],\r\n    propertyTypes: [],\r\n    housingTypes: [],\r\n    commonAreas: [],\r\n    nearbyServices: [],\r\n    memberships: [],\r\n    bedrooms: [0],\r\n    bathrooms: [0],\r\n    lobbies: [0],\r\n    area: [1],\r\n  });\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState<{\r\n    id: number;\r\n    name: string;\r\n  } | null>(null);\r\n  const { submitProject, isProcessing } = useProjectApi();\r\n  const [selectedOwner, setSelectedOwner] = useState<string | null>(null);\r\n  const [isOwnerModalOpen, setIsOwnerModalOpen] = useState(false);\r\n\r\n  const { owner, refetchUser } = useOwner(selectedOwner ?? \"\");\r\n\r\n  const [priceRange, setPriceRange] = useState({ min: 0, max: 0 });\r\n  const [areaRange, setAreaRange] = useState({ min: 0, max: 0 });\r\n\r\n  const [entriesPerPage] = useState(16);\r\n  const [filterOpen, setFilterOpen] = useState(false);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [bounds, setBounds] = useState<google.maps.LatLngBounds | null>(null);\r\n  const [alertMessage, setAlertMessage] = useState<{\r\n    type: string;\r\n    message: string;\r\n  } | null>(null);\r\n\r\n  const {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreProjects,\r\n    debouncedSearch,\r\n    isLoading,\r\n    refreshProjects,\r\n  } = useGetProjects({\r\n    entriesPerPage,\r\n    selectedButtons,\r\n    currentProjects: [],\r\n    projectTypeId: projectTypeId,\r\n    bounds: showMap ? bounds : null,\r\n    showMap: showMap,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (selectedOwner) {\r\n      refetchUser();\r\n    }\r\n  }, [selectedOwner]);\r\n\r\n  useEffect(() => {\r\n    const message = sessionStorage.getItem(\"projectMessage\");\r\n    if (message) {\r\n      setAlertMessage(JSON.parse(message));\r\n      sessionStorage.removeItem(\"projectMessage\");\r\n    }\r\n\r\n    setPriceRange({ min: 0, max: 2500000000 });\r\n    setAreaRange({ min: 0, max: 5000 });\r\n    setSelectedButtons((prev) => ({ ...prev, price: [], area: [] }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!showMap) {\r\n      setBounds(null);\r\n    }\r\n  }, [showMap]);\r\n\r\n  const handleOpenModal = useCallback((id: number, name: string) => {\r\n    setSelectedProject({ id, name });\r\n    setIsModalOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteProject = useCallback(async () => {\r\n    if (!selectedProject) return;\r\n\r\n    const success = await submitProject(selectedProject.id, \"delete\");\r\n\r\n    if (success) {\r\n      setAlertMessage({\r\n        type: \"success\",\r\n        message: `${isProperty ? \"Propiedad\" : \"Proyecto\"} \"${selectedProject.name}\" eliminado exitosamente.`,\r\n      });\r\n\r\n      refreshProjects();\r\n    } else {\r\n      setAlertMessage({\r\n        type: \"error\",\r\n        message: `Error al eliminar ${isProperty ? \"la propiedad\" : \"el proyecto\"} \"${selectedProject.name}\".`,\r\n      });\r\n    }\r\n\r\n    setIsModalOpen(false);\r\n    setSelectedProject(null);\r\n  }, [selectedProject, submitProject, refreshProjects, isProperty]);\r\n\r\n  const handleShowUserDetails = (email: string) => {\r\n    setSelectedOwner(email);\r\n    refetchUser();\r\n    setIsOwnerModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {alertMessage && (\r\n        <Alert\r\n          type={alertMessage.type as \"success\" | \"warning\" | \"error\" | \"info\"}\r\n          message={alertMessage.message}\r\n        />\r\n      )}\r\n\r\n      {isModalOpen && (\r\n        <ModalConfirmation\r\n          isOpen={isModalOpen}\r\n          onClose={() => setIsModalOpen(false)}\r\n          onConfirm={handleDeleteProject}\r\n          title={isProperty ? \"Eliminar Propiedad\" : \"Eliminar Proyecto\"}\r\n          message={`¿Estás seguro de que deseas eliminar ${isProperty ? \"la propiedad\" : \"el proyecto\"} \"${selectedProject?.name}\"?`}\r\n          confirmLabel={isProcessing ? \"Eliminando...\" : \"Eliminar\"}\r\n          cancelLabel=\"Cancelar\"\r\n          confirmClassName=\"bg-red-600 hover:bg-red-700 disabled:opacity-50\"\r\n        />\r\n      )}\r\n\r\n      <div className=\"bg-premium-backgroundDark px-6 pb-2 pt-6 dark:bg-premium-backgroundLight\">\r\n        <h1\r\n          className={clsx(\r\n            \"mt-24 text-center text-3xl font-semibold text-premium-primary dark:text-premium-primaryLight\",\r\n            { \"mb-10\": isProperty, \"mb-16\": !isProperty }\r\n          )}\r\n        >\r\n          Gestión de {isProperty ? \"Propiedades\" : \"Proyectos\"}\r\n        </h1>\r\n\r\n        {projectTypeId != 1 && (\r\n          <div className=\"mb-6 flex items-center justify-center gap-4\">\r\n            {[\r\n              { id: 2, label: \"Venta\", icon: <ShoppingCart /> },\r\n              { id: 3, label: \"Arriendo\", icon: <KeySquare /> },\r\n            ].map(({ id, label, icon }) => (\r\n              <button\r\n                key={id}\r\n                onClick={() => setProjectTypeId && setProjectTypeId(id)}\r\n                className={`flex items-center gap-2 rounded-lg px-6 py-2 shadow-md transition-colors ${\r\n                  projectTypeId === id\r\n                    ? \"bg-premium-primary text-white hover:bg-premium-primaryDark dark:bg-premium-primaryLight\"\r\n                    : \"bg-premium-backgroundLight text-premium-primary hover:bg-premium-backgroundDark dark:bg-premium-background dark:text-premium-primaryLight dark:hover:bg-premium-backgroundLight\"\r\n                }`}\r\n              >\r\n                {icon}\r\n                <span>{label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mb-10 flex flex-col items-center gap-8 sm:px-6 md:flex-row md:justify-between\">\r\n          <div className=\"relative w-full\">\r\n            <input\r\n              name=\"searchProject\"\r\n              type=\"text\"\r\n              placeholder={\r\n                isProperty ? \"Buscar propiedades...\" : \"Buscar proyectos...\"\r\n              }\r\n              onChange={(e) => debouncedSearch(e.target.value)}\r\n              className=\"w-full rounded-md border border-premium-borderColor bg-premium-backgroundLight p-2 pl-10 text-premium-textPrimary dark:border-premium-borderColorHover dark:bg-premium-background dark:text-premium-textPrimary\"\r\n            />\r\n            <Search className=\"absolute left-3 top-2 text-premium-textPlaceholder dark:text-premium-textSecondary\" />\r\n          </div>\r\n\r\n          <Link\r\n            href={\r\n              isProperty\r\n                ? \"/admin/propiedades/crear-propiedad\"\r\n                : \"/admin/proyectos/crear-proyecto\"\r\n            }\r\n            className=\"flex items-center space-x-2 whitespace-nowrap rounded-lg bg-green-600 px-6 py-2 text-white shadow-md transition-colors hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800\"\r\n          >\r\n            <Plus />\r\n            <span>{isProperty ? \"Nueva Propiedad\" : \"Nuevo Proyecto\"}</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <hr className=\"w-full border-premium-borderColor dark:border-premium-borderColorHover\" />\r\n\r\n      <div\r\n        className={clsx(\r\n          \"bg-premium-backgroundDark px-2 sm:px-6 md:px-20 pt-2 dark:bg-premium-backgroundLight pb-14\",\r\n          showMap && \"pb-7\"\r\n        )}\r\n      >\r\n        <FilterMapControls\r\n          isProperty={isProperty}\r\n          filterOpen={filterOpen}\r\n          setFilterOpen={setFilterOpen}\r\n          showMap={showMap}\r\n          setShowMap={setShowMap}\r\n          totalEntries={totalEntries}\r\n        />\r\n      </div>\r\n\r\n      <ProjectsContainer\r\n        projects={projects}\r\n        totalEntries={totalEntries}\r\n        isLoading={isLoading}\r\n        fetchMoreProjects={fetchMoreProjects}\r\n        filterOpen={filterOpen}\r\n        showMap={showMap}\r\n        setFilterOpen={setFilterOpen}\r\n        priceRange={priceRange}\r\n        areaRange={areaRange}\r\n        selectedButtons={selectedButtons}\r\n        setSelectedButtons={setSelectedButtons}\r\n        isProperty={isProperty}\r\n        setBounds={setBounds}\r\n        onDelete={handleOpenModal}\r\n        permission={permission}\r\n        onShowUser={handleShowUserDetails}\r\n      />\r\n\r\n      <MapToggleButton showMap={showMap} setShowMap={setShowMap} />\r\n\r\n      <OwnerModal\r\n        show={isOwnerModalOpen}\r\n        flag={!!owner}\r\n        onClose={() => {\r\n          setIsOwnerModalOpen(false);\r\n          setSelectedOwner(null);\r\n        }}\r\n        onSubmit={(e) => e.preventDefault()}\r\n        handleChange={() => {}}\r\n        user={\r\n          owner || {\r\n            id: 0,\r\n            names: \"\",\r\n            lastnames: \"\",\r\n            email: \"\",\r\n            phoneNumber: \"\",\r\n          }\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "projectsContainer.tsx": "\"use client\";\n\nimport React, { useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport { useProjectsMetadata } from \"@/app/hooks/projects/metadata/useProjectsMetadata\";\nimport ProjectFilter from \"@/app/ui/admin/projects/filter/projectFilter\";\nimport ProjectCardAdmin from \"@/app/ui/admin/projects/projectCardAdmin\";\nimport ProjectsMap from \"@/app/ui/admin/projects/projectsMap\";\n\ninterface ProjectsContainerProps {\n  projects: ProjectSummary[];\n  totalEntries: number;\n  isLoading: boolean;\n  fetchMoreProjects: () => void;\n  filterOpen: boolean;\n  showMap: boolean;\n  setFilterOpen: (open: boolean) => void;\n  priceRange: { min: number; max: number };\n  areaRange: { min: number; max: number };\n  selectedButtons: Record<string, number[]>;\n  setSelectedButtons: React.Dispatch<\n    React.SetStateAction<Record<string, number[]>>\n  >;\n  isProperty: boolean;\n  setBounds: (bounds: google.maps.LatLngBounds | null) => void;\n  onDelete: (id: number, name: string) => void;\n  permission?: boolean;\n  onShowUser?: (name: string) => void;\n}\n\nconst ProjectsContainer = ({\n  projects,\n  totalEntries,\n  isLoading,\n  fetchMoreProjects,\n  filterOpen,\n  showMap,\n  setFilterOpen,\n  priceRange,\n  areaRange,\n  selectedButtons,\n  setSelectedButtons,\n  isProperty,\n  setBounds,\n  onDelete,\n  permission,\n  onShowUser,\n}: ProjectsContainerProps) => {\n  const { metadata, isLoadingMetadata } = useProjectsMetadata();\n\n  const projectCards = useMemo(\n    () =>\n      projects.map((project) => (\n        <div\n          key={project.id}\n          className=\"relative flex items-center justify-center\"\n        >\n          <div className=\"w-full max-w-xs\">\n            <ProjectCardAdmin\n              id={project.id}\n              images={project.projectMedia}\n              name={project.name}\n              location={project.city.name}\n              price={project.price || 0}\n              area={project.totalArea}\n              bedrooms={project.bedrooms || undefined}\n              bathrooms={project.bathrooms || undefined}\n              parkingSpots={project.parkingSpots || undefined}\n              email={project.email}\n              isFromMap={false}\n              onClose={null}\n              url={\n                isProperty\n                  ? `/inmobiliaria/${project.id}`\n                  : `/proyectos/${project.id}`\n              }\n              urlEdit={\n                isProperty\n                  ? `/admin/propiedades/${project.id}`\n                  : `/admin/proyectos/${project.id}`\n              }\n              onDelete={onDelete}\n              permission={permission}\n              onShowUser={onShowUser}\n            />\n          </div>\n        </div>\n      )),\n    [projects, isProperty, onDelete, permission, onShowUser]\n  );\n\n  return (\n    <div\n      className={clsx(\n        \"flex flex-col sm:flex-row sm:justify-between\",\n        filterOpen && \"gap-4 sm:space-x-6\"\n      )}\n    >\n      {filterOpen && (\n        <div\n          className={clsx(\n            \"sm:ml-6 lg:ml-8 xl:ml-20 w-full flex flex-col items-center sm:w-72 sm:px-10\",\n            !showMap ? \"-mt-10 mb-10 py-4\" : \"\"\n          )}\n        >\n          <ProjectFilter\n            isProperty={isProperty}\n            selectedButtons={selectedButtons}\n            setSelectedButtons={setSelectedButtons}\n            setFilterOpen={setFilterOpen}\n            priceRange={priceRange}\n            areaRange={areaRange}\n            metadata={metadata}\n            isLoading={isLoadingMetadata}\n          />\n        </div>\n      )}\n\n      {showMap ? (\n        <div className=\"relative h-screen w-full transition-transform duration-300\">\n          <ProjectsMap\n            projects={projects}\n            setBounds={setBounds}\n            showMap={showMap}\n            onDelete={onDelete}\n          />\n        </div>\n      ) : (\n        <div\n          className={clsx(\n            \"-mt-10 mb-10 flex w-full flex-col\",\n            !filterOpen\n              ? \" px-6 py-4 lg:px-8 xl:px-20\"\n              : \" pr-6 p-4 lg:pr-8 xl:pr-20\"\n          )}\n        >\n          <div\n            className={clsx(\n              \"mb-8 grid gap-x-4 gap-y-6\",\n              filterOpen\n                ? \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4\"\n                : \"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5\"\n            )}\n          >\n            {projectCards}\n          </div>\n\n          {projects.length < totalEntries && (\n            <button\n              onClick={fetchMoreProjects}\n              disabled={isLoading}\n              className={clsx(\n                \"mt-6 self-center rounded-lg px-6 py-2 text-white shadow-lg transition-colors\",\n                isLoading\n                  ? \"bg-premium-primaryDark cursor-not-allowed\"\n                  : \"bg-premium-primary hover:bg-premium-primaryDark dark:bg-premium-primaryLight dark:hover:bg-premium-primaryDark\"\n              )}\n            >\n              {isLoading ? \"Cargando...\" : \"Mostrar más\"}\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(ProjectsContainer, (prevProps, nextProps) => {\n  return (\n    prevProps.projects.length === nextProps.projects.length &&\n    prevProps.isLoading === nextProps.isLoading &&\n    prevProps.totalEntries === nextProps.totalEntries &&\n    JSON.stringify(prevProps.selectedButtons) ===\n      JSON.stringify(nextProps.selectedButtons) &&\n    prevProps.filterOpen === nextProps.filterOpen &&\n    prevProps.showMap === nextProps.showMap\n  );\n});\n",
          "projectsMap.tsx": "\"use client\";\n\nimport { memo, useMemo, useState, useEffect, useRef } from \"react\";\nimport { GoogleMap } from \"@react-google-maps/api\";\nimport { Plus, Minus, LocateFixed } from \"lucide-react\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport ProjectCardAdmin from \"./projectCardAdmin\";\nimport Loader from \"../../loader\";\n\nconst containerStyle = {\n  width: \"100%\",\n  height: \"100vh\",\n};\n\nconst DEFAULT_CENTER = { lat: 4.5709, lng: -74.2973 };\n\nconst ProjectsMap = ({\n  projects,\n  setBounds,\n  showMap,\n  onDelete,\n}: {\n  projects: ProjectSummary[];\n  setBounds: (bounds: google.maps.LatLngBounds | null) => void;\n  showMap: boolean;\n  onDelete: (id: number, name: string) => void;\n}) => {\n  const [selectedProject, setSelectedProject] = useState<ProjectSummary | null>(\n    null\n  );\n  const [currentCenter, setCurrentCenter] = useState(DEFAULT_CENTER);\n  const [userLocation, setUserLocation] = useState<{\n    lat: number;\n    lng: number;\n  } | null>(null);\n  const mapRef = useRef<google.maps.Map | null>(null);\n  let [markers, setMarkers] = useState<\n    google.maps.marker.AdvancedMarkerElement[]\n  >([]);\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\n\n  const handleBoundsChanged = () => {\n    if (!showMap) {\n      return;\n    }\n\n    if (mapRef.current) {\n      const newBounds = mapRef.current.getBounds();\n      if (newBounds) {\n        setBounds(newBounds);\n      }\n    }\n  };\n\n  const handleCloseCard = () => {\n    setSelectedProject(null);\n  };\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        const location = { lat: latitude, lng: longitude };\n        setCurrentCenter(location);\n        setUserLocation(location);\n      },\n      (error) => {\n        console.error(\n          \"Error obteniendo la ubicación del usuario:\",\n          error.message\n        );\n        setCurrentCenter(DEFAULT_CENTER);\n      }\n    );\n  }, []);\n\n  const validProjects = useMemo(() => {\n    return projects.map((project) => ({\n      ...project,\n      latitude: parseFloat(project.latitude as unknown as string),\n      longitude: parseFloat(project.longitude as unknown as string),\n    }));\n  }, [projects]);\n\n  useEffect(() => {\n    if (mapRef.current && isMapsReady) {\n      clearMarkers();\n      addMarkers(mapRef.current);\n    }\n  }, [validProjects, userLocation, isMapsReady, isMapLoaded]);\n\n  const clearMarkers = () => {\n    markers.forEach((marker) => {\n      marker.map = null;\n      marker.element?.remove();\n    });\n    setMarkers([]);\n  };\n\n  const addMarkers = (map: google.maps.Map) => {\n    clearMarkers();\n    const newMarkers: google.maps.marker.AdvancedMarkerElement[] = [];\n\n    validProjects.forEach((project) => {\n      const contentDiv = document.createElement(\"div\");\n      contentDiv.innerHTML = `\n      <div class=\"bg-premium-primary hover:bg-premium-primaryDark hover:scale-105 focus:scale-105 focus:bg-premium-primaryDark text-white font-semibold py-1 px-3 rounded-full text-sm transition-all duration-300 ease-in-out\">\n        $${project.price?.toLocaleString()}\n      </div>\n    `;\n\n      const marker = new google.maps.marker.AdvancedMarkerElement({\n        position: { lat: project.latitude, lng: project.longitude },\n        map,\n        content: contentDiv,\n      });\n\n      marker.addListener(\"click\", () => {\n        setSelectedProject(project);\n      });\n\n      newMarkers.push(marker);\n    });\n\n    if (userLocation) {\n      const { AdvancedMarkerElement } = google.maps.marker;\n\n      markers.forEach((marker) => {\n        const markerLat =\n          typeof marker.position?.lat === \"function\"\n            ? marker.position.lat()\n            : marker.position?.lat;\n        const markerLng =\n          typeof marker.position?.lng === \"function\"\n            ? marker.position.lng()\n            : marker.position?.lng;\n\n        if (markerLat === userLocation.lat && markerLng === userLocation.lng) {\n          marker.map = null;\n        }\n      });\n\n      const userMarker = new AdvancedMarkerElement({\n        position: userLocation,\n        map,\n      });\n\n      newMarkers.push(userMarker);\n    }\n\n    setMarkers((prev) => [...prev, ...newMarkers]);\n  };\n\n  const handleZoomIn = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! + 1);\n    }\n  };\n\n  const handleZoomOut = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! - 1);\n    }\n  };\n\n  const handleGoToUserLocation = () => {\n    const map = mapRef.current;\n    if (userLocation && map) {\n      map.panTo(userLocation);\n      map.setZoom(14);\n    } else {\n      console.warn(\"No se pudo obtener la ubicación del usuario.\");\n    }\n  };\n\n  if (!isMapsReady) {\n    return (\n      <div className=\"flex justify-center items-center w-full h-full\">\n        <Loader size={48} />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        center={currentCenter}\n        zoom={12}\n        onLoad={(map) => {\n          mapRef.current = map;\n          setIsMapLoaded(true);\n          setTimeout(() => handleBoundsChanged(), 500);\n        }}\n        onBoundsChanged={handleBoundsChanged}\n        options={{\n          zoomControl: false,\n          streetViewControl: false,\n          mapTypeControl: false,\n          fullscreenControl: false,\n          mapTypeId: \"roadmap\",\n          mapId: \"78a223abe416be2b\",\n        }}\n      />\n\n      <div className=\"absolute top-4 left-4 z-10 flex flex-col space-y-2\">\n        <button\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomIn}\n        >\n          <Plus size={24} />\n        </button>\n\n        <button\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomOut}\n        >\n          <Minus size={24} />\n        </button>\n\n        <button\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-gray-700 hover:bg-gray-100\"\n          onClick={handleGoToUserLocation}\n        >\n          <LocateFixed size={24} />\n        </button>\n      </div>\n\n      {selectedProject && (\n        <div className=\"absolute left-1/2 top-1/3 sm:top-4 z-20 w-72 -translate-x-1/2 transform rounded-lg bg-premium-backgroundLight shadow-lg sm:left-auto sm:right-4 sm:translate-x-0 dark:bg-premium-backgroundDark\">\n          <ProjectCardAdmin\n            id={selectedProject.id}\n            images={selectedProject.projectMedia}\n            name={selectedProject.name}\n            location={selectedProject.city.name}\n            price={selectedProject.price || undefined}\n            area={selectedProject.totalArea || 0}\n            isFromMap={true}\n            onClose={handleCloseCard}\n            url={`/inmobiliaria/${selectedProject.id}`}\n            urlEdit={`/admin/propiedades/${selectedProject.id}`}\n            onDelete={onDelete}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default memo(ProjectsMap);\n",
          "projectView": {
            "basicProjectView.tsx": "import clsx from \"clsx\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport FormDisplay from \"@/app/ui/modals/admin/formDisplay\";\r\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\r\n\r\ninterface BasicProjectViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function BasicProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: BasicProjectViewProps) {\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        Datos Básicos\r\n      </h2>\r\n\r\n      <div className=\"space-y-6\">\r\n        <FormDisplay\r\n          label={`Nombre del ${project.propertyType?.id === 1 ? \"Proyecto\" : \"Propiedad\"}`}\r\n          value={project.name || \"No especificado\"}\r\n        />\r\n\r\n        <div\r\n          className={clsx(\r\n            \"grid grid-cols-1 gap-4\",\r\n            project.propertyType?.id === 1 && \"sm:grid-cols-2\"\r\n          )}\r\n        >\r\n          <FormDisplay\r\n            label=\"Tipo de Propiedad\"\r\n            value={project.propertyType?.name || \"No especificado\"}\r\n          />\r\n\r\n          {project.projectType?.id && (\r\n            <FormDisplay\r\n              label=\"Finalidad\"\r\n              value={project.projectType?.name || \"No especificado\"}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <FormDisplay\r\n          label=\"Correo del Propietario\"\r\n          value={project?.email || \"No especificado\"}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Resumen breve\"\r\n          value={project.shortDescription || \"No especificado\"}\r\n          rows={3}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Descripción Completa\"\r\n          value={project.detailedDescription || \"No especificado\"}\r\n          rows={6}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Propio de la empresa\"\r\n          value={project.membership === 1004 ? \"Sí\" : \"No\"}\r\n        />\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
            "detailsProjectView.tsx": "import { useMemo } from \"react\";\r\nimport {\r\n  ProjectData,\r\n  CommonArea,\r\n  NearbyService,\r\n  HousingType,\r\n} from \"@/lib/definitios\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport FormDisplay from \"@/app/ui/modals/admin/formDisplay\";\r\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\r\n\r\ninterface DetailsProjectViewProps {\r\n  project: Partial<ProjectData>;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function DetailsProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: DetailsProjectViewProps) {\r\n  const shouldShowField = useMemo(() => {\r\n    const propertyTypeId = project.propertyType?.id;\r\n\r\n    return {\r\n      price: project.projectType?.id === 2 || project.projectType?.id === 3,\r\n      availableUnits:\r\n        project.projectType?.id === 2 || project.projectType?.id === 3,\r\n      housingType: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      complexName:\r\n        propertyTypeId === 1002 &&\r\n        (project.projectType?.id === 2 || project.projectType?.id === 3),\r\n      availableDate: true,\r\n      commonAreas: project.commonAreas && project.commonAreas.length > 0,\r\n      nearbyServices:\r\n        project.nearbyServices && project.nearbyServices.length > 0,\r\n    };\r\n  }, [project]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Detalles del Proyecto\"\r\n          : \"Detalles de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        {shouldShowField.price && (\r\n          <FormDisplay\r\n            label=\"Precio\"\r\n            value={formatNumber(project.price ?? 0)}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.availableUnits && (\r\n          <FormDisplay\r\n            label=\"Unidades Disponibles\"\r\n            value={String(project.availableUnits ?? \"No especificado\")}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.housingType && (\r\n          <FormDisplay\r\n            label=\"Tipo de Vivienda\"\r\n            value={project.housingType?.name ?? \"No especificado\"}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.availableDate && (\r\n          <FormDisplay\r\n            label=\"Fecha Estimada de Entrega\"\r\n            value={\r\n              project.availableDate\r\n                ? new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\r\n                    year: \"numeric\",\r\n                    month: \"long\",\r\n                  })\r\n                : \"No especificado\"\r\n            }\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.complexName && (\r\n          <FormDisplay\r\n            label=\"Nombre del Conjunto\"\r\n            value={project.complexName ?? \"No especificado\"}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.commonAreas && (\r\n          <DetailList label=\"Áreas Comunes\" items={project.commonAreas} />\r\n        )}\r\n\r\n        {shouldShowField.nearbyServices && (\r\n          <DetailList\r\n            label=\"Servicios Cercanos\"\r\n            items={project.nearbyServices}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DetailList = ({\r\n  label,\r\n  items,\r\n}: {\r\n  label: string;\r\n  items?: (CommonArea | NearbyService | HousingType)[];\r\n}) =>\r\n  items && items.length > 0 ? (\r\n    <div>\r\n      <h3 className=\"mb-2 text-lg font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {label}\r\n      </h3>\r\n\r\n      <ul className=\"grid grid-cols-1 gap-2 text-premium-textPrimary dark:text-premium-textSecondary\">\r\n        {items.map((item) => (\r\n          <li key={item.id} className=\"pl-4 before:content-['•'] before:mr-2\">\r\n            {item.name}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  ) : null;\r\n",
            "featuresProjectView.tsx": "import { useMemo } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport FormDisplay from \"@/app/ui/modals/admin/formDisplay\";\r\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\r\n\r\ninterface FeaturesProjectViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function FeaturesProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: FeaturesProjectViewProps) {\r\n  const shouldShowField = useMemo(() => {\r\n    const propertyTypeId = project.propertyType?.id;\r\n\r\n    return {\r\n      socioeconomicLevel: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      yearBuilt: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      bedrooms: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      storageUnits: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      balcony: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      laundryArea: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      customizationOptions: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      terrace: propertyTypeId === 1001,\r\n      garden: propertyTypeId === 1001,\r\n      bathrooms:\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004,\r\n      lobbies:\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004,\r\n      elevator: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      towers: propertyTypeId === 1002,\r\n      floorNumber: propertyTypeId === 1002,\r\n      freeHeight:\r\n        propertyTypeId === 1004 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1005,\r\n      width:\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007,\r\n      length:\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007,\r\n      heavyParking: propertyTypeId === 1005,\r\n    };\r\n  }, [project.propertyType?.id]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Características del Proyecto\"\r\n          : \"Características de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        <FormDisplay\r\n          label=\"Área Total (m²)\"\r\n          value={String(project.totalArea ?? \"No especificado\")}\r\n        />\r\n        <FormDisplay\r\n          label=\"Área Construida (m²)\"\r\n          value={String(project.builtArea ?? \"No especificado\")}\r\n        />\r\n        {shouldShowField.socioeconomicLevel && (\r\n          <FormDisplay\r\n            label=\"Nivel Socioeconómico\"\r\n            value={String(project.socioeconomicLevel ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.yearBuilt && (\r\n          <FormDisplay\r\n            label=\"Año de Construcción\"\r\n            value={String(project.yearBuilt ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.bedrooms && (\r\n          <FormDisplay\r\n            label=\"Número de Habitaciones\"\r\n            value={String(project.bedrooms ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.bathrooms && (\r\n          <FormDisplay\r\n            label=\"Número de Baños\"\r\n            value={String(project.bathrooms ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.lobbies && (\r\n          <FormDisplay\r\n            label=\"Número de Salas de Estar\"\r\n            value={String(project.lobbies ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.freeHeight && (\r\n          <FormDisplay\r\n            label=\"Altura Libre (m)\"\r\n            value={String(project.freeHeight ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.width && (\r\n          <FormDisplay\r\n            label=\"Frente (m)\"\r\n            value={String(project.width ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.length && (\r\n          <FormDisplay\r\n            label=\"Fondo (m)\"\r\n            value={String(project.length ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.heavyParking && (\r\n          <FormDisplay\r\n            label=\"Espacios de Parqueo Pesado\"\r\n            value={String(project.heavyParking ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.towers && (\r\n          <FormDisplay\r\n            label=\"Número de Torres\"\r\n            value={String(project.towers ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.floorNumber && (\r\n          <FormDisplay\r\n            label=\"Número de Piso\"\r\n            value={String(project.floorNumber ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.storageUnits && (\r\n          <FormDisplay\r\n            label=\"Número de Depósitos\"\r\n            value={String(project.storageUnits ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        <FormDisplay\r\n          label=\"Espacios de Parqueo\"\r\n          value={String(project.parkingSpots ?? \"No especificado\")}\r\n        />\r\n      </div>\r\n\r\n      {(project.propertyType?.id === 1001 ||\r\n        project.propertyType?.id === 1002) && (\r\n        <div>\r\n          <h3 className=\"my-4 text-center text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\r\n            Características Adicionales\r\n          </h3>\r\n\r\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n            {shouldShowField.elevator && (\r\n              <FormDisplay\r\n                label=\"Elevador\"\r\n                value={project.elevator ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.terrace && (\r\n              <FormDisplay\r\n                label=\"Terraza\"\r\n                value={project.terrace ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.balcony && (\r\n              <FormDisplay\r\n                label=\"Balcón\"\r\n                value={project.balcony ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.garden && (\r\n              <FormDisplay\r\n                label=\"Jardín\"\r\n                value={project.garden ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.laundryArea && (\r\n              <FormDisplay\r\n                label=\"Área de Lavado\"\r\n                value={project.laundryArea ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.customizationOptions && (\r\n              <FormDisplay\r\n                label=\"Opciones de Personalización\"\r\n                value={project.customizationOptions ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
            "imagesProjectView.tsx": "import { ProjectData, ImageType } from \"@/lib/definitios\";\r\nimport ProjectMediaGallery from \"./projectMediaGallery\";\r\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\r\n\r\ninterface ImagesProjectViewProps {\r\n  project: ProjectData;\r\n  imagesTypes: ImageType[];\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function ImagesProjectView({\r\n  project,\r\n  imagesTypes,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: ImagesProjectViewProps) {\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Imágenes del Proyecto\"\r\n          : \"Imágenes de la Propiedad\"}\r\n      </h2>\r\n\r\n      <ProjectMediaGallery\r\n        images={project.projectMedia || []}\r\n        imageTypes={imagesTypes}\r\n        commonAreas={project.commonAreas || []}\r\n      />\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n        hideConfirmation={true}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
            "locationProjectView.tsx": "import { ProjectData } from \"@/lib/definitios\";\r\nimport LocationMap from \"../locationMap\";\r\nimport StepNavigationButtons from \"../../stepNavigationButtons\";\r\nimport FormDisplay from \"@/app/ui/modals/admin/formDisplay\";\r\n\r\ninterface LocationProjectViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function LocationProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: LocationProjectViewProps) {\r\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Ubicación del Proyecto\"\r\n          : \"Ubicación de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n        <FormDisplay\r\n          label=\"Departamento\"\r\n          value={project.city?.departament?.name || \"No especificado\"}\r\n        />\r\n        <FormDisplay\r\n          label=\"Ciudad\"\r\n          value={project.city?.name || \"No especificado\"}\r\n        />\r\n      </div>\r\n\r\n      <FormDisplay\r\n        label=\"Dirección\"\r\n        value={project.address || \"No especificado\"}\r\n      />\r\n\r\n      <div className=\"relative mt-6 h-64 w-full\">\r\n        <LocationMap\r\n          isLoaded={isMapsReady}\r\n          coordinates={{\r\n            lat: project.latitude || 4.5709,\r\n            lng: project.longitude || -74.2973,\r\n          }}\r\n          onLocationSelect={() => {}}\r\n          onUpdateAddress={undefined}\r\n        />\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
            "projectMediaGallery.tsx": "import { useState } from \"react\";\r\nimport { ProjectMedia, ImageType, CommonArea } from \"@/lib/definitios\";\r\nimport ImageModal from \"../../../realEstate/project/imageModal\";\r\n\r\ninterface ProjectMediaGalleryProps {\r\n  images: ProjectMedia[];\r\n  imageTypes: ImageType[];\r\n  commonAreas: CommonArea[];\r\n}\r\n\r\nexport default function ProjectMediaGallery({\r\n  images,\r\n  imageTypes,\r\n  commonAreas,\r\n}: ProjectMediaGalleryProps) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const handleImageClick = (clickedImage: ProjectMedia) => {\r\n    const realIndex = images.findIndex((img) => img.url === clickedImage.url);\r\n    if (realIndex !== -1) {\r\n      setSelectedIndex(realIndex);\r\n      setIsModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const imagesByType = imageTypes.map((type) => ({\r\n    typeName: type.name,\r\n    images: images.filter((img) => img.imageType === type.id),\r\n  }));\r\n\r\n  const imagesByCommonArea = commonAreas.map((area) => ({\r\n    areaName: area.name,\r\n    images: images.filter((img) => img.commonArea === area.id),\r\n  }));\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {imagesByType.map(({ typeName, images }) => (\r\n        <ImageSection\r\n          key={typeName}\r\n          category={typeName}\r\n          images={images}\r\n          onImageClick={handleImageClick}\r\n        />\r\n      ))}\r\n\r\n      <h2 className=\"text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight mt-6\">\r\n        Imágenes de Áreas Comunes\r\n      </h2>\r\n\r\n      {imagesByCommonArea.map(({ areaName, images }) => (\r\n        <ImageSection\r\n          key={areaName}\r\n          category={areaName}\r\n          images={images}\r\n          onImageClick={handleImageClick}\r\n        />\r\n      ))}\r\n\r\n      <ImageModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        media={images}\r\n        initialIndex={selectedIndex}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ImageSection = ({\r\n  category,\r\n  images,\r\n  onImageClick,\r\n}: {\r\n  category: string;\r\n  images: ProjectMedia[];\r\n  onImageClick: (image: ProjectMedia) => void;\r\n}) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"text-lg font-semibold text-premium-textPrimary dark:text-premium-textPrimary\">\r\n      {category}\r\n    </h3>\r\n    {images.length > 0 ? (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {images.map((image, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"flex flex-col bg-premium-backgroundLight dark:bg-premium-backgroundDark rounded-lg shadow-md overflow-hidden\"\r\n          >\r\n            <div\r\n              onClick={() => onImageClick(image)}\r\n              className=\"relative cursor-pointer\"\r\n            >\r\n              <div\r\n                className=\"relative h-48 w-full rounded-t-lg bg-cover bg-center\"\r\n                style={{ backgroundImage: `url(${encodeURI(image.url)})` }}\r\n              >\r\n                {image.tag && (\r\n                  <p className=\"absolute bottom-0 w-full bg-black bg-opacity-50 p-2 text-center text-xs text-white\">\r\n                    {image.tag}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {image.tag && (\r\n                <p className=\"absolute bottom-0 w-full bg-black bg-opacity-50 p-2 text-center text-xs text-white\">\r\n                  {image.tag}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {image.description && (\r\n              <div className=\"py-2 px-4\">\r\n                <label className=\"text-md font-semibold text-premium-textPrimary dark:text-premium-textSecondary\">\r\n                  Descripción\r\n                </label>\r\n                <p className=\"text-sm text-premium-textPrimary dark:text-premium-textSecondary\">\r\n                  {image.description}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    ) : (\r\n      <p className=\"text-premium-textSecondary dark:text-premium-textSecondary\">\r\n        No hay imágenes disponibles.\r\n      </p>\r\n    )}\r\n  </div>\r\n);\r\n",
            "projectView.tsx": "\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport useLocations from \"@/app/hooks/projects/metadata/location/useLocations\";\r\nimport useBasicMetadata from \"@/app/hooks/projects/metadata/useBasicMetadata\";\r\nimport useImageTypes from \"@/app/hooks/projects/metadata/imageTypes/useImageTypes\";\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport ProgressBar from \"@/app/ui/admin/projects/createEditProject/progressBar\";\r\nimport BasicProjectView from \"./basicProjectView\";\r\nimport LocationProjectView from \"./locationProjectView\";\r\nimport FeaturesProjectView from \"./featuresProjectView\";\r\nimport DetailsProjectView from \"./detailsProjectView\";\r\nimport ImagesProjectView from \"./imagesProjectView\";\r\nimport CreateProjectSkeleton from \"@/app/ui/skeletons/admin/createProjectSkeleton\";\r\n\r\ninterface ProjectViewProps {\r\n  projectId: number;\r\n  isProperty: boolean;\r\n}\r\n\r\nexport default function ProjectView({\r\n  projectId,\r\n  isProperty,\r\n}: ProjectViewProps) {\r\n  const { project, loading: loadingProject } = useProjectById(\r\n    projectId,\r\n    !isProperty,\r\n    true\r\n  );\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const totalSteps = 5;\r\n  const router = useRouter();\r\n\r\n  const { locations } = useLocations();\r\n  const { metadata } = useBasicMetadata();\r\n  const { imagesTypes, loadingImages } = useImageTypes();\r\n\r\n  const handleNextStep = () => {\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep((prevStep) => prevStep + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousStep = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep((prevStep) => prevStep - 1);\r\n    }\r\n  };\r\n\r\n  const projectData: Partial<ProjectData> = project ?? {};\r\n\r\n  const currentView = useMemo(() => {\r\n    if (!metadata || !locations || loadingProject || loadingImages) {\r\n      return <CreateProjectSkeleton />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {currentStep === 0 && (\r\n          <BasicProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 1 && (\r\n          <LocationProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 2 && (\r\n          <FeaturesProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 3 && (\r\n          <DetailsProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 4 && (\r\n          <ImagesProjectView\r\n            project={projectData}\r\n            imagesTypes={imagesTypes}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }, [currentStep, metadata, locations, project, imagesTypes, loadingImages]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <h1 className=\"mb-10 mt-24 text-center text-3xl font-semibold text-premium-primary lg:mt-20 dark:text-premium-primaryLight\">\r\n        Visualizar{\" \"}\r\n        {projectData.projectType?.id === 1 ? \"Proyecto\" : \"Propiedad\"}\r\n      </h1>\r\n\r\n      <div className=\"mx-auto mb-10 text-center\">\r\n        <ProgressBar currentStep={currentStep} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 mx-auto max-w-3xl\">{currentView}</div>\r\n\r\n      <div className=\"mt-4 text-center\">\r\n        <button\r\n          className=\"rounded-md bg-premium-secondary px-4 py-2 text-white transition-colors hover:bg-premium-secondaryLight dark:bg-premium-secondaryDark dark:hover:bg-premium-secondaryLight\"\r\n          onClick={() => router.push(\"/admin/solicitudes\")}\r\n        >\r\n          Volver\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
          },
          "shareButton.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { X } from \"lucide-react\";\nimport WhatsAppIcon from \"../../icons/whatsAppIcon\";\nimport FacebookIcon from \"../../icons/facebookIcon\";\nimport XIcon from \"../../icons/xIcon\";\nimport TelegramIcon from \"../../icons/telegramIcon\";\n\nconst Share2 = dynamic(() => import(\"lucide-react\").then((mod) => mod.Share2));\n\ninterface ShareButtonProps {\n  message: string;\n}\n\nexport default function ShareButton({ message }: ShareButtonProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [url, setUrl] = useState(\"\");\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      setUrl(window.location.href);\n    }\n  }, []);\n\n  const handleShare = (platform: string) => {\n    let shareUrl = \"\";\n    const encodedMessage = encodeURIComponent(`${message} ${url}`);\n\n    switch (platform) {\n      case \"whatsapp\":\n        shareUrl = `https://api.whatsapp.com/send?text=${encodedMessage}`;\n        break;\n      case \"facebook\":\n        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(\n          url\n        )}`;\n        break;\n      case \"twitter\":\n        shareUrl = `https://x.com/intent/tweet?url=${encodeURIComponent(\n          url\n        )}&text=${encodeURIComponent(message)}`;\n        break;\n      case \"telegram\":\n        shareUrl = `https://t.me/share/url?url=${encodeURIComponent(\n          url\n        )}&text=${encodedMessage}`;\n        break;\n      default:\n        return;\n    }\n\n    window.open(\n      shareUrl,\n      \"_blank\",\n      \"width=600,height=400,scrollbars=no,toolbar=no,location=no,status=no,menubar=no\"\n    );\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"rounded-full p-2 text-client-accent transition duration-300 hover:text-client-accentHover\"\n        aria-label=\"Compartir\"\n      >\n        <Share2 size={24} />\n      </button>\n\n      {isOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n          <div className=\"relative w-64 rounded-lg bg-client-backgroundAlt px-4 pb-4 pt-2\">\n            <button\n              onClick={() => setIsOpen(false)}\n              className=\"absolute right-3 top-3 text-white transition duration-200 hover:text-gray-200\"\n              aria-label=\"Cerrar modal\"\n            >\n              <X size={20} />\n            </button>\n\n            <h2 className=\"mb-4 text-center text-xl font-semibold text-white\">\n              Compartir en:\n            </h2>\n\n            <div className=\"flex items-center justify-around\">\n              <button\n                onClick={() => handleShare(\"whatsapp\")}\n                className=\"transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en WhatsApp\"\n              >\n                <WhatsAppIcon className=\"w-8 h-8\" />\n              </button>\n\n              <button\n                onClick={() => handleShare(\"facebook\")}\n                className=\"transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en Facebook\"\n              >\n                <FacebookIcon className=\"w-8 h-8\" />\n              </button>\n\n              <button\n                onClick={() => handleShare(\"twitter\")}\n                className=\"transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en Twitter\"\n              >\n                <XIcon className=\"w-8 h-8\" />\n              </button>\n\n              <button\n                onClick={() => handleShare(\"telegram\")}\n                className=\"transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en Telegram\"\n              >\n                <TelegramIcon className=\"w-8 h-8\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"
        },
        "requests": {
          "requestModal.tsx": "import { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport ModalHeader from \"../../modals/admin/modalHeader\";\r\nimport ModalFooter from \"../../modals/admin/modalFooter\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst FormTextArea = dynamic(\r\n  () => import(\"@/app/ui/modals/admin/formTextArea\"),\r\n  {\r\n    ssr: false,\r\n  }\r\n);\r\nconst FormSelect = dynamic(() => import(\"@/app/ui/modals/admin/formSelect\"), {\r\n  ssr: false,\r\n});\r\n\r\ninterface RequestModalProps {\r\n  show: boolean;\r\n  flag: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  handleChange: (\r\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLSelectElement>\r\n  ) => void;\r\n  message: string;\r\n  actionType: \"approve\" | \"reject\" | \"revision\";\r\n  setRequestAction: (action: \"approve\" | \"reject\" | \"revision\") => void;\r\n  errors: {\r\n    messageError: string;\r\n    actionTypeError: string;\r\n  };\r\n}\r\n\r\nexport default function RequestModal({\r\n  show,\r\n  flag,\r\n  onClose,\r\n  onSubmit,\r\n  handleChange,\r\n  message,\r\n  actionType,\r\n  setRequestAction,\r\n  errors,\r\n}: RequestModalProps) {\r\n  useBodyOverflow(show);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-md overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader title=\"Responder Solicitud\" onClose={onClose} />\r\n\r\n        {/* Body */}\r\n        <form\r\n          id=\"requestForm\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          className=\"h-[50vh] space-y-4 overflow-y-auto px-6 py-4\"\r\n        >\r\n          <FormSelect\r\n            label=\"Estado de la Solicitud\"\r\n            name=\"requestStatus\"\r\n            value={actionType}\r\n            onChange={(e) =>\r\n              setRequestAction(\r\n                e.target.value as \"approve\" | \"reject\" | \"revision\"\r\n              )\r\n            }\r\n            options={[\r\n              { id: \"approve\", name: \"Aprobar\" },\r\n              { id: \"reject\", name: \"Rechazar\" },\r\n              { id: \"revision\", name: \"Enviar a Revisión\" },\r\n            ]}\r\n            error={errors?.actionTypeError || \"\"}\r\n            flag={flag}\r\n          />\r\n\r\n          <FormTextArea\r\n            label=\"Mensaje de respuesta\"\r\n            name=\"responseMessage\"\r\n            value={message}\r\n            placeholder=\"Escribe un mensaje\"\r\n            onChange={handleChange}\r\n            rows={7}\r\n            maxLength={500}\r\n            error={errors.messageError}\r\n          />\r\n        </form>\r\n\r\n        {/* Footer */}\r\n        <ModalFooter onClose={onClose} formId=\"requestForm\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "roles": {
          "roleModal.tsx": "import { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport { Role, Permission } from \"@/lib/definitios\";\r\nimport ModalHeader from \"../../modals/admin/modalHeader\";\r\nimport ModalFooter from \"../../modals/admin/modalFooter\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/admin/formInput\"), {\r\n  ssr: false,\r\n});\r\nconst FormSelect = dynamic(() => import(\"@/app/ui/modals/admin/formSelect\"), {\r\n  ssr: false,\r\n});\r\n\r\ninterface RoleModalProps {\r\n  show: boolean;\r\n  flag: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  handleChange: (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => void;\r\n  role: Role;\r\n  permissions: Permission[];\r\n  errors: {\r\n    nameError: string;\r\n    permissionsError: string;\r\n  };\r\n}\r\n\r\nexport default function RoleModal({\r\n  show,\r\n  flag,\r\n  onClose,\r\n  onSubmit,\r\n  handleChange,\r\n  role,\r\n  permissions,\r\n  errors,\r\n}: RoleModalProps) {\r\n  useBodyOverflow(show);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader\r\n          title={role.id ? \"Editar Rol\" : \"Registrar Rol\"}\r\n          onClose={onClose}\r\n        />\r\n\r\n        {/* Body */}\r\n        <form\r\n          id=\"roleForm\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          className=\"h-[50vh] space-y-4 overflow-y-auto px-6 py-4\"\r\n        >\r\n          <FormInput\r\n            label=\"Nombre del rol\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={role.name || \"\"}\r\n            placeholder=\"Nombre del rol\"\r\n            maxLength={50}\r\n            onChange={handleChange}\r\n            error={errors.nameError}\r\n            flag={flag}\r\n          />\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-premium-textPrimary dark:text-premium-textPrimary mb-2\">\r\n              Permisos actuales\r\n            </label>\r\n            <ul className=\"list-disc pl-5 text-premium-textSecondary dark:text-premium-textSecondary\">\r\n              {role.permissions && role.permissions.length > 0 ? (\r\n                role.permissions.map((perm) => (\r\n                  <li key={perm.id} className=\"mb-1\">\r\n                    {perm.name}\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <li className=\"italic text-gray-500\">\r\n                  No hay permisos asignados\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n\r\n          <FormSelect\r\n            label=\"Asignar permiso\"\r\n            name=\"addPermission\"\r\n            value={\"\"}\r\n            options={(permissions ?? [])\r\n              .filter(\r\n                (perm) =>\r\n                  !role.permissions?.some(\r\n                    (assignedPerm) => assignedPerm.id === perm.id\r\n                  )\r\n              )\r\n              .map((perm) => ({ id: perm.id, name: perm.name }))}\r\n            onChange={handleChange}\r\n            error={errors.permissionsError}\r\n            flag={flag}\r\n          />\r\n\r\n          <FormSelect\r\n            label=\"Eliminar permiso\"\r\n            name=\"deletePermission\"\r\n            value={\"\"}\r\n            options={role.permissions || []}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n          />\r\n        </form>\r\n\r\n        {/* Footer */}\r\n        <ModalFooter onClose={onClose} formId=\"roleForm\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "stepNavigationButtons.tsx": "\"use client\";\n\ninterface StepNavigationButtonsProps {\n  currentStep: number;\n  totalSteps: number;\n  onPrevious: (e?: React.FormEvent) => void;\n  onNext: (e?: React.FormEvent) => void;\n  hideConfirmation?: boolean;\n}\n\nexport default function StepNavigationButtons({\n  currentStep,\n  totalSteps,\n  onPrevious,\n  onNext,\n  hideConfirmation = false,\n}: StepNavigationButtonsProps) {\n  return (\n    <div className=\"mt-6 flex justify-between\">\n      {currentStep > 0 && (\n        <button\n          className=\"rounded-md bg-premium-secondary px-4 py-2 text-sm text-white hover:bg-premium-secondaryLight dark:bg-premium-secondary dark:hover:bg-premium-secondaryLight\"\n          onClick={(e) => onPrevious(e)}\n        >\n          Anterior\n        </button>\n      )}\n      <div className=\"flex-grow\" />\n      {currentStep < totalSteps && !hideConfirmation && (\n        <button\n          className=\"rounded-md bg-premium-primary px-4 py-2 text-sm text-white hover:bg-premium-primaryLight dark:bg-premium-primaryDark dark:hover:bg-premium-primaryLight\"\n          onClick={(e) => onNext(e)}\n        >\n          {currentStep !== totalSteps - 1 ? \"Siguiente\" : \"Confirmar\"}\n        </button>\n      )}\n    </div>\n  );\n}\n",
        "table": {
          "table.tsx": "import React, { useState, useMemo, useCallback } from \"react\";\nimport { Header } from \"@/lib/definitios\";\nimport { mergeSort } from \"@/utils/mergeSort\";\nimport TableHeader from \"./tableHeader\";\nimport TableRow from \"./tableRow\";\nimport TablePagination from \"./tablePagination\";\nimport TableSearch from \"./tableSearch\";\n\ntype TableProps<T extends Record<string, any>> = {\n  data: T[];\n  headers: Header<T>[];\n  totalEntries: number;\n  entry: string;\n  stateLabels?: { true: string; false: string };\n  currentPage: number;\n  goToPage: (pageNumber: number) => void;\n  goToNextPage: () => void;\n  goToPreviousPage: () => void;\n  entriesPerPage: number;\n  handleEntriesPerPageChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\n  handleSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onEditClick?: (item: T) => void;\n  onDeleteClick?: (item: T) => void;\n  actions?: {\n    icon: React.ElementType;\n    title: string;\n    className: string;\n    redirectUrl?: string | ((item: T) => string);\n    openInNewTab?: boolean;\n    onClick?: (item: T) => void;\n  }[];\n};\n\nexport default function Table<T extends { id?: number }>({\n  data,\n  headers,\n  totalEntries,\n  entry,\n  currentPage,\n  goToPage,\n  goToNextPage,\n  goToPreviousPage,\n  entriesPerPage,\n  handleEntriesPerPageChange,\n  handleSearchChange,\n  onEditClick,\n  onDeleteClick,\n  actions,\n}: TableProps<T>) {\n  const [sortState, setSortState] = useState<{\n    column: keyof T | null;\n    direction: \"asc\" | \"desc\" | null;\n  }>({\n    column: null,\n    direction: null,\n  });\n\n  const totalPages = useMemo(\n    () => Math.ceil(totalEntries / entriesPerPage),\n    [totalEntries, entriesPerPage]\n  );\n\n  const handleSort = useCallback((columnKey: keyof T | string) => {\n    setSortState((prev) => {\n      if (prev.column === columnKey) {\n        if (prev.direction === \"asc\")\n          return { column: columnKey as keyof T, direction: \"desc\" };\n        if (prev.direction === \"desc\") return { column: null, direction: null };\n      }\n      return { column: columnKey as keyof T, direction: \"asc\" };\n    });\n  }, []);\n\n  const sortedData = useMemo(() => {\n    if (!sortState.column || !sortState.direction) return data;\n    return mergeSort(data, sortState.column, sortState.direction);\n  }, [data, sortState]);\n\n  return (\n    <div className=\"rounded-3xl bg-premium-backgroundLight px-4 py-5 shadow-lg lg:px-8 dark:bg-premium-secondaryLight\">\n      <TableSearch\n        entriesPerPage={entriesPerPage}\n        handleEntriesPerPageChange={handleEntriesPerPageChange}\n        handleSearchChange={handleSearchChange}\n        entry={entry}\n      />\n      <div className=\"table-responsive overflow-x-auto\">\n        <table className=\"table-flush table text-sm w-full\">\n          <TableHeader\n            headers={headers}\n            sortState={sortState}\n            handleSort={handleSort}\n          />\n\n          <tbody>\n            {sortedData.map((item) => (\n              <TableRow\n                key={item.id}\n                item={item}\n                headers={headers}\n                onEditClick={onEditClick}\n                onDeleteClick={onDeleteClick}\n                actions={actions}\n              />\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"mt-4 flex items-center justify-between text-sm text-premium-textPrimary md:px-3 dark:text-premium-textPrimary\">\n        <span>\n          Mostrando {currentPage * entriesPerPage - entriesPerPage + 1} a{\" \"}\n          {Math.min(currentPage * entriesPerPage, totalEntries)} de{\" \"}\n          {totalEntries} {entry}\n        </span>\n        <TablePagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          goToPage={goToPage}\n          goToPreviousPage={goToPreviousPage}\n          goToNextPage={goToNextPage}\n        />\n      </div>\n    </div>\n  );\n}\n",
          "tableHeader.tsx": "import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Header } from \"@/lib/definitios\";\r\nimport { ChevronsUpDown } from \"lucide-react\";\r\n\r\ninterface TableHeaderProps<T> {\r\n  headers: Header<T>[];\r\n  sortState: { column: keyof T | null; direction: \"asc\" | \"desc\" | null };\r\n  handleSort: (columnKey: keyof T | string) => void;\r\n}\r\n\r\nexport default function TableHeader<T>({\r\n  headers,\r\n  sortState,\r\n  handleSort,\r\n}: TableHeaderProps<T>) {\r\n  return (\r\n    <thead className=\"thead-light text-xs\">\r\n      <tr>\r\n        {headers.map(({ label, key }) => {\r\n          const chevronsUpDownClass = clsx(\r\n            \"w-5 h-5 flex-shrink-0 transition-colors\",\r\n            sortState.column === key\r\n              ? \"text-premium-primary dark:text-premium-primary\"\r\n              : \"text-premium-textPlaceholder dark:text-premium-textSecondary\"\r\n          );\r\n\r\n          return (\r\n            <th\r\n              key={key as string}\r\n              className=\"cursor-pointer px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\"\r\n              onClick={() => handleSort(key)}\r\n            >\r\n              <div className=\"flex items-center justify-center gap-1\">\r\n                <span className=\"text-sm font-bold\">{label.toUpperCase()}</span>\r\n                <ChevronsUpDown className={chevronsUpDownClass} />\r\n              </div>\r\n            </th>\r\n          );\r\n        })}\r\n        <th className=\"px-4 py-2 text-center text-sm font-bold text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          ACCIÓN\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n  );\r\n}\r\n",
          "tablePagination.tsx": "import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface TablePaginationProps {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  goToPage: (pageNumber: number) => void;\r\n  goToPreviousPage: () => void;\r\n  goToNextPage: () => void;\r\n}\r\n\r\nexport default function TablePagination({\r\n  currentPage,\r\n  totalPages,\r\n  goToPage,\r\n  goToPreviousPage,\r\n  goToNextPage,\r\n}: TablePaginationProps) {\r\n  return (\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button\r\n        onClick={goToPreviousPage}\r\n        disabled={currentPage === 1}\r\n        className={clsx(\r\n          \"rounded-full border p-2 focus:outline-none transition-colors\",\r\n          \"border-premium-borderColor dark:border-premium-borderColorHover\",\r\n          currentPage === 1\r\n            ? \"text-premium-textPlaceholder cursor-not-allowed\"\r\n            : \"text-premium-primary dark:text-premium-primaryLight hover:bg-premium-primaryLight dark:hover:bg-premium-primaryDark hover:text-white\"\r\n        )}\r\n      >\r\n        <ChevronLeft className=\"h-4 w-4\" />\r\n      </button>\r\n\r\n      {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n        const startPage = Math.max(\r\n          1,\r\n          Math.min(currentPage - 2, totalPages - 4)\r\n        );\r\n        const pageNumber = startPage + i;\r\n        return (\r\n          <button\r\n            key={pageNumber}\r\n            onClick={() => goToPage(pageNumber)}\r\n            className={clsx(\r\n              \"rounded-full px-3 py-1 transition-colors duration-300\",\r\n              currentPage === pageNumber\r\n                ? \"bg-premium-primaryLight text-white hover:bg-premium-primary dark:bg-premium-primary dark:hover:bg-premium-primaryDark\"\r\n                : \"bg-premium-backgroundLight text-premium-textPrimary hover:bg-premium-primaryLight dark:bg-premium-backgroundDark dark:text-premium-textPrimary dark:hover:bg-premium-primary\"\r\n            )}\r\n          >\r\n            {pageNumber}\r\n          </button>\r\n        );\r\n      })}\r\n\r\n      <button\r\n        onClick={goToNextPage}\r\n        disabled={currentPage === totalPages}\r\n        className={clsx(\r\n          \"rounded-full border p-2 focus:outline-none transition-colors\",\r\n          \"border-premium-borderColor dark:border-premium-borderColorHover\",\r\n          currentPage === totalPages\r\n            ? \"text-premium-textPlaceholder cursor-not-allowed\"\r\n            : \"text-premium-primary dark:text-premium-primaryLight hover:bg-premium-primaryLight dark:hover:bg-premium-primaryDark hover:text-white\"\r\n        )}\r\n      >\r\n        <ChevronRight className=\"h-4 w-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n",
          "tableRow.tsx": "import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport { getNestedValue } from \"@/utils/getNestedValue\";\r\nimport { Edit, Trash2 } from \"lucide-react\";\r\n\r\ninterface TableRowProps<T> {\r\n  item: T;\r\n  headers: {\r\n    key: keyof T | string;\r\n    type: string;\r\n    subKey?: string;\r\n    statusMapping?: Record<string, { label: string; className: string }>;\r\n  }[];\r\n  onEditClick?: (item: T) => void;\r\n  onDeleteClick?: (item: T) => void;\r\n  actions?: {\r\n    icon: React.ElementType;\r\n    title: string;\r\n    className: string;\r\n    redirectUrl?: string | ((item: T) => string);\r\n    openInNewTab?: boolean;\r\n    onClick?: (item: T) => void;\r\n    shouldRender?: (item: T) => boolean;\r\n  }[];\r\n}\r\n\r\nexport default function TableRow<T>({\r\n  item,\r\n  headers,\r\n  onEditClick,\r\n  onDeleteClick,\r\n  actions,\r\n}: TableRowProps<T>) {\r\n  return (\r\n    <tr className=\"h-16 max-h-28 border-t border-premium-borderColor hover:bg-premium-backgroundDark dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\">\r\n      {headers.map(({ key, type, subKey, statusMapping }, index) => {\r\n        const value =\r\n          typeof key === \"string\" ? getNestedValue(item, key) : item[key];\r\n\r\n        let content;\r\n        switch (type) {\r\n          case \"array\":\r\n            content = Array.isArray(value) ? (\r\n              <ul className=\"list-none pl-5 text-premium-textSecondary dark:text-premium-textSecondary\">\r\n                {value.map((subItem: any, i: number) => (\r\n                  <li key={i}>\r\n                    {subKey ? subItem[subKey] : JSON.stringify(subItem)}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : null;\r\n            break;\r\n\r\n          case \"boolean\":\r\n            content = (\r\n              <span\r\n                className={clsx(\r\n                  \"inline-block rounded-full px-3 py-1 text-sm font-medium\",\r\n                  value\r\n                    ? \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\"\r\n                    : \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\"\r\n                )}\r\n              >\r\n                {value ? \"Activo\" : \"Inactivo\"}\r\n              </span>\r\n            );\r\n            break;\r\n\r\n          case \"number\":\r\n            content = formatNumber(value as number);\r\n            break;\r\n\r\n          case \"date\":\r\n            content = new Date(value as string | number).toLocaleString(\r\n              \"es-ES\",\r\n              {\r\n                year: \"numeric\",\r\n                month: \"2-digit\",\r\n                day: \"2-digit\",\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n                second: \"2-digit\",\r\n                hour12: false,\r\n              }\r\n            );\r\n            break;\r\n\r\n          case \"status\":\r\n            const statusValue = String(value).toLowerCase();\r\n            const statusConfig = statusMapping?.[statusValue] || {\r\n              label: statusValue,\r\n              className:\r\n                \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200\",\r\n            };\r\n            content = (\r\n              <span\r\n                className={clsx(\r\n                  \"inline-block rounded-full px-3 py-1 text-sm font-medium\",\r\n                  statusConfig.className\r\n                )}\r\n              >\r\n                {statusConfig.label}\r\n              </span>\r\n            );\r\n            break;\r\n\r\n          default:\r\n            content = String(value ?? \"\");\r\n        }\r\n\r\n        return (\r\n          <td\r\n            key={index}\r\n            className=\"px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\"\r\n          >\r\n            {content}\r\n          </td>\r\n        );\r\n      })}\r\n\r\n      <td className=\"flex items-center justify-center space-x-2 px-4 py-2\">\r\n        {actions\r\n          ?.filter(\r\n            (action) => !action.shouldRender || action.shouldRender(item)\r\n          )\r\n          .map(\r\n            (\r\n              {\r\n                icon: Icon,\r\n                title,\r\n                className,\r\n                redirectUrl,\r\n                openInNewTab,\r\n                onClick,\r\n              },\r\n              i\r\n            ) => {\r\n              const resolvedRedirectUrl =\r\n                typeof redirectUrl === \"function\"\r\n                  ? redirectUrl(item)\r\n                  : redirectUrl;\r\n\r\n              return (\r\n                <button\r\n                  key={i}\r\n                  title={title}\r\n                  className={clsx(\"transition-colors\", className)}\r\n                  onClick={() => {\r\n                    if (onClick) {\r\n                      onClick(item);\r\n                    } else if (resolvedRedirectUrl) {\r\n                      if (openInNewTab) {\r\n                        window.open(resolvedRedirectUrl, \"_blank\");\r\n                      } else {\r\n                        window.location.href = resolvedRedirectUrl;\r\n                      }\r\n                    }\r\n                  }}\r\n                >\r\n                  <Icon className=\"h-5 w-5\" />\r\n                </button>\r\n              );\r\n            }\r\n          )}\r\n\r\n        {onEditClick && (\r\n          <button\r\n            title=\"Editar\"\r\n            onClick={() => onEditClick(item)}\r\n            className=\"text-blue-500 transition-colors hover:text-blue-600\"\r\n          >\r\n            <Edit className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n\r\n        {onDeleteClick && (\r\n          <button\r\n            title=\"Eliminar\"\r\n            onClick={() => onDeleteClick(item)}\r\n            className=\"text-red-500 transition-colors hover:text-red-700\"\r\n          >\r\n            <Trash2 className=\"h-5 w-5\" />\r\n          </button>\r\n        )}\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n",
          "tableSearch.tsx": "interface TableSearchProps {\r\n  entriesPerPage: number;\r\n  handleEntriesPerPageChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\r\n  handleSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  entry: string;\r\n}\r\n\r\nexport default function TableSearch({\r\n  entriesPerPage,\r\n  handleEntriesPerPageChange,\r\n  handleSearchChange,\r\n  entry,\r\n}: TableSearchProps) {\r\n  return (\r\n    <div className=\"mb-4 flex flex-col gap-3 text-xs sm:flex-row sm:items-center sm:justify-between sm:gap-0 sm:text-sm md:px-3\">\r\n      <div className=\"flex items-center space-x-2 px-2 sm:px-0\">\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          Mostrar\r\n        </span>\r\n        <select\r\n          name=\"numberElements\"\r\n          value={entriesPerPage}\r\n          onChange={handleEntriesPerPageChange}\r\n          className=\"rounded-md border border-premium-borderColor bg-premium-background px-2 py-1 text-premium-textPrimary focus:border-premium-borderColorHover focus:outline-none dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary dark:focus:border-premium-borderColorHover\"\r\n        >\r\n          {[5, 10, 15, 20, 30].map((num) => (\r\n            <option key={num} value={num}>\r\n              {num}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          {entry} por página\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"relative\">\r\n        <input\r\n          name=\"search\"\r\n          type=\"text\"\r\n          maxLength={100}\r\n          onChange={handleSearchChange}\r\n          placeholder=\"Buscar...\"\r\n          className=\"w-full rounded-md border border-premium-borderColor bg-premium-background px-3 py-2 text-premium-textPrimary focus:border-premium-borderColorHover focus:outline-none sm:w-auto dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary dark:focus:border-premium-borderColorHover\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "users": {
          "userModal.tsx": "import { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\nimport { UserData, Role, Gender, MembershipSummary } from \"@/lib/definitios\";\nimport ModalHeader from \"../../modals/admin/modalHeader\";\nimport ModalFooter from \"../../modals/admin/modalFooter\";\nimport dynamic from \"next/dynamic\";\n\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/admin/formInput\"), {\n  ssr: false,\n});\nconst FormSelect = dynamic(() => import(\"@/app/ui/modals/admin/formSelect\"), {\n  ssr: false,\n});\nconst FormCheckbox = dynamic(\n  () => import(\"@/app/ui/modals/admin/formCheckbox\"),\n  {\n    ssr: false,\n  }\n);\n\ninterface UserModalProps {\n  show: boolean;\n  flag: boolean;\n  onClose: () => void;\n  onSubmit: (e: React.FormEvent) => void;\n  handleChange: (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => void;\n  user: UserData;\n  roles: Role[];\n  genders: Gender[];\n  memberships: MembershipSummary[];\n  errors: {\n    namesError: string;\n    lastnamesError: string;\n    emailError: string;\n    phoneNumberError: string;\n    genderError: string;\n    roleError: string;\n  };\n}\n\nexport default function UserModal({\n  show,\n  flag,\n  onClose,\n  onSubmit,\n  handleChange,\n  user,\n  roles,\n  genders,\n  memberships,\n  errors,\n}: UserModalProps) {\n  useBodyOverflow(show);\n\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\n        {/* Header */}\n        <ModalHeader\n          title={user.id ? \"Editar Usuario\" : \"Registrar Usuario\"}\n          onClose={onClose}\n        />\n\n        {/* Body */}\n        <form\n          id=\"userForm\"\n          onSubmit={onSubmit}\n          noValidate\n          className=\"h-[60vh] space-y-4 overflow-y-auto px-6 py-4\"\n        >\n          <FormInput\n            label=\"Nombres\"\n            type=\"text\"\n            name=\"names\"\n            value={user.names || \"\"}\n            placeholder=\"Nombres del usuario\"\n            maxLength={150}\n            onChange={handleChange}\n            error={errors.namesError}\n            flag={flag}\n          />\n\n          <FormInput\n            label=\"Apellidos\"\n            type=\"text\"\n            name=\"lastnames\"\n            value={user.lastnames || \"\"}\n            placeholder=\"Apellidos del usuario\"\n            maxLength={150}\n            onChange={handleChange}\n            error={errors.lastnamesError}\n            flag={flag}\n          />\n\n          <FormInput\n            label=\"Email\"\n            type=\"email\"\n            name=\"email\"\n            value={user.email || \"\"}\n            placeholder=\"Correo electrónico\"\n            maxLength={190}\n            onChange={handleChange}\n            error={errors.emailError}\n            flag={flag}\n          />\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Teléfono\"\n              type=\"text\"\n              name=\"phoneNumber\"\n              value={user.phoneNumber || \"\"}\n              placeholder=\"Número de teléfono\"\n              maxLength={45}\n              onChange={handleChange}\n              error={errors.phoneNumberError}\n              flag={flag}\n            />\n\n            <FormSelect\n              label=\"Género\"\n              name=\"gender.id\"\n              value={user.gender?.id || \"\"}\n              options={genders}\n              onChange={handleChange}\n              error={errors.genderError}\n              flag={flag}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormSelect\n              label=\"Rol\"\n              name=\"role.id\"\n              value={user.role?.id || \"\"}\n              options={roles}\n              onChange={handleChange}\n              error={errors.roleError}\n              flag={flag}\n            />\n\n            <FormSelect\n              label=\"Membresía\"\n              name=\"membership.id\"\n              value={user.membership?.id || \"\"}\n              options={memberships}\n              onChange={handleChange}\n              flag={flag}\n            />\n          </div>\n\n          <FormCheckbox\n            label=\"Activo\"\n            name=\"state\"\n            checked={user.state || false}\n            onChange={handleChange}\n            className=\"rounded\"\n          />\n        </form>\n\n        {/* Footer */}\n        <ModalFooter onClose={onClose} formId=\"userForm\" />\n      </div>\n    </div>\n  );\n}\n",
          "userProjectsModal .tsx": "import { useState } from \"react\";\r\nimport { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport { useGetUserProjects } from \"@/app/hooks/users/useGetUserProjects\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport ModalHeader from \"../../modals/admin/modalHeader\";\r\nimport ProjectCard from \"@/app/ui/admin/projects/projectCardAdmin\";\r\nimport ModalConfirmation from \"../../modals/admin/modalConfirmation\";\r\nimport Alert from \"../../alert\";\r\nimport ProjectCardSkeleton from \"../../skeletons/projectCardSkeleton\";\r\n\r\ninterface UserProjectsModalProps {\r\n  show: boolean;\r\n  onClose: () => void;\r\n  userId: number;\r\n}\r\n\r\nexport default function UserProjectsModal({\r\n  show,\r\n  onClose,\r\n  userId,\r\n}: UserProjectsModalProps) {\r\n  const { submitProject, isProcessing } = useProjectApi();\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState<{\r\n    id: number;\r\n    name: string;\r\n  } | null>(null);\r\n  const [alertMessage, setAlertMessage] = useState<{\r\n    type: string;\r\n    message: string;\r\n  } | null>(null);\r\n\r\n  useBodyOverflow(show);\r\n\r\n  const { projects, isLoading, totalEntries, refreshUserProjects } =\r\n    useGetUserProjects({\r\n      userId,\r\n      entriesPerPage: 10,\r\n    });\r\n\r\n  const handleOpenModal = (id: number, name: string) => {\r\n    setSelectedProject({ id, name });\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteProject = async () => {\r\n    if (!selectedProject) return;\r\n\r\n    const success = await submitProject(selectedProject.id, \"delete\");\r\n\r\n    if (success) {\r\n      setAlertMessage({\r\n        type: \"success\",\r\n        message: `Propiedad \"${selectedProject.name}\" eliminada exitosamente.`,\r\n      });\r\n      refreshUserProjects();\r\n    } else {\r\n      setAlertMessage({\r\n        type: \"error\",\r\n        message: `Error al eliminar la propiedad \"${selectedProject.name}\".`,\r\n      });\r\n    }\r\n\r\n    setIsModalOpen(false);\r\n    setSelectedProject(null);\r\n  };\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-4xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader\r\n          title={`Propiedades del Usuario (${totalEntries})`}\r\n          onClose={onClose}\r\n        />\r\n\r\n        {/* Body */}\r\n        <div className=\"h-[80vh] overflow-y-auto p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {isLoading\r\n            ? Array.from({ length: 6 }).map((_, index) => (\r\n                <ProjectCardSkeleton key={index} />\r\n              ))\r\n            : projects.length > 0\r\n              ? projects.map((project) => (\r\n                  <ProjectCard\r\n                    key={project.id}\r\n                    id={project.id}\r\n                    images={project.projectMedia}\r\n                    name={project.name}\r\n                    location={project.city.name}\r\n                    price={project.price}\r\n                    area={project.totalArea}\r\n                    bedrooms={project.bedrooms}\r\n                    bathrooms={project.bathrooms}\r\n                    parkingSpots={project.parkingSpots}\r\n                    isFromMap={false}\r\n                    url={`/inmobiliario/${project.id}`}\r\n                    urlEdit={`/admin/propiedades/${project.id}`}\r\n                    onDelete={() => handleOpenModal(project.id, project.name)}\r\n                  />\r\n                ))\r\n              : !isLoading && (\r\n                  <p className=\"text-center text-gray-500 dark:text-gray-400 col-span-full\">\r\n                    No hay propiedades asociadas a este usuario.\r\n                  </p>\r\n                )}\r\n        </div>\r\n\r\n        <div className=\"col-span-full h-4\" />\r\n      </div>\r\n\r\n      {alertMessage && (\r\n        <Alert\r\n          type={alertMessage.type as \"success\" | \"error\"}\r\n          message={alertMessage.message}\r\n        />\r\n      )}\r\n\r\n      {isModalOpen && (\r\n        <ModalConfirmation\r\n          isOpen={isModalOpen}\r\n          onClose={() => setIsModalOpen(false)}\r\n          onConfirm={handleDeleteProject}\r\n          title=\"Eliminar Propiedad\"\r\n          message={`¿Estás seguro de que deseas eliminar la propiedad \"${selectedProject?.name}\"?`}\r\n          confirmLabel={isProcessing ? \"Eliminando...\" : \"Eliminar\"}\r\n          cancelLabel=\"Cancelar\"\r\n          confirmClassName=\"bg-red-600 hover:bg-red-700 disabled:opacity-50\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
        }
      },
      "alert.tsx": "import { useEffect, useState } from \"react\";\r\nimport { CircleCheck, TriangleAlert, CircleX, Info, X } from \"lucide-react\";\r\n\r\ninterface AlertProps {\r\n  type: \"success\" | \"warning\" | \"error\" | \"info\";\r\n  message: string;\r\n  duration?: number; // Duration in milliseconds\r\n  onClose?: () => void;\r\n}\r\n\r\nconst Alert: React.FC<AlertProps> = ({\r\n  type,\r\n  message,\r\n  duration = 3000,\r\n  onClose,\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsVisible(false);\r\n      if (onClose) onClose();\r\n    }, duration);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [duration, onClose]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const getStyles = () => {\r\n    switch (type) {\r\n      case \"success\":\r\n        return {\r\n          bg: \"bg-green-100\",\r\n          text: \"text-green-800\",\r\n          icon: <CircleCheck className=\"h-5 w-5 text-green-600\" />,\r\n        };\r\n      case \"warning\":\r\n        return {\r\n          bg: \"bg-yellow-100\",\r\n          text: \"text-yellow-800\",\r\n          icon: <TriangleAlert className=\"h-5 w-5 text-yellow-600\" />,\r\n        };\r\n      case \"error\":\r\n        return {\r\n          bg: \"bg-red-100\",\r\n          text: \"text-red-800\",\r\n          icon: <CircleX className=\"h-5 w-5 text-red-600\" />,\r\n        };\r\n      case \"info\":\r\n        return {\r\n          bg: \"bg-blue-100\",\r\n          text: \"text-blue-800\",\r\n          icon: <Info className=\"h-5 w-5 text-blue-600\" />,\r\n        };\r\n      default:\r\n        return {\r\n          bg: \"bg-gray-100\",\r\n          text: \"text-gray-800\",\r\n          icon: null,\r\n        };\r\n    }\r\n  };\r\n\r\n  const styles = getStyles();\r\n\r\n  return (\r\n    <div\r\n      className={`fixed top-5 left-1/2 transform -translate-x-1/2 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3 ${styles.bg} ${styles.text}`}\r\n    >\r\n      {styles.icon}\r\n      <span className=\"text-sm font-medium\">{message}</span>\r\n      <button\r\n        onClick={() => setIsVisible(false)}\r\n        className=\"focus:outline-none\"\r\n      >\r\n        <X className=\"h-5 w-5\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Alert;\r\n",
      "bim": {
        "bimHero.tsx": "\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { ArrowUpRight } from \"lucide-react\";\r\n\r\nexport default function BimHero() {\r\n  return (\r\n    <section className=\"relative w-full h-[550px] sm:h-[500px] lg:h-[510px]\">\r\n      <Image\r\n        src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia2.webp\"\r\n        alt=\"BIM\"\r\n        fill\r\n        className=\"object-cover\"\r\n        priority\r\n      />\r\n\r\n      <div className=\"relative z-10 flex flex-col justify-between h-full px-6 pt-8 sm:py-8\">\r\n        <h1 className=\"text-white text-4xl sm:text-6xl lg:text-7xl font-extrabold max-w-[500px] mt-12\">\r\n          MODELOS A MEDIDA\r\n        </h1>\r\n\r\n        <div className=\"flex flex-col-reverse sm:flex-row sm:justify-between items-center sm:items-end w-full gap-6 sm:gap-0 mb-2 sm:mb-8 pt-4 lg:pt-0\">\r\n          <Link\r\n            href=\"https://wa.me/573001112233\"\r\n            target=\"_blank\"\r\n            className=\"bg-client-secondary p-2 rounded-full shadow-lg\"\r\n          >\r\n            <div className=\"group flex items-center bg-white rounded-full pl-5 pr-2 py-1 gap-2 hover:bg-gray-200 transition opacity-100\">\r\n              <span className=\"text-sm font-semibold text-client-primary\">\r\n                Saber más\r\n              </span>\r\n\r\n              <div className=\"bg-client-background text-white p-2 rounded-full\">\r\n                <ArrowUpRight className=\"w-4 h-4 hover:scale-110 transition\" />\r\n              </div>\r\n            </div>\r\n          </Link>\r\n\r\n          <Link\r\n            href=\"/proyectos\"\r\n            className=\"bg-white rounded-xl p-4 shadow-lg flex flex-col gap-2 w-[250px]\"\r\n          >\r\n            <h2 className=\"text-client-primary font-semibold text-lg text-center\">\r\n              Proyectos Recientes\r\n            </h2>\r\n\r\n            <div className=\"w-full h-24 bg-gray-200 rounded-md overflow-hidden\">\r\n              <Image\r\n                src=\"https://d3fhc8hmbgwz4k.cloudfront.net/projects/images/Casa/1111/Vista Aérea/1732917151017/817a91d1-50f1-4418-b2e0-f5f1f2eac80c.webp\"\r\n                alt=\"img1\"\r\n                width={200}\r\n                height={96}\r\n                className=\"object-cover w-full h-full\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"w-full h-24 bg-gray-200 rounded-md overflow-hidden\">\r\n              <Image\r\n                src=\"https://d3fhc8hmbgwz4k.cloudfront.net/projects/images/Casa/1111/Exterior/1738097483989/2d82574a-54ee-416d-ba08-24b19eabc3ec.webp\"\r\n                alt=\"img2\"\r\n                width={200}\r\n                height={96}\r\n                className=\"object-cover w-full h-full\"\r\n              />\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute inset-0 bg-black bg-opacity-40\" />\r\n    </section>\r\n  );\r\n}\r\n",
        "brandsShowcase.tsx": "\"use client\";\r\n\r\nimport Image from \"next/image\";\r\n\r\nconst brands = [\r\n  { name: \"Revit\", logo: \"/images/bim/revitLogo.webp\" },\r\n  { name: \"V-Ray\", logo: \"/images/bim/vrayLogo.webp\" },\r\n  { name: \"Lumion\", logo: \"/images/bim/lumionLogo.webp\" },\r\n  { name: \"Autocad\", logo: \"/images/bim/autocadLogo.webp\" },\r\n  { name: \"D5 Render\", logo: \"/images/bim/renderLogo.webp\" },\r\n];\r\n\r\nexport default function BrandsShowcase() {\r\n  return (\r\n    <section className=\"w-full bg-white py-6\">\r\n      <div className=\"max-w-7xl mx-auto flex justify-between px-4\">\r\n        {brands.map((brand) => (\r\n          <div\r\n            key={brand.name}\r\n            className=\"flex items-center justify-center flex-1 text-client-primary gap-2\"\r\n          >\r\n            <Image\r\n              title={brand.name}\r\n              src={brand.logo}\r\n              alt={brand.name}\r\n              width={32}\r\n              height={32}\r\n            />\r\n\r\n            <span className=\"hidden sm:inline font-semibold text-sm whitespace-nowrap\">\r\n              {brand.name}\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "pitchSection.tsx": "\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { ArrowUpRight, Lightbulb } from \"lucide-react\";\r\n\r\nexport default function PitchSection() {\r\n  return (\r\n    <section className=\"text-client-text py-16 px-12\">\r\n      <div className=\"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10 items-center\">\r\n        <div>\r\n          <h2 className=\"text-4xl sm:text-5xl font-semibold leading-tight\">\r\n            Tu proyecto de\r\n            <br />\r\n            <span className=\"inline-flex items-center gap-1\">\r\n              forma{\" \"}\r\n              <span className=\"text-xl\">\r\n                <Lightbulb className=\"w-9 h-9 text-client-accent\" />\r\n              </span>\r\n            </span>\r\n          </h2>\r\n\r\n          <p className=\"text-3xl sm:text-4xl font-light leading-snug mt-4 whitespace-pre-line\">\r\n            más inteligente{\"\\n\"}Eficiente,{\"\\n\"}y transparente\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col gap-6\">\r\n          <p className=\"text-xl leading-relaxed\">\r\n            Imagina que antes de construir tu proyecto, creamos una versión\r\n            digital inteligente de todo el proyecto en 3D. Esto es BIM..\r\n          </p>\r\n\r\n          <Link\r\n            href=\"https://wa.me/573001112233\"\r\n            target=\"_blank\"\r\n            className=\"group inline-flex items-center gap-2 w-fit bg-transparent border border-client-accent text-client-text px-4 py-2 rounded-full shadow-md text-sm font-medium hover:bg-white hover:text-black transition whitespace-nowrap\"\r\n          >\r\n            Saber más\r\n            <ArrowUpRight className=\"w-4 h-4 group-hover:scale-110 transition-transform\" />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "profileCard.tsx": "import Image from \"next/image\";\r\n\r\ninterface ProfileCardProps {\r\n  image: string;\r\n  name: string;\r\n  title: string;\r\n  role: string;\r\n  specialty: string;\r\n}\r\n\r\nexport default function ProfileCard({\r\n  image,\r\n  name,\r\n  title,\r\n  role,\r\n  specialty,\r\n}: ProfileCardProps) {\r\n  return (\r\n    <div className=\"flex flex-col items-center text-center\">\r\n      <div className=\"w-24 h-24 relative rounded-full overflow-hidden\">\r\n        <Image\r\n          src={image}\r\n          alt={name}\r\n          fill\r\n          className=\"object-cover object-top\"\r\n        />\r\n      </div>\r\n\r\n      <p className=\"font-bold mt-6 text-client-text\">{name}</p>\r\n      <p className=\"text-client-secondary text-sm\">{title}</p>\r\n      <p className=\"text-client-secondary text-sm\">{role}</p>\r\n      <p className=\"text-client-secondary text-sm\">{specialty}</p>\r\n    </div>\r\n  );\r\n}\r\n",
        "projectImageCard.tsx": "\"use client\";\r\nimport { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport Image from \"next/image\";\r\n\r\ninterface ProjectImageCardProps {\r\n  name: string;\r\n  images: string[];\r\n}\r\n\r\nexport default function ProjectImageCard({\r\n  name,\r\n  images,\r\n}: ProjectImageCardProps) {\r\n  const [selected, setSelected] = useState(0);\r\n\r\n  return (\r\n    <div className=\"relative w-full h-72 rounded-lg overflow-hidden shadow-md shadow-black\">\r\n      <div className=\"w-full h-full relative\">\r\n        <Image\r\n          src={images[selected]}\r\n          alt={name}\r\n          fill\r\n          className=\"object-cover w-full h-full\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"absolute top-3 left-3 px-4 py-1 rounded-full text-client-text text-sm font-semibold shadow-sm shadow-black border border-white bg-client-secondaryDark opacity-90\">\r\n        {name}\r\n      </div>\r\n\r\n      <div className=\"absolute bottom-3 right-3 flex gap-3\">\r\n        {images.map((img, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => setSelected(index)}\r\n            className={clsx(\r\n              \"relative w-14 h-14 rounded shadow-md shadow-black border hover:scale-105 transition\",\r\n              selected === index ? \"border-white\" : \"border-white/60\"\r\n            )}\r\n          >\r\n            <Image\r\n              src={img}\r\n              alt={`${name} miniatura ${index}`}\r\n              fill\r\n              className=\"object-cover rounded\"\r\n            />\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "projectsGallerySection.tsx": "\"use client\";\r\nimport ProjectImageCard from \"./projectImageCard\";\r\n\r\nconst projects = [\r\n  {\r\n    name: \"Quintas del Lago\",\r\n    images: [\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/QuintasLago/QuintasLago1.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/QuintasLago/QuintasLago2.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/QuintasLago/QuintasLago3.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/QuintasLago/QuintasLago4.webp\",\r\n    ],\r\n  },\r\n  {\r\n    name: \"Bella Vista\",\r\n    images: [\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/BellaVista/BellaVista1.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/BellaVista/BellaVista2.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/BellaVista/BellaVista3.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/BellaVista/BellaVista4.webp\",\r\n    ],\r\n  },\r\n  {\r\n    name: \"Casa Quinta del Mar\",\r\n    images: [\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/CasaQuintaMar/QuintasMar1.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/CasaQuintaMar/QuintasMar2.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/CasaQuintaMar/QuintasMar3.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/CasaQuintaMar/QuintasMar4.webp\",\r\n    ],\r\n  },\r\n  {\r\n    name: \"Edificio San Carlos\",\r\n    images: [\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia1.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia2.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia3.webp\",\r\n      \"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia4.webp\",\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function ProjectsGallerySection() {\r\n  return (\r\n    <section className=\"w-full py-10 bg-client-white\">\r\n      <div className=\"max-w-7xl mx-auto px-4\">\r\n        <h2 className=\"text-4xl text-center sm:text-5xl font-bold mb-6 sm:mb-10\">\r\n          <span className=\"text-black\">Nuestros </span>\r\n          <span className=\"italic text-[#8c4c2f]\">Proyectos</span>\r\n        </h2>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 justify-items-center\">\r\n          {projects.map((project, index) => (\r\n            <ProjectImageCard\r\n              key={index}\r\n              name={project.name}\r\n              images={project.images}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "whoWeAreSection.tsx": "\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport ProfileCard from \"./profileCard\";\r\n\r\nexport default function WhoWeAreSection() {\r\n  return (\r\n    <section className=\"w-full flex flex-col lg:flex-row\">\r\n      <div className=\"relative flex items-center justify-center w-full lg:w-1/2 order-1 min-h-[500px] lg:order-none\">\r\n        <div className=\"relative w-[500px] h-[500px] mx-auto lg:mx-0 lg:ml-auto mt-12 lg:mt-0\">\r\n          <Image\r\n            src=\"https://d3fhc8hmbgwz4k.cloudfront.net/projects/images/Casa/1111/Vista Aérea/1732917153053/93863f76-3413-4b02-82f4-77ac0edb9d66.webp\"\r\n            alt=\"Edifik\"\r\n            fill\r\n            className=\"object-cover grayscale bg-black\"\r\n          />\r\n\r\n          <div className=\"absolute inset-0 z-20 flex items-center justify-center w-[300px] h-[300px] sm:w-[400px] sm:h-[400px] m-auto\">\r\n            <Image\r\n              src=\"/images/logo.webp\"\r\n              alt=\"Logo Edifik\"\r\n              fill\r\n              className=\"object-contain\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"w-full lg:w-1/2 pr-6 py-16 lg:py-20 flex flex-col justify-start gap-6 order-2 lg:order-none\">\r\n        <h2 className=\"pl-6 text-white text-3xl sm:text-4xl font-bold\">\r\n          ¿QUIÉNES SOMOS?\r\n        </h2>\r\n\r\n        <div className=\"bg-white rounded-r-3xl p-8 max-w-[90%] text-sm text-black\">\r\n          Edifik se especializa en el diseño y desarrollo de proyectos urbanos\r\n          sostenibles. Nos comprometemos con la innovación y la protección del\r\n          medio ambiente, creando espacios que mejoran la calidad de vida.\r\n          Ejemplos como Quintas del Lago reflejan nuestra dedicación a integrar\r\n          modernidad y naturaleza, usando recursos naturales y prácticas\r\n          eco-amigables. En Edifik, diseñamos entornos funcionales y ecológicos\r\n          para un futuro sostenible.\r\n        </div>\r\n\r\n        <div className=\"flex flex-col sm:flex-row gap-10 items-center justify-center mt-6\">\r\n          {/*\r\n          <ProfileCard\r\n            image=\"/images/profile/Alejandro.webp\"\r\n            name=\"ALEJANDRO TORRES\"\r\n            title=\"Arquitecto Universidad Piloto\"\r\n            role=\"CEO Edifik Estudios de Arquitectura\"\r\n            specialty=\"Arquitectura\"\r\n          />\r\n          */}\r\n\r\n          <ProfileCard\r\n            image=\"/images/profile/Andres.webp\"\r\n            name=\"ANDRÉS TRUJILLO\"\r\n            title=\"Arquitecto Universidad Piloto\"\r\n            role=\"CEO Edifik Estudios de Arquitectura\"\r\n            specialty=\"Arquitectura\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"
      },
      "contact": {
        "contactDetailsSection.tsx": "import dynamic from \"next/dynamic\";\r\nimport ContactInfo from \"./contactInfo\";\r\n\r\nconst MapPin = dynamic(() => import(\"lucide-react\").then((mod) => mod.MapPin));\r\nconst Phone = dynamic(() => import(\"lucide-react\").then((mod) => mod.Phone));\r\nconst Mail = dynamic(() => import(\"lucide-react\").then((mod) => mod.Mail));\r\n\r\nexport default function ContactDetailsSection() {\r\n  return (\r\n    <>\r\n      <div className=\"mx-auto grid sm:justify-normal max-w-7xl grid-cols-1 gap-0 px-4 sm:px-6 lg:px-12 md:grid-cols-2 md:gap-4 lg:grid-cols-3 lg:gap-8\">\r\n        <ContactInfo\r\n          icon={\r\n            <MapPin className=\"h-6 w-6 text-client-accent\" aria-hidden=\"true\" />\r\n          }\r\n          title=\"Oficina Central\"\r\n          info=\"Fusagasugá, Cundinamarca\"\r\n          description=\"Calle 14 #3-59 Conjunto Parque la Colina Bloque E - 801\"\r\n          py=\"6\"\r\n        />\r\n\r\n        <ContactInfo\r\n          icon={\r\n            <Phone className=\"h-6 w-6 text-client-accent\" aria-hidden=\"true\" />\r\n          }\r\n          title=\"Llámanos\"\r\n          info=\"+57 312 345 6789\"\r\n          description=\"Lun - Sab: 08am - 06pm\"\r\n          py=\"8\"\r\n        />\r\n\r\n        <ContactInfo\r\n          icon={\r\n            <Mail className=\"h-6 w-6 text-client-accent\" aria-hidden=\"true\" />\r\n          }\r\n          title=\"Correo Electrónico\"\r\n          info={process.env.NEXT_PUBLIC_COMPANY_EMAIL ?? \"\"}\r\n          py=\"10\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n",
        "contactForm.tsx": "\"use client\";\r\nimport { useState } from \"react\";\r\nimport FormInput from \"../modals/home/formInput\";\r\nimport FormTextarea from \"../modals/home/formTextArea\";\r\n\r\nexport default function ContactForm() {\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    message: \"\",\r\n    toEmail: process.env.NEXT_PUBLIC_COMPANY_EMAIL,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    message: \"\",\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    const phoneRegex = /^3\\d{9}$/;\r\n\r\n    const isPhoneValid = phoneRegex.test(formData.phone.replace(/\\s+/g, \"\"));\r\n\r\n    const newErrors = {\r\n      name: formData.name.trim() ? \"\" : \"El nombre es obligatorio.\",\r\n      phone: formData.phone.trim()\r\n        ? isPhoneValid\r\n          ? \"\"\r\n          : \"Número de teléfono no válido.\"\r\n        : \"El teléfono es obligatorio.\",\r\n      email: formData.email.trim()\r\n        ? /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)\r\n          ? \"\"\r\n          : \"El correo no es válido.\"\r\n        : \"El correo es obligatorio.\",\r\n      message: formData.message.trim() ? \"\" : \"El mensaje es obligatorio.\",\r\n    };\r\n\r\n    setErrors(newErrors);\r\n\r\n    const hasErrors = Object.values(newErrors).some((e) => e !== \"\");\r\n    if (hasErrors) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/contact\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert(\"✅ Mensaje enviado correctamente.\");\r\n        setFormData({\r\n          name: \"\",\r\n          phone: \"\",\r\n          email: \"\",\r\n          message: \"\",\r\n          toEmail: process.env.NEXT_PUBLIC_COMPANY_EMAIL,\r\n        });\r\n      } else {\r\n        alert(\"❌ Hubo un error al enviar el mensaje.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al enviar mensaje:\", error);\r\n      alert(\"❌ Error inesperado. Intenta más tarde.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"space-y-4\"\r\n      aria-label=\"Formulario de contacto\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <FormInput\r\n        label=\"Nombre completo\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        value={formData.name}\r\n        placeholder=\"Nombre completo\"\r\n        onChange={handleChange}\r\n        maxLength={50}\r\n        error={errors.name}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Número de teléfono\"\r\n        name=\"phone\"\r\n        type=\"tel\"\r\n        value={formData.phone}\r\n        placeholder=\"Número de teléfono\"\r\n        onChange={handleChange}\r\n        maxLength={15}\r\n        error={errors.phone}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Correo electrónico\"\r\n        name=\"email\"\r\n        type=\"email\"\r\n        value={formData.email}\r\n        placeholder=\"Correo electrónico\"\r\n        onChange={handleChange}\r\n        maxLength={50}\r\n        error={errors.email}\r\n      />\r\n\r\n      <FormTextarea\r\n        label=\"Mensaje\"\r\n        name=\"message\"\r\n        value={formData.message}\r\n        placeholder=\"Mensaje\"\r\n        onChange={handleChange}\r\n        rows={4}\r\n        maxLength={500}\r\n        error={errors.message}\r\n      />\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={isSubmitting}\r\n        className=\"bg-transparent border border-client-text text-client-text px-4 py-2 rounded-full shadow-md text-lg font-medium hover:bg-white hover:text-black transition whitespace-nowrap disabled:opacity-50\"\r\n      >\r\n        {isSubmitting ? \"Enviando...\" : \"Enviar ↗\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n",
        "contactInfo.tsx": "interface ContactInfoProps {\r\n  icon: JSX.Element;\r\n  title: string;\r\n  info: string;\r\n  description?: string;\r\n  py?: string;\r\n}\r\n\r\nexport default function ContactInfo({\r\n  icon,\r\n  title,\r\n  info,\r\n  description,\r\n  py,\r\n}: ContactInfoProps) {\r\n  return (\r\n    <div className={`flex flex-col ${py ? `py-${py}` : \"py-4\"}`}>\r\n      <div className=\"mb-4 flex items-center\">\r\n        <h3 className=\"ml-2 text-xl font-bold text-white md:text-2xl\">\r\n          {title}\r\n        </h3>\r\n      </div>\r\n\r\n      <div className=\"mb-5 ml-4 w-1/5 border-t border-white\" />\r\n\r\n      <div className=\"ml-5 flex flex-row gap-5\">\r\n        {icon}\r\n        <div className=\"flex flex-col\">\r\n          <h4 className=\"mb-3 font-bold text-white\">{info}</h4>\r\n\r\n          {description && (\r\n            <p className=\"text-client-textPlaceholder\">{description}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "contactSection.tsx": "import Image from \"next/image\";\nimport ContactForm from \"./contactForm\";\n\nexport default function ContactSection() {\n  return (\n    <section>\n      <div className=\"mx-auto mb-10 grid grid-cols-1 gap-10 px-4 sm:px-6 lg:px-12 md:grid-cols-2\">\n        <div className=\"h-full w-full py-14\">\n          <Image\n            src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia7.webp\"\n            alt=\"Edificio San Carlos Florencia\"\n            width={500}\n            height={600}\n            className=\"h-full w-full object-cover rounded-lg\"\n            priority\n          />\n        </div>\n\n        <div className=\"flex flex-col gap-10 px-2 pt-5 text-left\">\n          <div>\n            <h3 className=\"mb-2 text-3xl font-semibold text-client-accent\">\n              Ponte en contacto\n            </h3>\n\n            <h2 className=\"mb-5 text-4xl font-semibold text-white\">\n              ¿Tienes Preguntas? <br /> Escríbenos y te llamamos\n            </h2>\n          </div>\n\n          <ContactForm />\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "footer": {
        "footer.tsx": "import Link from \"next/link\";\nimport WhatsAppIcon from \"../icons/whatsAppIcon\";\nimport XIcon from \"../icons/xIcon\";\nimport InstagramIcon from \"../icons/instagramIcon\";\nimport TikTokIcon from \"../icons/tikTokIcon\";\nimport YouTubeIcon from \"../icons/youTubeIcon\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-client-backgroundAlt text-client-textPlaceholder pt-10 pb-4\">\n      <div className=\"max-w-7xl mx-auto grid grid-cols-2 gap-8 px-10 md:grid-cols-4\">\n        <div>\n          <h3 className=\"mb-2 text-sm font-semibold text-client-text\">\n            COMPAÑÍA\n          </h3>\n\n          <ul className=\"space-y-1 text-sm\">\n            <li>\n              <Link\n                href=\"/nosotros\"\n                className=\"hover:text-client-text transition\"\n              >\n                Quienes somos\n              </Link>\n            </li>\n\n            <li>\n              <Link\n                href=\"/proyectos\"\n                className=\"hover:text-client-text transition\"\n              >\n                Portafolio\n              </Link>\n            </li>\n\n            <li>\n              <Link\n                href=\"/contactanos\"\n                className=\"hover:text-client-text transition\"\n              >\n                Contáctanos\n              </Link>\n            </li>\n          </ul>\n        </div>\n\n        <div>\n          <h3 className=\"mb-2 text-sm font-semibold text-client-text\">\n            SOBRE NOSOTROS\n          </h3>\n\n          <ul className=\"space-y-1 text-sm\">\n            <li>\n              <Link\n                href=\"/nosotros#mision-vision\"\n                className=\"hover:text-client-text transition\"\n              >\n                Misión\n              </Link>\n            </li>\n\n            <li>\n              <Link\n                href=\"/nosotros#mision-vision\"\n                className=\"hover:text-client-text transition\"\n              >\n                Visión\n              </Link>\n            </li>\n\n            {/*\n            <li>\n              <Link\n                href=\"/nosotros/#nuestro-equipo\"\n                className=\"hover:text-client-text transition\"\n              >\n                Nuestro Equipo\n              </Link>\n            </li>\n            */}\n          </ul>\n        </div>\n\n        <div>\n          <h3 className=\"mb-2 text-sm font-semibold text-client-text\">\n            CONTACTO\n          </h3>\n\n          <p className=\"text-sm\">+57 {process.env.NEXT_PUBLIC_COMPANY_PHONE}</p>\n          <p className=\"text-sm\">{process.env.NEXT_PUBLIC_COMPANY_EMAIL}</p>\n        </div>\n\n        <div className=\"flex flex-col items-start gap-2\">\n          <h3 className=\"text-sm font-semibold text-client-text\">\n            CONTÁCTANOS\n          </h3>\n\n          <Link\n            href={`https://wa.me/${process.env.NEXT_PUBLIC_COMPANY_PHONE}`}\n            target=\"_blank\"\n            aria-label=\"WhatsApp\"\n            className=\"bg-transparent border border-green-500 text-green-500 px-4 py-2 rounded-full shadow-md text-sm font-medium hover:bg-green-500 hover:text-white transition whitespace-nowrap\"\n          >\n            WhatsApp ↗\n          </Link>\n        </div>\n      </div>\n\n      <hr className=\"border-client-textPlaceholder mx-10 my-4\" />\n\n      <div className=\"flex justify-between items-center text-sm mx-10\">\n        <span>&copy; 2025 Edifik - Todos los derechos reservados.</span>\n\n        <div className=\"flex space-x-4\">\n          <Link\n            href={`https://wa.me/${process.env.NEXT_PUBLIC_COMPANY_PHONE}`}\n            target=\"_blank\"\n            aria-label=\"WhatsApp\"\n            className=\"hover:scale-105\"\n          >\n            <WhatsAppIcon className=\"h-6 w-6 hover:text-client-text transition\" />\n          </Link>\n\n          <Link\n            href=\"https://x.com/tuUsuario\"\n            target=\"_blank\"\n            aria-label=\"X (Twitter)\"\n            className=\"hover:scale-105\"\n          >\n            <XIcon className=\"h-6 w-6 hover:text-client-text transition\" />\n          </Link>\n\n          <Link\n            href=\"https://instagram.com/tuUsuario\"\n            target=\"_blank\"\n            aria-label=\"Instagram\"\n            className=\"hover:scale-105\"\n          >\n            <InstagramIcon className=\"h-6 w-6 hover:text-client-text transition\" />\n          </Link>\n\n          <Link\n            href=\"https://tiktok.com/tuUsuario\"\n            target=\"_blank\"\n            aria-label=\"Instagram\"\n            className=\"hover:scale-105\"\n          >\n            <TikTokIcon className=\"h-6 w-6 hover:text-client-text transition\" />\n          </Link>\n\n          <Link\n            href=\"https://youtube.com/tuUsuario\"\n            target=\"_blank\"\n            aria-label=\"Instagram\"\n            className=\"hover:scale-105\"\n          >\n            <YouTubeIcon className=\"h-6 w-6 hover:text-client-text transition\" />\n          </Link>\n        </div>\n      </div>\n    </footer>\n  );\n}\n"
      },
      "googleMapsProvider.tsx": "\"use client\";\r\n\r\nimport { useJsApiLoader } from \"@react-google-maps/api\";\r\nimport Loader from \"./loader\";\r\n\r\nconst libraries: (\"places\" | \"marker\")[] = [\"places\", \"marker\"];\r\n\r\nexport default function GoogleMapsProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const { isLoaded } = useJsApiLoader({\r\n    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY!,\r\n    libraries,\r\n  });\r\n\r\n  if (!isLoaded) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <Loader size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n",
      "header": {
        "authOrMenu.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport DropdownMenu from \"./dropDownMenu\";\r\nimport UserMenu from \"./userMenu\";\r\nimport SidebarMenu from \"./sideBarMenu\";\r\n\r\nexport default function AuthOrMenu() {\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n\r\n  const toggleDropdown = () => {\r\n    if (window.innerWidth >= 768) {\r\n      setIsDropdownOpen((prev) => !prev);\r\n    } else {\r\n      setIsSidebarOpen(true);\r\n    }\r\n  };\r\n\r\n  const toggleSidebar = () => {\r\n    setIsSidebarOpen((prev) => !prev);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div ref={menuRef} className=\"relative inline-block text-left\">\r\n      <UserMenu toggleMenu={toggleDropdown} toggleSidebar={toggleSidebar} />\r\n\r\n      <SidebarMenu isOpen={isSidebarOpen} onClose={toggleSidebar} />\r\n\r\n      {isDropdownOpen && window.innerWidth >= 768 && (\r\n        <DropdownMenu onClose={toggleDropdown} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
        "dropDownMenu.tsx": "\"use client\";\r\n\r\nimport { signOut } from \"next-auth/react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport Link from \"next/link\";\r\nimport { User, HousePlus, Upload, LogOut, MonitorCog } from \"lucide-react\";\r\n\r\ninterface DropdownMenuProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function DropdownMenu({ onClose }: DropdownMenuProps) {\r\n  const { data: session } = useSession();\r\n\r\n  return (\r\n    <div\r\n      className=\"absolute right-0 mt-2 w-48 rounded-md border border-gray-300 bg-white shadow-lg\"\r\n      role=\"menu\"\r\n    >\r\n      <ul className=\"py-1 text-black\">\r\n        <li>\r\n          <Link\r\n            href=\"/usuario/perfil\"\r\n            onClick={onClose}\r\n            className=\"flex items-center gap-3 w-full cursor-pointer px-4 py-2 text-left hover:bg-gray-200 transition-all\"\r\n          >\r\n            <User className=\"w-5 h-5 text-black\" />\r\n            Perfil\r\n          </Link>\r\n        </li>\r\n\r\n        {session?.user?.permissions?.some(\r\n          (perm: any) => perm.name !== \"Gestionar propiedades propias\"\r\n        ) && (\r\n          <li>\r\n            <Link\r\n              href=\"/admin\"\r\n              onClick={onClose}\r\n              className=\"flex items-center gap-3 w-full cursor-pointer px-4 py-2 text-left hover:bg-gray-200 transition-all\"\r\n            >\r\n              <MonitorCog className=\"w-5 h-5 text-black\" />\r\n              Panel Administrador\r\n            </Link>\r\n          </li>\r\n        )}\r\n\r\n        {session?.user?.membershipId && (\r\n          <li>\r\n            <Link\r\n              href=\"/usuario/mis-propiedades\"\r\n              onClick={onClose}\r\n              className=\"flex items-center gap-3 w-full cursor-pointer px-4 py-2 text-left hover:bg-gray-200 transition-all\"\r\n            >\r\n              <HousePlus className=\"w-5 h-5 text-black\" />\r\n              Mis Propiedades\r\n            </Link>\r\n          </li>\r\n        )}\r\n\r\n        <li>\r\n          <Link\r\n            href=\"/usuario/subir-propiedad\"\r\n            onClick={onClose}\r\n            className=\"flex items-center gap-3 w-full cursor-pointer px-4 py-2 text-left hover:bg-gray-200 transition-all\"\r\n          >\r\n            <Upload className=\"w-5 h-5 text-black\" />\r\n            Subir Propiedad\r\n          </Link>\r\n        </li>\r\n\r\n        <hr className=\"border-gray-300 my-2\" />\r\n\r\n        <li>\r\n          <button\r\n            onClick={() => {\r\n              onClose();\r\n              signOut({ callbackUrl: \"/\" });\r\n            }}\r\n            className=\"flex items-center gap-3 w-full cursor-pointer px-4 py-2 text-left hover:bg-gray-200 transition-all\"\r\n          >\r\n            <LogOut className=\"w-5 h-5 text-black\" />\r\n            Cerrar Sesión\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n",
        "header.tsx": "\"use client\";\n\nimport Logo from \"./logo\";\nimport NavBar from \"./navBar\";\nimport AuthOrMenu from \"./authOrMenu\";\n\nexport default function Header() {\n  return (\n    <header className=\"fixed left-0 top-0 z-50 w-full h-12\">\n      <div className=\"max-w-[1400px] mx-auto flex items-center justify-between px-2 lg:px-4 py-4\">\n        <div className=\"flex-shrink-0\">\n          <Logo />\n        </div>\n\n        <div className=\"hidden md:flex absolute left-1/2 transform -translate-x-1/2\">\n          <NavBar />\n        </div>\n\n        <div className=\"flex-shrink-0\">\n          <AuthOrMenu />\n        </div>\n      </div>\n    </header>\n  );\n}\n",
        "logo.tsx": "import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function Logo() {\r\n  return (\r\n    <Link href=\"/\" className=\"flex items-center\" aria-label=\"Inicio\">\r\n      <div className=\"bg-client-background px-6 py-2 rounded-full h-12 flex items-center justify-center\">\r\n        <Image\r\n          src=\"/images/logo.webp\"\r\n          alt=\"Logo de EdifiK\"\r\n          width={90}\r\n          height={36}\r\n          className=\"lg:w-auto h-auto object-contain\"\r\n        />\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n",
        "navBar.tsx": "\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nconst navItems = [\r\n  { path: \"/\", label: \"Inicio\" },\r\n  { path: \"/proyectos\", label: \"Proyectos\" },\r\n  { path: \"/bim\", label: \"BIM\" },\r\n  { path: \"/inmobiliaria\", label: \"Inmobiliaria\" },\r\n];\r\n\r\nexport default function NavBar() {\r\n  const pathname = usePathname();\r\n\r\n  const getLinkClasses = (path: string) => {\r\n    const isActive =\r\n      path === \"/\" ? pathname === \"/\" : pathname.startsWith(path);\r\n\r\n    return isActive ? \"bg-white text-black\" : \"text-gray-800 hover:text-black\";\r\n  };\r\n\r\n  return (\r\n    <nav\r\n      className=\"flex space-x-2 px-2 lg:px-4 py-2 rounded-full bg-gray-300/50 backdrop-blur-md shadow-md\"\r\n      aria-label=\"Navegación principal\"\r\n    >\r\n      {navItems.map(({ path, label }) => (\r\n        <Link\r\n          key={path}\r\n          href={path}\r\n          className={clsx(\r\n            \"px-2 lg:px-4 py-1 rounded-full transition font-medium\",\r\n            getLinkClasses(path)\r\n          )}\r\n          aria-current={\r\n            (path === \"/\" && pathname === \"/\") ||\r\n            (path !== \"/\" && pathname.startsWith(path))\r\n              ? \"page\"\r\n              : undefined\r\n          }\r\n        >\r\n          {label}\r\n        </Link>\r\n      ))}\r\n    </nav>\r\n  );\r\n}\r\n",
        "sideBarMenu.tsx": "import { useEffect } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { signOut } from \"next-auth/react\";\r\nimport Link from \"next/link\";\r\nimport {\r\n  X,\r\n  Home,\r\n  Building2,\r\n  Briefcase,\r\n  Store,\r\n  User,\r\n  HousePlus,\r\n  Upload,\r\n  LogOut,\r\n  MonitorCog,\r\n} from \"lucide-react\";\r\n\r\ninterface SidebarMenuProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function SidebarMenu({ isOpen, onClose }: SidebarMenuProps) {\r\n  const { data: session } = useSession();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"\";\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <div className=\"md:hidden\">\r\n      {isOpen && (\r\n        <div\r\n          onClick={onClose}\r\n          className=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300\"\r\n        />\r\n      )}\r\n\r\n      <div\r\n        className={`fixed top-0 right-0 h-full w-64 bg-client-text shadow-lg transform transition-transform duration-300 overflow-y-auto ${\r\n          isOpen ? \"translate-x-0\" : \"translate-x-full\"\r\n        }`}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-300\">\r\n          <span className=\"text-lg font-semibold text-black\">Menú</span>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-black hover:text-gray-800 transition-all\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <ul className=\"py-2 text-black\">\r\n          <li className=\"px-6 text-sm font-semibold text-premium-textSecondary uppercase\">\r\n            EdifiK\r\n          </li>\r\n\r\n          <li>\r\n            <Link\r\n              href=\"/\"\r\n              onClick={onClose}\r\n              className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n            >\r\n              <Home className=\"w-5 h-5 text-black\" />\r\n              Inicio\r\n            </Link>\r\n          </li>\r\n\r\n          <li>\r\n            <Link\r\n              href=\"/proyectos\"\r\n              onClick={onClose}\r\n              className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n            >\r\n              <Building2 className=\"w-5 h-5 text-black\" />\r\n              Proyectos\r\n            </Link>\r\n          </li>\r\n\r\n          <li>\r\n            <Link\r\n              href=\"/bim\"\r\n              onClick={onClose}\r\n              className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n            >\r\n              <Briefcase className=\"w-5 h-5 text-black\" />\r\n              BIM\r\n            </Link>\r\n          </li>\r\n\r\n          <li>\r\n            <Link\r\n              href=\"/inmobiliaria\"\r\n              onClick={onClose}\r\n              className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n            >\r\n              <Store className=\"w-5 h-5 text-black\" />\r\n              Inmobiliaria\r\n            </Link>\r\n          </li>\r\n\r\n          {session && (\r\n            <>\r\n              <hr className=\"border-gray-300 my-2\" />\r\n\r\n              <li className=\"px-6 text-sm font-semibold text-premium-textSecondary uppercase\">\r\n                Usuario\r\n              </li>\r\n\r\n              <li>\r\n                <Link\r\n                  href=\"/usuario/perfil\"\r\n                  onClick={onClose}\r\n                  className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n                >\r\n                  <User className=\"w-5 h-5 text-black\" />\r\n                  Perfil\r\n                </Link>\r\n              </li>\r\n\r\n              {session?.user?.permissions?.some(\r\n                (perm: any) => perm.name !== \"Gestionar propiedades propias\"\r\n              ) && (\r\n                <li>\r\n                  <Link\r\n                    href=\"/admin\"\r\n                    onClick={onClose}\r\n                    className=\"flex items-center gap-3 w-full cursor-pointer px-4 py-2 text-left hover:bg-gray-200 transition-all\"\r\n                  >\r\n                    <MonitorCog className=\"w-5 h-5 text-black\" />\r\n                    Panel Administrador\r\n                  </Link>\r\n                </li>\r\n              )}\r\n\r\n              {session?.user?.membershipId && (\r\n                <li>\r\n                  <Link\r\n                    href=\"/usuario/mis-propiedades\"\r\n                    onClick={onClose}\r\n                    className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n                  >\r\n                    <HousePlus className=\"w-5 h-5 text-black\" />\r\n                    Mis Propiedades\r\n                  </Link>\r\n                </li>\r\n              )}\r\n\r\n              <li>\r\n                <Link\r\n                  href=\"/usuario/subir-propiedad\"\r\n                  onClick={onClose}\r\n                  className=\"flex items-center gap-2 px-6 py-3 hover:bg-gray-200 transition-all\"\r\n                >\r\n                  <Upload className=\"w-5 h-5 text-black\" />\r\n                  Subir Propiedad\r\n                </Link>\r\n              </li>\r\n\r\n              <hr className=\"border-gray-300 my-2\" />\r\n\r\n              <li>\r\n                <button\r\n                  onClick={() => {\r\n                    onClose();\r\n                    signOut({ callbackUrl: \"/\" });\r\n                  }}\r\n                  className=\"flex items-center gap-3 w-full text-left px-6 py-3 font-medium hover:bg-gray-200 transition-all\"\r\n                >\r\n                  <LogOut className=\"w-5 h-5 text-black\" />\r\n                  Cerrar Sesión\r\n                </button>\r\n              </li>\r\n            </>\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "userMenu.tsx": "import { useSession } from \"next-auth/react\";\r\nimport Link from \"next/link\";\r\nimport { CircleUserRound, Menu } from \"lucide-react\";\r\n\r\nexport default function UserMenu({\r\n  toggleMenu,\r\n  toggleSidebar,\r\n}: {\r\n  toggleMenu: () => void;\r\n  toggleSidebar: () => void;\r\n}) {\r\n  const { data: session } = useSession();\r\n\r\n  return (\r\n    <div className=\"bg-client-background flex items-center space-x-1 px-1 py-1 rounded-full\">\r\n      {session ? (\r\n        <>\r\n          <Link\r\n            href=\"/usuario/subir-propiedad\"\r\n            className=\"text-client-text px-4 md:px-2 lg:px-4 py-2 rounded-full hover:bg-gray-800 transition\"\r\n          >\r\n            Subir Propiedad\r\n          </Link>\r\n\r\n          <button\r\n            onClick={() => {\r\n              if (window.innerWidth >= 768) {\r\n                toggleMenu();\r\n              } else {\r\n                toggleSidebar();\r\n              }\r\n            }}\r\n            className=\"bg-white text-black px-3 py-2 rounded-full shadow-md hover:bg-gray-200 transition\"\r\n            type=\"button\"\r\n            aria-haspopup=\"menu\"\r\n          >\r\n            <Menu className=\"h-6 w-6 transition-colors duration-200 hover:text-gray-500\" />\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"hidden lg:block text-client-text px-2 py-2 rounded-full hover:bg-gray-800 transition\"\r\n          >\r\n            Iniciar Sesión\r\n          </Link>\r\n\r\n          <Link\r\n            href=\"/login/register\"\r\n            className=\"bg-white text-black px-2 py-2 rounded-full shadow-md hover:bg-gray-200 transition\"\r\n          >\r\n            Registrarse ↗\r\n          </Link>\r\n\r\n          <Link\r\n            href=\"/login\"\r\n            title=\"Iniciar Sesión\"\r\n            className=\"block lg:hidden text-client-text px-2 py-2 rounded-full hover:bg-gray-800 transition\"\r\n          >\r\n            <CircleUserRound />\r\n          </Link>\r\n\r\n          <button\r\n            onClick={() => {\r\n              toggleSidebar();\r\n            }}\r\n            type=\"button\"\r\n            aria-haspopup=\"menu\"\r\n            className=\"block -ml-1 md:hidden text-client-text px-2 py-2 rounded-full hover:bg-gray-800 transition\"\r\n          >\r\n            <Menu />\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "home": {
        "abaoutUsSection.tsx": "import AnimatedStats from \"./animatedStats\";\r\n\r\nconst stats = [\r\n  { label: \"Años en el mercado\", value: 2 },\r\n  { label: \"Proyectos realizados\", value: 22 },\r\n  { label: \"Proyectos en desarrollo\", value: 3 },\r\n];\r\n\r\nexport default function AboutUsSection() {\r\n  return (\r\n    <section className=\"w-full text-white px-6\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <span className=\"h-3 w-3 bg-gray-500 rounded-full\"></span>\r\n            <p className=\"text-sm font-semibold uppercase tracking-wider text-white\">\r\n              Acerca de Nosotros\r\n            </p>\r\n          </div>\r\n\r\n          <h2 className=\"text-3xl sm:text-4xl font-light text-client-textPlaceholder leading-tight\">\r\n            TENEMOS LA{\" \"}\r\n            <span className=\"font-semibold text-white\">EXPERIENCIA</span> Y EL{\" \"}\r\n            <span className=\"font-semibold text-white\">CONOCIMIENTO</span> PARA\r\n            DISEÑAR TU ESPACIO, SOMOS{\" \"}\r\n            <span className=\"font-semibold text-white\">EDIFIK.</span>\r\n          </h2>\r\n        </div>\r\n\r\n        <div className=\"flex justify-center mx-auto\">\r\n          <AnimatedStats stats={stats} />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "animatedStats.tsx": "\"use client\";\r\n\r\nimport React, { useEffect, useRef } from \"react\";\r\n\r\ninterface Stat {\r\n  label: string;\r\n  value: number;\r\n}\r\n\r\ninterface AnimatedStatsProps {\r\n  stats: Stat[];\r\n}\r\n\r\nexport default function AnimatedStats({ stats }: AnimatedStatsProps) {\r\n  const sectionRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    function animateNumbers() {\r\n      const counters =\r\n        sectionRef.current?.querySelectorAll<HTMLHeadingElement>(\r\n          \"h3[data-target]\"\r\n        );\r\n      if (!counters) return;\r\n\r\n      counters.forEach((counter) => {\r\n        const updateCount = () => {\r\n          const target = parseInt(counter.getAttribute(\"data-target\") || \"0\");\r\n          const count = +counter.textContent!;\r\n          const increment = Math.ceil(target / 100);\r\n\r\n          if (count < target) {\r\n            counter.textContent = (count + increment).toString();\r\n            setTimeout(updateCount, 20);\r\n          } else {\r\n            counter.textContent = `${target}+`;\r\n          }\r\n        };\r\n        updateCount();\r\n      });\r\n    }\r\n\r\n    const observer = new IntersectionObserver((entries, observer) => {\r\n      entries.forEach((entry) => {\r\n        if (entry.isIntersecting) {\r\n          animateNumbers();\r\n          observer.disconnect();\r\n        }\r\n      });\r\n    });\r\n\r\n    if (sectionRef.current) {\r\n      observer.observe(sectionRef.current);\r\n    }\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={sectionRef}\r\n      className=\"flex flex-col sm:flex-row justify-center items-center text-center w-full gap-y-10 gap-x-10 lg:gap-x-20\"\r\n    >\r\n      {stats.map((stat, index) => (\r\n        <React.Fragment key={index}>\r\n          {index !== 0 && (\r\n            <div className=\"h-px w-56 sm:h-16 sm:w-px bg-gray-700\"></div>\r\n          )}\r\n          <div key={index} className=\"flex flex-1 justify-center items-center\">\r\n            <div className=\"text-center px-6\">\r\n              <h3 className=\"text-3xl font-semibold\" data-target={stat.value}>\r\n                0\r\n              </h3>\r\n              <p className=\"text-client-textPlaceholder text-sm\">\r\n                {stat.label}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
        "heroSection.tsx": "import Image from \"next/image\";\r\n\r\ninterface HeroSectionProps {\r\n  srcImage: string;\r\n  altImage: string;\r\n  title: string;\r\n  description: string;\r\n  objectPosition?: \"top\" | \"center\" | \"bottom\";\r\n}\r\n\r\nexport default function HeroSection({\r\n  srcImage,\r\n  altImage,\r\n  title,\r\n  description,\r\n  objectPosition = \"center\",\r\n}: HeroSectionProps) {\r\n  const objectClass =\r\n    objectPosition === \"top\"\r\n      ? \"object-top\"\r\n      : objectPosition === \"bottom\"\r\n        ? \"object-bottom\"\r\n        : \"object-center\";\r\n\r\n  return (\r\n    <section className=\"w-full\">\r\n      <div className=\"relative w-full h-96\">\r\n        <Image\r\n          src={srcImage}\r\n          alt={altImage}\r\n          fill\r\n          className={`object-cover ${objectClass}`}\r\n          priority\r\n        />\r\n      </div>\r\n\r\n      <div className=\"text-white pt-8 px-6 text-center\">\r\n        <h1 className=\"text-3xl w-full sm:w-3/5 md:w-2/3 lg:w-3/5 mx-auto md:text-5xl font-bold whitespace-pre-line\">\r\n          {title}\r\n        </h1>\r\n\r\n        <p className=\"mt-4 w-full sm:w-3/5 md:w-2/3 lg:w-1/3 mx-auto text-sm md:text-lg text-client-textPlaceholder whitespace-pre-line\">\r\n          {description}\r\n        </p>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "imagesCarousel.tsx": "\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { ProjectMedia } from \"@/lib/definitios\";\r\n\r\ninterface ImageCarouselProps {\r\n  id: number;\r\n  images: ProjectMedia[];\r\n  url: string;\r\n  name?: string;\r\n  showName?: boolean;\r\n}\r\n\r\nexport default function ImageCarousel({\r\n  id,\r\n  images,\r\n  url,\r\n  name,\r\n  showName = false,\r\n}: ImageCarouselProps) {\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isHovered && images.length > 1) {\r\n      const interval = setInterval(\r\n        () => setCurrentImage((prev) => (prev + 1) % images.length),\r\n        1000\r\n      );\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isHovered, images.length]);\r\n\r\n  return (\r\n    <Link href={`/${url}/${id}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n      <div\r\n        className=\"relative w-full h-full cursor-pointer overflow-hidden rounded-lg\"\r\n        onMouseEnter={() => setIsHovered(true)}\r\n        onMouseLeave={() => {\r\n          setIsHovered(false);\r\n          setCurrentImage(0);\r\n        }}\r\n      >\r\n        {images.map((img, index) => (\r\n          <Image\r\n            key={index + img.projectId}\r\n            src={img.url}\r\n            alt={img.tag}\r\n            fill\r\n            priority={index === 0}\r\n            loading={index === 0 ? \"eager\" : \"lazy\"}\r\n            sizes=\"100vw\"\r\n            className={clsx(\r\n              \"absolute left-0 top-0 h-full w-full object-cover transition-opacity duration-1000 ease-in-out\",\r\n              index === currentImage ? \"opacity-100\" : \"opacity-0\"\r\n            )}\r\n          />\r\n        ))}\r\n\r\n        {showName && name && (\r\n          <div className=\"absolute bottom-2 left-2 bg-black/60 px-3 py-1 rounded-md max-w-[80%]\">\r\n            <p className=\"text-white text-sm font-semibold truncate\">{name}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n",
        "modelsSection.tsx": "\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function ModelsSection() {\r\n  return (\r\n    <section className=\"relative flex flex-col items-center justify-center w-full bg-client-background\">\r\n      <h1 className=\"text-6xl sm:text-9xl lg:text-[12rem] font-bold text-white opacity-50 select-none\">\r\n        MODELOS\r\n      </h1>\r\n\r\n      <div className=\"relative -translate-y-6 sm:-translate-y-12 lg:-translate-y-16 flex flex-col items-center justify-end w-full h-60 sm:h-80 bg-gradient-to-b from-white/80 to-client-background-dark rounded-2xl shadow-[0px_-20px_40px_rgba(0,0,0,0.8)] overflow-hidden\">\r\n        <Image\r\n          src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia4.webp\"\r\n          alt=\"Modelos\"\r\n          fill\r\n          className=\"absolute inset-0 w-full h-full object-cover\"\r\n        />\r\n\r\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-black/40\"></div>\r\n\r\n        <div className=\"relative z-10 text-center text-client-text mb-2\">\r\n          <p className=\"text-md md:text-xl\">\r\n            Confía en nosotros para encontrar tu espacio perfecto.\r\n          </p>\r\n\r\n          <Link href=\"/bim\">\r\n            <button className=\"mt-4 px-6 py-2 bg-white text-black rounded-full shadow-md hover:bg-gray-200 transition-all\">\r\n              Explora ↗\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "projectsCards.tsx": "\"use client\";\r\n\r\nimport clsx from \"clsx\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport ImageCarousel from \"./imagesCarousel\";\r\n\r\ninterface ProjectsCardsProps {\r\n  projects: ProjectView[];\r\n}\r\n\r\nexport default function ProjectsCards({ projects }: ProjectsCardsProps) {\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-2\">\r\n      {projects.map((project, index) => (\r\n        <div\r\n          key={project.id}\r\n          className={clsx(\r\n            \"py-2 rounded-lg\",\r\n            index === 0 && \"sm:col-span-2 md:col-span-1\",\r\n            index === 1 && \"lg:col-span-2\"\r\n          )}\r\n        >\r\n          <div className=\"relative w-full h-80 rounded-lg overflow-hidden bg-gray-500\">\r\n            <ImageCarousel\r\n              id={project.id}\r\n              images={project.images}\r\n              url=\"proyectos\"\r\n            />\r\n          </div>\r\n\r\n          <p className=\"text-client-textPlaceholder mt-2\">{project.cityName}</p>\r\n          <h3 className=\"text-client-text font-bold\">{project.name}</h3>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
        "projectsSection.tsx": "\"use client\";\r\n\r\nimport dynamic from \"next/dynamic\";\r\nimport Link from \"next/link\";\r\nimport { useHomeProjects } from \"@/app/hooks/projects/home/useHomeProjects\";\r\nimport ProjectSectionSkeleton from \"../skeletons/projectSectionSkeleton\";\r\n\r\nconst ProjectsCards = dynamic(() => import(\"@/app/ui/home/projectsCards\"), {\r\n  loading: () => <ProjectSectionSkeleton />,\r\n  ssr: false,\r\n});\r\n\r\nexport default function ProjectsSection() {\r\n  const { projects, isLoading } = useHomeProjects(3, false);\r\n\r\n  return (\r\n    <section className=\"w-full px-6\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-client-text text-3xl font-semibold\">Proyectos</h2>\r\n\r\n          <Link href=\"/proyectos\">\r\n            <button className=\"bg-transparent border border-client-text text-client-text px-4 py-2 rounded-full shadow-md text-sm font-medium hover:bg-white hover:text-black transition whitespace-nowrap\">\r\n              Ver más →\r\n            </button>\r\n          </Link>\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <ProjectSectionSkeleton />\r\n        ) : (\r\n          <ProjectsCards projects={projects} />\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "realEstateCards.tsx": "\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport PropertyCard from \"../realEstate/PropertyCard\";\r\n\r\ninterface RealEstateCardsProps {\r\n  projects: ProjectView[];\r\n}\r\n\r\nexport default function RealEstateCards({ projects }: RealEstateCardsProps) {\r\n  const memoizedProjects = useMemo(() => projects, [projects]);\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 md:gap-x-3 lg:gap-x-6 gap-y-2\">\r\n      {memoizedProjects.map((project) => (\r\n        <div key={project.id} className=\"py-2 rounded-lg\">\r\n          <div className=\"relative items-center w-full h-80 rounded-lg overflow-hidden bg-gray-500\">\r\n            <PropertyCard\r\n              id={project.id}\r\n              images={project.images}\r\n              price={project.price}\r\n              area={project.area}\r\n              bedrooms={project.bedrooms}\r\n              bathrooms={project.bathrooms}\r\n              parkingSpots={project.parkingSpots}\r\n              url=\"inmobiliaria\"\r\n            />\r\n          </div>\r\n\r\n          <p className=\"text-client-textPlaceholder mt-2\">{project.cityName}</p>\r\n          <h3 className=\"text-client-text font-bold\">{project.name}</h3>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
        "realEstateSection.tsx": "\"use client\";\r\n\r\nimport dynamic from \"next/dynamic\";\r\nimport Link from \"next/link\";\r\nimport { useHomeProjects } from \"@/app/hooks/projects/home/useHomeProjects\";\r\nimport RealEstateSectionSkeleton from \"../skeletons/realEstateSection\";\r\n\r\nconst RealEstateCards = dynamic(() => import(\"@/app/ui/home/realEstateCards\"), {\r\n  loading: () => <RealEstateSectionSkeleton />,\r\n  ssr: false,\r\n});\r\n\r\nexport default function RealEstateSection() {\r\n  const { projects, isLoading } = useHomeProjects(4, true);\r\n\r\n  return (\r\n    <section className=\"w-full px-6\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-client-text text-3xl font-semibold\">\r\n            Inmobiliaria\r\n          </h2>\r\n\r\n          <Link href=\"/inmobiliaria\">\r\n            <button className=\"bg-transparent border border-client-text text-client-text px-4 py-2 rounded-full shadow-md text-sm font-medium hover:bg-white hover:text-black transition whitespace-nowrap\">\r\n              Ver más →\r\n            </button>\r\n          </Link>\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <RealEstateSectionSkeleton />\r\n        ) : (\r\n          <RealEstateCards projects={projects} />\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",
        "testimonialCarousel.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport Image from \"next/image\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\nconst testimonials = [\r\n  {\r\n    text: \"Desde el primer momento en que contacté a Edifik, supe que estaba en buenas manos. Su equipo de arquitectos escuchó atentamente mis ideas y necesidades, y me presentó un diseño que superó mis expectativas.\",\r\n    name: \"Natalia Ortega\",\r\n    role: \"Cliente Edifik\",\r\n    image: \"/images/home/avatar.webp\",\r\n  },\r\n  {\r\n    text: \"Trabajar con Edifik fue una experiencia increíble. No solo entendieron mi visión, sino que la llevaron a otro nivel con su profesionalismo y creatividad.\",\r\n    name: \"Laura y Sebastián\",\r\n    role: \"Clientes Edifik\",\r\n    image: \"/images/home/avatar.webp\",\r\n  },\r\n  {\r\n    text: \"La dedicación y atención al detalle de Edifik me dejaron completamente satisfecho. Recomiendo sus servicios sin dudarlo.\",\r\n    name: \"María Fernanda Ríos\",\r\n    role: \"Cliente Edifik\",\r\n    image: \"/images/home/avatar.webp\",\r\n  },\r\n];\r\n\r\nexport default function TestimonialCarousel() {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n\r\n  const nextSlide = useCallback(() => {\r\n    setCurrentIndex((prevIndex) => (prevIndex + 1) % testimonials.length);\r\n  }, []);\r\n\r\n  const prevSlide = () => {\r\n    setCurrentIndex((prevIndex) =>\r\n      prevIndex === 0 ? testimonials.length - 1 : prevIndex - 1\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(nextSlide, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [nextSlide]);\r\n\r\n  return (\r\n    <section className=\"relative flex items-center justify-center w-full mx-auto px-12 sm:px-16 lg:px-6 py-8 md:py-12 bg-client-backgroundAlt rounded-2xl border border-client-textSecondary\">\r\n      <button\r\n        onClick={prevSlide}\r\n        className=\"absolute left-4 md:left-6 p-2 bg-client-primaryLight rounded-full hover:bg-client-primaryHover transition-all\"\r\n      >\r\n        <ChevronLeft className=\"w-6 h-6 text-client-text\" />\r\n      </button>\r\n\r\n      <div className=\"max-w-2xl text-center text-client-textSecondary gap-y-16\">\r\n        <p className=\"text-lg h-60 sm:h-36 md:text-xl font-light leading-relaxed\">\r\n          {testimonials[currentIndex].text}\r\n        </p>\r\n\r\n        <div className=\"mt-6 flex justify-center items-center gap-x-4\">\r\n          <Image\r\n            src={testimonials[currentIndex].image}\r\n            alt={testimonials[currentIndex].name}\r\n            width={50}\r\n            height={50}\r\n            className=\"rounded-full border border-client-primary\"\r\n          />\r\n\r\n          <div className=\"flex flex-col pr-2 w-36\">\r\n            <p className=\"mt-2 font-semibold\">\r\n              {testimonials[currentIndex].name}\r\n            </p>\r\n            <span className=\"text-sm text-client-textSecondary\">\r\n              {testimonials[currentIndex].role}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-4 flex justify-center\">\r\n          {testimonials.map((_, index) => (\r\n            <div\r\n              key={index}\r\n              className={clsx(\r\n                \"h-1 w-20 transition-all\",\r\n                index === currentIndex\r\n                  ? \"bg-client-white\"\r\n                  : \"bg-client-textPlaceholder\",\r\n                index === 0 && \"rounded-l-full\",\r\n                index === testimonials.length - 1 && \"rounded-r-full\"\r\n              )}\r\n            ></div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        onClick={nextSlide}\r\n        className=\"absolute right-4 md:right-6 p-2 bg-client-primaryLight rounded-full hover:bg-client-primaryHover transition-all\"\r\n      >\r\n        <ChevronRight className=\"w-6 h-6 text-client-text\" />\r\n      </button>\r\n    </section>\r\n  );\r\n}\r\n",
        "wordCarousel.tsx": "\"use client\";\r\nimport React from \"react\";\r\n\r\nconst words = [\r\n  \"ASEGURAR\",\r\n  \"COMPROMISO\",\r\n  \"SEGURIDAD\",\r\n  \"TRANSPARENCIA\",\r\n  \"EXPERIENCIA\",\r\n  \"GARANTÍA\",\r\n  \"CALIDAD\",\r\n  \"INNOVACIÓN\",\r\n  \"CONFIANZA\",\r\n];\r\n\r\nexport default function TextCarousel() {\r\n  return (\r\n    <section className=\"bg-client-backgroundAlt text-white\">\r\n      <div className=\"relative overflow-hidden whitespace-nowrap py-2 group [mask-image:_linear-gradient(to_right,_transparent_0,_white_128px,white_calc(100%-128px),_transparent_100%)]\">\r\n        <div className=\"animate-slide-left-infinite inline-block w-max\">\r\n          {words.map((word, index) => (\r\n            <React.Fragment key={index}>\r\n              <span\r\n                key={index}\r\n                className=\"mx-4 inline-block text-lg font-semibold\"\r\n              >\r\n                {word}\r\n              </span>\r\n              <span>•</span>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n\r\n        <div\r\n          className=\"animate-slide-left-infinite inline-block w-max\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          {words.map((word, index) => (\r\n            <React.Fragment key={index}>\r\n              <span\r\n                key={index}\r\n                className=\"mx-4 inline-block text-lg font-semibold\"\r\n              >\r\n                {word}\r\n              </span>\r\n              <span>•</span>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"
      },
      "icons": {
        "appleIcon.tsx": "import React from \"react\";\n\nconst AppleIcon = React.memo(({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 384 512\"\n    className={className}\n  >\n    <path\n      fill=\"#000000\"\n      d=\"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z\"\n    />\n  </svg>\n));\n\nexport default AppleIcon;\n",
        "facebookIcon.tsx": "import React from \"react\";\n\nconst FacebookIcon = React.memo(({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 512 512\"\n    className={className}\n  >\n    <path\n      fill=\"#2563eb\"\n      d=\"M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z\"\n    />\n  </svg>\n));\n\nexport default FacebookIcon;\n",
        "googleIcon.tsx": "import React from \"react\";\n\nconst GoogleIcon = React.memo(({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 48 48\"\n    className={className}\n  >\n    <path\n      fill=\"#FFC107\"\n      d=\"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\n      c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4\n      C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z\"\n    />\n    <path\n      fill=\"#FF3D00\"\n      d=\"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12\n      c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4\n      C16.318,4,9.656,8.337,6.306,14.691z\"\n    />\n    <path\n      fill=\"#4CAF50\"\n      d=\"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238\n      C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025\n      C9.505,39.556,16.227,44,24,44z\"\n    />\n    <path\n      fill=\"#1976D2\"\n      d=\"M43.611,20.083H42V20H24v8h11.303\n      c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238\n      C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z\"\n    />\n  </svg>\n));\n\nexport default GoogleIcon;\n",
        "instagramIcon.tsx": "import React from \"react\";\r\n\r\nconst InstagramIcon = React.memo(({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 448 512\"\r\n    className={className}\r\n  >\r\n    <path\r\n      fill=\"#ff306c\"\r\n      d=\"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z\"\r\n    />\r\n  </svg>\r\n));\r\n\r\nexport default InstagramIcon;\r\n",
        "telegramIcon.tsx": "import React from \"react\";\r\n\r\nconst TelegramIcon = React.memo(({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 496 512\"\r\n    className={className}\r\n  >\r\n    <path\r\n      fill=\"#24a1de\"\r\n      d=\"M248 8C111 8 0 119 0 256S111 504 248 504 496 393 496 256 385 8 248 8zM363 176.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7 .2-.7 .3-3.1-1.2-4.4s-3.6-.8-5.1-.5q-3.3 .7-104.6 69.1-14.8 10.2-26.9 9.9c-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3q.8-6.7 18.5-13.7 108.4-47.2 144.6-62.3c68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6 .5 9.6 2.9a10.5 10.5 0 0 1 3.5 6.7A43.8 43.8 0 0 1 363 176.7z\"\r\n    />\r\n  </svg>\r\n));\r\n\r\nexport default TelegramIcon;\r\n",
        "tikTokIcon.tsx": "import React from \"react\";\r\n\r\nconst TikTokIcon = React.memo(({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 448 512\"\r\n    className={className}\r\n  >\r\n    <path\r\n      fill=\"#010101\"\r\n      d=\"M448 209.9a210.1 210.1 0 0 1 -122.8-39.3V349.4A162.6 162.6 0 1 1 185 188.3V278.2a74.6 74.6 0 1 0 52.2 71.2V0l88 0a121.2 121.2 0 0 0 1.9 22.2h0A122.2 122.2 0 0 0 381 102.4a121.4 121.4 0 0 0 67 20.1z\"\r\n    />\r\n  </svg>\r\n));\r\n\r\nexport default TikTokIcon;\r\n",
        "whatsAppIcon.tsx": "import React from \"react\";\r\n\r\nconst WhatsAppIcon = React.memo(({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 448 512\"\r\n    className={className}\r\n  >\r\n    <path\r\n      fill=\"#25d366\"\r\n      d=\"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z\"\r\n    />\r\n  </svg>\r\n));\r\n\r\nexport default WhatsAppIcon;\r\n",
        "xIcon.tsx": "import React from \"react\";\r\n\r\nconst XIcon = React.memo(({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 30 30\"\r\n    className={className}\r\n  >\r\n    <path d=\"M26.37,26l-8.795-12.822l0.015,0.012L25.52,4h-2.65l-6.46,7.48L11.28,4H4.33l8.211,11.971L12.54,15.97L3.88,26h2.65 l7.182-8.322L19.42,26H26.37z M10.23,6l12.34,18h-2.1L8.12,6H10.23z\" />\r\n  </svg>\r\n));\r\n\r\nexport default XIcon;\r\n",
        "youTubeIcon.tsx": "import React from \"react\";\r\n\r\nconst YouTubeIcon = React.memo(({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 576 512\"\r\n    className={className}\r\n  >\r\n    <path\r\n      fill=\"#c4302b\"\r\n      d=\"M549.7 124.1c-6.3-23.7-24.8-42.3-48.3-48.6C458.8 64 288 64 288 64S117.2 64 74.6 75.5c-23.5 6.3-42 24.9-48.3 48.6-11.4 42.9-11.4 132.3-11.4 132.3s0 89.4 11.4 132.3c6.3 23.7 24.8 41.5 48.3 47.8C117.2 448 288 448 288 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zm-317.5 213.5V175.2l142.7 81.2-142.7 81.2z\"\r\n    />\r\n  </svg>\r\n));\r\n\r\nexport default YouTubeIcon;\r\n"
      },
      "layoutWrapper.tsx": "\"use client\";\r\n\r\nimport { usePathname } from \"next/navigation\";\r\nimport Header from \"./header/header\";\r\nimport Footer from \"./footer/footer\";\r\nimport AdminHeader from \"./admin/adminHeader\";\r\nimport AdminFooter from \"./admin/adminFooter\";\r\n\r\nexport default function LayoutWrapper({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const pathname = usePathname();\r\n\r\n  const isLogin = pathname.startsWith(\"/login\");\r\n  const isAdmin = pathname.startsWith(\"/admin\");\r\n\r\n  return (\r\n    <>\r\n      {!isLogin && isAdmin && <AdminHeader />}\r\n      {!isLogin && !isAdmin && <Header />}\r\n\r\n      {children}\r\n\r\n      {!isLogin && isAdmin && <AdminFooter />}\r\n      {!isLogin && !isAdmin && <Footer />}\r\n    </>\r\n  );\r\n}\r\n",
      "loader.tsx": "interface LoaderProps {\n  size?: number;\n}\n\nexport default function Loader({ size = 12 }: LoaderProps) {\n  return (\n    <div\n      className=\"z-50 border-3 border-client-accentLight border-t-transparent rounded-full animate-spin\"\n      style={{\n        width: `${size}px`,\n        height: `${size}px`,\n        borderWidth: `${size / 6}px`,\n      }}\n    />\n  );\n}\n",
      "login": {
        "AuthButton.tsx": "\"use client\";\n\nimport { useSession, signIn, signOut } from \"next-auth/react\";\n\nexport default function AuthButton() {\n  const { data: session } = useSession();\n\n  return session ? (\n    <button onClick={() => signOut()}>Cerrar sesión</button>\n  ) : (\n    <button onClick={() => signIn(\"google\")}>Iniciar sesión</button>\n  );\n}\n",
        "authProviders.tsx": "\"use client\";\r\n\r\nimport { signIn } from \"next-auth/react\";\r\nimport GoogleIcon from \"../icons/googleIcon\";\r\n\r\nexport default function AuthProviders() {\r\n  return (\r\n    <div className=\"flex justify-center gap-4\">\r\n      <button\r\n        onClick={() => signIn(\"google\", { callbackUrl: \"/\" })}\r\n        className=\"flex items-center justify-center w-full px-6 py-3 bg-client-text text-black border border-gray-300 rounded-lg shadow-md transition hover:bg-client-textSecondary\"\r\n      >\r\n        <GoogleIcon className=\"h-6 w-6 mr-3\" />\r\n        <span className=\"font-medium\">Iniciar con Google</span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n",
        "clientForgetPasswordPage.tsx": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useResetPassword } from \"@/app/hooks/auth/resetPassword/useResetPassword\";\r\nimport Logo from \"../header/logo\";\r\nimport FormInput from \"@/app/ui/modals/home/formInput\";\r\n\r\nexport default function ClientForgetPasswordPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\");\r\n  const [formMessage, setFormMessage] = useState(\"\");\r\n\r\n  const { resetPassword, loading, error, success } = useResetPassword();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setEmailError(\"\");\r\n    setFormMessage(\"\");\r\n\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\n    if (!email) {\r\n      setEmailError(\"El campo de correo electrónico es obligatorio.\");\r\n      return;\r\n    }\r\n\r\n    if (!emailRegex.test(email)) {\r\n      setEmailError(\"El correo electrónico no es válido.\");\r\n      return;\r\n    }\r\n\r\n    const ok = await resetPassword(email);\r\n\r\n    if (ok) {\r\n      setFormMessage(\"Hemos enviado un código a tu correo electrónico.\");\r\n    } else if (error) {\r\n      setFormMessage(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full items-center justify-center\">\r\n      <div className=\"max-w-md w-full bg-client-backgroundAlt p-10 rounded-2xl shadow my-8 space-y-6\">\r\n        <div className=\"-translate-x-4\">\r\n          <Logo />\r\n        </div>\r\n\r\n        <div>\r\n          <h1 className=\"mt-2 text-2xl font-bold text-client-text\">\r\n            Oh no... Recupera tu contraseña\r\n          </h1>\r\n\r\n          <p className=\"text-client-textSecondary\">\r\n            ¿Olvidaste tu contraseña? Ingresa tu correo y te enviaremos un\r\n            enlace para restablecerla.\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <FormInput\r\n            label=\"Correo electrónico\"\r\n            name=\"email\"\r\n            type=\"text\"\r\n            value={email}\r\n            placeholder=\"tu-email@ejemplo.com\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            error={emailError}\r\n          />\r\n\r\n          {formMessage && (\r\n            <p\r\n              className={`text-sm text-center ${\r\n                success\r\n                  ? \"text-green-500\"\r\n                  : error\r\n                    ? \"text-red-500\"\r\n                    : \"text-yellow-500\"\r\n              }`}\r\n            >\r\n              {formMessage}\r\n            </p>\r\n          )}\r\n\r\n          <button\r\n            className=\"w-full rounded-lg bg-client-accent p-3 text-white shadow-lg transition hover:bg-client-accentHover disabled:opacity-50\"\r\n            type=\"submit\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Enviando código...\" : \"Restablecer contraseña\"}\r\n          </button>\r\n        </form>\r\n\r\n        <button\r\n          className=\"w-full rounded-lg bg-client-backgroundLight p-3 text-client-text shadow-lg transition hover:bg-client-backgroundDark -translate-y-4\"\r\n          type=\"button\"\r\n          onClick={() => router.push(\"/\")}\r\n        >\r\n          Volver a EdifiK\r\n        </button>\r\n\r\n        <div className=\"flex justify-center mt-4\">\r\n          <p className=\"text-client-textSecondary\">\r\n            ¿Recordaste tu contraseña?\r\n          </p>\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"ml-2 text-client-text transition hover:underline\"\r\n          >\r\n            Inicia sesión\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "loginForm.tsx": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { signIn } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport FormInput from \"../modals/home/formInput\";\r\nimport Loader from \"../loader\";\r\n\r\nexport default function LoginForm() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [emptyFieldError, setEmptyFieldError] = useState(\"\");\r\n  const router = useRouter();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    setEmailError(\"\");\r\n    setPasswordError(\"\");\r\n    setEmptyFieldError(\"\");\r\n\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    let isValid = true;\r\n\r\n    if (!email || !password) {\r\n      setEmptyFieldError(\"Todos los campos son obligatorios.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (email && !emailRegex.test(email)) {\r\n      setEmailError(\"El correo electrónico no es válido.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (isValid) {\r\n      await signIn(\"credentials\", {\r\n        callbackUrl: \"/\",\r\n        email,\r\n        password,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <FormInput\r\n        label=\"Correo electrónico\"\r\n        name=\"email\"\r\n        type=\"text\"\r\n        value={email}\r\n        placeholder=\"tu-email@ejemplo.com\"\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        error={emailError || emptyFieldError}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Contraseña\"\r\n        name=\"password\"\r\n        type={\"password\"}\r\n        value={password}\r\n        placeholder=\"••••••••\"\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        error={passwordError || emptyFieldError}\r\n      />\r\n\r\n      <Link\r\n        href=\"/login/forget-password\"\r\n        className=\"text-sm text-client-secondaryHover transition hover:underline\"\r\n      >\r\n        ¿Olvidaste tu contraseña?\r\n      </Link>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={loading}\r\n        className=\"mt-4 w-full rounded-lg bg-client-accent p-3 text-white shadow-lg transition hover:bg-client-accentHover disabled:opacity-50 flex items-center justify-center gap-2\"\r\n      >\r\n        {loading ? <Loader size={20} /> : \"Iniciar sesión\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n",
        "register": {
          "registerForm.tsx": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useCheckEmail } from \"@/app/hooks/users/useCheckEmail\";\r\nimport { useRegisterUser } from \"@/app/hooks/auth/register/useRegisterUser\";\r\nimport StepEmail from \"./stepEmail\";\r\nimport StepPersonalData from \"./stepPersonalData\";\r\nimport StepPassword from \"./stepPassword\";\r\n\r\nexport default function RegisterForm() {\r\n  const [step, setStep] = useState(1);\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [fullName, setFullName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [birthDate, setBirthDate] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\");\r\n  const [fullNameError, setFullNameError] = useState(\"\");\r\n  const [lastNameError, setLastNameError] = useState(\"\");\r\n  const [birthDateError, setBirthDateError] = useState(\"\");\r\n  const [phoneError, setPhoneError] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [confirmPasswordError, setConfirmPasswordError] = useState(\"\");\r\n\r\n  const router = useRouter();\r\n\r\n  const { checkEmailExists } = useCheckEmail();\r\n\r\n  const {\r\n    registerUser,\r\n    loading: registering,\r\n    error: registerError,\r\n  } = useRegisterUser();\r\n\r\n  const handleEmailSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    setEmailError(\"\");\r\n\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    let isValid = true;\r\n\r\n    if (!email) {\r\n      setEmailError(\"El correo electrónico es obligatorio.\");\r\n      isValid = false;\r\n    } else if (!emailRegex.test(email)) {\r\n      setEmailError(\"El correo electrónico no es válido.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (!isValid) return;\r\n\r\n    const existingUserId = await checkEmailExists(email);\r\n\r\n    if (existingUserId) {\r\n      setEmailError(\"Este correo ya está registrado.\");\r\n      return;\r\n    }\r\n\r\n    setStep(2);\r\n  };\r\n\r\n  const handlePersonalDataSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    setFullNameError(\"\");\r\n    setLastNameError(\"\");\r\n    setBirthDateError(\"\");\r\n    setPhoneError(\"\");\r\n\r\n    let isValid = true;\r\n\r\n    if (!fullName) {\r\n      setFullNameError(\"El nombre es obligatorio.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (!lastName) {\r\n      setLastNameError(\"El apellido es obligatorio.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (!birthDate) {\r\n      setBirthDateError(\"La fecha de nacimiento es obligatoria.\");\r\n      isValid = false;\r\n    }\r\n\r\n    const phoneRegex = /^3\\d{9}$/;\r\n\r\n    if (!phone) {\r\n      setPhoneError(\"El número de teléfono es obligatorio.\");\r\n      isValid = false;\r\n    } else if (!phoneRegex.test(phone.replace(/\\s+/g, \"\"))) {\r\n      setPhoneError(\"Número de teléfono no válido.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (isValid) {\r\n      setStep(3);\r\n    }\r\n  };\r\n\r\n  const handlePasswordSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    setPasswordError(\"\");\r\n    setConfirmPasswordError(\"\");\r\n\r\n    let isValid = true;\r\n\r\n    if (!password) {\r\n      setPasswordError(\"La contraseña es obligatoria.\");\r\n      isValid = false;\r\n    } else if (password.length < 8) {\r\n      setPasswordError(\"La contraseña debe tener al menos 8 caracteres.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (!confirmPassword) {\r\n      setConfirmPasswordError(\"Debes confirmar tu contraseña.\");\r\n      isValid = false;\r\n    } else if (confirmPassword !== password) {\r\n      setConfirmPasswordError(\"Las contraseñas no coinciden.\");\r\n      isValid = false;\r\n    }\r\n\r\n    if (!isValid) return;\r\n\r\n    const success = await registerUser({\r\n      names: fullName,\r\n      lastnames: lastName,\r\n      birthdate: birthDate,\r\n      email,\r\n      phoneNumber: phone,\r\n      password,\r\n    });\r\n\r\n    if (success) {\r\n      router.push(\"/login\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={\r\n        step === 1\r\n          ? handleEmailSubmit\r\n          : step === 2\r\n            ? handlePersonalDataSubmit\r\n            : handlePasswordSubmit\r\n      }\r\n      className=\"space-y-4\"\r\n    >\r\n      {step === 1 && (\r\n        <StepEmail email={email} setEmail={setEmail} emailError={emailError} />\r\n      )}\r\n\r\n      {step === 2 && (\r\n        <StepPersonalData\r\n          fullName={fullName}\r\n          setFullName={setFullName}\r\n          fullNameError={fullNameError}\r\n          lastName={lastName}\r\n          setLastName={setLastName}\r\n          lastNameError={lastNameError}\r\n          birthDate={birthDate}\r\n          setBirthDate={setBirthDate}\r\n          birthDateError={birthDateError}\r\n          phone={phone}\r\n          setPhone={setPhone}\r\n          phoneError={phoneError}\r\n        />\r\n      )}\r\n\r\n      {step === 3 && (\r\n        <StepPassword\r\n          password={password}\r\n          setPassword={setPassword}\r\n          passwordError={passwordError}\r\n          confirmPassword={confirmPassword}\r\n          setConfirmPassword={setConfirmPassword}\r\n          confirmPasswordError={confirmPasswordError}\r\n        />\r\n      )}\r\n\r\n      <div className=\"flex justify-between gap-4\">\r\n        {step > 1 && (\r\n          <button\r\n            type=\"button\"\r\n            disabled={registering}\r\n            onClick={() => setStep((prev) => prev - 1)}\r\n            className=\"w-full bg-client-backgroundAlt rounded-lg p-3 text-client-text transition hover:bg-client-backgroundDark\"\r\n          >\r\n            Atrás\r\n          </button>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={registering}\r\n          className=\"w-full rounded-lg bg-client-accent p-3 text-white shadow-lg transition hover:bg-client-accentHover disabled:opacity-50\"\r\n        >\r\n          {registering\r\n            ? \"Registrando...\"\r\n            : step === 3\r\n              ? \"Registrarse\"\r\n              : \"Continuar\"}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n",
          "stepEmail.tsx": "import FormInput from \"../../modals/home/formInput\";\r\n\r\ninterface Props {\r\n  email: string;\r\n  setEmail: (value: string) => void;\r\n  emailError: string;\r\n}\r\n\r\nexport default function StepEmail({ email, setEmail, emailError }: Props) {\r\n  return (\r\n    <FormInput\r\n      label=\"Correo electrónico\"\r\n      name=\"email\"\r\n      type=\"text\"\r\n      value={email}\r\n      placeholder=\"tu-email@ejemplo.com\"\r\n      onChange={(e) => setEmail(e.target.value)}\r\n      error={emailError}\r\n    />\r\n  );\r\n}\r\n",
          "stepPassword.tsx": "import FormInput from \"../../modals/home/formInput\";\r\n\r\ninterface Props {\r\n  password: string;\r\n  setPassword: (value: string) => void;\r\n  passwordError: string;\r\n  confirmPassword: string;\r\n  setConfirmPassword: (value: string) => void;\r\n  confirmPasswordError: string;\r\n}\r\n\r\nexport default function StepPassword({\r\n  password,\r\n  setPassword,\r\n  passwordError,\r\n  confirmPassword,\r\n  setConfirmPassword,\r\n  confirmPasswordError,\r\n}: Props) {\r\n  return (\r\n    <>\r\n      <FormInput\r\n        label=\"Contraseña\"\r\n        name=\"password\"\r\n        placeholder=\"••••••••\"\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        error={passwordError}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Confirmar contraseña\"\r\n        name=\"confirmPassword\"\r\n        placeholder=\"••••••••\"\r\n        type=\"password\"\r\n        value={confirmPassword}\r\n        onChange={(e) => setConfirmPassword(e.target.value)}\r\n        error={confirmPasswordError}\r\n      />\r\n    </>\r\n  );\r\n}\r\n",
          "stepPersonalData.tsx": "import FormInput from \"../../modals/home/formInput\";\r\nimport FormDatePicker from \"../../modals/home/formDatePicker\";\r\n\r\ninterface Props {\r\n  fullName: string;\r\n  setFullName: (value: string) => void;\r\n  fullNameError: string;\r\n  lastName: string;\r\n  setLastName: (value: string) => void;\r\n  lastNameError: string;\r\n  birthDate: string;\r\n  setBirthDate: (value: string) => void;\r\n  birthDateError: string;\r\n  phone: string;\r\n  setPhone: (value: string) => void;\r\n  phoneError: string;\r\n}\r\n\r\nexport default function StepPersonalData({\r\n  fullName,\r\n  setFullName,\r\n  fullNameError,\r\n  lastName,\r\n  setLastName,\r\n  lastNameError,\r\n  birthDate,\r\n  setBirthDate,\r\n  birthDateError,\r\n  phone,\r\n  setPhone,\r\n  phoneError,\r\n}: Props) {\r\n  return (\r\n    <>\r\n      <FormInput\r\n        label=\"Nombres\"\r\n        name=\"fullName\"\r\n        placeholder=\"Nombres completos\"\r\n        type=\"text\"\r\n        value={fullName}\r\n        onChange={(e) => setFullName(e.target.value)}\r\n        error={fullNameError}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Apellidos\"\r\n        name=\"lastName\"\r\n        placeholder=\"Apellidos completos\"\r\n        type=\"text\"\r\n        value={lastName}\r\n        onChange={(e) => setLastName(e.target.value)}\r\n        error={lastNameError}\r\n      />\r\n\r\n      <FormDatePicker\r\n        label=\"Fecha de nacimiento\"\r\n        name=\"birthDate\"\r\n        value={birthDate ? new Date(birthDate) : null}\r\n        onChange={(date) =>\r\n          setBirthDate(date ? date.toISOString().split(\"T\")[0] : \"\")\r\n        }\r\n        dateMax={\r\n          new Date(\r\n            new Date().getFullYear() - 18,\r\n            new Date().getMonth(),\r\n            new Date().getDate()\r\n          )\r\n        }\r\n        dateMin={new Date(new Date().getFullYear() - 120, 0, 1)}\r\n        error={birthDateError}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Número de teléfono\"\r\n        name=\"phone\"\r\n        placeholder=\"312 345 6789\"\r\n        type=\"tel\"\r\n        value={phone}\r\n        onChange={(e) => setPhone(e.target.value)}\r\n        error={phoneError}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"
        },
        "themeSelector.tsx": "import { useEffect, useState } from \"react\";\nimport { Sun, Moon, SunMoon } from \"lucide-react\";\n\nexport default function ThemeSelector({\n  closeMenu,\n}: {\n  closeMenu: () => void;\n}) {\n  const [theme, setTheme] = useState<\"light\" | \"dark\" | \"auto\">(\"auto\");\n\n  useEffect(() => {\n    const savedTheme =\n      (localStorage.getItem(\"theme\") as \"light\" | \"dark\" | \"auto\") || \"auto\";\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    const initialTheme =\n      savedTheme === \"auto\" ? (prefersDark ? \"dark\" : \"light\") : savedTheme;\n    setTheme(initialTheme);\n    document.documentElement.setAttribute(\"data-theme\", initialTheme);\n  }, []);\n\n  const handleThemeChange = (newTheme: \"light\" | \"dark\" | \"auto\") => {\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    const appliedTheme =\n      newTheme === \"auto\" ? (prefersDark ? \"dark\" : \"light\") : newTheme;\n    document.documentElement.setAttribute(\"data-theme\", appliedTheme);\n    closeMenu();\n  };\n\n  return (\n    <div className=\"flex flex-col\">\n      <button\n        onClick={() => handleThemeChange(\"light\")}\n        className={`hover:bg-backgroundLight dark:hover:bg-darkBackgroundLight flex items-center rounded px-4 py-2 ${\n          theme === \"light\"\n            ? \"text-primary font-bold\"\n            : \"text-textPrimary dark:text-textSecondary\"\n        }`}\n      >\n        <Sun className=\"mr-2 text-yellow-400\" />\n        Modo Claro\n      </button>\n\n      <button\n        onClick={() => handleThemeChange(\"dark\")}\n        className={`hover:bg-backgroundLight dark:hover:bg-darkBackgroundLight flex items-center rounded px-4 py-2 ${\n          theme === \"dark\"\n            ? \"text-primary font-bold\"\n            : \"text-textPrimary dark:text-textSecondary\"\n        }`}\n      >\n        <Moon className=\"dark:text-textPrimary mr-2\" />\n        Modo Oscuro\n      </button>\n\n      <button\n        onClick={() => handleThemeChange(\"auto\")}\n        className={`hover:bg-backgroundLight dark:hover:bg-darkBackgroundLight flex items-center rounded px-4 py-2 ${\n          theme === \"auto\"\n            ? \"text-primary font-bold\"\n            : \"text-textPrimary dark:text-textSecondary\"\n        }`}\n      >\n        <SunMoon className=\"mr-2 text-blue-500\" />\n        Automático\n      </button>\n    </div>\n  );\n}\n"
      },
      "memberships": {
        "clientMembershipsPage.tsx": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Membership } from \"@/lib/definitios\";\r\nimport { useMemberships } from \"@/app/hooks/memberships/useMemberships\";\r\nimport { useIsLgUp } from \"@/app/hooks/useIsLgUp\";\r\nimport MembershipCard from \"@/app/ui/memberships/membershipCard\";\r\nimport MembershipPaymentModal from \"./membershipPaymentModal\";\r\nimport MembershipCardSkeleton from \"@/app/ui/skeletons/membershipCardSkeleton\";\r\n\r\nexport default function ClientMembershipsPage() {\r\n  const [refresh, setRefresh] = useState(0);\r\n  const [selectedMembership, setSelectedMembership] =\r\n    useState<Membership | null>(null);\r\n\r\n  const isLgUp = useIsLgUp();\r\n  const { memberships, isLoading } = useMemberships(1, 4, \"\", refresh);\r\n\r\n  const membershipStyles: Record<\r\n    number,\r\n    {\r\n      bg: string;\r\n      text: string;\r\n      icon: string;\r\n      button: string;\r\n      price: string;\r\n      divider: string;\r\n    }\r\n  > = {\r\n    1001: {\r\n      bg: \"bg-client-accent\",\r\n      text: \"text-client-text\",\r\n      icon: \"text-client-text\",\r\n      button: \"bg-client-white text-client-primary\",\r\n      price: \"text-client-white\",\r\n      divider: \"border-client-primary\",\r\n    },\r\n    1002: {\r\n      bg: \"bg-client-whiteOff\",\r\n      text: \"text-client-primary\",\r\n      icon: \"text-client-primary\",\r\n      button: \"bg-client-accent text-white\",\r\n      price: \"text-client-accent\",\r\n      divider: \"border-client-primary\",\r\n    },\r\n    1003: {\r\n      bg: \"bg-client-accent\",\r\n      text: \"text-client-text\",\r\n      icon: \"text-client-text\",\r\n      button: \"bg-client-white text-client-primary\",\r\n      price: \"text-client-white\",\r\n      divider: \"border-client-primary\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"w-full py-10\">\r\n        <div className=\"max-w-7xl mx-auto px-4\">\r\n          <h2 className=\"text-3xl my-12 font-bold text-center text-client-text\">\r\n            Elige tu membresía\r\n          </h2>\r\n\r\n          {isLoading ? (\r\n            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 justify-items-center\">\r\n              {Array.from({ length: 3 }).map((_, i) => (\r\n                <MembershipCardSkeleton key={i} />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 justify-items-center\">\r\n              {memberships\r\n                .filter((m) => m.id !== 1004)\r\n                .map((m) => {\r\n                  const colorScheme = membershipStyles[m.id] ?? {\r\n                    bg: \"bg-gray-100\",\r\n                    text: \"text-black\",\r\n                    icon: \"text-black\",\r\n                    button: \"bg-black text-white\",\r\n                    price: \"text-black\",\r\n                    divider: \"border-gray-300\",\r\n                  };\r\n\r\n                  return (\r\n                    <MembershipCard\r\n                      key={m.id}\r\n                      name={m.name}\r\n                      benefits={m.benefits}\r\n                      price={m.price * 1.19}\r\n                      threeMounthPrice={\r\n                        m.price * 1.19 * 3 -\r\n                        (m.price * 1.19 * m.discountThreeMonths * 3) / 100\r\n                      }\r\n                      featured={m.projectsFeatured}\r\n                      maxProperties={m.maxProjects}\r\n                      isMain={isLgUp && m.id === 1002}\r\n                      colorScheme={colorScheme}\r\n                      onBuy={() => setSelectedMembership(m)}\r\n                    />\r\n                  );\r\n                })}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      {selectedMembership && (\r\n        <MembershipPaymentModal\r\n          membership={selectedMembership}\r\n          isOpen={true}\r\n          onClose={() => setSelectedMembership(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
        "epaycoButton.tsx": "\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\n\r\ninterface EpaycoButtonProps {\r\n  amount: number;\r\n  tax: number;\r\n  taxBase: number;\r\n  name: string;\r\n  description: string;\r\n}\r\n\r\nexport default function EpaycoButton({\r\n  amount,\r\n  tax,\r\n  taxBase,\r\n  name,\r\n  description,\r\n}: EpaycoButtonProps) {\r\n  const formRef = useRef<HTMLFormElement>(null);\r\n\r\n  const publicKey = process.env.NEXT_PUBLIC_EPAYCO_PUBLIC_KEY;\r\n\r\n  useEffect(() => {\r\n    if (formRef.current) {\r\n      formRef.current.innerHTML = \"\";\r\n    }\r\n\r\n    const script = document.createElement(\"script\");\r\n    script.src = \"https://checkout.epayco.co/checkout.js\";\r\n    script.className = \"epayco-button\";\r\n    script.setAttribute(\"data-epayco-key\", publicKey ?? \"\");\r\n    script.setAttribute(\"data-epayco-amount\", amount.toString());\r\n    script.setAttribute(\"data-epayco-tax\", tax.toFixed(2).toString());\r\n    script.setAttribute(\"data-epayco-tax-base\", taxBase.toString());\r\n    script.setAttribute(\"data-epayco-name\", name);\r\n    script.setAttribute(\"data-epayco-description\", description);\r\n    script.setAttribute(\"data-epayco-currency\", \"cop\");\r\n    script.setAttribute(\"data-epayco-country\", \"co\");\r\n    script.setAttribute(\"data-epayco-response\", \"www.google.com\");\r\n    script.setAttribute(\"data-epayco-test\", \"false\");\r\n    script.setAttribute(\"data-epayco-external\", \"false\");\r\n    script.setAttribute(\r\n      \"data-epayco-button\",\r\n      \"https://multimedia.epayco.co/dashboard/btns/btn5.png\"\r\n    );\r\n\r\n    formRef.current?.appendChild(script);\r\n  }, [amount, tax, taxBase, name, description]);\r\n\r\n  return <form ref={formRef}></form>;\r\n}\r\n",
        "membershipCard.tsx": "\"use client\";\r\n\r\nimport clsx from \"clsx\";\r\nimport { CheckCircle } from \"lucide-react\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\n\r\ninterface MembershipCardProps {\r\n  name: string;\r\n  benefits: string;\r\n  price: number;\r\n  threeMounthPrice: number;\r\n  featured: number;\r\n  maxProperties: number;\r\n  colorScheme: {\r\n    bg: string;\r\n    text: string;\r\n    icon: string;\r\n    button: string;\r\n    price: string;\r\n    divider: string;\r\n  };\r\n  isMain?: boolean;\r\n  onBuy: () => void;\r\n}\r\n\r\nexport default function MembershipCard({\r\n  name,\r\n  benefits,\r\n  price,\r\n  threeMounthPrice,\r\n  featured,\r\n  maxProperties,\r\n  colorScheme,\r\n  isMain = false,\r\n  onBuy,\r\n}: MembershipCardProps) {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        \"relative flex flex-col justify-between rounded-3xl px-6 py-8 shadow-lg transition-transform duration-300 w-full max-w-xs h-[460px]\",\r\n        colorScheme.bg,\r\n        colorScheme.text,\r\n        isMain ? \"scale-110 shadow-xl\" : \"scale-100\"\r\n      )}\r\n    >\r\n      <div className=\"flex flex-col gap-6\">\r\n        <h3\r\n          className={clsx(\r\n            \"text-center text-xl font-semibold tracking-wide uppercase\",\r\n            colorScheme.price\r\n          )}\r\n        >\r\n          {name}\r\n        </h3>\r\n\r\n        <div className={clsx(\"text-center\", colorScheme.price)}>\r\n          <div className=\"flex justify-center items-baseline gap-1\">\r\n            <span className=\"text-lg\">$</span>\r\n            <span className=\"text-4xl font-extrabold\">\r\n              {formatNumber(price)}\r\n            </span>\r\n            <span className=\"text-sm opacity-80\">/mes</span>\r\n          </div>\r\n          <p className=\"text-sm opacity-80 mt-1\">\r\n            $ {formatNumber(threeMounthPrice)}/3 meses\r\n          </p>\r\n        </div>\r\n\r\n        <ul className=\"flex flex-col gap-4 text-sm\">\r\n          <li\r\n            className={clsx(\r\n              \"flex items-center justify-between border-b pb-2\",\r\n              colorScheme.divider\r\n            )}\r\n          >\r\n            <span>Propiedades destacadas</span>\r\n            <span className=\"font-semibold\">{featured}</span>\r\n          </li>\r\n\r\n          <li\r\n            className={clsx(\r\n              \"flex items-center justify-between border-b pb-2\",\r\n              colorScheme.divider\r\n            )}\r\n          >\r\n            <span>Máximo de propiedades</span>\r\n            <span className=\"font-semibold\">{maxProperties}</span>\r\n          </li>\r\n\r\n          <li className=\"flex items-start gap-2 pt-2\">\r\n            <CheckCircle\r\n              className={clsx(\"w-5 h-5 flex-shrink-0\", colorScheme.icon)}\r\n            />\r\n            <p className=\"flex-1\">{benefits}</p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <button\r\n        onClick={onBuy}\r\n        className={clsx(\r\n          \"w-full py-3 rounded-full text-black font-semibold hover:opacity-90 transition mt-6\",\r\n          colorScheme.button\r\n        )}\r\n      >\r\n        Comprar\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n",
        "membershipPaymentModal.tsx": "\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Membership } from \"@/lib/definitios\";\r\nimport EpaycoButton from \"./epaycoButton\";\r\nimport MembershipCard from \"./membershipCard\";\r\n\r\ninterface MembershipPaymentModalProps {\r\n  membership: Membership;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function MembershipPaymentModal({\r\n  membership,\r\n  isOpen,\r\n  onClose,\r\n}: MembershipPaymentModalProps) {\r\n  const [months, setMonths] = useState<number | null>(null);\r\n  const [finalPrice, setFinalPrice] = useState<number>(0);\r\n  const [base, setBase] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    if (months === null) {\r\n      setFinalPrice(0);\r\n      return;\r\n    }\r\n\r\n    const subtotal = membership.price * months;\r\n\r\n    let discount = 0;\r\n    if (months === 3) discount = membership.discountThreeMonths;\r\n    else if (months === 6) discount = membership.discountSixMonths;\r\n    else if (months === 12) discount = membership.discountTwelveMonths;\r\n\r\n    const totalWithDiscount = subtotal - (subtotal * discount) / 100;\r\n\r\n    setFinalPrice(parseFloat((totalWithDiscount * 1.19).toFixed(2)));\r\n    setBase(parseFloat(totalWithDiscount.toFixed(2)));\r\n  }, [months, membership]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"\";\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60\">\r\n      <div className=\"bg-white rounded-2xl max-w-md w-full p-6 shadow-lg\">\r\n        <h3 className=\"text-xl font-bold text-center mb-4 text-client-primary\">\r\n          Comprar membresía {membership.name}\r\n        </h3>\r\n\r\n        <div className=\"mb-4\">\r\n          <label\r\n            htmlFor=\"selectMounth\"\r\n            className=\"block text-sm font-medium text-gray-700 mb-1\"\r\n          >\r\n            Selecciona la duración:\r\n          </label>\r\n\r\n          <select\r\n            id=\"selectMounth\"\r\n            className=\"w-full rounded-md border border-gray-300 px-3 py-2\"\r\n            value={months ?? \"\"}\r\n            onChange={(e) => setMonths(Number(e.target.value))}\r\n          >\r\n            {!months && <option value=\"\">Selecciona una opción</option>}\r\n            <option value={1}>1 mes</option>\r\n            <option value={3}>3 meses</option>\r\n            <option value={6}>6 meses</option>\r\n            <option value={12}>12 meses</option>\r\n          </select>\r\n        </div>\r\n\r\n        {months && (\r\n          <div className=\"text-center mb-4\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              Total a pagar (IVA incluido):{\" \"}\r\n              <span className=\"font-semibold text-client-primary\">\r\n                ${finalPrice.toLocaleString()}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {months && (\r\n          <div className=\"flex justify-center\">\r\n            <EpaycoButton\r\n              amount={finalPrice}\r\n              tax={finalPrice - base}\r\n              taxBase={base}\r\n              name={`Membresía ${membership.name}`}\r\n              description={`${months} mes(es) de membresía`}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={onClose}\r\n          className=\"mt-6 w-full bg-client-accent text-client-text rounded-lg py-2 hover:bg-client-accentHover\"\r\n        >\r\n          Cancelar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "modals": {
        "admin": {
          "formCheckbox.tsx": "interface FormCheckboxProps {\n  label: string;\n  name: string;\n  checked: boolean;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  className?: string; // Optional to customize additional styles\n}\n\nexport default function FormCheckbox({\n  label,\n  name,\n  checked,\n  onChange,\n  className = \"rounded\",\n}: FormCheckboxProps) {\n  return (\n    <div>\n      <label\n        htmlFor={name}\n        className=\"flex items-center gap-2 text-sm font-medium text-premium-textPrimary dark:text-premium-textPrimary\"\n      >\n        <input\n          id={name}\n          type=\"checkbox\"\n          name={name}\n          checked={checked}\n          onChange={onChange}\n          className={className}\n        />\n        {label}\n      </label>\n    </div>\n  );\n}\n",
          "formCheckboxToggle.tsx": "interface FormCheckboxToggleProps {\r\n  label: string;\r\n  name: string;\r\n  checked: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}\r\n\r\nexport default function FormCheckboxToggle({\r\n  label,\r\n  name,\r\n  checked,\r\n  onChange,\r\n}: FormCheckboxToggleProps) {\r\n  return (\r\n    <>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"flex items-center justify-between w-full cursor-pointer rounded-md border border-premium-borderColor bg-premium-secondaryLight px-3 py-2 text-premium-textPrimary dark:border-premium-borderColorHover dark:bg-premium-secondaryDark dark:text-premium-textPrimary\"\r\n      >\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textSecondary\">\r\n          {label}\r\n        </span>\r\n\r\n        <input\r\n          id={name}\r\n          type=\"checkbox\"\r\n          name={name}\r\n          checked={checked}\r\n          onChange={(e) => onChange(e.target.checked)}\r\n          className=\"relative h-6 w-12 cursor-pointer appearance-none rounded-full bg-premium-textPlaceholder transition duration-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-transform after:content-[''] checked:bg-premium-primary checked:after:translate-x-6 dark:bg-premium-backgroundLight\"\r\n        />\r\n      </label>\r\n    </>\r\n  );\r\n}\r\n",
          "formDatePicker.tsx": "import \"react-datepicker/dist/react-datepicker.css\";\r\nimport clsx from \"clsx\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormDatePickerProps {\r\n  label: string;\r\n  name: string;\r\n  value: Date | null;\r\n  onChange: (date: Date | null) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  dateMin?: Date;\r\n  dateMax?: Date;\r\n}\r\n\r\nexport default function FormDatePicker({\r\n  label,\r\n  name,\r\n  value,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  dateMin,\r\n  dateMax,\r\n}: FormDatePickerProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <DatePicker\r\n        id={name}\r\n        name={name}\r\n        selected={value}\r\n        onChange={onChange}\r\n        showMonthYearPicker\r\n        minDate={dateMin || new Date()}\r\n        maxDate={dateMax}\r\n        dateFormat=\"MM/yyyy\"\r\n        placeholderText=\"mm/yyyy\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\r\n          error && !flag\r\n            ? \"border-red-500\"\r\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n        wrapperClassName=\"w-full\"\r\n      />\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formDisplay.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\n\r\ninterface FormDisplayProps {\r\n  label: string;\r\n  value: string | number;\r\n  tooltipText?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport default function FormDisplay({\r\n  label,\r\n  value,\r\n  tooltipText,\r\n  rows = 1,\r\n}: FormDisplayProps) {\r\n  return (\r\n    <div>\r\n      <label className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\">\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <div\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary border-premium-borderColor dark:border-premium-borderColorHover\",\r\n          rows > 1 ? `h-${rows * 8} overflow-y-auto` : \"h-auto\"\r\n        )}\r\n        style={{ minHeight: `${rows * 1.5}rem` }}\r\n      >\r\n        {value || \"No especificado\"}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "formInput.tsx": "import clsx from \"clsx\";\nimport { formatNumber } from \"@/utils/formatters\";\nimport TooltipIcon from \"./tooltipIcon\";\nimport FormErrorMessage from \"../formErrorMessage\";\n\ninterface FormInputProps {\n  id?: string;\n  label: string;\n  type: string;\n  name: string;\n  value: string | number;\n  placeholder: string;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  maxLength?: number;\n  min?: number;\n  max?: number;\n  error?: string;\n  flag?: boolean;\n  tooltipText?: string;\n  isEdit?: boolean;\n}\n\nexport default function FormInput({\n  id,\n  label,\n  type,\n  value,\n  placeholder,\n  onChange,\n  name,\n  maxLength,\n  min,\n  max,\n  error,\n  flag,\n  tooltipText,\n  isEdit = true,\n}: FormInputProps) {\n  const formattedValue =\n    type === \"number\" && typeof value === \"number\"\n      ? formatNumber(value)\n      : value;\n\n  return (\n    <div>\n      <label\n        htmlFor={id ? id : name}\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\n      >\n        {label}\n        {error !== undefined && \" *\"}\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\n      </label>\n      <input\n        id={id ? id : name}\n        type={type}\n        name={name}\n        value={formattedValue}\n        onChange={onChange}\n        placeholder={placeholder}\n        maxLength={type === \"text\" ? maxLength : undefined}\n        min={type === \"number\" ? min : undefined}\n        max={type === \"number\" ? max : undefined}\n        disabled={!isEdit}\n        autoComplete={\n          type === \"email\"\n            ? \"email\"\n            : type === \"password\"\n              ? \"current-password\"\n              : \"off\"\n        }\n        className={clsx(\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\n          error && !flag\n            ? \"border-red-500 bg-red-50\"\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\n        )}\n      />\n      {error && !flag && <FormErrorMessage error={error} />}\n    </div>\n  );\n}\n",
          "formMultiSelect.tsx": "import { X } from \"lucide-react\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\n\r\ninterface FormMultiSelectProps {\r\n  label: string;\r\n  name: \"commonAreas\" | \"nearbyServices\";\r\n  selectedItems: { id: number; name: string }[];\r\n  options: { id: number; name: string }[];\r\n  onSelect: (\r\n    e: React.ChangeEvent<HTMLSelectElement>,\r\n    name: \"commonAreas\" | \"nearbyServices\"\r\n  ) => void;\r\n  onRemove: (id: number, name: \"commonAreas\" | \"nearbyServices\") => void;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormMultiSelect({\r\n  label,\r\n  name,\r\n  selectedItems,\r\n  options,\r\n  onSelect,\r\n  onRemove,\r\n  tooltipText,\r\n}: FormMultiSelectProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n      <select\r\n        id={name}\r\n        name={name}\r\n        onChange={(e) => onSelect(e, name)}\r\n        className=\"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary border-premium-borderColor dark:border-premium-borderColorHover\"\r\n      >\r\n        <option value=\"\">Seleccione {label.toLowerCase()}</option>\r\n        {options.map((option) => (\r\n          <option key={option.id} value={option.id}>\r\n            {option.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <div className=\"mt-2 flex flex-wrap\">\r\n        {selectedItems.map((item) => (\r\n          <div\r\n            key={item.id}\r\n            className=\"m-1 flex items-center rounded-full bg-premium-primary px-3 py-1 text-white dark:bg-premium-primaryLight\"\r\n          >\r\n            {item.name}\r\n            <button\r\n              className=\"ml-2 text-white hover:text-premium-textPrimary\"\r\n              onClick={() => onRemove(item.id, name)}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "formSearchAddress.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { MapPin } from \"lucide-react\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormSearchAddressProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSelect: (placeId: string, description: string) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  isLoaded: boolean;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormSearchAddress({\r\n  label,\r\n  value,\r\n  onChange,\r\n  onSelect,\r\n  error,\r\n  isLoaded,\r\n  tooltipText,\r\n}: FormSearchAddressProps) {\r\n  const [suggestions, setSuggestions] = useState<\r\n    { place_id: string; description: string }[]\r\n  >([]);\r\n  const [isListVisible, setIsListVisible] = useState(false);\r\n  const autocompleteServiceRef =\r\n    useRef<google.maps.places.AutocompleteService | null>(null);\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        listRef.current &&\r\n        !listRef.current.contains(event.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsListVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isLoaded &&\r\n      typeof window !== \"undefined\" &&\r\n      typeof window.google !== \"undefined\" &&\r\n      window.google.maps?.places &&\r\n      !autocompleteServiceRef.current\r\n    ) {\r\n      autocompleteServiceRef.current =\r\n        new window.google.maps.places.AutocompleteService();\r\n    }\r\n  }, [isLoaded]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.value;\r\n    onChange(newValue);\r\n\r\n    if (newValue.trim() && autocompleteServiceRef.current) {\r\n      autocompleteServiceRef.current.getPlacePredictions(\r\n        {\r\n          input: newValue,\r\n          componentRestrictions: { country: \"CO\" },\r\n        },\r\n        (predictions) => {\r\n          if (predictions) {\r\n            setSuggestions(\r\n              predictions.map((prediction) => ({\r\n                place_id: prediction.place_id,\r\n                description: prediction.description,\r\n              }))\r\n            );\r\n            setIsListVisible(true);\r\n          } else {\r\n            console.warn(\"[Predictions] No predictions found\");\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      setSuggestions([]);\r\n    }\r\n  };\r\n\r\n  const handleSelect = (placeId: string, description: string) => {\r\n    onSelect(placeId, description);\r\n    setIsListVisible(false);\r\n    setSuggestions([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <label\r\n        htmlFor=\"searchAddress\"\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <input\r\n        ref={inputRef}\r\n        id=\"searchAddress\"\r\n        type=\"text\"\r\n        name=\"address\"\r\n        defaultValue={value}\r\n        onChange={(e) => {\r\n          handleInputChange(e);\r\n        }}\r\n        placeholder=\"Ingrese la dirección\"\r\n        autoComplete=\"street-address\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary focus:outline-none focus:ring-2 focus:ring-premium-primary\",\r\n          error\r\n            ? \"border-red-500 bg-red-50\"\r\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n      />\r\n\r\n      {isListVisible && suggestions.length > 0 && (\r\n        <ul\r\n          ref={listRef}\r\n          className=\"absolute z-10 w-full border border-premium-borderColor dark:border-premium-borderColorHover \r\n          bg-premium-background dark:bg-premium-backgroundLight rounded-md shadow-lg\"\r\n        >\r\n          {suggestions.map((suggestion) => (\r\n            <li\r\n              key={suggestion.place_id}\r\n              onClick={() =>\r\n                handleSelect(suggestion.place_id, suggestion.description)\r\n              }\r\n              className=\"cursor-pointer flex items-center gap-2 p-2 text-premium-textPrimary dark:text-premium-textPrimary hover:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark \r\n              transition-colors rounded-md\"\r\n            >\r\n              <MapPin className=\"h-4 w-4 text-premium-primary\" />\r\n              {suggestion.description}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {error && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formSearchEmail.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Mail } from \"lucide-react\";\r\nimport { useSearchEmails } from \"@/app/hooks/users/useSearchEmails\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormSearchEmailProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSelect: (email: string, ownerId: number | undefined) => void;\r\n  error?: string;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormSearchEmail({\r\n  label,\r\n  value,\r\n  onChange,\r\n  onSelect,\r\n  error,\r\n  tooltipText,\r\n}: FormSearchEmailProps) {\r\n  const [isListVisible, setIsListVisible] = useState(false);\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const { emails, loading, fetchEmails } = useSearchEmails();\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        listRef.current &&\r\n        !listRef.current.contains(event.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsListVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleInputChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const newValue = e.target.value;\r\n      onChange(newValue);\r\n\r\n      if (newValue !== value) {\r\n        onSelect(newValue, undefined);\r\n      }\r\n\r\n      if (newValue.trim()) {\r\n        fetchEmails(newValue);\r\n        setIsListVisible(true);\r\n      } else {\r\n        setIsListVisible(false);\r\n      }\r\n    },\r\n    [onChange, fetchEmails, value]\r\n  );\r\n\r\n  const handleSelect = (email: string, ownerId: number) => {\r\n    onSelect(email, ownerId);\r\n    setIsListVisible(false);\r\n  };\r\n\r\n  const filteredEmails = useMemo(() => emails, [emails]);\r\n\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor=\"ownerEmail\"\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <input\r\n        id=\"ownerEmail\"\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        name=\"ownerEmail\"\r\n        value={value}\r\n        onChange={handleInputChange}\r\n        placeholder=\"Ingrese el correo del propietario\"\r\n        autoComplete=\"email\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary focus:outline-none focus:ring-2 focus:ring-premium-primary\",\r\n          error\r\n            ? \"border-red-500 bg-red-50\"\r\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n      />\r\n\r\n      {isListVisible && filteredEmails.length > 0 && (\r\n        <div className=\"relative\">\r\n          <ul\r\n            ref={listRef}\r\n            className=\"absolute z-10 w-full border border-premium-borderColor dark:border-premium-borderColorHover \r\n       bg-premium-background dark:bg-premium-backgroundLight rounded-md shadow-lg\"\r\n          >\r\n            {loading ? (\r\n              <li className=\"p-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\">\r\n                Cargando...\r\n              </li>\r\n            ) : (\r\n              filteredEmails.map((user) => (\r\n                <li\r\n                  key={user.id}\r\n                  onClick={() => handleSelect(user.email, user.id)}\r\n                  className=\"cursor-pointer flex items-center gap-2 p-2 text-premium-textPrimary dark:text-premium-textPrimary hover:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark \r\n                transition-colors rounded-md\"\r\n                >\r\n                  <Mail className=\"h-4 w-4 text-premium-primary\" />\r\n                  {user.email}\r\n                </li>\r\n              ))\r\n            )}\r\n          </ul>\r\n        </div>\r\n      )}\r\n      {error && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formSelect.tsx": "import clsx from \"clsx\";\nimport TooltipIcon from \"./tooltipIcon\";\nimport FormErrorMessage from \"../formErrorMessage\";\n\ninterface FormSelectProps {\n  label: string;\n  name: string;\n  value: string | number;\n  options: { id: number | string; name: string }[];\n  onChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\n  error?: string;\n  flag?: boolean;\n  tooltipText?: string;\n}\n\nexport default function FormSelect({\n  label,\n  name,\n  value,\n  options,\n  onChange,\n  error,\n  flag,\n  tooltipText,\n}: FormSelectProps) {\n  return (\n    <div>\n      <label\n        htmlFor={name}\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\n      >\n        {label}\n        {error !== undefined && \" *\"}\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\n      </label>\n      <select\n        id={name}\n        name={name}\n        value={value}\n        onChange={onChange}\n        className={clsx(\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\n          error && !flag\n            ? \"border-red-500 bg-red-50\"\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\n        )}\n      >\n        <option value=\"\">Seleccione {label.toLowerCase()}</option>\n        {options.map((option) => (\n          <option key={option.id} value={option.id.toString()}>\n            {option.name}\n          </option>\n        ))}\n      </select>\n      {error && !flag && <FormErrorMessage error={error} />}\n    </div>\n  );\n}\n",
          "formTextArea.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormTextareaProps {\r\n  label: string;\r\n  name: string;\r\n  value: string;\r\n  placeholder: string;\r\n  onChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  rows?: number;\r\n  maxLength?: number;\r\n  isEdit?: boolean;\r\n}\r\n\r\nexport default function FormTextarea({\r\n  label,\r\n  name,\r\n  value,\r\n  placeholder,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  rows = 4,\r\n  maxLength,\r\n  isEdit,\r\n}: FormTextareaProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n      <textarea\r\n        id={name}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        placeholder={placeholder}\r\n        rows={rows}\r\n        maxLength={maxLength}\r\n        disabled={isEdit}\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\r\n          error && !flag && \"border-red-500 bg-red-50\",\r\n          !error &&\r\n            \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n      />\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "modalAlert.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { Info } from \"lucide-react\";\n\ninterface ModalAlertProps {\n  title: string;\n  message: string;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function ModalAlert({\n  title,\n  message,\n  isOpen,\n  onClose,\n}: ModalAlertProps) {\n  const [isVisible, setIsVisible] = useState(isOpen);\n\n  useEffect(() => {\n    setIsVisible(isOpen);\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n\n  const handleClose = () => {\n    setIsVisible(false);\n    setTimeout(onClose, 300);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div\n        className={clsx(\n          \"transform transition-transform duration-300 w-96 rounded-lg bg-premium-backgroundAlt p-6 shadow-lg dark:bg-premium-backgroundDark\",\n          isOpen ? \"scale-100 opacity-100\" : \"scale-95 opacity-0\"\n        )}\n      >\n        <div className=\"flex flex-col items-center text-center\">\n          <Info className=\"h-10 w-10 text-premium-primary dark:text-premium-primaryLight\" />\n\n          <h2 className=\"mb-2 mt-4 text-lg font-semibold text-premium-textPrimary dark:text-premium-textSecondary\">\n            {title}\n          </h2>\n\n          <p className=\"mb-6 text-sm text-premium-textSecondary dark:text-premium-textPlaceholder\">\n            {message}\n          </p>\n        </div>\n\n        <button\n          onClick={handleClose}\n          className=\"w-full rounded-md bg-premium-primary py-2 text-white transition hover:bg-premium-primaryDark dark:bg-premium-primary dark:hover:bg-premium-primaryDark\"\n        >\n          Aceptar\n        </button>\n      </div>\n    </div>\n  );\n}\n",
          "modalConfirmation.tsx": "import { useEffect, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { CircleCheck, X } from \"lucide-react\";\n\ninterface ModalConfirmationProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  confirmClassName?: string;\n}\n\nexport default function ModalConfirmation({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmLabel = \"Confirmar\",\n  cancelLabel = \"Cancelar\",\n  confirmClassName,\n}: ModalConfirmationProps) {\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n      setIsConfirming(false);\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n\n  const handleConfirm = () => {\n    setIsConfirming(true);\n    onConfirm();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"dark:bg-premium-backgroundDarkAlt relative w-full max-w-sm rounded-lg bg-premium-backgroundAlt p-6 shadow-lg\">\n        <button\n          disabled={isConfirming}\n          className=\"absolute right-3 top-3 text-premium-textPrimary hover:text-premium-primary dark:text-premium-textSecondary dark:hover:text-premium-primaryLight disabled:opacity-50\"\n          onClick={onClose}\n          aria-label=\"Close modal\"\n        >\n          <X className=\"h-5 w-5\" />\n        </button>\n\n        <div className=\"mb-4 flex justify-center text-premium-primary dark:text-premium-primaryLight\">\n          <CircleCheck className=\"h-10 w-10 text-premium-primary\" />\n        </div>\n\n        <h3 className=\"mb-2 text-center text-lg font-semibold text-premium-textPrimary dark:text-premium-textSecondary\">\n          {title}\n        </h3>\n\n        <p className=\"mb-6 text-center text-sm text-premium-textSecondary dark:text-gray-400\">\n          {message}\n        </p>\n\n        <div className=\"flex justify-center gap-4\">\n          <button\n            disabled={isConfirming}\n            className=\"rounded-md bg-premium-secondary px-4 py-2 text-white transition hover:bg-premium-secondaryLight hover:opacity-90 dark:bg-premium-secondaryDark dark:hover:bg-premium-secondary disabled:opacity-60\"\n            onClick={onClose}\n          >\n            {cancelLabel}\n          </button>\n\n          <button\n            disabled={isConfirming}\n            className={clsx(\n              \"rounded-md px-4 py-2 text-white transition disabled:opacity-60\",\n              confirmClassName ||\n                \"bg-premium-primary hover:bg-premium-primaryDark dark:bg-premium-primary dark:hover:bg-premium-primaryDark\"\n            )}\n            onClick={handleConfirm}\n          >\n            {confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
          "modalFooter.tsx": "import clsx from \"clsx\";\n\ninterface ModalFooterProps {\n  onClose: () => void;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  formId?: string;\n  confirmClassName?: string;\n}\n\nexport default function ModalFooter({\n  onClose,\n  confirmLabel = \"Confirmar\",\n  cancelLabel = \"Cancelar\",\n  formId,\n  confirmClassName,\n}: ModalFooterProps) {\n  return (\n    <div className=\"flex justify-end border-t border-premium-borderColor p-4 dark:border-premium-borderColorHover\">\n      <button\n        type=\"button\"\n        onClick={onClose}\n        className=\"mr-2 transform rounded-lg bg-premium-textPlaceholder px-4 py-2 text-white transition duration-300 hover:scale-105 hover:bg-premium-borderColor dark:bg-premium-secondary dark:hover:bg-premium-secondaryDark\"\n      >\n        {cancelLabel}\n      </button>\n      <button\n        type=\"submit\"\n        form={formId}\n        className={clsx(\n          \"transform rounded-lg px-4 py-2 text-white transition duration-300 hover:scale-105\",\n          confirmClassName ??\n            \"bg-premium-primary hover:bg-premium-primaryDark dark:bg-premium-primaryLight dark:hover:bg-premium-primaryDark\"\n        )}\n      >\n        {confirmLabel}\n      </button>\n    </div>\n  );\n}\n",
          "modalHeader.tsx": "interface ModalHeaderProps {\n  title: string;\n  onClose: () => void;\n}\n\nexport default function ModalHeader({ title, onClose }: ModalHeaderProps) {\n  return (\n    <div className=\"flex items-center justify-between border-b border-premium-borderColor px-6 py-3 dark:border-premium-borderColorHover\">\n      <h5 className=\"text-xl font-semibold text-premium-primary dark:text-premium-primaryLight\">\n        {title}\n      </h5>\n      <button\n        type=\"button\"\n        onClick={onClose}\n        className=\"text-3xl text-premium-secondary hover:text-premium-primary dark:text-premium-textPrimary\"\n      >\n        &times;\n      </button>\n    </div>\n  );\n}\n",
          "tooltipIcon.tsx": "import { Info } from \"lucide-react\";\r\n\r\ninterface TooltipIconProps {\r\n  tooltipText: string;\r\n}\r\n\r\nexport default function TooltipIcon({ tooltipText }: TooltipIconProps) {\r\n  return (\r\n    <span className=\"group relative\">\r\n      <Info className=\"h-4 w-4 cursor-pointer text-gray-500 dark:text-gray-400\" />\r\n      <div className=\"absolute z-10 mt-2 hidden w-64 flex-col items-center rounded-md border border-premium-borderColor bg-premium-backgroundLight p-2 text-premium-textPrimary shadow-md group-hover:flex dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary\">\r\n        <p className=\"text-xs\">{tooltipText}</p>\r\n      </div>\r\n    </span>\r\n  );\r\n}\r\n"
        },
        "formErrorMessage.tsx": "import { CircleAlert } from \"lucide-react\";\r\n\r\ninterface FormErrorMessageProps {\r\n  error?: string;\r\n}\r\n\r\nexport default function FormErrorMessage({ error }: FormErrorMessageProps) {\r\n  if (!error) return null;\r\n\r\n  return (\r\n    <div className=\"mt-1 flex items-center gap-2 text-xs text-red-500\">\r\n      <CircleAlert className=\"h-4 w-4\" />\r\n      {error}\r\n    </div>\r\n  );\r\n}\r\n",
        "home": {
          "formCheckboxToggle.tsx": "interface FormCheckboxToggleProps {\r\n  label: string;\r\n  name: string;\r\n  checked: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}\r\n\r\nexport default function FormCheckboxToggle({\r\n  label,\r\n  name,\r\n  checked,\r\n  onChange,\r\n}: FormCheckboxToggleProps) {\r\n  return (\r\n    <>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"flex items-center justify-between w-full cursor-pointer rounded-md border border-client-accent px-3 py-2 text-client-textSecondary\"\r\n      >\r\n        <span>{label}</span>\r\n\r\n        <input\r\n          id={name}\r\n          type=\"checkbox\"\r\n          name={name}\r\n          checked={checked}\r\n          onChange={(e) => onChange(e.target.checked)}\r\n          className=\"relative h-6 w-12 cursor-pointer appearance-none rounded-full bg-client-primaryLight transition duration-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-transform after:content-[''] checked:bg-client-accent checked:after:translate-x-6\"\r\n        />\r\n      </label>\r\n    </>\r\n  );\r\n}\r\n",
          "formDatePicker.tsx": "import \"react-datepicker/dist/react-datepicker.css\";\r\nimport clsx from \"clsx\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormDatePickerProps {\r\n  label: string;\r\n  name: string;\r\n  value: Date | null;\r\n  onChange: (date: Date | null) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  dateMin?: Date;\r\n  dateMax?: Date;\r\n  isAccent?: boolean;\r\n}\r\n\r\nexport default function FormDatePicker({\r\n  label,\r\n  name,\r\n  value,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  dateMin,\r\n  dateMax,\r\n  isAccent = false,\r\n}: FormDatePickerProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-client-text\"\r\n      >\r\n        {label}\r\n        {error && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <DatePicker\r\n        id={name}\r\n        name={name}\r\n        selected={value}\r\n        onChange={onChange}\r\n        minDate={dateMin || new Date()}\r\n        maxDate={dateMax}\r\n        showYearDropdown\r\n        scrollableYearDropdown\r\n        yearDropdownItemNumber={100}\r\n        dateFormat=\"dd/MM/yyyy\"\r\n        placeholderText=\"dd/mm/yyyy\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-client-backgroundLight px-3 py-2 text-client-text placeholder-client-textPlaceholder focus:outline-none\",\r\n          error && !flag && \"border-red-500\",\r\n          isAccent\r\n            ? \"border-client-accent focus:border-client-accentHover\"\r\n            : \"border-client-secondaryLight focus:border-client-secondaryHover\"\r\n        )}\r\n        wrapperClassName=\"w-full\"\r\n      />\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formDisplay.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\n\r\ninterface FormDisplayProps {\r\n  label: string;\r\n  value: string | number;\r\n  tooltipText?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport default function FormDisplay({\r\n  label,\r\n  value,\r\n  tooltipText,\r\n  rows = 1,\r\n}: FormDisplayProps) {\r\n  return (\r\n    <div>\r\n      <label className=\"mb-2 flex items-center gap-2 text-client-text\">\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <div\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-client-backgroundLight px-3 py-2 text-client-text border-client-accent\",\r\n          rows > 1 ? `h-${rows * 8} overflow-y-auto` : \"h-auto\"\r\n        )}\r\n        style={{ minHeight: `${rows * 1.5}rem` }}\r\n      >\r\n        {value || \"No especificado\"}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "formInput.tsx": "import { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Eye, EyeOff } from \"lucide-react\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormInputProps {\r\n  id?: string;\r\n  label: string;\r\n  type: string;\r\n  name: string;\r\n  value: string | number;\r\n  placeholder: string;\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  maxLength?: number;\r\n  min?: number;\r\n  max?: number;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  isEdit?: boolean;\r\n  isAccent?: boolean;\r\n}\r\n\r\nexport default function FormInput({\r\n  id,\r\n  label,\r\n  type,\r\n  value,\r\n  placeholder,\r\n  onChange,\r\n  name,\r\n  maxLength,\r\n  min,\r\n  max,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  isEdit = true,\r\n  isAccent = false,\r\n}: FormInputProps) {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const formattedValue =\r\n    type === \"number\" && typeof value === \"number\"\r\n      ? formatNumber(value)\r\n      : value;\r\n\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={id ? id : name}\r\n        className=\"mb-2 flex items-center gap-2 text-client-text\"\r\n      >\r\n        {label}\r\n        {error && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <div className=\"relative\">\r\n        <input\r\n          id={id ? id : name}\r\n          type={type === \"password\" && showPassword ? \"text\" : type}\r\n          name={name}\r\n          value={formattedValue}\r\n          onChange={onChange}\r\n          placeholder={placeholder}\r\n          maxLength={type === \"text\" ? maxLength : undefined}\r\n          min={type === \"number\" ? min : undefined}\r\n          max={type === \"number\" ? max : undefined}\r\n          disabled={!isEdit}\r\n          autoComplete={\r\n            type === \"email\"\r\n              ? \"email\"\r\n              : type === \"password\"\r\n                ? \"current-password\"\r\n                : \"off\"\r\n          }\r\n          className={clsx(\r\n            \"w-full rounded-md border bg-client-backgroundLight px-3 py-2 text-client-text placeholder-client-textPlaceholder focus:outline-none\",\r\n            error && !flag && \"border-red-500\",\r\n            isAccent\r\n              ? \"border-client-accent focus:border-x-client-accentHover\"\r\n              : \"border-client-secondaryLight focus:border-client-secondaryHover\"\r\n          )}\r\n        />\r\n\r\n        {type === \"password\" && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={togglePasswordVisibility}\r\n            className=\"absolute inset-y-0 right-0 flex items-center px-3 text-client-textSecondary\"\r\n          >\r\n            {showPassword ? (\r\n              <EyeOff className=\"h-5 w-5\" />\r\n            ) : (\r\n              <Eye className=\"h-5 w-5\" />\r\n            )}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formMultiSelect.tsx": "import { X } from \"lucide-react\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\n\r\ninterface FormMultiSelectProps {\r\n  label: string;\r\n  name: \"commonAreas\" | \"nearbyServices\";\r\n  selectedItems: { id: number; name: string }[];\r\n  options: { id: number; name: string }[];\r\n  onSelect: (\r\n    e: React.ChangeEvent<HTMLSelectElement>,\r\n    name: \"commonAreas\" | \"nearbyServices\"\r\n  ) => void;\r\n  onRemove: (id: number, name: \"commonAreas\" | \"nearbyServices\") => void;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormMultiSelect({\r\n  label,\r\n  name,\r\n  selectedItems,\r\n  options,\r\n  onSelect,\r\n  onRemove,\r\n  tooltipText,\r\n}: FormMultiSelectProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-client-text\"\r\n      >\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <select\r\n        id={name}\r\n        name={name}\r\n        onChange={(e) => onSelect(e, name)}\r\n        className=\"w-full rounded-md border bg-client-backgroundLight px-3 py-2 text-client-text border-client-accent\"\r\n      >\r\n        <option value=\"\">Seleccione {label.toLowerCase()}</option>\r\n        {options.map((option) => (\r\n          <option key={option.id} value={option.id}>\r\n            {option.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <div className=\"mt-2 flex flex-wrap\">\r\n        {selectedItems.map((item) => (\r\n          <div\r\n            key={item.id}\r\n            className=\"m-1 flex items-center rounded-full bg-client-accent px-3 py-1 text-white\"\r\n          >\r\n            {item.name}\r\n            <button\r\n              className=\"ml-2 text-white hover:text-client-secondary\"\r\n              onClick={() => onRemove(item.id, name)}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "formSearchAddress.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { MapPin } from \"lucide-react\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormSearchAddressProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSelect: (placeId: string, description: string) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  isLoaded: boolean;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormSearchAddress({\r\n  label,\r\n  value,\r\n  onChange,\r\n  onSelect,\r\n  error,\r\n  isLoaded,\r\n  tooltipText,\r\n}: FormSearchAddressProps) {\r\n  const [suggestions, setSuggestions] = useState<\r\n    { place_id: string; description: string }[]\r\n  >([]);\r\n  const [isListVisible, setIsListVisible] = useState(false);\r\n  const autocompleteServiceRef =\r\n    useRef<google.maps.places.AutocompleteService | null>(null);\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        listRef.current &&\r\n        !listRef.current.contains(event.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsListVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isLoaded &&\r\n      typeof window !== \"undefined\" &&\r\n      typeof window.google !== \"undefined\" &&\r\n      window.google.maps?.places &&\r\n      !autocompleteServiceRef.current\r\n    ) {\r\n      autocompleteServiceRef.current =\r\n        new window.google.maps.places.AutocompleteService();\r\n    }\r\n  }, [isLoaded]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.value;\r\n    onChange(newValue);\r\n\r\n    if (newValue.trim() && autocompleteServiceRef.current) {\r\n      autocompleteServiceRef.current.getPlacePredictions(\r\n        {\r\n          input: newValue,\r\n          componentRestrictions: { country: \"CO\" },\r\n        },\r\n        (predictions) => {\r\n          if (predictions) {\r\n            setSuggestions(\r\n              predictions.map((prediction) => ({\r\n                place_id: prediction.place_id,\r\n                description: prediction.description,\r\n              }))\r\n            );\r\n            setIsListVisible(true);\r\n          } else {\r\n            console.warn(\"[Predictions] No predictions found\");\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      setSuggestions([]);\r\n    }\r\n  };\r\n\r\n  const handleSelect = (placeId: string, description: string) => {\r\n    onSelect(placeId, description);\r\n    setIsListVisible(false);\r\n    setSuggestions([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <label\r\n        htmlFor=\"searchAddress\"\r\n        className=\"mb-2 flex items-center gap-2 text-client-text\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <input\r\n        ref={inputRef}\r\n        id=\"searchAddress\"\r\n        type=\"text\"\r\n        name=\"address\"\r\n        defaultValue={value}\r\n        onChange={(e) => {\r\n          handleInputChange(e);\r\n        }}\r\n        placeholder=\"Ingrese la dirección\"\r\n        autoComplete=\"street-address\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-client-backgroundLight px-3 py-2 focus:outline-none focus:ring-2 focus:ring-client-primary text-client-text\",\r\n          error ? \"border-red-500\" : \"border-client-accent\"\r\n        )}\r\n      />\r\n\r\n      {isListVisible && suggestions.length > 0 && (\r\n        <ul\r\n          ref={listRef}\r\n          className=\"absolute z-10 w-full border border-client-accent bg-client-backgroundLight rounded-md shadow-lg\"\r\n        >\r\n          {suggestions.map((suggestion) => (\r\n            <li\r\n              key={suggestion.place_id}\r\n              onClick={() =>\r\n                handleSelect(suggestion.place_id, suggestion.description)\r\n              }\r\n              className=\"cursor-pointer flex items-center gap-2 p-2 text-client-text hover:bg-client-backgroundAlt transition-colors rounded-md\"\r\n            >\r\n              <MapPin className=\"h-4 w-4 text-client-accent\" />\r\n              {suggestion.description}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {error && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formSelect.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormSelectProps {\r\n  label: string;\r\n  name: string;\r\n  value: string | number;\r\n  options: { id: number | string; name: string }[];\r\n  onChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  isAccent?: boolean;\r\n}\r\n\r\nexport default function FormSelect({\r\n  label,\r\n  name,\r\n  value,\r\n  options,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  isAccent = false,\r\n}: FormSelectProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-client-text\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <select\r\n        id={name}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-client-backgroundLight px-3 py-2 text-client-text placeholder-client-textPlaceholder focus:outline-none\",\r\n          error && !flag && \"border-red-500\",\r\n          isAccent\r\n            ? \"border-client-accent focus:border-client-accentHover\"\r\n            : \"border-client-secondaryLight focus:border-client-secondaryHover\"\r\n        )}\r\n      >\r\n        <option value=\"\">Seleccione {label.toLowerCase()}</option>\r\n        {options.map((option) => (\r\n          <option key={option.id} value={option.id.toString()}>\r\n            {option.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "formTextArea.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"../formErrorMessage\";\r\n\r\ninterface FormTextareaProps {\r\n  label: string;\r\n  name: string;\r\n  value: string;\r\n  placeholder: string;\r\n  onChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  rows?: number;\r\n  maxLength?: number;\r\n  isEdit?: boolean;\r\n  isAccent?: boolean;\r\n}\r\n\r\nexport default function FormTextarea({\r\n  label,\r\n  name,\r\n  value,\r\n  placeholder,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  rows = 4,\r\n  maxLength,\r\n  isEdit = true,\r\n  isAccent = false,\r\n}: FormTextareaProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-client-text\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <textarea\r\n        id={name}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        placeholder={placeholder}\r\n        rows={rows}\r\n        maxLength={maxLength}\r\n        disabled={!isEdit}\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-client-backgroundLight px-3 py-2 text-client-text placeholder-client-textPlaceholder focus:outline-none\",\r\n          error && !flag && \"border-red-500\",\r\n          isAccent\r\n            ? \"border-client-accent focus:border-client-accentHover\"\r\n            : \"border-client-secondaryLight focus:border-client-secondaryHover\"\r\n        )}\r\n      />\r\n\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
          "modalConfirmation.tsx": "import { useEffect, useState } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { CircleCheck, X } from \"lucide-react\";\r\n\r\ninterface ModalConfirmationProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  title: string;\r\n  message: string;\r\n  confirmLabel?: string;\r\n  cancelLabel?: string;\r\n  confirmClassName?: string;\r\n}\r\n\r\nexport default function ModalConfirmation({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  confirmLabel = \"Confirmar\",\r\n  cancelLabel = \"Cancelar\",\r\n  confirmClassName,\r\n}: ModalConfirmationProps) {\r\n  const [isConfirming, setIsConfirming] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = \"hidden\";\r\n      setIsConfirming(false);\r\n    } else {\r\n      document.body.style.overflow = \"auto\";\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = \"auto\";\r\n    };\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleConfirm = () => {\r\n    setIsConfirming(true);\r\n    onConfirm();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-20 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"bg-client-backgroundAlt relative w-full max-w-sm rounded-lg p-6 shadow-lg\">\r\n        <button\r\n          className=\"absolute right-3 top-3 text-client-secondary hover:text-client-secondaryHover\"\r\n          onClick={onClose}\r\n          aria-label=\"Close modal\"\r\n          disabled={isConfirming}\r\n        >\r\n          <X className=\"h-5 w-5\" />\r\n        </button>\r\n\r\n        <div className=\"mb-4 flex justify-center\">\r\n          <CircleCheck className=\"h-10 w-10 text-client-accent\" />\r\n        </div>\r\n\r\n        <h3 className=\"mb-2 text-center text-lg font-semibold text-client-text\">\r\n          {title}\r\n        </h3>\r\n\r\n        <p className=\"mb-6 text-center text-sm text-client-secondary\">\r\n          {message}\r\n        </p>\r\n\r\n        <div className=\"flex justify-center gap-4\">\r\n          <button\r\n            disabled={isConfirming}\r\n            className=\"rounded-md bg-client-background px-4 py-2 text-white transition hover:bg-client-backgroundLight hover:opacity-90 disabled:opacity-60\"\r\n            onClick={onClose}\r\n          >\r\n            {cancelLabel}\r\n          </button>\r\n\r\n          <button\r\n            disabled={isConfirming}\r\n            className={clsx(\r\n              \"rounded-md px-4 py-2 text-white transition disabled:opacity-60\",\r\n              confirmClassName || \"bg-client-accent hover:bg-client-accentHover\"\r\n            )}\r\n            onClick={handleConfirm}\r\n          >\r\n            {confirmLabel}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "tooltipIcon.tsx": "import { Info } from \"lucide-react\";\r\n\r\ninterface TooltipIconProps {\r\n  tooltipText: string;\r\n}\r\n\r\nexport default function TooltipIcon({ tooltipText }: TooltipIconProps) {\r\n  return (\r\n    <span className=\"group relative\">\r\n      <Info className=\"h-4 w-4 cursor-pointer text-client-secondaryHover\" />\r\n      <div className=\"absolute z-10 mt-2 hidden w-64 flex-col items-center rounded-md border border-client-accent bg-client-backgroundLight p-2 text-client-text shadow-md group-hover:flex\">\r\n        <p className=\"text-xs\">{tooltipText}</p>\r\n      </div>\r\n    </span>\r\n  );\r\n}\r\n"
        }
      },
      "profile": {
        "clientProfilePage.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { User } from \"@/lib/definitios\";\r\nimport { useUserProfile } from \"@/app/hooks/user/useUserProfile\";\r\nimport { useUpdateUserProfile } from \"@/app/hooks/user/useUpdateUserProfile\";\r\nimport { useChangePassword } from \"@/app/hooks/auth/resetPassword/useChangePassword\";\r\nimport ModalConfirmation from \"../modals/home/modalConfirmation\";\r\nimport ModalChangePassword from \"./modalChangePassword\";\r\nimport Alert from \"../alert\";\r\nimport Loader from \"../loader\";\r\n\r\nconst ProfileForm = dynamic(() => import(\"../../ui/profile/profileForm\"), {\r\n  ssr: false,\r\n});\r\n\r\nexport default function ClientProfilePage() {\r\n  const { user, genders, loading, error } = useUserProfile();\r\n  const [userState, setUserState] = useState<User | null>(user);\r\n  const [showChangePasswordModal, setShowChangePasswordModal] = useState(false);\r\n  const [actionToConfirm, setActionToConfirm] = useState<\r\n    \"update\" | \"password\" | null\r\n  >(null);\r\n  const [passwordData, setPasswordData] = useState<{\r\n    currentPassword: string;\r\n    newPassword: string;\r\n  } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (user) setUserState(user);\r\n  }, [user]);\r\n\r\n  const {\r\n    updateUserProfile,\r\n    loading: updating,\r\n    error: updateError,\r\n    success,\r\n  } = useUpdateUserProfile();\r\n\r\n  const {\r\n    changePassword,\r\n    loading: changingPassword,\r\n    error: changePasswordError,\r\n    success: passwordSuccess,\r\n  } = useChangePassword();\r\n\r\n  const [pendingData, setPendingData] = useState<Partial<User> | null>(null);\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\r\n\r\n  const handleSubmitRequest = (data: Partial<User>) => {\r\n    setPendingData(data);\r\n    setActionToConfirm(\"update\");\r\n    setShowConfirmModal(true);\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    if (actionToConfirm === \"update\" && pendingData) {\r\n      const success = await updateUserProfile(pendingData);\r\n      if (success) {\r\n        setUserState((prev) => ({ ...prev!, ...pendingData }));\r\n      }\r\n      setPendingData(null);\r\n    }\r\n\r\n    if (actionToConfirm === \"password\" && passwordData) {\r\n      const success = await changePassword(passwordData);\r\n      setPasswordData(null);\r\n    }\r\n\r\n    setShowConfirmModal(false);\r\n    setActionToConfirm(null);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setPendingData(null);\r\n    setShowConfirmModal(false);\r\n  };\r\n\r\n  const openPasswordModal = () => {\r\n    setShowChangePasswordModal(true);\r\n  };\r\n\r\n  const handlePasswordChange = (data: {\r\n    currentPassword: string;\r\n    newPassword: string;\r\n  }) => {\r\n    if (!user) return;\r\n    setPasswordData(data);\r\n    setActionToConfirm(\"password\");\r\n    setShowConfirmModal(true);\r\n    setShowChangePasswordModal(false);\r\n  };\r\n\r\n  return (\r\n    <section className=\"w-full py-10\">\r\n      <div className=\"max-w-4xl mx-auto px-4\">\r\n        {success && (\r\n          <Alert type=\"success\" message=\"Datos actualizados correctamente\" />\r\n        )}\r\n\r\n        {updateError && <Alert type=\"error\" message={updateError} />}\r\n\r\n        {changePasswordError && (\r\n          <Alert type=\"error\" message={changePasswordError} />\r\n        )}\r\n\r\n        {passwordSuccess && (\r\n          <Alert\r\n            type=\"success\"\r\n            message=\"Contraseña actualizada correctamente\"\r\n          />\r\n        )}\r\n\r\n        <div className=\"bg-client-backgroundAlt p-10 rounded-2xl shadow my-12\">\r\n          <h2 className=\"text-3xl mb-8 font-bold text-center text-client-text\">\r\n            Mi perfil\r\n          </h2>\r\n\r\n          {loading && (\r\n            <p className=\"text-center text-client-text\">Cargando perfil...</p>\r\n          )}\r\n          {error && <p className=\"text-center text-red-500\">Error: {error}</p>}\r\n\r\n          {user && (\r\n            <div className=\"relative\">\r\n              {updating && (\r\n                <div className=\"absolute inset-0 z-10 bg-black bg-opacity-30 flex items-center justify-center rounded-2xl\">\r\n                  <Loader size={40} />\r\n                </div>\r\n              )}\r\n\r\n              {userState && (\r\n                <ProfileForm\r\n                  user={userState}\r\n                  genders={genders}\r\n                  onSubmitRequest={handleSubmitRequest}\r\n                />\r\n              )}\r\n\r\n              <div className=\"col-span-1 md:col-span-2 mt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={openPasswordModal}\r\n                  className=\"w-full rounded-md bg-client-text text-client-primary py-2 font-semibold hover:bg-client-textPlaceholder transition\"\r\n                >\r\n                  Cambiar contraseña\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <ModalChangePassword\r\n        isOpen={showChangePasswordModal}\r\n        onClose={() => setShowChangePasswordModal(false)}\r\n        onConfirmRequest={handlePasswordChange}\r\n      />\r\n\r\n      <ModalConfirmation\r\n        isOpen={showConfirmModal}\r\n        onClose={handleCancel}\r\n        onConfirm={handleConfirm}\r\n        title=\"Confirmar actualización\"\r\n        message=\"¿Estás seguro de que deseas actualizar tus datos personales?\"\r\n        confirmLabel=\"Confirmar\"\r\n        cancelLabel=\"Cancelar\"\r\n        confirmClassName=\"bg-client-accent hover:bg-client-accentHover\"\r\n      />\r\n    </section>\r\n  );\r\n}\r\n",
        "modalChangePassword.tsx": "\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport FormInput from \"../modals/home/formInput\";\r\n\r\ninterface ModalChangePasswordProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirmRequest: (data: {\r\n    currentPassword: string;\r\n    newPassword: string;\r\n  }) => void;\r\n}\r\n\r\nexport default function ModalChangePassword({\r\n  isOpen,\r\n  onClose,\r\n  onConfirmRequest,\r\n}: ModalChangePasswordProps) {\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"auto\";\r\n      setCurrentPassword(\"\");\r\n      setNewPassword(\"\");\r\n      setConfirmPassword(\"\");\r\n      setErrors({});\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = \"auto\";\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const handleValidate = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!currentPassword) newErrors.currentPassword = \"Campo requerido\";\r\n    if (!newPassword) newErrors.newPassword = \"Campo requerido\";\r\n    else if (newPassword.length < 8)\r\n      newErrors.newPassword = \"Debe tener mínimo 8 caracteres\";\r\n\r\n    if (newPassword !== confirmPassword)\r\n      newErrors.confirmPassword = \"Las contraseñas no coinciden\";\r\n\r\n    setErrors(newErrors);\r\n\r\n    if (Object.keys(newErrors).length === 0) {\r\n      onConfirmRequest({\r\n        currentPassword,\r\n        newPassword,\r\n      });\r\n    }\r\n  };\r\n\r\n  return isOpen ? (\r\n    <>\r\n      <div className=\"fixed inset-0 z-10 flex items-center justify-center bg-black bg-opacity-50\">\r\n        <div className=\"bg-client-backgroundAlt w-full max-w-md rounded-lg p-6 shadow-lg\">\r\n          <h2 className=\"text-xl font-bold text-center text-client-text mb-6\">\r\n            Cambiar contraseña\r\n          </h2>\r\n\r\n          <div className=\"space-y-4\">\r\n            <FormInput\r\n              label=\"Contraseña actual\"\r\n              name=\"currentPassword\"\r\n              type=\"password\"\r\n              value={currentPassword}\r\n              placeholder=\"Escribe tu contraseña actual\"\r\n              onChange={(e) => setCurrentPassword(e.target.value)}\r\n              error={errors.currentPassword}\r\n              isAccent\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Nueva contraseña\"\r\n              name=\"newPassword\"\r\n              type=\"password\"\r\n              value={newPassword}\r\n              placeholder=\"Mínimo 8 caracteres\"\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              error={errors.newPassword}\r\n              isAccent\r\n              isEdit={!!currentPassword}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Confirmar nueva contraseña\"\r\n              name=\"confirmPassword\"\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              placeholder=\"Repite la nueva contraseña\"\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n              error={errors.confirmPassword}\r\n              isAccent\r\n              isEdit={!!currentPassword}\r\n            />\r\n\r\n            <div className=\"flex flex-col gap-2 pt-2\">\r\n              <button\r\n                onClick={handleValidate}\r\n                className=\"w-full rounded-md bg-client-accent text-white py-2 font-semibold hover:bg-client-accentHover transition\"\r\n              >\r\n                Cambiar contraseña\r\n              </button>\r\n\r\n              <button\r\n                onClick={() => {\r\n                  onClose();\r\n                  setCurrentPassword(\"\");\r\n                  setNewPassword(\"\");\r\n                  setConfirmPassword(\"\");\r\n                  setErrors({});\r\n                }}\r\n                className=\"w-full rounded-md bg-client-background text-white py-2 font-semibold hover:bg-client-backgroundLight transition\"\r\n              >\r\n                Cerrar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  ) : null;\r\n}\r\n",
        "profileForm.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { User, Gender } from \"@/lib/definitios\";\r\nimport FormInput from \"../modals/home/formInput\";\r\nimport FormDatePicker from \"../modals/home/formDatePicker\";\r\nimport FormSelect from \"../modals/home/formSelect\";\r\n\r\ninterface ProfileFormProps {\r\n  user: User;\r\n  genders: Gender[];\r\n  onSubmitRequest: (data: Partial<User>) => void;\r\n}\r\n\r\nexport default function ProfileForm({\r\n  user,\r\n  genders,\r\n  onSubmitRequest,\r\n}: ProfileFormProps) {\r\n  const [form, setForm] = useState<User>(user);\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    const changed = JSON.stringify(form) !== JSON.stringify(user);\r\n    setHasChanges(changed);\r\n  }, [form, user]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  const handleGenderChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const selected = genders.find((g) => g.id.toString() === e.target.value);\r\n    if (selected) setForm({ ...form, gender: selected });\r\n  };\r\n\r\n  const handleBirthDate = (date: Date | null) => {\r\n    setForm({ ...form, birthdate: date ?? undefined });\r\n  };\r\n\r\n  const validate = (): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n    if (!form.names) newErrors.names = \"Este campo es obligatorio\";\r\n    if (!form.lastnames) newErrors.lastnames = \"Este campo es obligatorio\";\r\n\r\n    const phoneRegex = /^3\\d{9}$/;\r\n\r\n    if (!form.phoneNumber) {\r\n      newErrors.phoneNumber = \"El número de teléfono es obligatorio.\";\r\n    } else if (!phoneRegex.test(form.phoneNumber.replace(/\\s+/g, \"\"))) {\r\n      newErrors.phoneNumber = \"Número de teléfono no válido.\";\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!validate()) return;\r\n\r\n    onSubmitRequest({\r\n      identityDocument: form.identityDocument,\r\n      names: form.names,\r\n      lastnames: form.lastnames,\r\n      birthdate: form.birthdate,\r\n      phoneNumber: form.phoneNumber,\r\n      gender: {\r\n        id: form.gender?.id || 0,\r\n        name: form.gender?.name || \"\",\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n      <FormInput\r\n        label=\"Correo electrónico\"\r\n        name=\"email\"\r\n        value={form.email}\r\n        placeholder=\"Email\"\r\n        type=\"email\"\r\n        onChange={handleChange}\r\n        isEdit={false}\r\n        isAccent={true}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Número de documento\"\r\n        name=\"identityDocument\"\r\n        value={form.identityDocument ?? \"\"}\r\n        placeholder=\"Ej: 1234567890\"\r\n        type=\"text\"\r\n        onChange={handleChange}\r\n        error={errors.identityDocument}\r\n        flag\r\n        isAccent={true}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Nombres\"\r\n        name=\"names\"\r\n        value={form.names ?? \"\"}\r\n        placeholder=\"Tus nombres\"\r\n        type=\"text\"\r\n        onChange={handleChange}\r\n        error={errors.names}\r\n        isAccent={true}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Apellidos\"\r\n        name=\"lastnames\"\r\n        value={form.lastnames ?? \"\"}\r\n        placeholder=\"Tus apellidos\"\r\n        type=\"text\"\r\n        onChange={handleChange}\r\n        error={errors.lastnames}\r\n        isAccent={true}\r\n      />\r\n\r\n      <FormDatePicker\r\n        label=\"Fecha de nacimiento\"\r\n        name=\"birthDate\"\r\n        value={form.birthdate ? new Date(form.birthdate) : null}\r\n        onChange={handleBirthDate}\r\n        dateMax={\r\n          new Date(\r\n            new Date().getFullYear() - 18,\r\n            new Date().getMonth(),\r\n            new Date().getDate()\r\n          )\r\n        }\r\n        dateMin={new Date(new Date().getFullYear() - 120, 0, 1)}\r\n        error={errors.birthdate}\r\n        isAccent={true}\r\n      />\r\n\r\n      <FormInput\r\n        label=\"Número de teléfono\"\r\n        name=\"phoneNumber\"\r\n        value={form.phoneNumber ?? \"\"}\r\n        placeholder=\"Ej: 3001234567\"\r\n        type=\"text\"\r\n        onChange={handleChange}\r\n        error={errors.phoneNumber}\r\n        isAccent={true}\r\n      />\r\n\r\n      <FormSelect\r\n        label=\"Género\"\r\n        name=\"gender\"\r\n        value={form.gender?.id ?? \"\"}\r\n        options={genders.map((g) => ({ id: g.id, name: g.name }))}\r\n        onChange={handleGenderChange}\r\n        error={errors.gender}\r\n        isAccent={true}\r\n      />\r\n\r\n      <div className=\"col-span-1 md:col-span-2\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleSubmit}\r\n          disabled={!hasChanges}\r\n          className=\"w-full rounded-md bg-client-accent text-white py-2 font-semibold hover:bg-client-accentHover transition disabled:opacity-50\"\r\n        >\r\n          Actualizar datos\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n"
      },
      "projects": {
        "clientProject.tsx": "\"use client\";\r\n\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport ProjectView from \"@/app/ui/realEstate/project/projectView\";\r\n\r\nexport default function ClientProject({ id }: { id: string }) {\r\n  const projectId = decodeURIComponent(id);\r\n  const { project } = useProjectById(Number(projectId), true);\r\n\r\n  return <>{project && <ProjectView project={project} />}</>;\r\n}\r\n",
        "clientProjectPage.tsx": "\"use client\";\r\n\r\nimport { useGetBasicProjects } from \"@/app/hooks/projects/basic/useGetBasicProjects\";\r\nimport HeroSection from \"@/app/ui/home/heroSection\";\r\nimport ProjectsShowcase from \"@/app/ui/projects/projectsShowcase\";\r\nimport ProjectSkeletonList from \"@/app/ui/skeletons/projectSkeletonList\";\r\n\r\nexport default function ClientProjectsPage() {\r\n  const { projects, isLoading } = useGetBasicProjects();\r\n\r\n  return (\r\n    <div>\r\n      <HeroSection\r\n        srcImage=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/bim/EdificioSanCarlosFlorencia/EdificioFlorencia6.webp\"\r\n        altImage=\"Nuestros Proyectos\"\r\n        title=\"Nuestros Proyectos\"\r\n        description=\"Conoce nuestros proyectos\"\r\n        objectPosition=\"top\"\r\n      />\r\n\r\n      {isLoading ? (\r\n        <ProjectSkeletonList />\r\n      ) : projects.length > 0 ? (\r\n        <div className=\"px-6 py-10\">\r\n          {projects\r\n            .reduce(\r\n              (acc, _, index) => {\r\n                if (index % 4 === 0) {\r\n                  acc.push(projects.slice(index, index + 4));\r\n                }\r\n                return acc;\r\n              },\r\n              [] as (typeof projects)[]\r\n            )\r\n            .map((projectGroup, index, array) => (\r\n              <div key={index}>\r\n                <ProjectsShowcase\r\n                  projects={projectGroup}\r\n                  reverse={index % 2 === 1}\r\n                />\r\n                {index < array.length - 1 && (\r\n                  <hr className=\"mx-auto my-6 w-5/6 border-t border-white bg-transparent\" />\r\n                )}\r\n              </div>\r\n            ))}\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-center text-gray-500\">\r\n          No hay proyectos disponibles.\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
        "projectInfoCard.tsx": "import Link from \"next/link\";\r\nimport { ArrowUpRight } from \"lucide-react\";\r\n\r\ninterface ProjectInfoCardProps {\r\n  id: number;\r\n  name: string;\r\n  location: string;\r\n  area: number;\r\n  bedrooms: number;\r\n  bathrooms: number;\r\n}\r\n\r\nexport default function ProjectInfoCard({\r\n  id,\r\n  name,\r\n  location,\r\n  area,\r\n  bedrooms,\r\n  bathrooms,\r\n}: ProjectInfoCardProps) {\r\n  return (\r\n    <div className=\"absolute bottom-3 left-1/2 -translate-x-1/2 max-w-[360px] w-[calc(100%-1.5rem)] rounded-xl bg-zinc-800 text-white px-4 py-3 flex flex-col gap-1 shadow-md\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h3 className=\"text-lg font-bold\">{name}</h3>\r\n        </div>\r\n\r\n        <Link\r\n          href={`/proyectos/${id}`}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"bg-[#FBE6C2] w-9 h-9 flex items-center justify-center rounded-full hover:scale-105 transition-transform\"\r\n        >\r\n          <ArrowUpRight className=\"text-black w-4 h-4\" />\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"mt-1 flex items-center justify-between text-xs text-gray-300\">\r\n        <p className=\"text-sm text-gray-300\">{location}</p>\r\n\r\n        <div className=\"flex items-center divide-x divide-gray-600 text-xs text-gray-300\">\r\n          {typeof area === \"number\" && area > 0 && (\r\n            <p className=\"pr-2\">{area}m²</p>\r\n          )}\r\n          {typeof bedrooms === \"number\" && bedrooms > 0 && (\r\n            <p className=\"pl-2 pr-2\">{bedrooms} Hab.</p>\r\n          )}\r\n          {typeof bathrooms === \"number\" && bathrooms > 0 && (\r\n            <p className=\"pl-2\">{bathrooms} Baños.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "projectsGrid.tsx": "\"use client\";\r\n\r\nimport clsx from \"clsx\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport ImageCarousel from \"../home/imagesCarousel\";\r\n\r\ninterface ProjectsGridProps {\r\n  projects: ProjectView[];\r\n}\r\n\r\nconst gridClasses = [\r\n  \"col-span-2 row-span-2\",\r\n  \"col-start-3\",\r\n  \"col-start-4\",\r\n  \"col-span-2 col-start-3 row-start-2\",\r\n];\r\n\r\nexport default function ProjectsGrid({ projects }: ProjectsGridProps) {\r\n  if (!projects || projects.length === 0) {\r\n    return (\r\n      <p className=\"text-center text-client-text\">\r\n        No hay proyectos disponibles.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-5 auto-rows-[200px] lg:auto-rows-[300px] gap-4 px-4\">\r\n      {projects.map((project, index) => (\r\n        <div\r\n          key={project.id}\r\n          className={clsx(\r\n            \"relative flex items-center justify-center h-80 w-full rounded-lg overflow-hidden bg-gray-500\",\r\n            gridClasses[index % 4]\r\n          )}\r\n        >\r\n          <ImageCarousel\r\n            id={project.id}\r\n            images={project.images}\r\n            url=\"proyectos\"\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
        "projectsShowcase.tsx": "\"use client\";\r\n\r\nimport clsx from \"clsx\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport ImageCarousel from \"../home/imagesCarousel\";\r\nimport ProjectInfoCard from \"./projectInfoCard\";\r\n\r\ninterface ProjectsShowcaseProps {\r\n  projects: ProjectView[];\r\n  reverse?: boolean;\r\n}\r\n\r\nconst gridClasses = [\r\n  \"lg:col-span-2 lg:row-span-2\",\r\n  \"lg:col-start-3\",\r\n  \"lg:col-start-4\",\r\n  \"lg:col-start-3 lg:col-span-2 lg:row-start-2\",\r\n];\r\n\r\nconst reverseGridClasses = [\r\n  \"lg:col-start-1\",\r\n  \"lg:col-start-2\",\r\n  \"lg:col-span-2 lg:row-start-2\",\r\n  \"lg:col-span-2 lg:row-span-2 lg:col-start-3\",\r\n];\r\n\r\nconst layoutFor1 = [\"lg:col-span-4 lg:row-span-2\"];\r\n\r\nconst layoutFor2 = [\r\n  \"lg:col-span-2 lg:row-span-2\",\r\n  \"lg:col-span-2 lg:row-span-2 lg:col-start-3\",\r\n];\r\n\r\nconst layoutFor3 = [\r\n  \"lg:col-span-2 lg:row-span-2\",\r\n  \"lg:col-start-3 lg:row-span-2\",\r\n  \"lg:col-start-4 lg:row-span-2\",\r\n];\r\n\r\nexport default function ProjectsShowcase({\r\n  projects,\r\n  reverse = false,\r\n}: ProjectsShowcaseProps) {\r\n  const getLayoutClass = (index: number) => {\r\n    const length = projects.length;\r\n\r\n    if (length === 1) return layoutFor1[0];\r\n    if (length === 2) return layoutFor2[index];\r\n    if (length === 3) return layoutFor3[index];\r\n\r\n    return reverse ? reverseGridClasses[index % 4] : gridClasses[index % 4];\r\n  };\r\n\r\n  const hasTwoRows = (index: number): boolean => {\r\n    const className = getLayoutClass(index);\r\n    return className.includes(\"row-span-2\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 sm:grid-rows-2 auto-rows-fr gap-4 h-[600px] sm:h-[300px]\">\r\n      {projects.map((project, index) => (\r\n        <div\r\n          key={project.id}\r\n          className={clsx(\r\n            \"relative w-full rounded-lg overflow-hidden bg-gray-500 max-sm:row-span-2\",\r\n            getLayoutClass(index)\r\n          )}\r\n        >\r\n          <ImageCarousel\r\n            id={project.id}\r\n            images={project.images}\r\n            url=\"proyectos\"\r\n            {...(!hasTwoRows(index) && {\r\n              name: project.name,\r\n              showName: true,\r\n            })}\r\n          />\r\n\r\n          {hasTwoRows(index) && (\r\n            <ProjectInfoCard\r\n              id={project.id}\r\n              name={project.name}\r\n              location={project.cityName}\r\n              area={project.area ?? 0}\r\n              bedrooms={project.bedrooms ?? 0}\r\n              bathrooms={project.bathrooms ?? 0}\r\n            />\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "realEstate": {
        "clientProperty.tsx": "\"use client\";\r\n\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport ProjectView from \"@/app/ui/realEstate/project/projectView\";\r\n\r\nexport default function ClientProperty({ id }: { id: string }) {\r\n  const projectId = decodeURIComponent(id);\r\n  const { project } = useProjectById(Number(projectId), false);\r\n\r\n  return <>{project && <ProjectView project={project} />}</>;\r\n}\r\n",
        "clientRealStatePage.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useGetProperties } from \"@/app/hooks/realEstate/useGetProperties\";\r\nimport HeroSearch from \"@/app/ui/realEstate/heroSection/heroSearch\";\r\nimport FilterMapControls from \"@/app/ui/realEstate/filter/filterMapControls\";\r\n\r\nconst MapToggleButton = dynamic(\r\n  () => import(\"@/app/ui/realEstate/filter/mapToggleButton\"),\r\n  { ssr: false }\r\n);\r\nconst ProjectsContainer = dynamic(\r\n  () => import(\"@/app/ui/realEstate/projectsContainer\"),\r\n  { ssr: false, loading: () => null }\r\n);\r\n\r\nexport default function ClientRealEstatePage() {\r\n  const [selectedButtons, setSelectedButtons] = useState<\r\n    Record<string, number[]>\r\n  >({\r\n    cities: [],\r\n    propertyTypes: [],\r\n    housingTypes: [],\r\n    commonAreas: [],\r\n    nearbyServices: [],\r\n    bedrooms: [0],\r\n    bathrooms: [0],\r\n    lobbies: [0],\r\n    area: [1],\r\n  });\r\n\r\n  const [priceRange, setPriceRange] = useState({ min: 0, max: 0 });\r\n  const [areaRange, setAreaRange] = useState({ min: 0, max: 0 });\r\n  const [entriesPerPage] = useState(2);\r\n  const [filterOpen, setFilterOpen] = useState(false);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [bounds, setBounds] = useState<google.maps.LatLngBounds | null>(null);\r\n  const [projectTypeId, setProjectTypeId] = useState(2);\r\n  const [searchCoords, setSearchCoords] = useState<{\r\n    latitude: number;\r\n    longitude: number;\r\n  } | null>(null);\r\n  const [highlightCoords, setHighlightCoords] = useState<{\r\n    latitude: number;\r\n    longitude: number;\r\n  } | null>(null);\r\n  const [clearSearchInputSignal, setClearSearchInputSignal] = useState(false);\r\n\r\n  const { projects, totalEntries, fetchMoreProjects, isLoading } =\r\n    useGetProperties({\r\n      entriesPerPage,\r\n      selectedButtons,\r\n      projectTypeId,\r\n      bounds: showMap ? bounds : null,\r\n      showMap,\r\n      searchCoords,\r\n    });\r\n\r\n  useEffect(() => {\r\n    setPriceRange({ min: 0, max: 2500000000 });\r\n    setAreaRange({ min: 0, max: 5000 });\r\n    setSelectedButtons((prev) => ({ ...prev, price: [], area: [] }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (showMap) {\r\n      setSearchCoords(null);\r\n      setClearSearchInputSignal(true);\r\n      setBounds(null);\r\n    }\r\n  }, [showMap]);\r\n\r\n  const handleSelectCoords = (\r\n    coords: { latitude: number; longitude: number } | null\r\n  ) => {\r\n    if (!coords) {\r\n      setSearchCoords(null);\r\n      setHighlightCoords(null);\r\n      return;\r\n    }\r\n\r\n    if (showMap) {\r\n      setSearchCoords(null);\r\n      setHighlightCoords(coords);\r\n    } else {\r\n      setSearchCoords(coords);\r\n      setHighlightCoords(coords);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <HeroSearch\r\n        projectTypeId={projectTypeId}\r\n        setProjectTypeId={setProjectTypeId}\r\n        setSearchCoords={handleSelectCoords}\r\n        clearSearchInputSignal={clearSearchInputSignal}\r\n      />\r\n\r\n      <hr className=\"w-full border-client-accent\" />\r\n\r\n      <div\r\n        className={clsx(\"px-2 sm:px-6 md:px-20 pt-2 pb-14\", showMap && \"pb-7\")}\r\n      >\r\n        <FilterMapControls\r\n          filterOpen={filterOpen}\r\n          setFilterOpen={setFilterOpen}\r\n          showMap={showMap}\r\n          setShowMap={setShowMap}\r\n          totalEntries={totalEntries}\r\n        />\r\n      </div>\r\n\r\n      <ProjectsContainer\r\n        projects={projects}\r\n        totalEntries={totalEntries}\r\n        isLoading={isLoading}\r\n        fetchMoreProjects={fetchMoreProjects}\r\n        filterOpen={filterOpen}\r\n        showMap={showMap}\r\n        setFilterOpen={setFilterOpen}\r\n        priceRange={priceRange}\r\n        areaRange={areaRange}\r\n        selectedButtons={selectedButtons}\r\n        setSelectedButtons={setSelectedButtons}\r\n        setBounds={setBounds}\r\n        highlightCoords={highlightCoords}\r\n      />\r\n\r\n      <MapToggleButton showMap={showMap} setShowMap={setShowMap} />\r\n    </div>\r\n  );\r\n}\r\n",
        "filter": {
          "filterMapControls.tsx": "\"use client\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { ChevronDown, SlidersHorizontal, House, Map } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface FilterMapControlsProps {\r\n  filterOpen: boolean;\r\n  setFilterOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n  showMap: boolean;\r\n  setShowMap: React.Dispatch<React.SetStateAction<boolean>>;\r\n  totalEntries: number;\r\n}\r\n\r\nexport default function FilterMapControls({\r\n  filterOpen,\r\n  setFilterOpen,\r\n  showMap,\r\n  setShowMap,\r\n  totalEntries = 0,\r\n}: FilterMapControlsProps) {\r\n  const toggleFilterVisibility = useCallback(() => {\r\n    setFilterOpen((prev) => !prev);\r\n  }, [setFilterOpen]);\r\n\r\n  const handleToggleMap = useCallback(() => {\r\n    setShowMap((prev) => !prev);\r\n    setFilterOpen(false);\r\n  }, [setShowMap]);\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-x-2 sm:gap-x-4 mt-4 justify-between\">\r\n      <button\r\n        onClick={toggleFilterVisibility}\r\n        className=\"flex items-center space-x-2 whitespace-nowrap rounded-full bg-transparent border border-client-accent text-client-text hover:bg-client-backgroundLight px-6 py-2 transition-colors\"\r\n      >\r\n        <span>Filtro</span>\r\n\r\n        <SlidersHorizontal className=\"w-4 h-4\" />\r\n\r\n        <ChevronDown\r\n          className={clsx(\r\n            \"transition-transform duration-300\",\r\n            filterOpen && \"rotate-180\"\r\n          )}\r\n        />\r\n      </button>\r\n\r\n      <p className=\"text-client-text flex flex-col sm:flex-row items-center\">\r\n        <span>{totalEntries}</span>\r\n\r\n        <span className=\"sm:ml-1\">resultados</span>\r\n      </p>\r\n\r\n      <button\r\n        onClick={handleToggleMap}\r\n        className=\"flex items-center space-x-2 whitespace-nowrap rounded-full bg-transparent border border-client-accent text-client-text hover:bg-client-backgroundLight px-6 py-2 transition-colors\"\r\n      >\r\n        <span>{showMap ? \"Propiedades\" : \"Mapa\"}</span>\r\n\r\n        {showMap ? <House size={18} /> : <Map size={18} />}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n",
          "filterNumericCounter.tsx": "import dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\n\r\nconst ChevronDown = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\r\n);\r\n\r\ninterface NumericCounterProps {\r\n  label: string;\r\n  icon: React.ReactNode;\r\n  isOpen: boolean;\r\n  setIsOpen: (isOpen: boolean) => void;\r\n  value: number;\r\n  increment: () => void;\r\n  decrement: () => void;\r\n}\r\n\r\nexport default function FilterNumericCounter({\r\n  label,\r\n  icon,\r\n  isOpen,\r\n  setIsOpen,\r\n  value,\r\n  increment,\r\n  decrement,\r\n}: NumericCounterProps) {\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex transform cursor-pointer items-center justify-between transition-transform duration-200 hover:scale-105 hover:font-semibold text-white\"\r\n        onClick={() => setIsOpen(!isOpen)}\r\n      >\r\n        <div\r\n          className={clsx(\r\n            \"flex items-center space-x-2 text-lg font-medium\",\r\n            value > 0 && \"text-client-accent\"\r\n          )}\r\n        >\r\n          {icon}\r\n          <span>{label}</span>\r\n        </div>\r\n\r\n        <ChevronDown\r\n          className={clsx(\r\n            \"transform transition-transform duration-300\",\r\n            isOpen && \"rotate-180\"\r\n          )}\r\n        />\r\n      </div>\r\n\r\n      {isOpen && (\r\n        <div className=\"mt-2 flex items-center justify-center space-x-1 px-10 text-white\">\r\n          <button\r\n            onClick={() => value > 0 && decrement()}\r\n            className=\"flex h-8 w-8 items-center justify-center rounded-l-md transition-colors hover:bg-client-accentHover\"\r\n          >\r\n            -\r\n          </button>\r\n\r\n          <input\r\n            readOnly\r\n            type=\"text\"\r\n            value={value}\r\n            className=\"w-12 bg-transparent border border-client-accent text-center\"\r\n          />\r\n\r\n          <button\r\n            onClick={increment}\r\n            className=\"flex h-8 w-8 items-center justify-center rounded-r-md transition-colors hover:bg-client-accentHover\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
          "filterOption.tsx": "import dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\n\r\nconst ChevronDown = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\r\n);\r\n\r\ninterface FilterOptionProps {\r\n  label: string;\r\n  icon: React.ReactNode;\r\n  items: { id: number; name: string }[];\r\n  selectedItems: number[];\r\n  onToggleItem: (id: number) => void;\r\n  isOpen: boolean;\r\n  onToggleOpen: () => void;\r\n}\r\n\r\nexport default function FilterOption({\r\n  label,\r\n  icon,\r\n  items,\r\n  selectedItems,\r\n  onToggleItem,\r\n  isOpen,\r\n  onToggleOpen,\r\n}: FilterOptionProps) {\r\n  return (\r\n    <>\r\n      <div\r\n        role=\"button\"\r\n        aria-expanded={isOpen}\r\n        tabIndex={0}\r\n        className=\"mb-4 flex transform cursor-pointer items-center justify-between transition-transform duration-200 hover:scale-105 hover:font-semibold text-white\"\r\n        onClick={onToggleOpen}\r\n        onKeyDown={(e) => e.key === \"Enter\" && onToggleOpen()}\r\n      >\r\n        <div\r\n          className={clsx(\r\n            \"flex items-center space-x-2 text-lg font-medium\",\r\n            selectedItems.length && \"text-client-accent\"\r\n          )}\r\n        >\r\n          {icon}\r\n          <span>{label}</span>\r\n        </div>\r\n\r\n        <ChevronDown\r\n          className={clsx(\r\n            \"transform transition-transform duration-300\",\r\n            isOpen && \"rotate-180\"\r\n          )}\r\n        />\r\n      </div>\r\n\r\n      {isOpen && (\r\n        <div className=\"mb-7 space-y-1 pr-4\">\r\n          {items.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => onToggleItem(item.id)}\r\n              className={clsx(\r\n                \"relative overflow-hidden rounded-full border px-3 py-2 text-xs transition-colors duration-300\",\r\n                \"border-client-accent\",\r\n                selectedItems.includes(item.id)\r\n                  ? \"bg-client-accent text-white\"\r\n                  : \"bg-transparent\"\r\n              )}\r\n            >\r\n              <span className=\"relative z-10 \">{item.name}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
          "filterOptionSlider.tsx": "import { useState, useEffect } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\n\r\nconst ChevronDown = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\r\n);\r\n\r\ninterface FilterOptionSliderProps {\r\n  label: string;\r\n  icon: React.ReactNode;\r\n  value: number;\r\n  min: number;\r\n  max: number;\r\n  step: number;\r\n  onChange: (value: number) => void;\r\n  isOpen: boolean;\r\n  setIsOpen: (isOpen: boolean) => void;\r\n  category: string;\r\n  prefixText: string;\r\n  suffixText: string;\r\n}\r\n\r\nexport default function FilterOptionSlider({\r\n  label,\r\n  icon,\r\n  value,\r\n  min,\r\n  max,\r\n  step,\r\n  onChange,\r\n  isOpen,\r\n  setIsOpen,\r\n  category,\r\n  prefixText,\r\n  suffixText,\r\n}: FilterOptionSliderProps) {\r\n  const [sliderValue, setSliderValue] = useState(value);\r\n\r\n  const handleSliderChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = parseInt(event.target.value, 10);\r\n    setSliderValue(newValue);\r\n  };\r\n\r\n  const handleSliderComplete = () => {\r\n    onChange(sliderValue);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSliderValue(value);\r\n  }, [value]);\r\n\r\n  const formatDisplayValue = (value: number) => {\r\n    if (value >= 1000000000) {\r\n      const newValue = value / 1000000000;\r\n      return `${newValue.toFixed(3)}M`;\r\n    } else if (value >= 1000000) {\r\n      const newValue = value / 1000000;\r\n      return Number.isInteger(newValue)\r\n        ? `${newValue}M`\r\n        : `${newValue.toFixed(1)}M`;\r\n    } else if (value >= 100000) {\r\n      const newValue = value / 1000;\r\n      return Number.isInteger(newValue)\r\n        ? `${newValue}K`\r\n        : `${newValue.toFixed(1)}K`;\r\n    } else if (value >= 1000) {\r\n      const newValue = value / 1000;\r\n      return newValue.toFixed(3);\r\n    } else {\r\n      return value.toString();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"mb-4 flex transform cursor-pointer items-center justify-between text-white transition-transform duration-200 hover:scale-105 hover:font-semibold\"\r\n        onClick={() => setIsOpen(!isOpen)}\r\n      >\r\n        <div\r\n          className={clsx(\r\n            \"flex items-center space-x-2 text-lg font-medium\",\r\n            sliderValue > 1 && \"text-client-accent\"\r\n          )}\r\n        >\r\n          {icon}\r\n          <span>{label}</span>\r\n        </div>\r\n\r\n        <ChevronDown\r\n          className={clsx(\r\n            \"transform transition-transform duration-300\",\r\n            isOpen && \"rotate-180\"\r\n          )}\r\n        />\r\n      </div>\r\n\r\n      {isOpen && (\r\n        <div className=\"mb-6 flex flex-col items-center space-y-2 px-4 text-white\">\r\n          <input\r\n            type=\"range\"\r\n            min={min}\r\n            max={max}\r\n            step={sliderValue > 10000000 ? 10000000 : step}\r\n            value={sliderValue}\r\n            onChange={handleSliderChange}\r\n            onMouseUp={handleSliderComplete}\r\n            onTouchEnd={handleSliderComplete}\r\n            className=\"h-1 w-full cursor-pointer appearance-none rounded-full bg-client-accentLight\"\r\n          />\r\n\r\n          <style jsx>{`\r\n            input[type=\"range\"]::-webkit-slider-thumb {\r\n              appearance: none;\r\n              height: 20px;\r\n              width: 20px;\r\n              background-color: var(--client-accent);\r\n              border-radius: 50%;\r\n              cursor: pointer;\r\n              border: 2px solid var(--client-accent-dark);\r\n            }\r\n\r\n            input[type=\"range\"]::-moz-range-thumb {\r\n              height: 20px;\r\n              width: 20px;\r\n              background-color: var(--client-accent);\r\n              border-radius: 50%;\r\n              cursor: pointer;\r\n              border: 2px solid var(--client-accent-dark);\r\n            }\r\n\r\n            input[type=\"range\"]::-ms-thumb {\r\n              height: 20px;\r\n              width: 20px;\r\n              background-color: var(--client-accent);\r\n              border-radius: 50%;\r\n              cursor: pointer;\r\n              border: 2px solid var(--client-accent-dark);\r\n            }\r\n          `}</style>\r\n\r\n          {sliderValue > 1 && (\r\n            <div className=\"text-center text-base\">\r\n              <span>{prefixText} </span>\r\n\r\n              <span className=\"text-2xl font-bold\">\r\n                {category === \"price\" ? \"$\" : \"+\"}\r\n                {formatDisplayValue(sliderValue)}\r\n              </span>\r\n\r\n              <span> {suffixText}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
          "mapToggleButton.tsx": "\"use client\";\r\n\r\nimport { House, Map } from \"lucide-react\";\r\n\r\ninterface MapToggleButtonProps {\r\n  showMap: boolean;\r\n  setShowMap: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nexport default function MapToggleButton({\r\n  showMap,\r\n  setShowMap,\r\n}: MapToggleButtonProps) {\r\n  const handleClick = () => {\r\n    setShowMap((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    showMap && (\r\n      <button\r\n        className=\"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 flex items-center space-x-2 rounded-full border bg-client-background px-4 py-3 text-sm shadow-lg transition-colors border-client-accent text-client-text hover:bg-client-backgroundLight\"\r\n        onClick={handleClick}\r\n      >\r\n        <span className=\"text-client-text\">\r\n          {showMap ? \"Propiedades\" : \"Mapa\"}\r\n        </span>\r\n        {showMap ? (\r\n          <House size={18} className=\"text-client-text\" />\r\n        ) : (\r\n          <Map size={18} className=\"text-client-text\" />\r\n        )}\r\n      </button>\r\n    )\r\n  );\r\n}\r\n"
        },
        "heroSection": {
          "heroSearch.tsx": "\"use client\";\r\n\r\nimport { Dispatch, SetStateAction } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport Image from \"next/image\";\r\nimport { Search, ShoppingCart, KeySquare, Building2 } from \"lucide-react\";\r\nimport SearchProjects from \"./searchProjects\";\r\n\r\ninterface HeroSearchProps {\r\n  projectTypeId: number;\r\n  setProjectTypeId: Dispatch<SetStateAction<number>>;\r\n  setSearchCoords: (\r\n    coords: { latitude: number; longitude: number } | null\r\n  ) => void;\r\n  clearSearchInputSignal?: boolean;\r\n}\r\n\r\nexport default function HeroSearch({\r\n  projectTypeId,\r\n  setProjectTypeId,\r\n  setSearchCoords,\r\n  clearSearchInputSignal,\r\n}: HeroSearchProps) {\r\n  return (\r\n    <div className=\"relative w-full h-72 md:h-96\">\r\n      <Image\r\n        src=\"https://d3fhc8hmbgwz4k.cloudfront.net/public/images/realEstate/Inmobiliaria2.webp\"\r\n        alt=\"Inmobiliaria\"\r\n        fill\r\n        priority\r\n        className=\"object-fill\"\r\n      />\r\n\r\n      <div className=\"absolute inset-0 bg-black/30 flex flex-col items-center justify-center px-4\">\r\n        <div className=\"flex gap-4 mb-6\">\r\n          {[\r\n            { id: 2, label: \"Venta\", icon: <ShoppingCart size={16} /> },\r\n            { id: 3, label: \"Arriendo\", icon: <KeySquare size={16} /> },\r\n            { id: 1, label: \"Sobre planos\", icon: <Building2 size={16} /> },\r\n          ].map(({ id, label, icon }) => (\r\n            <button\r\n              key={id}\r\n              onClick={() => setProjectTypeId(id)}\r\n              className={clsx(\r\n                \"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold transition border shadow\",\r\n                projectTypeId === id\r\n                  ? \"bg-client-accent text-white border-client-accent\"\r\n                  : \"bg-client-backgroundAlt text-client-text border-client-accent hover:bg-white hover:text-black\"\r\n              )}\r\n            >\r\n              {icon}\r\n              {label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"relative w-full max-w-2xl flex bg-white rounded-md shadow-lg\">\r\n          <SearchProjects\r\n            onSelectLocation={setSearchCoords}\r\n            clearInput={clearSearchInputSignal}\r\n          />\r\n\r\n          <button className=\"bg-client-accent hover:bg-client-accent-hover px-4 flex items-center justify-center rounded-r-md\">\r\n            <Search className=\"text-white\" size={20} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "searchProjects.tsx": "\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { MapPin, X } from \"lucide-react\";\r\n\r\ninterface SearchProjectsProps {\r\n  onSelectLocation: (\r\n    coords: { latitude: number; longitude: number } | null\r\n  ) => void;\r\n  clearInput?: boolean;\r\n}\r\n\r\nexport default function SearchProjects({\r\n  onSelectLocation,\r\n  clearInput = false,\r\n}: SearchProjectsProps) {\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState<\r\n    { place_id: string; description: string }[]\r\n  >([]);\r\n  const [isListVisible, setIsListVisible] = useState(false);\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const autocompleteServiceRef =\r\n    useRef<google.maps.places.AutocompleteService | null>(null);\r\n\r\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\r\n\r\n  useEffect(() => {\r\n    if (clearInput) {\r\n      setSearchInput(\"\");\r\n      setSuggestions([]);\r\n      setIsListVisible(false);\r\n    }\r\n  }, [clearInput]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        listRef.current &&\r\n        !listRef.current.contains(event.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsListVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isMapsReady &&\r\n      typeof window !== \"undefined\" &&\r\n      typeof window.google !== \"undefined\" &&\r\n      window.google.maps?.places &&\r\n      !autocompleteServiceRef.current\r\n    ) {\r\n      autocompleteServiceRef.current =\r\n        new window.google.maps.places.AutocompleteService();\r\n    }\r\n  }, [isMapsReady]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.value;\r\n    setSearchInput(newValue);\r\n\r\n    if (newValue.trim() && autocompleteServiceRef.current) {\r\n      autocompleteServiceRef.current.getPlacePredictions(\r\n        {\r\n          input: newValue,\r\n          componentRestrictions: { country: \"CO\" },\r\n        },\r\n        (predictions) => {\r\n          if (predictions) {\r\n            setSuggestions(\r\n              predictions.map((p) => ({\r\n                place_id: p.place_id,\r\n                description: p.description,\r\n              }))\r\n            );\r\n            setIsListVisible(true);\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      setSuggestions([]);\r\n    }\r\n  };\r\n\r\n  const handleSelectPlace = (placeId: string, description: string) => {\r\n    const service = new google.maps.places.PlacesService(\r\n      document.createElement(\"div\")\r\n    );\r\n\r\n    service.getDetails({ placeId }, (place, status) => {\r\n      if (\r\n        status === google.maps.places.PlacesServiceStatus.OK &&\r\n        place?.geometry?.location\r\n      ) {\r\n        const location = place.geometry.location;\r\n\r\n        onSelectLocation({\r\n          latitude: location.lat(),\r\n          longitude: location.lng(),\r\n        });\r\n\r\n        setSearchInput(description);\r\n        setIsListVisible(false);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative w-full\">\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        placeholder=\"Dirección…\"\r\n        onChange={handleInputChange}\r\n        value={searchInput}\r\n        className=\"flex-1 px-4 py-2 text-sm text-client-primary placeholder:text-client-text-placeholder outline-none w-full rounded-md\"\r\n      />\r\n\r\n      {searchInput && (\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            setSearchInput(\"\");\r\n            setIsListVisible(false);\r\n            onSelectLocation(null);\r\n          }}\r\n          className=\"absolute right-3 top-1/2 -translate-y-1/2 text-client-text-placeholder hover:text-black\"\r\n          aria-label=\"Limpiar búsqueda\"\r\n        >\r\n          <X size={18} />\r\n        </button>\r\n      )}\r\n\r\n      {isListVisible && suggestions.length > 0 && (\r\n        <ul\r\n          ref={listRef}\r\n          className=\"absolute z-10 mt-1 w-full bg-white border border-client-accent rounded-md shadow-lg max-h-64 overflow-y-auto\"\r\n        >\r\n          {suggestions.map((s) => (\r\n            <li\r\n              key={s.place_id}\r\n              onClick={() => {\r\n                handleSelectPlace(s.place_id, s.description);\r\n              }}\r\n              className=\"cursor-pointer flex items-center gap-2 p-2 hover:bg-client-secondary transition-colors\"\r\n            >\r\n              <MapPin size={16} className=\"text-client-accent\" />\r\n              {s.description}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "project": {
          "carouselRecommendedProjects.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport ProjectCard from \"./projectCard\";\n\nconst ChevronLeft = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronLeft)\n);\nconst ChevronRight = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronRight)\n);\n\ninterface CarouselRecommendedProjectsProps {\n  projects: ProjectSummary[];\n}\n\nexport default function CarouselRecommendedProjects({\n  projects,\n}: CarouselRecommendedProjectsProps) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const visibleCardsMap = { base: 2, sm: 3, lg: 4, xl: 5 };\n\n  const [visibleCards, setVisibleCards] = useState(visibleCardsMap.xl);\n\n  useEffect(() => {\n    const updateVisibleCards = () => {\n      if (window.innerWidth >= 1280) setVisibleCards(visibleCardsMap.xl);\n      else if (window.innerWidth >= 1024) setVisibleCards(visibleCardsMap.lg);\n      else if (window.innerWidth >= 640) setVisibleCards(visibleCardsMap.sm);\n      else setVisibleCards(visibleCardsMap.base);\n    };\n\n    updateVisibleCards();\n    window.addEventListener(\"resize\", updateVisibleCards);\n\n    return () => window.removeEventListener(\"resize\", updateVisibleCards);\n  }, []);\n\n  const totalProjects = projects.length;\n\n  const handleNext = () => {\n    if (currentIndex + visibleCards < totalProjects) {\n      setCurrentIndex((prev) => prev + 1);\n    }\n  };\n\n  const handlePrev = () => {\n    if (currentIndex > 0) {\n      setCurrentIndex((prev) => prev - 1);\n    }\n  };\n\n  return (\n    <div className=\"w-full bg-transparent py-8\">\n      <div className=\"relative flex items-center overflow-hidden\">\n        <button\n          className={`absolute left-2 z-10 rounded-full p-3 shadow-md transition md:left-4 ${\n            currentIndex === 0\n              ? \"bg-gray-300 text-gray-500\"\n              : \"bg-primary hover:bg-primary-dark text-white\"\n          }`}\n          onClick={handlePrev}\n          aria-label=\"Previous\"\n          disabled={currentIndex === 0}\n        >\n          <ChevronLeft />\n        </button>\n\n        <div className=\"w-full overflow-hidden\">\n          <div\n            className=\"flex py-4 transition-transform duration-500 ease-in-out\"\n            style={{\n              transform: `translateX(-${(currentIndex * 100) / visibleCards}%)`,\n              width: `${(projects.length * 100) / visibleCards}%`,\n            }}\n          >\n            {projects.map((project, index) => (\n              <div\n                key={index}\n                className=\"flex-shrink-0 px-2\"\n                style={{\n                  width: `${100 / visibleCards}%`,\n                }}\n              >\n                <ProjectCard\n                  id={project.id}\n                  images={project.projectMedia || []}\n                  name={project.name}\n                  location={project.city.name}\n                  price={project.price}\n                  area={project.totalArea}\n                  bedrooms={project.bedrooms}\n                  bathrooms={project.bathrooms}\n                  parkingSpots={project.parkingSpots}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <button\n          className={`absolute right-2 z-10 rounded-full p-3 shadow-md transition md:right-4 ${\n            currentIndex + visibleCards >= totalProjects\n              ? \"bg-gray-300 text-gray-500\"\n              : \"bg-primary hover:bg-primary-dark text-white\"\n          }`}\n          onClick={handleNext}\n          aria-label=\"Next\"\n          disabled={currentIndex + visibleCards >= totalProjects}\n        >\n          <ChevronRight />\n        </button>\n      </div>\n    </div>\n  );\n}\n",
          "contactForm.tsx": "\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface ContactFormProps {\r\n  name: string;\r\n  email: string;\r\n  phone: string;\r\n  setName: (v: string) => void;\r\n  setEmail: (v: string) => void;\r\n  setPhone: (v: string) => void;\r\n}\r\n\r\nexport default function ContactForm({\r\n  name,\r\n  email,\r\n  phone,\r\n  setName,\r\n  setEmail,\r\n  setPhone,\r\n}: ContactFormProps) {\r\n  // const [checked, setChecked] = useState(false);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"flex flex-col\">\r\n        <label form=\"inputName\" className=\"mb-1 font-medium\">\r\n          Nombre\r\n        </label>\r\n\r\n        <input\r\n          id=\"inputName\"\r\n          type=\"text\"\r\n          placeholder=\"Nombre completo\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          className={clsx(\r\n            \"w-full rounded-md border bg-white px-3 py-2 outline-none\",\r\n            \"border-client-accent text-client-primaryLight\"\r\n          )}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex flex-col\">\r\n        <label form=\"inputEmail\" className=\"mb-1 font-medium\">\r\n          Correo electrónico\r\n        </label>\r\n\r\n        <input\r\n          id=\"inputEmail\"\r\n          type=\"email\"\r\n          placeholder=\"Correo electrónico\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className={clsx(\r\n            \"w-full rounded-md border bg-white px-3 py-2 outline-none\",\r\n            \"border-client-accent text-client-primaryLight\"\r\n          )}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex flex-col\">\r\n        <label form=\"inputPhone\" className=\"mb-1 font-medium\">\r\n          Celular o Teléfono\r\n        </label>\r\n\r\n        <input\r\n          id=\"inputPhone\"\r\n          type=\"tel\"\r\n          placeholder=\"Número de contacto\"\r\n          value={phone}\r\n          onChange={(e) => setPhone(e.target.value)}\r\n          className={clsx(\r\n            \"w-full rounded-md border bg-white px-3 py-2 outline-none\",\r\n            \"border-client-accent text-client-primaryLight\"\r\n          )}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      {/*\r\n      <div className=\"flex items-start\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={checked}\r\n          onChange={() => setChecked(!checked)}\r\n          className=\"form-checkbox mt-1 border-client-accent text-client-accent focus:ring-client-accent\"\r\n          required\r\n        />\r\n        <label className=\"ml-2 text-xs\">\r\n          Acepto los{\" \"}\r\n          <a href=\"#\" className=\"text-client-accent underline\">\r\n            términos y condiciones\r\n          </a>\r\n          .\r\n        </label>\r\n      </div>\r\n      */}\r\n    </form>\r\n  );\r\n}\r\n",
          "contactFormSection.tsx": "\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport clsx from \"clsx\";\nimport Link from \"next/link\";\nimport ContactForm from \"./contactForm\";\n\ninterface ContactFormSectionProps {\n  locationRef: React.RefObject<HTMLDivElement>;\n  wrapperRef: React.RefObject<HTMLDivElement>;\n  propertyId: number;\n  propertyName: string;\n  toEmail: string;\n  phoneNumber: string;\n}\n\nexport default function ContactFormSection({\n  locationRef,\n  wrapperRef,\n  propertyId,\n  propertyName,\n  toEmail,\n  phoneNumber,\n}: ContactFormSectionProps) {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  // const [checked, setChecked] = useState(false);\n  const [formState, setFormState] = useState<\"fixed\" | \"bottom\" | \"default\">(\n    \"default\"\n  );\n  const [formHeight, setFormHeight] = useState<number>(0);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const formRef = useRef<HTMLDivElement>(null);\n  const [isLargeScreen, setIsLargeScreen] = useState<boolean>(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    const phoneRegex = /^3\\d{9}$/;\n    const isPhoneValid = phoneRegex.test(phone.replace(/\\s+/g, \"\"));\n\n    const errors = {\n      name: name.trim() ? \"\" : \"El nombre es obligatorio.\",\n      phone: phone.trim()\n        ? isPhoneValid\n          ? \"\"\n          : \"Número de teléfono no válido.\"\n        : \"El teléfono es obligatorio.\",\n      email: email.trim()\n        ? /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n          ? \"\"\n          : \"El correo no es válido.\"\n        : \"El correo es obligatorio.\",\n    };\n\n    if (Object.values(errors).some((e) => e !== \"\")) {\n      alert(\n        Object.values(errors)\n          .filter((e) => e !== \"\")\n          .join(\"\\n\")\n      );\n      return;\n    }\n\n    const message = `Hola, estoy interesado en la propiedad \"${propertyName}\" con ID: ${propertyId}.\\n\\nMe pueden contactar al correo: ${email}.`;\n    const payload = { name, email, phone, message };\n\n    try {\n      setIsSubmitting(true);\n\n      const res1 = await fetch(\"/api/contact\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...payload, toEmail }),\n      });\n\n      if (!res1.ok) {\n        throw new Error(\"No se pudo enviar al destinatario principal.\");\n      }\n\n      let enviadoEmpresa = true;\n\n      if (toEmail !== process.env.NEXT_PUBLIC_COMPANY_EMAIL) {\n        const res2 = await fetch(\"/api/contact\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            ...payload,\n            toEmail: process.env.NEXT_PUBLIC_COMPANY_EMAIL!,\n          }),\n        });\n\n        enviadoEmpresa = res2.ok;\n\n        if (!enviadoEmpresa) {\n          console.warn(\"⚠️ No se pudo enviar el correo a la empresa.\");\n        }\n      }\n\n      setIsSubmitting(false);\n      setName(\"\");\n      setEmail(\"\");\n      setPhone(\"\");\n\n      if (enviadoEmpresa) {\n        alert(\"✅ Mensaje enviado correctamente.\");\n      } else {\n        alert(\n          \"✅ Mensaje enviado al destinatario, pero no se pudo notificar a la empresa.\"\n        );\n      }\n    } catch (error) {\n      console.error(error);\n      setIsSubmitting(false);\n      alert(\"❌ Hubo un error al enviar el mensaje.\");\n    }\n  };\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsLargeScreen(window.innerWidth >= 1024);\n    };\n\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!isLargeScreen) {\n      setFormState(\"default\");\n      return;\n    }\n\n    const handleScroll = () => {\n      const formElement = formRef.current;\n      const locationElement = locationRef.current;\n      const wrapperElement = wrapperRef.current;\n\n      if (!formElement || !locationElement || !wrapperElement) return;\n\n      const scrollTop = window.scrollY;\n      const wrapperTop = wrapperElement.offsetTop;\n      const locationTop = locationElement.offsetTop;\n\n      const breakPoint = locationTop - formElement.offsetHeight - 64;\n\n      if (scrollTop >= breakPoint) {\n        if (formState !== \"bottom\") {\n          setFormState(\"bottom\");\n        }\n        return;\n      }\n\n      if (scrollTop >= wrapperTop && scrollTop < breakPoint) {\n        if (formState !== \"fixed\") {\n          setFormHeight(formElement.offsetHeight);\n          setFormState(\"fixed\");\n        }\n        return;\n      }\n\n      if (scrollTop < wrapperTop) {\n        if (formState !== \"default\") {\n          setFormHeight(0);\n          setFormState(\"default\");\n        }\n        return;\n      }\n    };\n\n    const onScroll = () => window.requestAnimationFrame(handleScroll);\n    window.addEventListener(\"scroll\", onScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [formState, isLargeScreen]);\n\n  const formStyles = {\n    fixed: \"fixed top-32 right-11 w-96 z-10\",\n    bottom: \"absolute bottom-0 right-11 w-96 z-0\",\n    default: \"relative w-80 sm:w-96 mx-auto\",\n  };\n\n  return (\n    <>\n      {isLargeScreen && formState === \"fixed\" && (\n        <div style={{ height: formHeight }} className=\"w-full\" />\n      )}\n\n      <div\n        ref={formRef}\n        className={clsx(\n          isLargeScreen ? formStyles[formState] : formStyles.default,\n          \"max-h-[80vh] overflow-y-auto rounded-lg border border-client-accent bg-[#F4F1ED] p-6\"\n        )}\n      >\n        <h2 className=\"mb-2 text-center text-2xl font-bold text-client-accent\">\n          Te llamamos\n        </h2>\n\n        <p className=\"mb-4 text-center text-sm text-client-primary\">\n          Déjanos tus datos y pronto estaremos en contacto.\n        </p>\n\n        <ContactForm\n          name={name}\n          email={email}\n          phone={phone}\n          setName={setName}\n          setEmail={setEmail}\n          setPhone={setPhone}\n        />\n\n        <button\n          onClick={handleSubmit}\n          disabled={isSubmitting}\n          className=\"mt-4 w-full rounded-md border py-2 font-semibold text-white bg-client-accentLight hover:bg-client-accentHover\"\n        >\n          {isSubmitting ? \"Enviando...\" : \"Contáctame\"}\n        </button>\n\n        <Link\n          href={`https://wa.me/57${phoneNumber.replace(\n            /\\D/g,\n            \"\"\n          )}?text=${encodeURIComponent(\n            `Hola, estoy interesado en la propiedad \"${propertyName}\" con ID: ${propertyId}.`\n          )}`}\n          passHref\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"block w-full text-center rounded-md border py-2 font-semibold text-white bg-green-500 hover:bg-green-600 transition\"\n        >\n          Chatear por WhatsApp\n        </Link>\n      </div>\n    </>\n  );\n}\n",
          "detailCard.tsx": "type DetailCardProps = {\n  icon: JSX.Element;\n  label: string;\n  value?: string;\n};\n\nexport default function DetailCard({ icon, label, value }: DetailCardProps) {\n  return (\n    <div className=\"flex items-center rounded-lg bg-white p-2 py-3 shadow-md\">\n      <div className=\"mr-2 rounded-full bg-gray-200 p-3\">{icon}</div>\n\n      <div>\n        <p className=\"text-brown-700 text-sm font-medium\">{label}</p>\n        {value && <p className=\"text-lg font-semibold\">{value}</p>}\n      </div>\n    </div>\n  );\n}\n",
          "imageModal.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Image from \"next/image\";\nimport { X, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { ProjectMedia } from \"@/lib/definitios\";\n\ninterface ImageModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  media: ProjectMedia[];\n  initialIndex: number;\n}\n\nexport default function ImageModal({\n  isOpen,\n  onClose,\n  media,\n  initialIndex,\n}: ImageModalProps) {\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setCurrentIndex(initialIndex);\n    }\n  }, [initialIndex, isOpen]);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const nextImage = () => {\n    if (isTransitioning) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentIndex((prevIndex) => (prevIndex + 1) % media.length);\n      setIsTransitioning(false);\n    }, 300);\n  };\n\n  const prevImage = () => {\n    if (isTransitioning) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentIndex(\n        (prevIndex) => (prevIndex - 1 + media.length) % media.length\n      );\n      setIsTransitioning(false);\n    }, 300);\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80\"\n      onClick={onClose}\n    >\n      <div\n        className=\"relative flex aspect-video w-full max-w-full items-center justify-center p-4 md:w-[80%] lg:w-[70%]\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button\n          onClick={onClose}\n          className=\"absolute right-6 top-6 z-50 flex h-10 w-10 items-center justify-center rounded-full bg-client-accent hover:bg-client-accentHover text-2xl text-white\"\n          aria-label=\"Close Modal\"\n        >\n          <X size={20} />\n        </button>\n\n        <div className=\"relative flex h-full w-full items-center justify-center overflow-hidden rounded-lg bg-black bg-opacity-50\">\n          <div\n            className={`absolute inset-0 transition-opacity duration-500 ${\n              isTransitioning ? \"opacity-0\" : \"opacity-100\"\n            }`}\n          >\n            <Image\n              src={media[currentIndex]?.url}\n              alt={`Project Image ${currentIndex + 1}`}\n              fill\n              className=\"object-cover\"\n              priority\n            />\n          </div>\n        </div>\n\n        {media[currentIndex]?.tag && (\n          <div className=\"absolute left-8 top-8 rounded bg-black bg-opacity-70 px-3 py-1 text-lg text-white\">\n            {media[currentIndex].tag}\n          </div>\n        )}\n\n        <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 transform rounded bg-black bg-opacity-70 px-3 py-1 text-lg text-white\">\n          {currentIndex + 1}/{media.length}\n        </div>\n\n        <div className=\"absolute inset-0 flex items-center justify-between px-4\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              prevImage();\n            }}\n            disabled={media.length === 1}\n            className={`flex p-2 items-center justify-center rounded-full font-bold transition-all  ${\n              media.length === 1\n                ? \"bg-gray-400\"\n                : \"bg-client-accent hover:bg-client-accentHover\"\n            } translate-x-4`}\n            aria-label=\"Previous Image in Modal\"\n          >\n            <ChevronLeft className=\"w-6 h-6 text-client-text\" />\n          </button>\n\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              nextImage();\n            }}\n            disabled={media.length === 1}\n            className={`flex p-2 items-center justify-center rounded-full font-bold transition-all  ${\n              media.length === 1\n                ? \"bg-gray-400\"\n                : \"bg-client-accent hover:bg-client-accentHover\"\n            } -translate-x-4`}\n            aria-label=\"Next Image in Modal\"\n          >\n            <ChevronRight className=\"w-6 h-6 text-client-text\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
          "map.tsx": "\"use client\";\n\nimport { useEffect, useState, useRef, useMemo } from \"react\";\nimport { GoogleMap } from \"@react-google-maps/api\";\nimport Loader from \"../../loader\";\n\nconst mapContainerStyle = {\n  width: \"100%\",\n  height: \"100%\",\n};\n\nexport default function Map({\n  coordinates,\n}: {\n  coordinates: { lat: number; lng: number };\n}) {\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\n\n  const [mapCenter, setMapCenter] = useState(coordinates);\n  const mapRef = useRef<google.maps.Map | null>(null);\n  const markerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(\n    null\n  );\n\n  const setMarker = async () => {\n    if (!isMapsReady || !mapRef.current || !google?.maps) {\n      return;\n    }\n\n    try {\n      const { AdvancedMarkerElement } = (await google.maps.importLibrary(\n        \"marker\"\n      )) as any;\n\n      if (markerRef.current) {\n        markerRef.current.map = null;\n        markerRef.current = null;\n      }\n\n      markerRef.current = new AdvancedMarkerElement({\n        position: coordinates,\n        map: mapRef.current,\n        title: \"Ubicación del Proyecto\",\n      });\n\n      mapRef.current.panTo(coordinates);\n    } catch (error) {\n      console.error(\"❌ Error al crear el marcador:\", error);\n    }\n  };\n\n  useEffect(() => {\n    if (mapRef.current) {\n      setMarker();\n    }\n  }, [isMapsReady, coordinates, mapRef.current]);\n\n  const handleMapLoad = (map: google.maps.Map) => {\n    mapRef.current = map;\n    map.setCenter(coordinates);\n    map.setZoom(15);\n\n    setMarker();\n  };\n\n  if (!isMapsReady) {\n    return (\n      <div className=\"flex justify-center items-center w-full h-full\">\n        <Loader size={48} />\n      </div>\n    );\n  }\n\n  return (\n    <GoogleMap\n      mapContainerStyle={mapContainerStyle}\n      center={mapCenter}\n      zoom={15}\n      onLoad={handleMapLoad}\n      options={{\n        zoomControl: true,\n        streetViewControl: true,\n        mapTypeControl: true,\n        fullscreenControl: true,\n        draggable: true,\n        clickableIcons: true,\n        keyboardShortcuts: true,\n        mapTypeId: \"roadmap\",\n        mapId: \"78a223abe416be2b\",\n      }}\n    />\n  );\n}\n",
          "ownerModal.tsx": "import dynamic from \"next/dynamic\";\r\nimport { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport { UserData } from \"@/lib/definitios\";\r\nimport ModalHeader from \"../../modals/admin/modalHeader\";\r\n\r\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/admin/formInput\"), {\r\n  ssr: false,\r\n});\r\n\r\ninterface OwnerModalProps {\r\n  show: boolean;\r\n  flag: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  handleChange: (\r\n    e: React.ChangeEvent<\r\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\r\n    >\r\n  ) => void;\r\n  user: UserData;\r\n}\r\n\r\nexport default function OwnerModal({\r\n  show,\r\n  flag,\r\n  onClose,\r\n  onSubmit,\r\n  handleChange,\r\n  user,\r\n}: OwnerModalProps) {\r\n  useBodyOverflow(show);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader title=\"Datos del Propietario\" onClose={onClose} />\r\n\r\n        {/* Body */}\r\n        <form\r\n          id=\"userProjectForm\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          className=\"h-[60vh] space-y-4 overflow-y-auto px-6 py-4\"\r\n        >\r\n          <FormInput\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={user.email || \"\"}\r\n            placeholder=\"Correo electrónico\"\r\n            maxLength={190}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Nombres\"\r\n            type=\"text\"\r\n            name=\"names\"\r\n            value={user.names || \"\"}\r\n            placeholder=\"Nombres del usuario\"\r\n            maxLength={150}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Apellidos\"\r\n            type=\"text\"\r\n            name=\"lastnames\"\r\n            value={user.lastnames || \"\"}\r\n            placeholder=\"Apellidos del usuario\"\r\n            maxLength={150}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Teléfono\"\r\n            type=\"text\"\r\n            name=\"phoneNumber\"\r\n            value={user.phoneNumber || \"\"}\r\n            placeholder=\"Número de teléfono\"\r\n            maxLength={45}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n        </form>\r\n\r\n        <div className=\"flex justify-end border-t border-premium-borderColor p-4 dark:border-premium-borderColorHover\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"transform rounded-lg bg-premium-textPlaceholder px-4 py-2 text-white transition duration-300 hover:scale-105 hover:bg-premium-borderColor dark:bg-premium-secondary dark:hover:bg-premium-secondaryDark\"\r\n          >\r\n            Cerrar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "projectCard.tsx": "import { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\nimport Image from \"next/image\";\r\nimport { ProjectMedia } from \"@/lib/definitios\";\r\n\r\ninterface ProjectCardProps {\r\n  id: number;\r\n  images: ProjectMedia[];\r\n  name: string;\r\n  location: string;\r\n  price?: number;\r\n  area: number;\r\n  bedrooms?: number;\r\n  bathrooms?: number;\r\n  parkingSpots?: number;\r\n}\r\n\r\nexport default function ProjectCard({\r\n  id,\r\n  images,\r\n  name,\r\n  location,\r\n  price,\r\n  area,\r\n  bedrooms,\r\n  bathrooms,\r\n  parkingSpots,\r\n}: ProjectCardProps) {\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isHovered) {\r\n      const interval = setInterval(\r\n        () => setCurrentImage((prev) => (prev + 1) % images.length),\r\n        1000\r\n      );\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isHovered, images.length]);\r\n\r\n  return (\r\n    <div className=\"transform rounded-lg bg-transparent transition-transform duration-300 hover:scale-105 dark:bg-transparent\">\r\n      <Link\r\n        href={`/inmobiliaria/${id}`}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        <div\r\n          className={clsx(\r\n            \"relative max-w-xs cursor-pointer overflow-hidden rounded-lg bg-premium-secondary shadow-md shadow-premium-secondary dark:bg-premium-secondaryDark dark:shadow-md dark:shadow-white\",\r\n            \"z-0 h-[370px]\"\r\n          )}\r\n          onMouseEnter={() => setIsHovered(true)}\r\n          onMouseLeave={() => {\r\n            setIsHovered(false);\r\n            setCurrentImage(0);\r\n          }}\r\n        >\r\n          <div className=\"relative flex h-full flex-col rounded-lg bg-premium-background dark:bg-premium-secondaryDark\">\r\n            <div\r\n              className={clsx(\r\n                \"relative z-0 w-full overflow-hidden\",\r\n                \"h-full flex-shrink-0\"\r\n              )}\r\n            >\r\n              {images.map((img, index) => (\r\n                <Image\r\n                  key={index}\r\n                  src={img.url}\r\n                  alt={img.tag}\r\n                  fill\r\n                  priority={index === 0}\r\n                  loading={index === 0 ? \"eager\" : \"lazy\"}\r\n                  sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\r\n                  className={clsx(\r\n                    \"absolute left-0 top-0 h-full w-full object-cover transition-opacity duration-1000 ease-in-out\",\r\n                    index === currentImage ? \"opacity-100\" : \"opacity-0\"\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            {price && (\r\n              <div className=\"absolute left-2 top-2 z-50 rounded-full bg-black bg-opacity-75 px-2 py-1 text-sm text-white\">\r\n                ${price.toLocaleString()}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-premium-secondaryDark via-premium-secondaryDark to-transparent px-2 pb-2 pt-16 dark:from-black dark:via-gray-800\">\r\n              <h3 className=\"line-clamp-1 break-words text-lg font-semibold leading-tight text-white\">\r\n                {location}\r\n              </h3>\r\n\r\n              <p className=\"truncate break-all leading-tight w-full overflow-hidden text-sm text-gray-300\">\r\n                {name}\r\n              </p>\r\n\r\n              <div className=\"flex items-center text-xs text-gray-300 divide-x divide-gray-400 dark:divide-gray-600\">\r\n                {area > 0 && <p className=\"pr-2\">{area}m²</p>}\r\n                {bedrooms && <p className=\"pl-2 pr-2\">{bedrooms} Hab.</p>}\r\n                {bathrooms && <p className=\"pl-2 pr-2\">{bathrooms} Baños.</p>}\r\n                {parkingSpots && <p className=\"pl-2\">{parkingSpots} Parq.</p>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n",
          "projectCarousel.tsx": "import { useState, useMemo } from \"react\";\nimport Image from \"next/image\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { ProjectMedia } from \"@/lib/definitios\";\nimport ImageModal from \"./imageModal\";\n\ninterface ProjectCarouselProps {\n  projectMedia: ProjectMedia[];\n}\n\nexport default function ProjectCarousel({\n  projectMedia,\n}: ProjectCarouselProps) {\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const nextSlide = () => {\n    setCurrentImage((prev) => (prev + 1) % projectMedia.length);\n  };\n\n  const prevSlide = () => {\n    setCurrentImage(\n      (prev) => (prev - 1 + projectMedia.length) % projectMedia.length\n    );\n  };\n\n  const handleImageClick = (index: number) => {\n    setCurrentImage(index);\n    setIsModalOpen(true);\n  };\n\n  const getImageStyle = useMemo(\n    () => (index: number) => {\n      const position =\n        (index - currentImage + projectMedia.length) % projectMedia.length;\n\n      let transform = \"\";\n      let zIndex = 0;\n\n      switch (position) {\n        case 0:\n          transform = \"translateX(0) scale(1)\";\n          zIndex = 3;\n          break;\n        case 1:\n        case projectMedia.length - 1:\n          transform = `translateX(${\n            position === 1 ? \"50%\" : \"-50%\"\n          }) scale(0.75)`;\n          zIndex = 2;\n          break;\n        case 2:\n        case projectMedia.length - 2:\n          transform = `translateX(${\n            position === 2 ? \"90%\" : \"-90%\"\n          }) scale(0.55)`;\n          zIndex = 1;\n          break;\n        default:\n          transform = \"scale(0.6)\";\n          zIndex = 0;\n      }\n\n      return {\n        transform,\n        zIndex,\n        transition: \"transform 0.5s ease\",\n      };\n    },\n    [currentImage, projectMedia.length]\n  );\n\n  const getVisibleDots = () => {\n    const maxDots = 5;\n    const half = Math.floor(maxDots / 2);\n\n    if (projectMedia.length <= maxDots) {\n      return projectMedia.map((_, index) => index);\n    }\n\n    let start = currentImage - half;\n    let end = currentImage + half + 1;\n\n    if (start < 0) {\n      start = 0;\n      end = maxDots;\n    } else if (end > projectMedia.length) {\n      start = projectMedia.length - maxDots;\n      end = projectMedia.length;\n    }\n\n    return Array.from({ length: end - start }, (_, i) => start + i);\n  };\n\n  return (\n    <div className=\"relative mx-auto w-full sm:my-5\">\n      <div className=\"relative flex h-96 items-center justify-center overflow-hidden\">\n        {projectMedia.map((media, index) => (\n          <div\n            key={index}\n            className=\"group absolute cursor-pointer transition-transform duration-300\"\n            style={getImageStyle(index)}\n            onClick={() => handleImageClick(index)}\n          >\n            <div className=\"relative h-[320px] w-[500px] transform overflow-hidden transition-transform duration-300 group-hover:scale-105 shadow-lg shadow-black\">\n              <Image\n                src={media.url}\n                alt={`Project Image ${index + 1}`}\n                fill\n                sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 500px\"\n                className=\"rounded-lg object-cover\"\n                priority={index === currentImage}\n              />\n            </div>\n\n            {index === currentImage && (\n              <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 transform rounded bg-black bg-opacity-60 px-3 py-1 text-sm font-semibold text-white\">\n                {media.tag || \"Sin etiqueta\"}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      <button\n        onClick={prevSlide}\n        className=\"absolute left-2 top-1/2 z-10 mx-5 flex p-1 -translate-y-1/2 transform items-center justify-center rounded-full bg-client-accent hover:bg-client-accentHover font-bold sm:left-3 lg:left-4 transition-all\"\n        aria-label=\"Previous Slide\"\n      >\n        <ChevronLeft className=\"w-6 h-6 text-client-text\" />\n      </button>\n\n      <button\n        onClick={nextSlide}\n        className=\"absolute right-2 top-1/2 z-10 mx-5 flex p-1 -translate-y-1/2 transform items-center justify-center rounded-full bg-client-accent hover:bg-client-accentHover font-bold  sm:right-3 lg:right-4 transition-all\"\n        aria-label=\"Next Slide\"\n      >\n        <ChevronRight className=\"w-6 h-6 text-client-text\" />\n      </button>\n\n      <div className=\"flex justify-center space-x-2\">\n        {getVisibleDots().map((index) => (\n          <button\n            key={index}\n            onClick={() => setCurrentImage(index)}\n            className={`h-2 w-2 rounded-full transition-transform duration-300 hover:bg-client-accentHover ${\n              currentImage === index\n                ? \"scale-125 bg-client-accentDark\"\n                : \"scale-100 bg-client-accentLight opacity-75\"\n            }`}\n          />\n        ))}\n      </div>\n\n      <ImageModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        media={projectMedia}\n        initialIndex={currentImage}\n      />\n    </div>\n  );\n}\n",
          "projectCommonAreas.tsx": "\"use client\";\n\nimport React, { useState } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport Image from \"next/image\";\nimport { CommonArea, ProjectMedia } from \"@/lib/definitios\";\nimport ImageModal from \"./imageModal\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ninterface ProjectCommonAreasProps {\n  areas: CommonArea[];\n  projectMedia: ProjectMedia[];\n}\n\nexport default function ProjectCommonAreas({\n  areas,\n  projectMedia,\n}: ProjectCommonAreasProps) {\n  const [openAccordions, setOpenAccordions] = useState<number[]>([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [modalImageIndex, setModalImageIndex] = useState(0);\n\n  const toggleAccordion = (index: number) => {\n    setOpenAccordions((prev) =>\n      prev.includes(index) ? prev.filter((i) => i !== index) : [...prev, index]\n    );\n  };\n\n  const handleImageClick = (index: number) => {\n    setModalImageIndex(index);\n    setIsModalOpen(true);\n  };\n\n  return (\n    <div className=\"my-8 w-full lg:w-2/3\">\n      <h2 className=\"mb-4 text-2xl font-semibold text-white\">Áreas Comunes</h2>\n\n      {areas.map((area, index) => {\n        const areaImages = projectMedia.filter(\n          (media) => media.commonArea === area.id\n        );\n\n        const isOpen = openAccordions.includes(index);\n\n        return (\n          <div key={area.id} className=\"mb-4 rounded-lg p-4 shadow bg-white\">\n            <button\n              onClick={() => toggleAccordion(index)}\n              className=\"flex w-full items-center justify-between text-lg font-medium text-client-primary\"\n            >\n              <span>{area.name}</span>\n\n              <ChevronDown\n                className={`transition-transform text-client-accent ${\n                  isOpen ? \"rotate-180\" : \"rotate-0\"\n                }`}\n              />\n            </button>\n\n            {isOpen && (\n              <div className=\"mt-2 overflow-hidden\">\n                {areaImages.length > 0 && (\n                  <div className=\"flex space-x-2 overflow-x-auto\">\n                    {areaImages.map((media, imgIndex) => (\n                      <div\n                        key={imgIndex}\n                        className=\"relative flex-shrink-0 cursor-pointer w-40 h-28\"\n                        onClick={() => handleImageClick(imgIndex)}\n                      >\n                        <Image\n                          src={media.url}\n                          alt={`Imagen de ${area.name}`}\n                          fill\n                          className=\"rounded-lg object-cover border border-client-primary\"\n                        />\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n\n      <ImageModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        media={projectMedia}\n        initialIndex={modalImageIndex}\n      />\n    </div>\n  );\n}\n",
          "projectDetails.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { Project } from \"@/lib/definitios\";\nimport DetailCard from \"./detailCard\";\n\nconst Ruler = dynamic(() => import(\"lucide-react\").then((mod) => mod.Ruler));\nconst Bed = dynamic(() => import(\"lucide-react\").then((mod) => mod.Bed));\nconst Toilet = dynamic(() => import(\"lucide-react\").then((mod) => mod.Toilet));\nconst Armchair = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Armchair)\n);\nconst House = dynamic(() => import(\"lucide-react\").then((mod) => mod.House));\nconst Building = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building)\n);\nconst Warehouse = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Warehouse)\n);\nconst Car = dynamic(() => import(\"lucide-react\").then((mod) => mod.Car));\nconst Truck = dynamic(() => import(\"lucide-react\").then((mod) => mod.Truck));\nconst Sprout = dynamic(() => import(\"lucide-react\").then((mod) => mod.Sprout));\nconst Wrench = dynamic(() => import(\"lucide-react\").then((mod) => mod.Wrench));\nconst MoveVertical = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.MoveVertical)\n);\nconst Shirt = dynamic(() => import(\"lucide-react\").then((mod) => mod.Shirt));\nconst CalendarDays = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.CalendarDays)\n);\nconst ArrowUp10 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ArrowUp10)\n);\nconst CircleDollarSign = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.CircleDollarSign)\n);\nconst Sun = dynamic(() => import(\"lucide-react\").then((mod) => mod.Sun));\nconst CheckCircle = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.CheckCircle)\n);\nconst DoorOpen = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.DoorOpen)\n);\n\ninterface ProjectDetailsProps {\n  project: Project;\n}\n\nexport default function ProjectDetails({ project }: ProjectDetailsProps) {\n  const details = [\n    {\n      group: \"Características generales\",\n      items: [\n        {\n          label: \"Conjunto\",\n          value: project.housingType?.name || \"\",\n          icon: <Building />,\n        },\n        {\n          label: \"Área total\",\n          value:\n            project.totalArea && project.totalArea > 0\n              ? `${project.totalArea} m²`\n              : null,\n          icon: <Ruler />,\n        },\n        {\n          label: \"Área construida\",\n          value:\n            project.builtArea && project.builtArea > 0\n              ? `${project.builtArea} m²`\n              : null,\n          icon: <Ruler />,\n        },\n        {\n          label: \"Altura libre\",\n          value:\n            project.freeHeight && project.freeHeight > 0\n              ? `${project.freeHeight} m`\n              : null,\n          icon: <MoveVertical />,\n        },\n        {\n          label: \"Ancho\",\n          value:\n            project.width && project.width > 0 ? `${project.width} m` : null,\n          icon: <Ruler />,\n        },\n        {\n          label: \"Largo\",\n          value:\n            project.length && project.length > 0 ? `${project.length} m` : null,\n          icon: <Ruler />,\n        },\n        {\n          label: \"Tipo de Vivienda\",\n          value: project.housingType?.name || \"\",\n          icon: <House />,\n        },\n        {\n          label: \"Unds. Disponibles\",\n          value:\n            project.availableUnits && project.availableUnits > 0\n              ? project.availableUnits.toString()\n              : null,\n          icon: <CheckCircle />,\n        },\n        {\n          label: \"Año de Construcción\",\n          value:\n            project.yearBuilt && project.yearBuilt > 0\n              ? project.yearBuilt.toString()\n              : null,\n          icon: <CalendarDays />,\n        },\n      ],\n    },\n\n    ...(project.bedrooms ||\n    project.bathrooms ||\n    project.lobbies ||\n    project.parkingSpots ||\n    project.heavyParking ||\n    project.towers ||\n    project.storageUnits ||\n    project.socioeconomicLevel ||\n    project.floorNumber\n      ? [\n          {\n            group: \"Espacios y comodidades\",\n            items: [\n              {\n                label: \"Habitaciones\",\n                value:\n                  project.bedrooms && project.bedrooms > 0\n                    ? project.bedrooms.toString()\n                    : null,\n                icon: <Bed />,\n              },\n              {\n                label: \"Baños\",\n                value:\n                  project.bathrooms && project.bathrooms > 0\n                    ? project.bathrooms.toString()\n                    : null,\n                icon: <Toilet />,\n              },\n              {\n                label: \"Salas de estar\",\n                value:\n                  project.lobbies && project.lobbies > 0\n                    ? project.lobbies.toString()\n                    : null,\n                icon: <Armchair />,\n              },\n              {\n                label: \"Parqueaderos\",\n                value:\n                  project.parkingSpots && project.parkingSpots > 0\n                    ? project.parkingSpots.toString()\n                    : null,\n                icon: <Car />,\n              },\n              {\n                label: \"Est. vehículos pesados\",\n                value:\n                  project.heavyParking && project.heavyParking > 0\n                    ? project.heavyParking.toString()\n                    : null,\n                icon: <Truck />,\n              },\n              {\n                label: \"Torres\",\n                value:\n                  project.towers && project.towers > 0\n                    ? project.towers.toString()\n                    : null,\n                icon: <Building />,\n              },\n              {\n                label: \"Bodegas\",\n                value:\n                  project.storageUnits && project.storageUnits > 0\n                    ? project.storageUnits.toString()\n                    : null,\n                icon: <Warehouse />,\n              },\n              {\n                label: \"Nivel Socioeconómico\",\n                value:\n                  project.socioeconomicLevel && project.socioeconomicLevel > 0\n                    ? project.socioeconomicLevel.toString()\n                    : null,\n                icon: <CircleDollarSign />,\n              },\n              {\n                label: \"Número de Piso\",\n                value:\n                  project.floorNumber && project.floorNumber > 0\n                    ? project.floorNumber.toString()\n                    : null,\n                icon: <ArrowUp10 />,\n              },\n            ],\n          },\n        ]\n      : []),\n\n    ...(project.propertyType.id === 1001 || project.propertyType.id === 1002\n      ? [\n          {\n            group: \"Opciones adicionales\",\n            items: [\n              {\n                label: \"Personalizable\",\n                value: project.customizationOptions ? \"Sí\" : \"NO\",\n                icon: <Wrench />,\n              },\n              {\n                label: \"Balcón\",\n                value: project.balcony ? \"Sí\" : \"No\",\n                icon: <DoorOpen />,\n              },\n              {\n                label: \"Jardín\",\n                value: project.garden ? \"Sí\" : \"No\",\n                icon: <Sprout />,\n              },\n              {\n                label: \"Cuarto de ropas\",\n                value: project.laundryArea ? \"Sí\" : \"No\",\n                icon: <Shirt />,\n              },\n              {\n                label: \"Terraza\",\n                value: project.terrace ? \"Sí\" : \"No\",\n                icon: <Sun />,\n              },\n              {\n                label: \"Elevador\",\n                value: project.elevator ? \"Sí\" : \"No\",\n                icon: <ArrowUp10 />,\n              },\n            ],\n          },\n        ]\n      : []),\n  ];\n\n  const [openGroups, setOpenGroups] = useState<boolean[]>(\n    new Array(details.length).fill(true)\n  );\n\n  const toggleGroup = (index: number) => {\n    setOpenGroups((prev) =>\n      prev.map((isOpen, i) => (i === index ? !isOpen : isOpen))\n    );\n  };\n\n  return (\n    <div className=\"my-8\">\n      <h2 className=\"mb-6 text-2xl font-semibold text-white\">\n        Detalles del Proyecto\n      </h2>\n\n      <div className=\"space-y-6\">\n        {details.map((group, index) => (\n          <div key={index} className=\"mb-4\">\n            <div\n              className=\"flex cursor-pointer items-center justify-between rounded-lg p-4 shadow bg-white text-client-primary\"\n              onClick={() => toggleGroup(index)}\n            >\n              <span className=\"text-lg font-medium\">{group.group}</span>\n\n              <span\n                className={`transition-transform text-client-accent ${\n                  openGroups[index] ? \"rotate-180\" : \"rotate-0\"\n                }`}\n              >\n                ▼\n              </span>\n            </div>\n\n            {openGroups[index] && (\n              <div className=\"mt-2 grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4\">\n                {group.items.map(\n                  (item, index) =>\n                    item.value && (\n                      <DetailCard\n                        key={index}\n                        icon={\n                          <div className=\"text-client-accent\">{item.icon}</div>\n                        }\n                        label={item.label}\n                        value={item.value}\n                      />\n                    )\n                )}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
          "projectHeader.tsx": "import dynamic from \"next/dynamic\";\nimport { Project } from \"@/lib/definitios\";\nimport { formatNumber } from \"@/utils/formatters\";\nimport ShareButton from \"@/app/ui/admin/projects/shareButton\";\n\nconst MapPin = dynamic(() => import(\"lucide-react\").then((mod) => mod.MapPin));\nconst CalendarDays = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.CalendarDays)\n);\n\ninterface ProjectHeaderProps {\n  project: Project;\n}\n\nexport default function ProjectHeader({ project }: ProjectHeaderProps) {\n  const formattedPrice = formatNumber(project.price ?? 0);\n\n  return (\n    <div className=\"flex flex-col gap-2 w-full px-4 pt-28 sm:px-6 lg:px-12 lg:pt-24\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <h1 className=\"text-4xl font-bold text-white\">{project.name}</h1>\n\n          <ShareButton message=\"¡Mira este increíble proyecto en nuestra página web!\" />\n        </div>\n\n        {formattedPrice && formattedPrice !== \"0\" && (\n          <p className=\"mt-2 text-3xl font-semibold sm:mt-0 text-white lg:self-end\">\n            $ {formattedPrice}\n          </p>\n        )}\n      </div>\n\n      <div className=\"lg:mt-2 lg:grid lg:grid-cols-2 lg:items-start lg:gap-2\">\n        <div className=\"flex flex-col text-lg lg:flex-row lg:items-center lg:space-x-2\">\n          <div className=\"flex items-center text-white\">\n            <MapPin className=\"mr-1 text-client-accent\" />\n\n            <span>{project.address}</span>\n          </div>\n\n          <span className=\"hidden lg:inline text-white\">|</span>\n\n          <span className=\"pl-4 font-semibold lg:pl-0 text-client-accent\">\n            {project.city.name}, {project.city.departament.name}\n          </span>\n        </div>\n\n        {project.availableDate && (\n          <div className=\"hidden items-center text-sm lg:ml-auto lg:mt-0 lg:flex text-white\">\n            <CalendarDays className=\"mr-2 text-client-accent\" />\n\n            <span>\n              Fecha estimada de entrega:{\" \"}\n              <span className=\"font-semibold text-client-accent\">\n                {new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\n                  year: \"numeric\",\n                  month: \"long\",\n                })}\n              </span>\n            </span>\n          </div>\n        )}\n      </div>\n\n      {project.availableDate && (\n        <div className=\"flex items-center text-sm lg:hidden text-white\">\n          <CalendarDays className=\"mr-2 text-client-accent\" />\n\n          <span>\n            Fecha estimada de entrega:{\" \"}\n            {project.availableDate ? (\n              <span className=\"font-semibold text-client-accent\">\n                {new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\n                  year: \"numeric\",\n                  month: \"long\",\n                })}\n              </span>\n            ) : (\n              <span className=\"font-semibold text-client-textPlaceholder\">\n                No disponible\n              </span>\n            )}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n",
          "projectLocation.tsx": "\"use client\";\r\n\r\nimport React from \"react\";\r\nimport Map from \"@/app/ui/realEstate/project/map\";\r\n\r\ninterface ProjectLocationProps {\r\n  latitude: number;\r\n  longitude: number;\r\n  address: string;\r\n}\r\n\r\nexport default function ProjectLocation({\r\n  latitude,\r\n  longitude,\r\n  address,\r\n}: ProjectLocationProps) {\r\n  return (\r\n    <div className=\"mb-8\">\r\n      <h2 className=\"mb-4 text-2xl font-semibold text-white\">\r\n        Ubicación del Proyecto\r\n      </h2>\r\n\r\n      <p className=\"mb-6 text-lg text-client-textSecondary\">\r\n        Explora la ubicación exacta de tu próximo hogar en el mapa interactivo a\r\n        continuación.\r\n      </p>\r\n\r\n      <div className=\"z-10 h-[300px] w-full overflow-hidden rounded-lg border border-white\">\r\n        <Map coordinates={{ lat: latitude, lng: longitude }} />\r\n      </div>\r\n\r\n      <p className=\"mt-2 text-lg text-client-text font-medium\">{address}</p>\r\n    </div>\r\n  );\r\n}\r\n",
          "projectNearbyServices.tsx": "import dynamic from \"next/dynamic\";\nimport { NearbyService } from \"@/lib/definitios\";\nimport DetailCard from \"./detailCard\";\n\nconst School = dynamic(() => import(\"lucide-react\").then((mod) => mod.School));\nconst Store = dynamic(() => import(\"lucide-react\").then((mod) => mod.Store));\nconst Hospital = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Hospital)\n);\nconst Smile = dynamic(() => import(\"lucide-react\").then((mod) => mod.Smile));\n\ninterface ProjectNearbyServicesProps {\n  services: NearbyService[];\n}\n\nconst serviceIcons: { [key: string]: JSX.Element } = {\n  Colegios: <School className=\"text-client-accent\" />,\n  Comercio: <Store className=\"text-client-accent\" />,\n  \"Centros de Salud\": <Hospital className=\"text-client-accent\" />,\n  \"Parque de Juegos\": <Smile className=\"text-client-accent\" />,\n};\n\nexport default function ProjectNearbyServices({\n  services,\n}: ProjectNearbyServicesProps) {\n  return (\n    <div className=\"my-8\">\n      <h2 className=\"mb-6 text-2xl font-semibold text-white\">\n        Servicios Cercanos\n      </h2>\n\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n        {services.map((service) => (\n          <div key={service.id}>\n            <DetailCard\n              icon={serviceIcons[service.name] || <Store />}\n              label={service.name}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
          "projectPlans.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport Image from \"next/image\";\nimport { ProjectMedia } from \"@/lib/definitios\";\nimport ImageModal from \"./imageModal\";\n\ninterface ProjectPlansProps {\n  projectMedia: ProjectMedia[];\n}\n\nexport default function ProjectPlans({ projectMedia }: ProjectPlansProps) {\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const [activeTab, setActiveTab] = useState(0);\n\n  return (\n    <div className=\"mt-4 rounded-lg p-3 bg-client-backgroundAlt border border-client-accent\">\n      <div className=\"mb-4 flex space-x-4 border-b-2 border-b-client-accent text-white\">\n        {projectMedia.map((plan, index) => (\n          <button\n            key={index}\n            onClick={() => setActiveTab(index)}\n            className={`transform px-4 py-2 text-xl font-semibold transition duration-300 ${\n              activeTab === index\n                ? \"text-white hover:scale-105\"\n                : \"text-client-secondary hover:scale-105 hover:text-client-textSecondary\"\n            }`}\n          >\n            {plan.tag}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"flex flex-col items-center space-y-4 lg:flex-row lg:items-start lg:space-x-4 lg:space-y-0\">\n        <div className=\"w-full lg:w-2/3 relative h-96 \">\n          <Image\n            src={projectMedia[activeTab].url}\n            alt={projectMedia[activeTab].tag}\n            fill\n            sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 500px\"\n            className=\"cursor-pointer rounded-lg object-cover\"\n            onClick={() => {\n              setIsModalOpen(true);\n              setCurrentImage(activeTab);\n            }}\n          />\n        </div>\n\n        <div className=\"w-full lg:w-1/3\">\n          <h3 className=\"mb-2 text-xl font-medium text-white\">\n            {projectMedia[activeTab].tag}\n          </h3>\n\n          <p className=\"text-client-textPlaceholder\">\n            {projectMedia[activeTab].description}\n          </p>\n        </div>\n      </div>\n\n      <ImageModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        media={projectMedia}\n        initialIndex={currentImage}\n      />\n    </div>\n  );\n}\n",
          "projectView.tsx": "\"use client\";\r\n\r\nimport { useRef } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Project } from \"@/lib/definitios\";\r\n\r\nimport ProjectHeaderSkeleton from \"@/app/ui/skeletons/projectHeaderSkeleton\";\r\nimport { ProjectCarouselSkeleton } from \"@/app/ui/skeletons/projectCarouselSkeleton\";\r\nimport { ProjectPlansSkeleton } from \"@/app/ui/skeletons/projectPlansSkeleton\";\r\nimport ProjectDetailsSkeleton from \"@/app/ui/skeletons/projectDetailsSkeleton\";\r\nimport { ProjectNearbyServicesSkeleton } from \"@/app/ui/skeletons/projectNearbyServicesSkeleton\";\r\nimport { ProjectCommonAreasSkeleton } from \"@/app/ui/skeletons/projectCommonAreasSkeleton\";\r\n\r\nconst ProjectHeader = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectHeader\"),\r\n  { loading: () => <ProjectHeaderSkeleton /> }\r\n);\r\n\r\nconst ProjectCarousel = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectCarousel\"),\r\n  { loading: () => <ProjectCarouselSkeleton /> }\r\n);\r\n\r\nconst ProjectPlans = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectPlans\"),\r\n  { loading: () => <ProjectPlansSkeleton /> }\r\n);\r\n\r\nconst ProjectDetails = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectDetails\"),\r\n  { loading: () => <ProjectDetailsSkeleton /> }\r\n);\r\n\r\nconst ProjectNearbyServices = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectNearbyServices\"),\r\n  { loading: () => <ProjectNearbyServicesSkeleton /> }\r\n);\r\n\r\nconst ProjectCommonAreas = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectCommonAreas\"),\r\n  { loading: () => <ProjectCommonAreasSkeleton /> }\r\n);\r\n\r\nconst ProjectLocation = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/projectLocation\"),\r\n  { loading: () => <ProjectCommonAreasSkeleton /> }\r\n);\r\n\r\nconst ContactFormSection = dynamic(\r\n  () => import(\"@/app/ui/realEstate/project/contactFormSection\"),\r\n  {\r\n    loading: () => <div>Cargando formulario de contacto...</div>,\r\n  }\r\n);\r\n\r\ninterface ProjectViewProps {\r\n  project: Project;\r\n}\r\n\r\nexport default function ProjectView({ project }: ProjectViewProps) {\r\n  const locationRef = useRef<HTMLDivElement>(null);\r\n  const formWrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n  return (\r\n    <div className=\"bg-client-backgroundLight\">\r\n      <ProjectHeader project={project} />\r\n\r\n      <ProjectCarousel\r\n        projectMedia={project.projectMedia.filter(\r\n          (media) => media.imageType !== null && media.imageType !== 1005\r\n        )}\r\n      />\r\n\r\n      <div className=\"mt-4 flex justify-center\">\r\n        <hr className=\"mt-4 w-3/4 border-t border-white\" />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 gap-4 pt-8 lg:grid-cols-3\">\r\n        <div className=\"px-4 sm:px-6 lg:px-12 lg:col-span-2 lg:pr-10\">\r\n          {project.projectMedia.filter((media) => media.imageType === 1005)\r\n            .length > 0 && (\r\n            <ProjectPlans\r\n              projectMedia={project.projectMedia.filter(\r\n                (media) => media.imageType === 1005\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <p className=\"my-8 text-lg text-client-text\">\r\n            {project.shortDescription}\r\n          </p>\r\n\r\n          <ProjectDetails project={project} />\r\n\r\n          <div className=\"my-8 text-base\">\r\n            <h2 className=\"mb-2 text-2xl font-semibold text-white\">\r\n              Descripción General\r\n            </h2>\r\n\r\n            <p className=\"whitespace-pre-line text-client-text\">\r\n              {project.detailedDescription}\r\n            </p>\r\n          </div>\r\n\r\n          {project.nearbyServices && project.nearbyServices.length > 0 && (\r\n            <ProjectNearbyServices services={project.nearbyServices} />\r\n          )}\r\n\r\n          {project.commonAreas && project.commonAreas.length > 0 && (\r\n            <div>\r\n              <ProjectCommonAreas\r\n                areas={project.commonAreas}\r\n                projectMedia={project.projectMedia.filter(\r\n                  (media) => media.commonArea !== null\r\n                )}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div\r\n          className=\"hidden lg:block relative pr-16 pt-8\"\r\n          ref={formWrapperRef}\r\n        >\r\n          <ContactFormSection\r\n            locationRef={locationRef}\r\n            wrapperRef={formWrapperRef}\r\n            propertyId={project.id}\r\n            propertyName={project.name}\r\n            toEmail={\r\n              project.email ?? process.env.NEXT_PUBLIC_COMPANY_EMAIL ?? \"\"\r\n            }\r\n            phoneNumber={\r\n              project.phoneNumber ?? process.env.NEXT_PUBLIC_COMPANY_PHONE ?? \"\"\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div ref={locationRef} className=\"px-4 sm:px-6 lg:px-12\">\r\n        <ProjectLocation\r\n          latitude={project.latitude}\r\n          longitude={project.longitude}\r\n          address={project.address}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"block px-4 sm:px-6 lg:hidden my-8\">\r\n        <ContactFormSection\r\n          locationRef={locationRef}\r\n          wrapperRef={formWrapperRef}\r\n          propertyId={project.id}\r\n          propertyName={project.name}\r\n          toEmail={project.email ?? process.env.NEXT_PUBLIC_COMPANY_EMAIL ?? \"\"}\r\n          phoneNumber={\r\n            project.phoneNumber ?? process.env.NEXT_PUBLIC_COMPANY_PHONE ?? \"\"\r\n          }\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "recommendedProjects.tsx": "import Image from \"next/image\";\n\ninterface Project {\n  id: number;\n  images: string[];\n  name: string;\n  location: string;\n  price: number;\n  area: number;\n  deliveryTime: string;\n  rooms: string;\n}\n\ninterface RecommendedProjectsProps {\n  projects: Project[];\n}\n\nexport default function RecommendedProjects({\n  projects,\n}: RecommendedProjectsProps) {\n  return (\n    <div className=\"my-12 px-8\">\n      <h2 className=\"mb-6 text-3xl font-semibold\" style={{ color: \"#5D4037\" }}>\n        Otras propiedades que podrían interesarte\n      </h2>\n      <div className=\"flex space-x-6 overflow-x-auto\">\n        {projects.map((project) => (\n          <div\n            key={project.id}\n            className=\"relative min-w-[250px] max-w-[300px] flex-shrink-0 overflow-hidden rounded-lg bg-white shadow-md\"\n            style={{\n              border: \"2px solid #DAA520\",\n              boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.15)\",\n            }}\n          >\n            <div className=\"absolute left-2 top-2 flex flex-col space-y-1\">\n              <span className=\"rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800\">\n                {project.deliveryTime}\n              </span>\n              <span className=\"rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800\">\n                {project.rooms}\n              </span>\n            </div>\n\n            <div className=\"relative h-40 w-full\">\n              <Image\n                src={project.images[0]}\n                alt={project.name}\n                fill\n                className=\"rounded-t-lg object-cover\"\n              />\n            </div>\n\n            <div className=\"p-4\">\n              <h3\n                className=\"line-clamp-1 text-lg font-semibold text-gray-800\"\n                style={{ color: \"#5D4037\" }}\n              >\n                {project.name}\n              </h3>\n              <p className=\"line-clamp-1 text-sm text-gray-600\">\n                {project.location}\n              </p>\n              <p className=\"mt-2 text-sm font-semibold text-gray-800\">\n                Precio desde\n              </p>\n              <p className=\"text-base font-bold\" style={{ color: \"#8B4513\" }}>\n                ${project.price.toLocaleString()} COP\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"
        },
        "projectCardActions.tsx": "\"use client\";\r\n\r\nimport { Edit, Trash2 } from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface ProjectCardActionsProps {\r\n  id: number;\r\n  name: string;\r\n  urlEdit: string;\r\n  onDelete: (id: number, name: string) => void;\r\n}\r\n\r\nexport default function ProjectCardActions({\r\n  id,\r\n  name,\r\n  urlEdit,\r\n  onDelete,\r\n}: ProjectCardActionsProps) {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"absolute right-2 top-2 z-10 flex space-x-1\">\r\n      <button\r\n        title=\"Editar\"\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          router.push(urlEdit);\r\n        }}\r\n        className=\"rounded-full bg-blue-500 p-2 text-white transition-colors hover:bg-blue-600\"\r\n      >\r\n        <Edit className=\"h-4 w-4\" />\r\n      </button>\r\n\r\n      <button\r\n        title=\"Eliminar\"\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          onDelete(id, name);\r\n        }}\r\n        className=\"rounded-full bg-red-500 p-2 text-white transition-colors hover:bg-red-600\"\r\n      >\r\n        <Trash2 className=\"h-4 w-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n",
        "projectFilter.tsx": "\"use client\";\r\n\r\nimport { memo, useState, useEffect, useRef } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport FilterOption from \"./filter/filterOption\";\r\nimport FilterNumericCounter from \"./filter/filterNumericCounter\";\r\nimport FilterOptionSlider from \"./filter/filterOptionSlider\";\r\nimport FilterSkeleton from \"../skeletons/filterSkeleton\";\r\n\r\nconst Building2 = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.Building2)\r\n);\r\nconst Building = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.Building)\r\n);\r\nconst House = dynamic(() => import(\"lucide-react\").then((mod) => mod.House));\r\nconst DollarSign = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.DollarSign)\r\n);\r\nconst Bed = dynamic(() => import(\"lucide-react\").then((mod) => mod.Bed));\r\nconst Toilet = dynamic(() => import(\"lucide-react\").then((mod) => mod.Toilet));\r\nconst Sofa = dynamic(() => import(\"lucide-react\").then((mod) => mod.Sofa));\r\nconst Warehouse = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.Warehouse)\r\n);\r\nconst ConciergeBell = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.ConciergeBell)\r\n);\r\nconst X = dynamic(() => import(\"lucide-react\").then((mod) => mod.X));\r\nconst Ruler = dynamic(() => import(\"lucide-react\").then((mod) => mod.Ruler));\r\n\r\ntype Category =\r\n  | \"cities\"\r\n  | \"propertyTypes\"\r\n  | \"housingTypes\"\r\n  | \"commonAreas\"\r\n  | \"nearbyServices\"\r\n  | \"bedrooms\"\r\n  | \"bathrooms\"\r\n  | \"lobbies\"\r\n  | \"price\"\r\n  | \"area\";\r\n\r\ninterface ProjectFilterProps {\r\n  selectedButtons: Record<Category, number[]>;\r\n  setSelectedButtons: React.Dispatch<\r\n    React.SetStateAction<Record<Category, number[]>>\r\n  >;\r\n  setFilterOpen: (open: boolean) => void;\r\n  priceRange: { min: number; max: number };\r\n  areaRange: { min: number; max: number };\r\n  metadata: any;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst ProjectFilter = ({\r\n  selectedButtons,\r\n  setSelectedButtons,\r\n  setFilterOpen,\r\n  priceRange,\r\n  areaRange,\r\n  metadata,\r\n  isLoading,\r\n}: ProjectFilterProps) => {\r\n  const [isOpen, setIsOpen] = useState<Record<Category, boolean>>({\r\n    cities: false,\r\n    propertyTypes: false,\r\n    housingTypes: false,\r\n    commonAreas: false,\r\n    nearbyServices: false,\r\n    bedrooms: false,\r\n    bathrooms: false,\r\n    lobbies: false,\r\n    price: false,\r\n    area: false,\r\n  });\r\n\r\n  const [isFixed, setIsFixed] = useState(false);\r\n  const filterRef = useRef<HTMLDivElement>(null);\r\n\r\n  const toggleOpen = (category: Category) => {\r\n    setIsOpen((prevState) => ({\r\n      ...prevState,\r\n      [category]: !prevState[category],\r\n    }));\r\n  };\r\n\r\n  const [bottomReached, setBottomReached] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const filterTop = filterRef.current?.getBoundingClientRect().top ?? 0;\r\n      const scrollY = window.scrollY;\r\n      const bottomOffset = 30;\r\n\r\n      if (scrollY >= filterTop + bottomOffset && !bottomReached) {\r\n        setIsFixed(true);\r\n      } else {\r\n        setIsFixed(false);\r\n      }\r\n\r\n      const pageHeight = document.documentElement.scrollHeight;\r\n      const windowHeight = window.innerHeight;\r\n      if (windowHeight + scrollY >= pageHeight - 200) {\r\n        setBottomReached(true);\r\n        setIsFixed(false);\r\n      } else {\r\n        setBottomReached(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, [bottomReached]);\r\n\r\n  const updateFilterValue = (\r\n    category: Category,\r\n    newValue: number | number[]\r\n  ) => {\r\n    setSelectedButtons((prevSelected) => ({\r\n      ...prevSelected,\r\n      [category]: Array.isArray(newValue) ? newValue : [newValue],\r\n    }));\r\n  };\r\n\r\n  const changeCount = (\r\n    category: \"bedrooms\" | \"bathrooms\" | \"lobbies\",\r\n    increment: boolean\r\n  ) => {\r\n    setSelectedButtons((prevSelected) => ({\r\n      ...prevSelected,\r\n      [category]: [\r\n        Math.max(\r\n          0,\r\n          Math.min(prevSelected[category][0] + (increment ? 1 : -1), 3)\r\n        ),\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const handleToggleItem = (category: Category, id: number) => {\r\n    setSelectedButtons((prevSelected) => {\r\n      const selectedItems = prevSelected[category];\r\n      return {\r\n        ...prevSelected,\r\n        [category]: selectedItems.includes(id)\r\n          ? selectedItems.filter((itemId) => itemId !== id)\r\n          : [...selectedItems, id],\r\n      };\r\n    });\r\n  };\r\n\r\n  const resetFilters = () => {\r\n    setSelectedButtons({\r\n      cities: [],\r\n      propertyTypes: [],\r\n      housingTypes: [],\r\n      commonAreas: [],\r\n      nearbyServices: [],\r\n      bedrooms: [0],\r\n      bathrooms: [0],\r\n      lobbies: [0],\r\n      price: [0],\r\n      area: [1],\r\n    });\r\n  };\r\n\r\n  if (isLoading) return <FilterSkeleton />;\r\n\r\n  const mainFilters = [\r\n    {\r\n      label: \"Ciudades\",\r\n      icon: <Building2 />,\r\n      items: metadata.cities,\r\n      category: \"cities\" as Category,\r\n    },\r\n    {\r\n      label: \"Tipos de Inmueble\",\r\n      icon: <Building />,\r\n      items: metadata.propertyTypes,\r\n      category: \"propertyTypes\" as Category,\r\n    },\r\n    {\r\n      label: \"Tipos de Vivienda\",\r\n      icon: <House />,\r\n      items: metadata.housingTypes,\r\n      category: \"housingTypes\" as Category,\r\n    },\r\n    {\r\n      label: \"Áreas Comunes\",\r\n      icon: <Warehouse />,\r\n      items: metadata.commonAreas,\r\n      category: \"commonAreas\" as Category,\r\n    },\r\n    {\r\n      label: \"Servicios Cercanos\",\r\n      icon: <ConciergeBell />,\r\n      items: metadata.nearbyServices,\r\n      category: \"nearbyServices\" as Category,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div\r\n      ref={filterRef}\r\n      className={`w-full rounded-lg bg-client-backgroundAlt text-white py-4 shadow-md transition-all duration-300 ease-in-out sm:w-72 md:w-80 ${\r\n        isFixed ? \"sticky top-32 z-10 lg:top-20\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"mt-1 space-y-6\">\r\n        <div className=\"flex items-center justify-between rounded-md pl-2 pr-6\">\r\n          <button\r\n            onClick={resetFilters}\r\n            className=\"transform px-4 py-1 text-lg font-medium transition-transform duration-200 hover:scale-105 hover:font-semibold rounded-md\"\r\n          >\r\n            Borrar filtros\r\n          </button>\r\n\r\n          <div\r\n            className=\"flex cursor-pointer items-center p-1 rounded-md\"\r\n            onClick={() => setFilterOpen(false)}\r\n          >\r\n            <X className=\"transform transition-transform duration-200 hover:scale-110\" />\r\n          </div>\r\n        </div>\r\n\r\n        <hr className=\"border-client-accent\" />\r\n\r\n        <div className=\"space-y-4 overflow-x-hidden px-3 py-1 sm:max-h-[65vh] sm:overflow-y-auto\">\r\n          {mainFilters.map(({ label, icon, items, category }) => (\r\n            <FilterOption\r\n              key={category}\r\n              label={label}\r\n              icon={icon}\r\n              items={items}\r\n              selectedItems={selectedButtons[category]}\r\n              onToggleItem={(id) => handleToggleItem(category, id)}\r\n              isOpen={isOpen[category]}\r\n              onToggleOpen={() => toggleOpen(category)}\r\n            />\r\n          ))}\r\n\r\n          {[\r\n            {\r\n              label: \"Precio\",\r\n              icon: <DollarSign />,\r\n              value: selectedButtons.price[0] || 0,\r\n              min: priceRange.min || 0,\r\n              max: priceRange.max || 0,\r\n              step: 100000,\r\n              category: \"price\" as Category,\r\n              prefixText: \"Desde\",\r\n              suffixText: \"COP\",\r\n            },\r\n            {\r\n              label: \"Área\",\r\n              icon: <Ruler />,\r\n              value: selectedButtons.area[0] || 0,\r\n              min: areaRange.min || 0,\r\n              max: areaRange.max || 0,\r\n              step: 100,\r\n              category: \"area\" as Category,\r\n              prefixText: \"Desde\",\r\n              suffixText: \"m²\",\r\n            },\r\n          ].map(\r\n            ({\r\n              label,\r\n              icon,\r\n              value,\r\n              min,\r\n              max,\r\n              step,\r\n              category,\r\n              prefixText,\r\n              suffixText,\r\n            }) => (\r\n              <FilterOptionSlider\r\n                key={category}\r\n                label={label}\r\n                icon={icon}\r\n                value={value}\r\n                min={min}\r\n                max={max}\r\n                step={step}\r\n                onChange={(newValue) => updateFilterValue(category, newValue)}\r\n                isOpen={isOpen[category]}\r\n                setIsOpen={() => toggleOpen(category)}\r\n                category={category}\r\n                prefixText={prefixText}\r\n                suffixText={suffixText}\r\n              />\r\n            )\r\n          )}\r\n\r\n          {[\r\n            {\r\n              label: \"Nº de habitaciones\",\r\n              icon: <Bed />,\r\n              category: \"bedrooms\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\r\n            },\r\n            {\r\n              label: \"Nº de baños\",\r\n              icon: <Toilet />,\r\n              category: \"bathrooms\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\r\n            },\r\n            {\r\n              label: \"Nº de salas de estar\",\r\n              icon: <Sofa />,\r\n              category: \"lobbies\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\r\n            },\r\n          ].map(({ label, icon, category }) => (\r\n            <FilterNumericCounter\r\n              key={category}\r\n              label={label}\r\n              icon={icon}\r\n              isOpen={isOpen[category]}\r\n              setIsOpen={() => toggleOpen(category)}\r\n              value={selectedButtons[category][0]}\r\n              increment={() => changeCount(category, true)}\r\n              decrement={() => changeCount(category, false)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(ProjectFilter);\r\n",
        "projectsContainer.tsx": "\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport { useProjectsMetadata } from \"@/app/hooks/projects/metadata/useProjectsMetadata\";\r\nimport PropertyCard from \"./PropertyCard\";\r\nimport ProjectsMap from \"./projectsMap\";\r\n\r\nconst ProjectFilter = dynamic(\r\n  () => import(\"@/app/ui/realEstate/projectFilter\"),\r\n  {\r\n    ssr: false,\r\n    loading: () => null,\r\n  }\r\n);\r\n\r\ninterface ProjectsContainerProps {\r\n  projects: ProjectView[];\r\n  totalEntries: number;\r\n  isLoading: boolean;\r\n  fetchMoreProjects: () => void;\r\n  filterOpen: boolean;\r\n  showMap: boolean;\r\n  setFilterOpen: (open: boolean) => void;\r\n  priceRange: { min: number; max: number };\r\n  areaRange: { min: number; max: number };\r\n  selectedButtons: Record<string, number[]>;\r\n  setSelectedButtons: React.Dispatch<\r\n    React.SetStateAction<Record<string, number[]>>\r\n  >;\r\n  setBounds: (bounds: google.maps.LatLngBounds | null) => void;\r\n  highlightCoords?: { latitude: number; longitude: number } | null;\r\n}\r\n\r\nconst ProjectsContainer = ({\r\n  projects,\r\n  totalEntries,\r\n  isLoading,\r\n  fetchMoreProjects,\r\n  filterOpen,\r\n  showMap,\r\n  setFilterOpen,\r\n  priceRange,\r\n  areaRange,\r\n  selectedButtons,\r\n  setSelectedButtons,\r\n  setBounds,\r\n  highlightCoords,\r\n}: ProjectsContainerProps) => {\r\n  const { metadata, isLoadingMetadata } = useProjectsMetadata();\r\n\r\n  const projectCards = useMemo(\r\n    () =>\r\n      projects.map((project) => (\r\n        <div\r\n          key={project.id}\r\n          className=\"relative flex items-center justify-center\"\r\n        >\r\n          <div className=\"w-full max-w-xs h-80\">\r\n            <PropertyCard\r\n              id={project.id}\r\n              name={project.name}\r\n              location={project.cityName}\r\n              images={project.images}\r\n              price={project.price || 0}\r\n              area={project.area}\r\n              bedrooms={project.bedrooms || undefined}\r\n              bathrooms={project.bathrooms || undefined}\r\n              parkingSpots={project.parkingSpots || undefined}\r\n              url=\"/inmobiliaria\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )),\r\n    [projects]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        \"flex flex-col sm:flex-row sm:justify-between\",\r\n        filterOpen && \"gap-4 sm:space-x-6\"\r\n      )}\r\n    >\r\n      {filterOpen && (\r\n        <div\r\n          className={clsx(\r\n            \"sm:ml-6 lg:ml-8 xl:ml-20 w-full flex flex-col items-center sm:w-72 sm:px-10\",\r\n            !showMap ? \"-mt-10 mb-10 py-4\" : \"\"\r\n          )}\r\n        >\r\n          <ProjectFilter\r\n            selectedButtons={selectedButtons}\r\n            setSelectedButtons={setSelectedButtons}\r\n            setFilterOpen={setFilterOpen}\r\n            priceRange={priceRange}\r\n            areaRange={areaRange}\r\n            metadata={metadata}\r\n            isLoading={isLoadingMetadata}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {showMap ? (\r\n        <div className=\"relative h-screen w-full transition-transform duration-300\">\r\n          <ProjectsMap\r\n            projects={projects}\r\n            setBounds={setBounds}\r\n            showMap={showMap}\r\n            highlightCoords={highlightCoords}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div\r\n          className={clsx(\r\n            \"-mt-10 mb-10 flex w-full flex-col\",\r\n            !filterOpen\r\n              ? \"px-6 py-4 lg:px-8 xl:px-20\"\r\n              : \"pr-6 p-4 lg:pr-8 xl:pr-20\"\r\n          )}\r\n        >\r\n          <div\r\n            className={clsx(\r\n              \"mb-8 grid gap-x-4 gap-y-6\",\r\n              filterOpen\r\n                ? \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4\"\r\n                : \"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5\"\r\n            )}\r\n          >\r\n            {projectCards}\r\n          </div>\r\n\r\n          {projects.length < totalEntries && (\r\n            <button\r\n              onClick={fetchMoreProjects}\r\n              disabled={isLoading}\r\n              className={clsx(\r\n                \"mt-6 self-center bg-client-backgroundAlt border border-white rounded-full px-6 py-2 text-white shadow-lg transition-colors\",\r\n                isLoading\r\n                  ? \"cursor-not-allowed\"\r\n                  : \"hover:bg-client-white hover:text-black\"\r\n              )}\r\n            >\r\n              {isLoading ? \"Cargando...\" : \"Mostrar más\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ProjectsContainer, (prevProps, nextProps) => {\r\n  return (\r\n    prevProps.projects.length === nextProps.projects.length &&\r\n    prevProps.isLoading === nextProps.isLoading &&\r\n    prevProps.totalEntries === nextProps.totalEntries &&\r\n    JSON.stringify(prevProps.selectedButtons) ===\r\n      JSON.stringify(nextProps.selectedButtons) &&\r\n    prevProps.filterOpen === nextProps.filterOpen &&\r\n    prevProps.showMap === nextProps.showMap\r\n  );\r\n});\r\n",
        "projectsMap.tsx": "\"use client\";\r\n\r\nimport { useMemo, useState, useEffect, useRef } from \"react\";\r\nimport { GoogleMap } from \"@react-google-maps/api\";\r\nimport { Plus, Minus, LocateFixed } from \"lucide-react\";\r\nimport { ProjectView } from \"@/lib/definitios\";\r\nimport PropertyCard from \"./PropertyCard\";\r\nimport Loader from \"../loader\";\r\n\r\nconst containerStyle = {\r\n  width: \"100%\",\r\n  height: \"100vh\",\r\n};\r\n\r\nconst DEFAULT_CENTER = { lat: 4.5709, lng: -74.2973 };\r\n\r\nexport default function ProjectsMap({\r\n  projects,\r\n  setBounds,\r\n  showMap,\r\n  highlightCoords,\r\n}: {\r\n  projects: ProjectView[];\r\n  setBounds: (bounds: google.maps.LatLngBounds | null) => void;\r\n  showMap: boolean;\r\n  highlightCoords?: { latitude: number; longitude: number } | null;\r\n}) {\r\n  const [selectedProject, setSelectedProject] = useState<ProjectView | null>(\r\n    null\r\n  );\r\n  const mapRef = useRef<google.maps.Map | null>(null);\r\n  let [markers, setMarkers] = useState<\r\n    google.maps.marker.AdvancedMarkerElement[]\r\n  >([]);\r\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\r\n  const [locationMarker, setLocationMarker] =\r\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\r\n\r\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\r\n\r\n  const handleBoundsChanged = () => {\r\n    if (!showMap) {\r\n      return;\r\n    }\r\n\r\n    if (mapRef.current) {\r\n      const newBounds = mapRef.current.getBounds();\r\n      if (newBounds) {\r\n        setBounds(newBounds);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCloseCard = () => {\r\n    setSelectedProject(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const location = {\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude,\r\n        };\r\n\r\n        if (mapRef.current) {\r\n          updateLocationMarker(mapRef.current, location);\r\n        }\r\n      },\r\n      (error) => {\r\n        console.error(\r\n          \"Error obteniendo la ubicación del usuario:\",\r\n          error.message\r\n        );\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  const validProjects = useMemo(() => {\r\n    return projects.map((project) => ({\r\n      ...project,\r\n      latitude: parseFloat(project.latitude as unknown as string),\r\n      longitude: parseFloat(project.longitude as unknown as string),\r\n    }));\r\n  }, [projects]);\r\n\r\n  useEffect(() => {\r\n    if (mapRef.current && isMapsReady) {\r\n      clearMarkers();\r\n      addMarkers(mapRef.current);\r\n    }\r\n  }, [validProjects, isMapsReady, isMapLoaded, highlightCoords]);\r\n\r\n  useEffect(() => {\r\n    if (!highlightCoords || !mapRef.current || !isMapLoaded) return;\r\n\r\n    const map = mapRef.current;\r\n\r\n    const waitForMapToRender = () => {\r\n      const container = map.getDiv();\r\n      const isVisible =\r\n        container.offsetWidth > 0 &&\r\n        container.offsetHeight > 0 &&\r\n        container.getClientRects().length > 0;\r\n\r\n      if (isVisible) {\r\n        updateLocationMarker(map, highlightCoords);\r\n      } else {\r\n        setTimeout(waitForMapToRender, 100);\r\n      }\r\n    };\r\n\r\n    waitForMapToRender();\r\n  }, [highlightCoords, isMapLoaded]);\r\n\r\n  useEffect(() => {\r\n    if (highlightCoords && mapRef.current) {\r\n      updateLocationMarker(mapRef.current, highlightCoords);\r\n    }\r\n  }, [highlightCoords]);\r\n\r\n  const clearMarkers = () => {\r\n    markers.forEach((marker) => {\r\n      marker.map = null;\r\n      marker.element?.remove();\r\n    });\r\n    setMarkers([]);\r\n  };\r\n\r\n  const updateLocationMarker = (\r\n    map: google.maps.Map,\r\n    coords:\r\n      | { lat: number; lng: number }\r\n      | { latitude: number; longitude: number }\r\n  ) => {\r\n    const { AdvancedMarkerElement } = google.maps.marker;\r\n\r\n    const lat = \"lat\" in coords ? coords.lat : coords.latitude;\r\n    const lng = \"lng\" in coords ? coords.lng : coords.longitude;\r\n    const position = { lat, lng };\r\n\r\n    map.setCenter(position);\r\n    map.setZoom(14);\r\n\r\n    window.google.maps.event.trigger(map, \"idle\");\r\n\r\n    if (locationMarker) {\r\n      locationMarker.position = position;\r\n      locationMarker.map = map;\r\n    } else {\r\n      const marker = new AdvancedMarkerElement({\r\n        position,\r\n        map,\r\n      });\r\n      setLocationMarker(marker);\r\n    }\r\n  };\r\n\r\n  const addMarkers = (map: google.maps.Map) => {\r\n    clearMarkers();\r\n    const newMarkers: google.maps.marker.AdvancedMarkerElement[] = [];\r\n\r\n    validProjects.forEach((project) => {\r\n      const contentDiv = document.createElement(\"div\");\r\n      contentDiv.innerHTML = `\r\n     <div class=\"bg-client-accent hover:bg-client-accentHover border border-client-textSecondary hover:scale-105 focus:scale-105 focus:bg-client-accentLight text-client-white font-semibold py-1 px-3 rounded-full text-sm transition-all duration-300 ease-in-out\">\r\n        $${project.price?.toLocaleString()}\r\n      </div>\r\n    `;\r\n\r\n      const marker = new google.maps.marker.AdvancedMarkerElement({\r\n        position: { lat: project.latitude, lng: project.longitude },\r\n        map,\r\n        content: contentDiv,\r\n      });\r\n\r\n      marker.addListener(\"click\", () => {\r\n        setSelectedProject(project);\r\n      });\r\n\r\n      newMarkers.push(marker);\r\n    });\r\n\r\n    setMarkers((prev) => [...prev, ...newMarkers]);\r\n  };\r\n\r\n  const handleZoomIn = () => {\r\n    const map = mapRef.current;\r\n    if (map) {\r\n      map.setZoom(map.getZoom()! + 1);\r\n    }\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    const map = mapRef.current;\r\n    if (map) {\r\n      map.setZoom(map.getZoom()! - 1);\r\n    }\r\n  };\r\n\r\n  const handleGoToUserLocation = () => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const coords = {\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude,\r\n        };\r\n\r\n        if (mapRef.current) {\r\n          updateLocationMarker(mapRef.current, coords);\r\n        }\r\n      },\r\n      (error) => {\r\n        console.warn(\"No se pudo obtener la ubicación del usuario.\");\r\n      }\r\n    );\r\n  };\r\n\r\n  if (!isMapsReady) {\r\n    return (\r\n      <div className=\"flex justify-center items-center w-full h-full\">\r\n        <Loader size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <GoogleMap\r\n        mapContainerStyle={containerStyle}\r\n        zoom={12}\r\n        onLoad={(map) => {\r\n          mapRef.current = map;\r\n          setIsMapLoaded(true);\r\n          map.setCenter(DEFAULT_CENTER);\r\n          setTimeout(() => handleBoundsChanged(), 500);\r\n        }}\r\n        onBoundsChanged={handleBoundsChanged}\r\n        options={{\r\n          zoomControl: false,\r\n          streetViewControl: false,\r\n          mapTypeControl: false,\r\n          fullscreenControl: false,\r\n          mapTypeId: \"roadmap\",\r\n          mapId: \"78a223abe416be2b\",\r\n        }}\r\n      />\r\n\r\n      <div className=\"absolute top-4 left-4 z-10 flex flex-col space-y-2\">\r\n        <button\r\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\r\n          onClick={handleZoomIn}\r\n        >\r\n          <Plus size={24} />\r\n        </button>\r\n\r\n        <button\r\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\r\n          onClick={handleZoomOut}\r\n        >\r\n          <Minus size={24} />\r\n        </button>\r\n\r\n        <button\r\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-gray-700 hover:bg-gray-100\"\r\n          onClick={handleGoToUserLocation}\r\n        >\r\n          <LocateFixed size={24} />\r\n        </button>\r\n      </div>\r\n\r\n      {selectedProject && (\r\n        <div className=\"absolute left-1/2 top-1/3 sm:top-4 z-20 w-72 -translate-x-1/2 transform rounded-lg shadow-lg sm:left-auto sm:right-4 sm:translate-x-0\">\r\n          <PropertyCard\r\n            id={selectedProject.id}\r\n            name={selectedProject.name}\r\n            location={selectedProject.cityName}\r\n            images={selectedProject.images}\r\n            price={selectedProject.price || undefined}\r\n            area={selectedProject.area || 0}\r\n            bedrooms={selectedProject.bedrooms}\r\n            bathrooms={selectedProject.bathrooms}\r\n            parkingSpots={selectedProject.parkingSpots}\r\n            url={`/inmobiliaria`}\r\n            isFromMap={true}\r\n            onClose={handleCloseCard}\r\n          />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
        "PropertyCard.tsx": "import { useState, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { X } from \"lucide-react\";\r\nimport { ProjectMedia } from \"@/lib/definitios\";\r\nimport ProjectCardActions from \"./projectCardActions\";\r\n\r\ninterface PropertyCardProps {\r\n  id: number;\r\n  name?: string;\r\n  location?: string;\r\n  images: ProjectMedia[];\r\n  price?: number;\r\n  area?: number;\r\n  bedrooms?: number;\r\n  bathrooms?: number;\r\n  parkingSpots?: number;\r\n  url: string;\r\n  isFromMap?: boolean;\r\n  onClose?: (() => void) | null;\r\n  showActions?: boolean;\r\n  onDelete?: (id: number, name: string) => void;\r\n}\r\n\r\nexport default function PropertyCard({\r\n  id,\r\n  name,\r\n  location,\r\n  images,\r\n  price,\r\n  area,\r\n  bedrooms,\r\n  bathrooms,\r\n  parkingSpots,\r\n  url,\r\n  isFromMap,\r\n  onClose,\r\n  showActions = false,\r\n  onDelete,\r\n}: PropertyCardProps) {\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isHovered && images.length > 1) {\r\n      const interval = setInterval(\r\n        () => setCurrentImage((prev) => (prev + 1) % images.length),\r\n        1000\r\n      );\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isHovered, images]);\r\n\r\n  return (\r\n    <Link href={`${url}/${id}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n      <div\r\n        className={clsx(\r\n          \"relative w-full h-full cursor-pointer overflow-hidden rounded-lg bg-client-primary shadow-sm shadow-white\",\r\n          isFromMap && \"z-20\"\r\n        )}\r\n        onMouseEnter={() => setIsHovered(true)}\r\n        onMouseLeave={() => {\r\n          setIsHovered(false);\r\n          setCurrentImage(0);\r\n        }}\r\n      >\r\n        <div className=\"relative flex h-full flex-col rounded-lg bg-client-primaryDark\">\r\n          {onClose && (\r\n            <button\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                onClose();\r\n              }}\r\n              className=\"absolute right-2 top-2 z-20 rounded-full bg-black bg-opacity-50 p-2 text-white transition-all hover:bg-opacity-75\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n            </button>\r\n          )}\r\n          {images.length > 0 ? (\r\n            <div\r\n              className={clsx(\r\n                \"relative w-full overflow-hidden\",\r\n                !isFromMap ? \"h-full flex-shrink-0\" : \"h-72\"\r\n              )}\r\n            >\r\n              {images.map((img, index) => (\r\n                <Image\r\n                  key={index + img.projectId}\r\n                  src={img.url}\r\n                  alt={img.tag}\r\n                  fill\r\n                  priority={index === 0}\r\n                  loading={index === 0 ? \"eager\" : \"lazy\"}\r\n                  sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\r\n                  className={clsx(\r\n                    \"absolute left-0 top-0 h-full w-full object-cover transition-opacity duration-1000 ease-in-out\",\r\n                    index === currentImage ? \"opacity-100\" : \"opacity-0\"\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center h-full text-white bg-gray-700\">\r\n              Sin imagen\r\n            </div>\r\n          )}\r\n\r\n          {price && (\r\n            <div className=\"absolute left-2 top-2 z-10 rounded-full bg-black bg-opacity-75 px-2 py-1 text-sm text-white\">\r\n              ${price.toLocaleString()}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black via-gray-800 to-transparent px-2 pb-2 pt-16\">\r\n            <h3 className=\"line-clamp-1 break-words text-lg font-semibold leading-tight text-white\">\r\n              {location}\r\n            </h3>\r\n\r\n            <p className=\"truncate break-all leading-tight w-full overflow-hidden text-sm text-gray-300\">\r\n              {name}\r\n            </p>\r\n\r\n            <div className=\"mt-2 flex items-center text-xs text-gray-300 divide-x divide-gray-600\">\r\n              {typeof area === \"number\" && area > 0 && (\r\n                <p className=\"pr-2\">{area}m²</p>\r\n              )}\r\n              {typeof bedrooms === \"number\" && bedrooms > 0 && (\r\n                <p className=\"pl-2 pr-2\">{bedrooms} Hab.</p>\r\n              )}\r\n              {typeof bathrooms === \"number\" && bathrooms > 0 && (\r\n                <p className=\"pl-2 pr-2\">{bathrooms} Baños.</p>\r\n              )}\r\n              {typeof parkingSpots === \"number\" && parkingSpots > 0 && (\r\n                <p className=\"pl-2\">{parkingSpots} Parq.</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {showActions && onDelete && (\r\n          <ProjectCardActions\r\n            id={id}\r\n            name={name || \"\"}\r\n            urlEdit={`${id}`}\r\n            onDelete={onDelete}\r\n          />\r\n        )}\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n"
      },
      "skeletons": {
        "admin": {
          "adminCardSkeleton.tsx": "export default function AdminCardSkeleton() {\r\n  return (\r\n    <div className=\"h-full animate-pulse rounded-lg bg-premium-backgroundAlt p-6 text-center shadow-md dark:bg-premium-secondaryLight\">\r\n      <div className=\"mx-auto mb-4 h-10 w-10 rounded-full bg-premium-backgroundDark dark:bg-premium-secondaryDark\" />\r\n      <div className=\"h-6 w-3/4 mx-auto rounded-md bg-premium-backgroundDark dark:bg-premium-secondaryDark\" />\r\n      <div className=\"mt-4 h-4 w-5/6 mx-auto rounded-md bg-premium-backgroundDark dark:bg-premium-secondaryDark\" />\r\n    </div>\r\n  );\r\n}\r\n",
          "createProjectSkeleton.tsx": "export default function CreateProjectSkeleton() {\n  return (\n    <div className=\"container mx-auto max-w-3xl w-full animate-pulse rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <div className=\"mb-10 text-center\">\n        <div className=\"mx-auto h-8 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-10 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-10 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-24 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-32 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mt-6 flex justify-end\">\n        <div className=\"h-10 w-24 rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n    </div>\n  );\n}\n",
          "filterSkeleton.tsx": "export default function FilterSkeleton() {\r\n  return (\r\n    <div className=\"w-full rounded-lg bg-premium-background py-4 shadow-md transition-all duration-300 ease-in-out sm:w-72 md:w-80 dark:bg-premium-backgroundDark animate-pulse\">\r\n      <div className=\"mt-1 space-y-6\">\r\n        <div className=\"flex items-center justify-between rounded-md pl-2 pr-6\">\r\n          <div className=\"w-24 h-6 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n          <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n        </div>\r\n\r\n        <hr className=\"border-premium-borderColor dark:border-premium-borderColorHover\" />\r\n\r\n        <div className=\"space-y-4 overflow-x-hidden px-3 py-1 sm:max-h-[65vh] sm:overflow-y-auto\">\r\n          {Array.from({ length: 6 }).map((_, index) => (\r\n            <div key={index} className=\"flex items-center space-x-3\">\r\n              <div className=\"w-6 h-6 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n              <div className=\"w-32 h-5 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n            </div>\r\n          ))}\r\n\r\n          {Array.from({ length: 2 }).map((_, index) => (\r\n            <div key={index} className=\"space-y-2\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-6 h-6 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n                <div className=\"w-32 h-5 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n              </div>\r\n              <div className=\"w-full h-3 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n            </div>\r\n          ))}\r\n\r\n          {Array.from({ length: 3 }).map((_, index) => (\r\n            <div key={index} className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-6 h-6 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n                <div className=\"w-32 h-5 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n                <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "notificationSkeleton.tsx": "export default function NotificationSkeleton() {\r\n  return (\r\n    <ul className=\"p-4 space-y-3\">\r\n      {Array.from({ length: 5 }).map((_, index) => (\r\n        <li\r\n          key={index}\r\n          className=\"flex items-center space-x-4 animate-pulse bg-transparent px-3 py-2 rounded-md dark:bg-transparent\"\r\n        >\r\n          <div className=\"w-12 h-4 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n\r\n          <div className=\"flex-1 space-y-1\">\r\n            <div className=\"h-4 bg-gray-300 dark:bg-gray-700 rounded w-3/4\" />\r\n            <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/2\" />\r\n          </div>\r\n\r\n          <div className=\"w-4 h-4 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n",
          "tableSkeleton.tsx": "export default function TableSkeleton() {\n  const rows = 5;\n  const columns = 8;\n\n  return (\n    <div className=\"animate-pulse rounded-3xl bg-premium-backgroundLight px-4 py-5 shadow-lg lg:mx-4 lg:px-8 dark:bg-premium-secondaryLight\">\n      <div className=\"mb-4 flex flex-col gap-3 text-xs sm:flex-row sm:items-center sm:justify-between sm:gap-0 sm:text-sm md:px-3\">\n        <div className=\"flex items-center space-x-2 px-2 sm:px-0\">\n          <div className=\"h-6 w-16 rounded bg-gray-300 dark:bg-gray-700\" />\n          <div className=\"h-6 w-12 rounded bg-gray-300 dark:bg-gray-700\" />\n          <div className=\"h-6 w-24 rounded bg-gray-300 dark:bg-gray-700\" />\n        </div>\n        <div className=\"relative w-48\">\n          <div className=\"h-8 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n        </div>\n      </div>\n\n      <div className=\"table-responsive w-full overflow-x-auto\">\n        <table className=\"table-flush table w-full text-sm\">\n          <thead className=\"thead-light text-xs\">\n            <tr>\n              {Array.from({ length: columns }).map((_, index) => (\n                <th\n                  key={index}\n                  className=\"px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\"\n                >\n                  <div className=\"h-6 w-20 rounded bg-gray-300 dark:bg-gray-700 mx-auto\" />\n                </th>\n              ))}\n              <th className=\"px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\">\n                <div className=\"h-6 w-20 rounded bg-gray-300 dark:bg-gray-700 mx-auto\" />\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {Array.from({ length: rows }).map((_, rowIndex) => (\n              <tr\n                key={rowIndex}\n                className=\"h-20 border-t border-premium-borderColor hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\"\n              >\n                {Array.from({ length: columns }).map((_, colIndex) => (\n                  <td key={colIndex} className=\"px-4 py-2\">\n                    <div className=\"h-6 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n                  </td>\n                ))}\n                <td className=\"flex items-center justify-center px-4 py-2\">\n                  <div className=\"h-4 w-12 rounded bg-gray-300 dark:bg-gray-700\" />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"mt-4 flex items-center justify-between text-sm text-premium-textPrimary md:px-3 dark:text-premium-textPrimary\">\n        <div className=\"h-4 w-64 rounded bg-gray-300 dark:bg-gray-700\" />\n\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-700\" />\n          {Array.from({ length: 1 }).map((_, index) => (\n            <div\n              key={index}\n              className=\"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-700\"\n            />\n          ))}\n          <div className=\"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-700\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n"
        },
        "filterSkeleton.tsx": "import { X } from \"lucide-react\";\r\n\r\nexport default function FilterSkeleton() {\r\n  return (\r\n    <div className=\"w-full rounded-lg bg-client-backgroundAlt text-white py-4 px-4 shadow-md sm:w-72 md:w-80 animate-pulse\">\r\n      <div className=\"flex items-center justify-between mb-4 px-1\">\r\n        <div className=\"w-28 h-5 bg-client-secondaryLight rounded\" />\r\n        <X className=\"text-client-secondaryLight\" size={18} />\r\n      </div>\r\n\r\n      <hr className=\"border-client-accent mb-4\" />\r\n\r\n      <div className=\"space-y-4\">\r\n        {Array.from({ length: 8 }).map((_, i) => (\r\n          <div\r\n            key={`option-${i}`}\r\n            className=\"flex items-center justify-between\"\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-client-secondaryLight rounded\" />\r\n              <div className=\"w-48 h-7 bg-client-secondaryLight rounded\" />\r\n            </div>\r\n            <div className=\"w-8 h-8 bg-client-secondaryLight rounded-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "membershipCardSkeleton.tsx": "export default function MembershipCardSkeleton() {\r\n  return (\r\n    <div className=\"w-full max-w-xs h-[460px] rounded-3xl px-6 py-8 shadow-md bg-gray-200 animate-pulse flex flex-col justify-between\">\r\n      <div className=\"flex flex-col gap-6\">\r\n        <div className=\"h-6 bg-gray-300 rounded w-3/4 mx-auto\" />\r\n\r\n        <div className=\"text-center\">\r\n          <div className=\"h-10 w-28 bg-gray-300 rounded mx-auto\" />\r\n          <div className=\"h-4 w-20 mx-auto mt-2 bg-gray-300 rounded\" />\r\n        </div>\r\n\r\n        <ul className=\"flex flex-col gap-4 text-sm\">\r\n          {[...Array(3)].map((_, i) => (\r\n            <li\r\n              key={i}\r\n              className=\"flex items-center justify-between border-b border-gray-300 pb-2\"\r\n            >\r\n              <div className=\"h-4 w-24 bg-gray-300 rounded\" />\r\n              <div className=\"h-4 w-8 bg-gray-300 rounded\" />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      <div className=\"h-10 bg-gray-300 rounded-full w-full mt-6\" />\r\n    </div>\r\n  );\r\n}\r\n",
        "projectCardSkeleton.tsx": "export default function ProjectCardSkeleton() {\n  return (\n    <div className=\"transform rounded-lg bg-transparent transition-transform duration-300\">\n      <div className=\"relative h-[370px] max-w-xs cursor-pointer overflow-hidden rounded-lg shadow-md bg-gray-700\">\n        <div className=\"relative h-[80%] w-full animate-pulse bg-gray-600\" />\n\n        <div className=\"absolute left-2 top-2 h-6 w-20 animate-pulse rounded-full bg-gray-700\" />\n\n        <div className=\"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-gray-800 via-gray-700 to-transparent px-2 pb-2 pt-16\">\n          <div className=\"mb-2 h-4 w-3/4 animate-pulse rounded bg-gray-600\" />\n          <div className=\"mb-1 h-3 w-1/2 animate-pulse rounded bg-gray-600\" />\n          <div className=\"h-3 w-1/4 animate-pulse rounded bg-gray-600\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "projectCarouselSkeleton.tsx": "import clsx from \"clsx\";\n\nexport function ProjectCarouselSkeleton() {\n  return (\n    <div className=\"relative mx-auto w-full px-8 sm:my-5\">\n      <div className=\"relative flex h-80 items-center justify-center overflow-hidden\">\n        {[...Array(5)].map((_, index) => {\n          const positions = [\n            {\n              translateX: \"-120%\",\n              scale: \"scale-50\",\n              zIndex: \"z-0\",\n              width: \"300px\",\n              height: \"200px\",\n            },\n            {\n              translateX: \"-60%\",\n              scale: \"scale-75\",\n              zIndex: \"z-5\",\n              width: \"400px\",\n              height: \"250px\",\n            },\n            {\n              translateX: \"0%\",\n              scale: \"scale-100\",\n              zIndex: \"z-10\",\n              width: \"500px\",\n              height: \"300px\",\n            },\n            {\n              translateX: \"60%\",\n              scale: \"scale-75\",\n              zIndex: \"z-5\",\n              width: \"400px\",\n              height: \"250px\",\n            },\n            {\n              translateX: \"120%\",\n              scale: \"scale-50\",\n              zIndex: \"z-0\",\n              width: \"300px\",\n              height: \"200px\",\n            },\n          ];\n\n          return (\n            <div\n              key={index}\n              className={clsx(\n                \"absolute animate-pulse rounded-lg bg-gray-300\",\n                positions[index].scale,\n                positions[index].zIndex\n              )}\n              style={{\n                width: positions[index].width,\n                height: positions[index].height,\n                transform: `translateX(${positions[index].translateX})`,\n                transition: \"transform 0.5s ease, scale 0.5s ease\",\n              }}\n            />\n          );\n        })}\n      </div>\n\n      <button className=\"absolute left-2 top-1/2 h-8 w-8 -translate-y-1/2 transform animate-pulse rounded-full bg-gray-300 sm:left-3 lg:left-4\" />\n      <button className=\"absolute right-2 top-1/2 h-8 w-8 -translate-y-1/2 transform animate-pulse rounded-full bg-gray-300 sm:right-3 lg:right-4\" />\n\n      <div className=\"mt-4 flex justify-center space-x-2\">\n        {[...Array(5)].map((_, index) => (\n          <div\n            key={index}\n            className={clsx(\n              \"h-2 w-2 animate-pulse rounded-full\",\n              index === 2 ? \"scale-125 bg-gray-400\" : \"bg-gray-300\"\n            )}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n",
        "projectCommonAreasSkeleton.tsx": "export function ProjectCommonAreasSkeleton() {\n  return (\n    <div className=\"my-8 w-full lg:w-2/3\">\n      <div className=\"mb-4 h-8 w-48 animate-pulse rounded bg-gray-300\" />\n\n      {Array(3)\n        .fill(0)\n        .map((_, index) => (\n          <div\n            key={index}\n            className=\"mb-4 animate-pulse rounded-lg bg-white p-4 shadow\"\n            style={{\n              boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n            }}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div className=\"h-6 w-32 rounded bg-gray-300\" />\n              <div className=\"h-4 w-6 rounded bg-gray-300\" />\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n",
        "projectDetailedDescriptionSkeleton.tsx": "export function ProjectDetailedDescriptionSkeleton() {\n  return (\n    <div className=\"my-8 animate-pulse\">\n      <div className=\"mb-4 h-6 w-1/4 rounded bg-gray-400\" />\n      <div className=\"space-y-2\">\n        <div className=\"h-4 w-full rounded bg-gray-300\" />\n        <div className=\"h-4 w-5/6 rounded bg-gray-300\" />\n        <div className=\"h-4 w-3/4 rounded bg-gray-300\" />\n        <div className=\"h-4 w-4/5 rounded bg-gray-300\" />\n      </div>\n    </div>\n  );\n}\n",
        "projectDetailsSkeleton.tsx": "export default function ProjectDetailsSkeleton() {\n  const skeletonGroups = Array(3).fill(0);\n\n  return (\n    <div className=\"my-8\">\n      <h2 className=\"mb-6 text-2xl font-semibold text-[#8B4513]\">\n        Detalles del Proyecto\n      </h2>\n      <div className=\"space-y-6\">\n        {skeletonGroups.map((_, index) => (\n          <div key={index} className=\"mb-4\">\n            <div\n              className=\"flex items-center justify-between rounded-lg p-4 shadow\"\n              style={{\n                backgroundColor: \"#ffffff\",\n                boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n              }}\n            >\n              <span className=\"h-4 w-1/3 animate-pulse rounded bg-gray-300\" />\n              <div className=\"h-4 w-5 animate-pulse rounded-full bg-gray-300\" />\n            </div>\n\n            <div className=\"mt-2 grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4\">\n              {Array(6)\n                .fill(0)\n                .map((_, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex animate-pulse flex-col space-y-2 rounded-lg p-4 shadow\"\n                    style={{\n                      backgroundColor: \"#ffffff\",\n                      boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n                    }}\n                  >\n                    <div className=\"h-10 w-10 rounded-full bg-gray-300\" />\n                    <div className=\"h-4 w-3/4 rounded bg-gray-300\" />\n                    <div className=\"h-4 w-1/2 rounded bg-gray-300\" />\n                  </div>\n                ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
        "projectHeaderSkeleton.tsx": "export default function ProjectHeaderSkeleton() {\n  return (\n    <div className=\"w-full animate-pulse px-4 pt-28 sm:px-6 lg:px-12 lg:pt-24\">\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"h-8 w-56 rounded-md bg-gray-300\" />\n            <div className=\"h-8 w-8 rounded-full bg-gray-300\" />\n          </div>\n          <div className=\"mt-2 flex flex-col sm:mt-0 lg:items-end lg:justify-start\">\n            <div className=\"h-8 w-32 rounded-md bg-gray-300\" />\n          </div>\n        </div>\n\n        <div className=\"lg:mt-2 lg:grid lg:grid-cols-2 lg:items-start lg:gap-2\">\n          <div className=\"flex flex-col text-lg lg:flex-row lg:items-center lg:space-x-2\">\n            <div className=\"flex items-center\">\n              <div className=\"h-6 w-48 rounded-md bg-gray-300\" />\n            </div>\n            <div className=\"hidden h-6 w-2 rounded-md bg-gray-300 lg:inline\" />\n            <div className=\"mt-2 h-6 w-48 rounded-md bg-gray-300 pl-4 font-semibold lg:pl-0\" />\n          </div>\n\n          <div className=\"hidden items-center text-sm lg:ml-auto lg:mt-0 lg:flex\">\n            <div className=\"h-6 w-6 rounded-full bg-gray-300\" />\n            <div className=\"ml-2 h-6 w-48 rounded-md bg-gray-300\" />\n          </div>\n        </div>\n\n        <div className=\"flex items-center text-sm lg:hidden\">\n          <div className=\"h-6 w-6 rounded-full bg-gray-300\" />\n          <div className=\"ml-2 h-6 w-48 rounded-md bg-gray-300\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "projectNearbyServicesSkeleton.tsx": "export function ProjectNearbyServicesSkeleton() {\n  return (\n    <div className=\"my-8\">\n      <div className=\"mb-6 h-8 w-64 animate-pulse rounded bg-gray-300\" />\n\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n        {Array(4)\n          .fill(0)\n          .map((_, index) => (\n            <div\n              key={index}\n              className=\"flex animate-pulse items-center space-x-4 rounded-lg border bg-gray-100 p-4\"\n              style={{\n                borderColor: \"#EDEDED\",\n              }}\n            >\n              <div className=\"h-10 w-10 rounded-full bg-gray-300\" />\n\n              <div className=\"flex flex-1 flex-col\">\n                <div className=\"mb-2 h-4 w-3/4 rounded bg-gray-300\" />\n                <div className=\"h-6 w-1/2 rounded bg-gray-300\" />\n              </div>\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n}\n",
        "projectPlansSkeleton.tsx": "export function ProjectPlansSkeleton() {\n  return (\n    <div\n      className=\"mt-8 animate-pulse rounded-lg p-4\"\n      style={{\n        backgroundColor: \"transparent\",\n        border: \"1px solid #5D4037\",\n      }}\n    >\n      <div className=\"mb-2 h-8 w-48 animate-pulse rounded bg-gray-300\" />\n\n      <hr\n        className=\"mb-4 w-full border-t-2\"\n        style={{\n          borderColor: \"#5D4037\",\n        }}\n      />\n\n      <div className=\"flex flex-col items-center space-y-4 lg:flex-row lg:items-start lg:space-x-8 lg:space-y-0\">\n        <div\n          className=\"h-64 w-full animate-pulse rounded bg-gray-300 lg:w-2/3\"\n          style={{\n            border: \"1px solid #8B4513\",\n          }}\n        />\n\n        <div className=\"w-full space-y-4 lg:w-1/3\">\n          <div className=\"mb-4 h-8 w-1/3 animate-pulse rounded bg-gray-300\" />\n\n          <div className=\"mb-2 h-4 w-full animate-pulse rounded bg-gray-300\" />\n          <div className=\"mb-2 h-4 w-3/4 animate-pulse rounded bg-gray-300\" />\n          <div className=\"h-4 w-2/3 animate-pulse rounded bg-gray-300\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "projectSectionSkeleton.tsx": "import clsx from \"clsx\";\r\n\r\nexport default function ProjectSectionSkeleton() {\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-2\">\r\n      {[...Array(3)].map((_, index) => (\r\n        <div\r\n          key={index}\r\n          className={clsx(\r\n            \"bg-client-background-alt py-2 rounded-lg\",\r\n            index === 0 && \"sm:col-span-2 md:col-span-1\",\r\n            index === 1 && \"lg:col-span-2\"\r\n          )}\r\n        >\r\n          <div className=\"relative w-full h-80 rounded-lg bg-gray-700\"></div>\r\n          <div className=\"h-4 w-32 bg-gray-600 rounded mt-2\"></div>\r\n          <div className=\"h-6 w-40 bg-gray-500 rounded mt-1\"></div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
        "projectShortDescriptionSkeleton.tsx": "export function ProjectShortDescriptionSkeleton() {\n  return (\n    <div className=\"my-8 animate-pulse\">\n      <div className=\"mb-2 h-4 w-3/4 rounded bg-gray-300\" />\n      <div className=\"h-4 w-2/4 rounded bg-gray-300\" />\n    </div>\n  );\n}\n",
        "projectSkeletonList.tsx": "import ProjectCardSkeleton from \"./projectCardSkeleton\";\r\n\r\nexport default function ProjectSkeletonList() {\r\n  return (\r\n    <div className=\"px-12 pt-10 grid gap-x-4 gap-y-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5\">\r\n      {Array.from({ length: 10 }).map((_, index) => (\r\n        <div key={index} className=\"relative flex items-center justify-center\">\r\n          <div className=\"w-full max-w-xs\">\r\n            <ProjectCardSkeleton />\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
        "realEstateSection.tsx": "export default function RealEstateSectionSkeleton() {\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 md:gap-x-3 lg:gap-x-6 gap-y-2\">\r\n      {[...Array(4)].map((_, index) => (\r\n        <div key={index} className=\"bg-client-background-alt py-2 rounded-lg\">\r\n          <div className=\"relative w-full h-80 rounded-lg bg-gray-700\"></div>\r\n          <div className=\"h-4 w-32 bg-gray-600 rounded mt-2\"></div>\r\n          <div className=\"h-6 w-40 bg-gray-500 rounded mt-1\"></div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "user": {
        "ClientEditPropertyPage.tsx": "\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport PropertieForm from \"@/app/ui/user/createEditProperties/propertieForm\";\r\n\r\nexport default function ClientEditPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n  const params = useParams();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const hasPermission =\r\n    session?.user?.permissions?.some(\r\n      (perm) => perm.name === \"Gestionar propiedades propias\"\r\n    ) || false;\r\n\r\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\r\n\r\n  if (!projectId) return null;\r\n\r\n  return (\r\n    <PropertieForm\r\n      isEdit={true}\r\n      projectId={Number(projectId)}\r\n      hasPermission={hasPermission}\r\n    />\r\n  );\r\n}\r\n",
        "clientMyPropertiesPage.tsx": "\"use client\";\r\n\r\nimport { useState, useCallback } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useGetMyProjects } from \"@/app/hooks/user/useGetMyProjects\";\r\nimport { useUserProjectApi } from \"@/app/hooks/user/useUserProjectApi\";\r\nimport PropertiesContainer from \"@/app/ui/user/propertiesContainer\";\r\nimport StatusFilterTabs from \"@/app/ui/user/statusFilterTabs\";\r\nimport Alert from \"@/app/ui/alert\";\r\n\r\nconst ModalConfirmation = dynamic(\r\n  () => import(\"@/app/ui/modals/home/modalConfirmation\"),\r\n  { ssr: false }\r\n);\r\n\r\nexport default function ClientMyPropertiesPage() {\r\n  const [statusFilter, setStatusFilter] = useState<\r\n    \"aceptado\" | \"pendiente\" | \"revision\"\r\n  >(\"aceptado\");\r\n  const [selectedProject, setSelectedProject] = useState<{\r\n    id: number;\r\n    name: string;\r\n  } | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState<{\r\n    type: string;\r\n    message: string;\r\n  } | null>(null);\r\n\r\n  const {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreMyProjects,\r\n    refreshMyProjects,\r\n    isLoading,\r\n  } = useGetMyProjects({ entriesPerPage: 2, statusProject: statusFilter });\r\n\r\n  const { submitUserProject, isProcessing } = useUserProjectApi();\r\n\r\n  const handleOpenModal = useCallback((id: number, name: string) => {\r\n    setSelectedProject({ id, name });\r\n    setIsModalOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteProject = useCallback(async () => {\r\n    if (!selectedProject) return;\r\n\r\n    const success = await submitUserProject(selectedProject.id, \"delete\");\r\n\r\n    if (success) {\r\n      setAlertMessage({\r\n        type: \"success\",\r\n        message: `Propiedad \"${selectedProject.name}\" eliminada exitosamente.`,\r\n      });\r\n\r\n      refreshMyProjects();\r\n    } else {\r\n      setAlertMessage({\r\n        type: \"error\",\r\n        message: `Error al eliminar la propiedad \"${selectedProject.name}\".`,\r\n      });\r\n    }\r\n\r\n    setIsModalOpen(false);\r\n    setSelectedProject(null);\r\n  }, [selectedProject, submitUserProject, refreshMyProjects]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen pt-20 pb-16 px-6 sm:px-12 flex flex-col gap-6\">\r\n        {alertMessage && (\r\n          <Alert\r\n            type={alertMessage.type as \"success\" | \"warning\" | \"error\" | \"info\"}\r\n            message={alertMessage.message}\r\n          />\r\n        )}\r\n\r\n        {isModalOpen && (\r\n          <ModalConfirmation\r\n            isOpen={isModalOpen}\r\n            onClose={() => setIsModalOpen(false)}\r\n            onConfirm={handleDeleteProject}\r\n            title={\"Eliminar Propiedad\"}\r\n            message={`¿Estás seguro de que deseas eliminar la propiedad \"${selectedProject?.name}\"?`}\r\n            confirmLabel={isProcessing ? \"Eliminando...\" : \"Eliminar\"}\r\n            cancelLabel=\"Cancelar\"\r\n            confirmClassName=\"bg-red-600 hover:bg-red-700 disabled:opacity-50\"\r\n          />\r\n        )}\r\n\r\n        <h1 className=\"text-2xl sm:text-3xl font-semibold text-client-text text-center\">\r\n          Mis propiedades\r\n        </h1>\r\n\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <StatusFilterTabs\r\n            selected={statusFilter}\r\n            onChange={setStatusFilter}\r\n          />\r\n\r\n          <a\r\n            href=\"/usuario/subir-propiedad\"\r\n            className=\"rounded-full px-6 py-2 bg-client-accent text-white hover:bg-client-accentHover transition-colors\"\r\n          >\r\n            Subir Propiedad\r\n          </a>\r\n        </div>\r\n\r\n        <hr className=\"w-full border-client-accent\" />\r\n\r\n        <p className=\"text-client-text text-center mx-auto flex items-center\">\r\n          <span>{totalEntries}</span>\r\n          <span className=\"ml-1\">resultados</span>\r\n        </p>\r\n\r\n        <PropertiesContainer\r\n          projects={projects}\r\n          totalEntries={totalEntries}\r\n          isLoading={isLoading}\r\n          fetchMoreProjects={fetchMoreMyProjects}\r\n          onDelete={handleOpenModal}\r\n          statusFilter={statusFilter}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n",
        "clientUploadPropertyPage.tsx": "\"use client\";\r\n\r\nimport { useSession } from \"next-auth/react\";\r\nimport PropertieForm from \"@/app/ui/user/createEditProperties/propertieForm\";\r\n\r\nexport default function ClientUploadPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const hasPermission =\r\n    session?.user?.permissions?.some(\r\n      (perm) => perm.name === \"Gestionar propiedades propias\"\r\n    ) || false;\r\n\r\n  return <PropertieForm isEdit={false} hasPermission={hasPermission} />;\r\n}\r\n",
        "createEditProperties": {
          "basicPropertieForm.tsx": "import { useCallback, useMemo } from \"react\";\r\nimport { propertyType, ProjectData } from \"@/lib/definitios\";\r\nimport { useBasicProjectValidation } from \"@/app/hooks/projects/createEditProject/useBasicProjectValidation\";\r\nimport StepNavigationButtons from \"@/app/ui/user/stepNavigationButtons\";\r\nimport FormSelect from \"@/app/ui/modals/home/formSelect\";\r\nimport FormTextarea from \"@/app/ui/modals/home/formTextArea\";\r\n\r\ninterface BasicPropertieFormProps {\r\n  formData: ProjectData;\r\n  onChange: (updatedData: Partial<ProjectData>) => void;\r\n  onSubmit: (data: Partial<ProjectData>) => void;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n  propertyTypes: propertyType[];\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  isEdit: boolean;\r\n  hasPermission?: boolean;\r\n}\r\n\r\nexport default function BasicPropertieForm({\r\n  formData,\r\n  onChange,\r\n  propertyTypes,\r\n  onPrevious,\r\n  currentStep,\r\n  totalSteps,\r\n  isEdit,\r\n  onNext,\r\n}: BasicPropertieFormProps) {\r\n  const { errors, validateFields, validateField } = useBasicProjectValidation(\r\n    formData,\r\n    true,\r\n    isEdit\r\n  );\r\n\r\n  const propertyOptions = useMemo(\r\n    () => propertyTypes.map((type) => ({ id: type.id, name: type.name })),\r\n    [propertyTypes]\r\n  );\r\n\r\n  const handleChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n      const { name, value } = e.target;\r\n      if (formData[name as keyof ProjectData] !== value) {\r\n        onChange({ [name]: value });\r\n        validateField(`${name}Error` as keyof typeof errors, value);\r\n      }\r\n    },\r\n    [onChange, validateField, formData]\r\n  );\r\n\r\n  const handleSelectChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      const { name, value } = e.target;\r\n      const selectedId = parseInt(value, 10);\r\n\r\n      if (name === \"propertyType\") {\r\n        const selectedPropertyType = propertyTypes.find(\r\n          (type) => type.id === selectedId\r\n        );\r\n        if (selectedPropertyType) {\r\n          onChange({ propertyType: selectedPropertyType });\r\n          validateField(\"propertyTypeError\", selectedPropertyType);\r\n        }\r\n      }\r\n\r\n      if (name === \"projectType\") {\r\n        onChange({\r\n          projectType: {\r\n            id: selectedId,\r\n            name: selectedId === 2 ? \"Venta\" : \"Arriendo\",\r\n          },\r\n        });\r\n        validateField(\"projectTypeError\", { id: selectedId });\r\n      }\r\n    },\r\n    [onChange, propertyTypes, validateField]\r\n  );\r\n\r\n  const handleNext = useCallback(\r\n    async (e?: React.FormEvent) => {\r\n      e?.preventDefault();\r\n\r\n      const isValid = await validateFields();\r\n      if (!isValid) return;\r\n\r\n      onNext();\r\n    },\r\n    [validateFields, onNext, formData, onChange, validateField]\r\n  );\r\n\r\n  const tooltipTexts = useMemo(\r\n    () => ({\r\n      name: \"Nombre de la propiedad que se mostrará al público.\",\r\n      propertyType: \"Seleccione el tipo de propiedad que más se ajuste.\",\r\n      projectType:\r\n        \"Seleccione si la propiedad va a estar en venta o en arriendo.\",\r\n      shortDescription:\r\n        \"Escriba un resumen breve que describa las principales características de la propiedad.\",\r\n      detailedDescription:\r\n        \"Incluya una descripción detallada que explique las características principales de la propiedad.\",\r\n    }),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        Datos Básicos\r\n      </h2>\r\n\r\n      <form onSubmit={handleNext} className=\"space-y-6\">\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n          <FormSelect\r\n            label=\"Tipo de propiedad\"\r\n            name=\"propertyType\"\r\n            value={formData.propertyType?.id || \"\"}\r\n            options={propertyOptions}\r\n            onChange={handleSelectChange}\r\n            error={errors.propertyTypeError}\r\n            tooltipText={tooltipTexts.propertyType}\r\n            isAccent={true}\r\n          />\r\n\r\n          <FormSelect\r\n            label=\"Finalidad de la propiedad\"\r\n            name=\"projectType\"\r\n            value={formData.projectType?.id || \"\"}\r\n            options={[\r\n              { id: 2, name: \"Venta\" },\r\n              { id: 3, name: \"Arriendo\" },\r\n            ]}\r\n            onChange={handleSelectChange}\r\n            error={errors.projectTypeError}\r\n            tooltipText={tooltipTexts.projectType}\r\n            isAccent={true}\r\n          />\r\n        </div>\r\n\r\n        <FormTextarea\r\n          label=\"Resumen breve\"\r\n          name=\"shortDescription\"\r\n          value={formData.shortDescription || \"\"}\r\n          placeholder=\"Agregue un resumen breve\"\r\n          tooltipText={tooltipTexts.shortDescription}\r\n          onChange={handleChange}\r\n          error={errors.shortDescriptionError}\r\n          rows={3}\r\n          maxLength={150}\r\n          isAccent={true}\r\n        />\r\n\r\n        <FormTextarea\r\n          label=\"Descripción completa\"\r\n          name=\"detailedDescription\"\r\n          value={formData.detailedDescription || \"\"}\r\n          placeholder=\"Agregue una descripción completa y detallada\"\r\n          tooltipText={tooltipTexts.detailedDescription}\r\n          onChange={handleChange}\r\n          error={errors.detailedDescriptionError}\r\n          rows={6}\r\n          maxLength={1500}\r\n          isAccent={true}\r\n        />\r\n\r\n        <StepNavigationButtons\r\n          currentStep={currentStep}\r\n          totalSteps={totalSteps}\r\n          onPrevious={onPrevious}\r\n          onNext={handleNext}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n",
          "detailsPropertieForm.tsx": "import { useCallback, useMemo } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport {\r\n  CommonArea,\r\n  NearbyService,\r\n  HousingType,\r\n  ProjectData,\r\n} from \"@/lib/definitios\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport { useDetailsProjectValidation } from \"@/app/hooks/projects/createEditProject/useDetailsProjectValidation\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\nimport FormInput from \"../../modals/home/formInput\";\r\nimport FormSelect from \"../../modals/home/formSelect\";\r\nimport FormMultiSelect from \"../../modals/home/formMultiSelect\";\r\n\r\ninterface DetailsPropertieFormProps {\r\n  formData: ProjectData;\r\n  onChange: (updatedData: Partial<ProjectData>) => void;\r\n  onSubmit: (data: Partial<ProjectData>) => void;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  commonAreas: CommonArea[];\r\n  nearbyServices: NearbyService[];\r\n  housingTypes: HousingType[];\r\n}\r\n\r\nexport default function DetailsPropertieForm({\r\n  formData,\r\n  onChange,\r\n  onPrevious,\r\n  onNext,\r\n  currentStep,\r\n  totalSteps,\r\n  commonAreas,\r\n  nearbyServices,\r\n  housingTypes,\r\n}: DetailsPropertieFormProps) {\r\n  const { errors, validateFields, validateField } =\r\n    useDetailsProjectValidation(formData);\r\n\r\n  const handlePriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value.replace(/[^0-9]/g, \"\");\r\n    const numericValue = value ? parseInt(value, 10) : 0;\r\n\r\n    onChange({ price: numericValue });\r\n    validateField(\"priceError\", numericValue);\r\n  };\r\n\r\n  const handleChangeText = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const { name, value } = e.target;\r\n      if (formData[name as keyof ProjectData] !== value) {\r\n        onChange({ [name]: value });\r\n        validateField(`${name}Error` as keyof typeof errors, value);\r\n      }\r\n    },\r\n    [onChange, validateField, formData]\r\n  );\r\n\r\n  const handleSelectChange = useCallback(\r\n    (\r\n      e: React.ChangeEvent<HTMLSelectElement>,\r\n      name: \"commonAreas\" | \"nearbyServices\" | \"housingType\"\r\n    ) => {\r\n      const id = parseInt(e.target.value, 10);\r\n      if (!id) return;\r\n\r\n      if (name === \"housingType\") {\r\n        const selectedHousingType = housingTypes.find((type) => type.id === id);\r\n        if (selectedHousingType && formData.housingType?.id !== id) {\r\n          onChange({ housingType: selectedHousingType });\r\n        }\r\n        return;\r\n      }\r\n\r\n      const selectedItem =\r\n        name === \"commonAreas\"\r\n          ? commonAreas.find((area) => area.id === id)\r\n          : nearbyServices.find((service) => service.id === id);\r\n\r\n      if (\r\n        selectedItem &&\r\n        !formData[name]?.some((item) => item.id === selectedItem.id)\r\n      ) {\r\n        onChange({ [name]: [...(formData[name] || []), selectedItem] });\r\n      }\r\n    },\r\n    [onChange, formData, housingTypes, commonAreas, nearbyServices]\r\n  );\r\n\r\n  const handleRemoveTag = useCallback(\r\n    (id: number, name: \"commonAreas\" | \"nearbyServices\") => {\r\n      const updatedItems =\r\n        formData[name]?.filter((item) => item.id !== id) || [];\r\n      onChange({ [name]: updatedItems });\r\n    },\r\n    [onChange, formData]\r\n  );\r\n\r\n  const handleNext = (e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n    const isValid = validateFields();\r\n    if (isValid) {\r\n      onNext();\r\n    }\r\n  };\r\n\r\n  const isApartmentOrHouse =\r\n    formData.propertyType?.id === 1001 || formData.propertyType?.id === 1002;\r\n\r\n  const tooltipTexts = useMemo(\r\n    () => ({\r\n      price: \"Indique el precio de la propiedad.\",\r\n      housingType: \"Seleccione el tipo de vivienda.\",\r\n      complexName: \"Nombre del conjunto residencial (si aplica).\",\r\n      commonAreas: \"Seleccione las áreas comunes disponibles en la propiedad.\",\r\n      nearbyServices: \"Seleccione los servicios cercanos a la propiedad.\",\r\n    }),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        Detalles de la Propiedad\r\n      </h2>\r\n\r\n      <form onSubmit={handleNext} className=\"space-y-6\">\r\n        <div className=\"grid gap-4 grid-cols-1\">\r\n          <FormInput\r\n            label=\"Precio\"\r\n            type=\"text\"\r\n            name=\"price\"\r\n            value={formData.price ? formatNumber(formData.price) : \"\"}\r\n            onChange={handlePriceChange}\r\n            placeholder=\"Ingrese el precio\"\r\n            error={errors.priceError}\r\n            tooltipText={tooltipTexts.price}\r\n            isAccent={true}\r\n          />\r\n        </div>\r\n\r\n        {isApartmentOrHouse && (\r\n          <div\r\n            className={clsx(\r\n              \"grid grid-cols-1 gap-4\",\r\n              isApartmentOrHouse && \"sm:grid-cols-2\"\r\n            )}\r\n          >\r\n            {isApartmentOrHouse && (\r\n              <FormSelect\r\n                label=\"Tipo de Vivienda\"\r\n                name=\"housingType\"\r\n                value={formData.housingType?.id || \"\"}\r\n                options={housingTypes}\r\n                onChange={(e) => handleSelectChange(e, \"housingType\")}\r\n                error={errors.housingTypeError}\r\n                tooltipText={tooltipTexts.housingType}\r\n                isAccent={true}\r\n              />\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {formData.propertyType?.id === 1002 && (\r\n          <FormInput\r\n            label=\"Nombre del conjunto\"\r\n            type=\"text\"\r\n            name=\"complexName\"\r\n            value={formData.complexName || \"\"}\r\n            onChange={handleChangeText}\r\n            maxLength={100}\r\n            placeholder=\"Ingrese el nombre del conjunto en donde se ubica la propiedad\"\r\n            tooltipText={tooltipTexts.complexName}\r\n            isAccent={true}\r\n          />\r\n        )}\r\n\r\n        <FormMultiSelect\r\n          label=\"Áreas Comunes\"\r\n          name=\"commonAreas\"\r\n          selectedItems={formData.commonAreas || []}\r\n          options={commonAreas}\r\n          onSelect={handleSelectChange}\r\n          onRemove={handleRemoveTag}\r\n          tooltipText={tooltipTexts.commonAreas}\r\n        />\r\n\r\n        <FormMultiSelect\r\n          label=\"Servicios Cercanos\"\r\n          name=\"nearbyServices\"\r\n          selectedItems={formData.nearbyServices || []}\r\n          options={nearbyServices}\r\n          onSelect={handleSelectChange}\r\n          onRemove={handleRemoveTag}\r\n          tooltipText={tooltipTexts.nearbyServices}\r\n        />\r\n\r\n        <StepNavigationButtons\r\n          currentStep={currentStep}\r\n          totalSteps={totalSteps}\r\n          onPrevious={onPrevious}\r\n          onNext={handleNext}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n",
          "featuresPropertieForm.tsx": "import { useCallback, useMemo } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport { useFeaturesProjectValidation } from \"@/app/hooks/projects/createEditProject/useFeaturesProjectValidation\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\nimport FormInput from \"../../modals/home/formInput\";\r\nimport FormSelect from \"../../modals/home/formSelect\";\r\nimport FormCheckboxToggle from \"../../modals/home/formCheckboxToggle\";\r\n\r\ninterface FeaturesPropertieFormProps {\r\n  formData: ProjectData;\r\n  onChange: (updatedData: Partial<ProjectData>) => void;\r\n  onSubmit: (data: Partial<ProjectData>) => void;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n}\r\n\r\nexport default function FeaturesPropertieForm({\r\n  formData,\r\n  onChange,\r\n  onPrevious,\r\n  onNext,\r\n  currentStep,\r\n  totalSteps,\r\n}: FeaturesPropertieFormProps) {\r\n  const { errors, validateFields, validateField } =\r\n    useFeaturesProjectValidation(formData);\r\n\r\n  const shouldShowField = useCallback(\r\n    (field: string) => {\r\n      const propertyTypeId = formData.propertyType?.id;\r\n\r\n      const conditions: Record<string, boolean> = {\r\n        socioeconomicLevel: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        yearBuilt: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        bedrooms: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        storageUnits: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        balcony: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        laundryArea: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        customizationOptions:\r\n          propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        terrace: propertyTypeId === 1001,\r\n        garden: propertyTypeId === 1001,\r\n        bathrooms:\r\n          propertyTypeId === 1001 ||\r\n          propertyTypeId === 1002 ||\r\n          propertyTypeId === 1004,\r\n        lobbies:\r\n          propertyTypeId === 1001 ||\r\n          propertyTypeId === 1002 ||\r\n          propertyTypeId === 1004,\r\n        elevator: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n        towers: propertyTypeId === 1002,\r\n        floorNumber: propertyTypeId === 1002,\r\n        freeHeight:\r\n          propertyTypeId === 1004 ||\r\n          propertyTypeId === 1003 ||\r\n          propertyTypeId === 1005,\r\n        width:\r\n          propertyTypeId === 1005 ||\r\n          propertyTypeId === 1006 ||\r\n          propertyTypeId === 1007,\r\n        length:\r\n          propertyTypeId === 1005 ||\r\n          propertyTypeId === 1006 ||\r\n          propertyTypeId === 1007,\r\n        heavyParking: propertyTypeId === 1005,\r\n      };\r\n\r\n      return conditions[field] ?? false;\r\n    },\r\n    [formData.propertyType?.id]\r\n  );\r\n\r\n  const handleChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const { name, value, type } = e.target;\r\n      const updatedValue =\r\n        type === \"number\" ? (value === \"\" ? \"\" : parseFloat(value)) : value;\r\n\r\n      onChange({ [name]: updatedValue });\r\n      validateField(`${name}Error` as keyof typeof errors, updatedValue);\r\n    },\r\n    [onChange, validateField, errors]\r\n  );\r\n\r\n  const handleSelectChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      const { name, value } = e.target;\r\n      const selectedValue = parseInt(value, 10);\r\n\r\n      onChange({ [name]: selectedValue });\r\n      validateField(`${name}Error` as keyof typeof errors, selectedValue);\r\n    },\r\n    [onChange, validateField, errors]\r\n  );\r\n\r\n  const handleNext = useCallback(\r\n    (e?: React.FormEvent) => {\r\n      e?.preventDefault();\r\n      if (validateFields()) {\r\n        onNext();\r\n      }\r\n    },\r\n    [validateFields, onNext]\r\n  );\r\n\r\n  const tooltipTexts = useMemo(\r\n    () => ({\r\n      totalArea: \"Ingrese el área total de la propiedad en metros cuadrados.\",\r\n      builtArea:\r\n        \"Ingrese el área construida de la propiedad en metros cuadrados, considerando únicamente las áreas cubiertas.\",\r\n      socioeconomicLevel:\r\n        \"Seleccione el nivel socioeconómico asignado a la propiedad según la clasificación oficial del sector.\",\r\n      yearBuilt:\r\n        \"Seleccione el año en que la propiedad fue construida o su estructura original terminada.\",\r\n      bedrooms: \"Especifique cuántas habitaciones tiene la propiedad.\",\r\n      bathrooms: \"Indique la cantidad total de baños que tiene la propiedad.\",\r\n      lobbies:\r\n        \"Ingrese el número de salas de estar (salones o lobbies) que tiene la propiedad.\",\r\n      freeHeight:\r\n        \"Especifique la altura libre de la propeidad en metros, considerando el espacio disponible entre el suelo y el techo.\",\r\n      width:\r\n        \"Indique el frente total de la propiedad en metros. Este valor corresponde a la dimensión horizontal.\",\r\n      length:\r\n        \"Especifique el fondo total de la propiedad en metros. Este valor corresponde a la dimensión vertical.\",\r\n      heavyParking:\r\n        \"Indique cuántos espacios de parqueo estarán disponibles para vehículos pesados.\",\r\n      towers:\r\n        \"Indique la torre en la que se encuentra la propiedad (si aplica).\",\r\n      floorNumber:\r\n        \"Ingrese el número de piso donde se encuentra el apartamento. Por ejemplo, '3' para el tercer piso.\",\r\n      storageUnits:\r\n        \"Especifique el número total de depósitos (bodegas o cuartos de almacenamiento) disponibles para la propiedad.\",\r\n      parkingSpots:\r\n        \"Especifique el número total de espacios de parqueo que estarán disponibles.\",\r\n    }),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        Características de la Propiedad\r\n      </h2>\r\n\r\n      <form onSubmit={handleNext} className=\"space-y-6\">\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n          <FormInput\r\n            label=\"Área Total (m²)\"\r\n            type=\"number\"\r\n            name=\"totalArea\"\r\n            min={0}\r\n            value={formData.totalArea || \"\"}\r\n            onChange={handleChange}\r\n            placeholder=\"Área total\"\r\n            error={errors.totalAreaError}\r\n            tooltipText={tooltipTexts.totalArea}\r\n            isAccent={true}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Área Construida (m²)\"\r\n            type=\"number\"\r\n            name=\"builtArea\"\r\n            min={0}\r\n            value={formData.builtArea || \"\"}\r\n            onChange={handleChange}\r\n            placeholder=\"Área construida\"\r\n            error={errors.builtAreaError}\r\n            tooltipText={tooltipTexts.builtArea}\r\n            isAccent={true}\r\n          />\r\n\r\n          {shouldShowField(\"socioeconomicLevel\") && (\r\n            <FormSelect\r\n              label=\"Nivel Socioeconómico\"\r\n              name=\"socioeconomicLevel\"\r\n              value={formData.socioeconomicLevel || \"\"}\r\n              onChange={handleSelectChange}\r\n              options={[1, 2, 3, 4, 5, 6].map((level) => ({\r\n                id: level,\r\n                name: `Estrato ${level}`,\r\n              }))}\r\n              error={errors.socioeconomicLevelError}\r\n              tooltipText={tooltipTexts.socioeconomicLevel}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"yearBuilt\") && (\r\n            <FormSelect\r\n              label=\"Año de Construcción\"\r\n              name=\"yearBuilt\"\r\n              value={formData.yearBuilt || \"\"}\r\n              onChange={handleSelectChange}\r\n              options={Array.from(\r\n                { length: new Date().getFullYear() - 1950 + 1 },\r\n                (_, i) => ({\r\n                  id: 1950 + i,\r\n                  name: (1950 + i).toString(),\r\n                })\r\n              )}\r\n              error={errors.yearBuiltError}\r\n              tooltipText={tooltipTexts.yearBuilt}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"bedrooms\") && (\r\n            <FormInput\r\n              label=\"Número de Habitaciones\"\r\n              type=\"number\"\r\n              name=\"bedrooms\"\r\n              min={0}\r\n              value={formData.bedrooms || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de habitaciones\"\r\n              error={errors.bedroomsError}\r\n              tooltipText={tooltipTexts.bedrooms}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"bathrooms\") && (\r\n            <FormInput\r\n              label=\"Número de Baños\"\r\n              type=\"number\"\r\n              name=\"bathrooms\"\r\n              min={0}\r\n              value={formData.bathrooms || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de baños\"\r\n              error={errors.bathroomsError}\r\n              tooltipText={tooltipTexts.bathrooms}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"lobbies\") && (\r\n            <FormInput\r\n              label=\"Número de Salas de Estar\"\r\n              type=\"number\"\r\n              name=\"lobbies\"\r\n              min={0}\r\n              value={formData.lobbies || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de salas de estar\"\r\n              error={errors.lobbiesError}\r\n              tooltipText={tooltipTexts.lobbies}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"freeHeight\") && (\r\n            <FormInput\r\n              label=\"Altura Libre (m)\"\r\n              type=\"number\"\r\n              name=\"freeHeight\"\r\n              min={0}\r\n              value={formData.freeHeight || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Altura libre\"\r\n              error={errors.freeHeightError}\r\n              tooltipText={tooltipTexts.freeHeight}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"width\") && (\r\n            <FormInput\r\n              label=\"Frente (m)\"\r\n              type=\"number\"\r\n              name=\"width\"\r\n              min={0}\r\n              value={formData.width || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Medida del frente\"\r\n              error={errors.widthError}\r\n              tooltipText={tooltipTexts.width}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"length\") && (\r\n            <FormInput\r\n              label=\"Fondo (m)\"\r\n              type=\"number\"\r\n              name=\"length\"\r\n              min={0}\r\n              value={formData.length || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Medida del fondo\"\r\n              error={errors.lengthError}\r\n              tooltipText={tooltipTexts.length}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"heavyParking\") && (\r\n            <FormInput\r\n              label={\r\n                formData.propertyType?.id === 1005\r\n                  ? \"Espacios de Parqueo Privado\"\r\n                  : \"Espacios de Parqueo Pesado\"\r\n              }\r\n              type=\"number\"\r\n              name=\"heavyParking\"\r\n              min={0}\r\n              value={formData.heavyParking || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de parqueos para vehículos pesados\"\r\n              tooltipText={tooltipTexts.heavyParking}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"towers\") && (\r\n            <FormInput\r\n              label={\r\n                formData.projectType?.id === 2 || formData.projectType?.id === 3\r\n                  ? \"Número de Torre\"\r\n                  : \"Número de Torres\"\r\n              }\r\n              type=\"number\"\r\n              name=\"towers\"\r\n              min={0}\r\n              value={formData.towers || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de torre\"\r\n              tooltipText={tooltipTexts.towers}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"floorNumber\") && (\r\n            <FormInput\r\n              label=\"Número de Piso\"\r\n              type=\"number\"\r\n              name=\"floorNumber\"\r\n              min={0}\r\n              value={formData.floorNumber || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de piso\"\r\n              tooltipText={tooltipTexts.floorNumber}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          {shouldShowField(\"storageUnits\") && (\r\n            <FormInput\r\n              label=\"Depósitos\"\r\n              type=\"number\"\r\n              name=\"storageUnits\"\r\n              min={0}\r\n              value={formData.storageUnits || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Número de depósitos\"\r\n              tooltipText={tooltipTexts.storageUnits}\r\n              isAccent={true}\r\n            />\r\n          )}\r\n\r\n          <FormInput\r\n            label={\r\n              formData.propertyType?.id === 1005\r\n                ? \"Espacios de Parqueo Sociales\"\r\n                : \"Espacios de Parqueo\"\r\n            }\r\n            type=\"number\"\r\n            name=\"parkingSpots\"\r\n            min={0}\r\n            value={formData.parkingSpots || \"\"}\r\n            onChange={handleChange}\r\n            placeholder=\"Número de espacios de parqueo\"\r\n            tooltipText={tooltipTexts.parkingSpots}\r\n            isAccent={true}\r\n          />\r\n        </div>\r\n\r\n        {(formData.propertyType?.id === 1001 ||\r\n          formData.propertyType?.id === 1002) && (\r\n          <div>\r\n            <h3 className=\"mb-4 text-center text-lg font-semibold text-client-accent\">\r\n              Características Adicionales\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n              {shouldShowField(\"elevator\") && (\r\n                <FormCheckboxToggle\r\n                  label=\"Elevador\"\r\n                  name=\"elevator\"\r\n                  checked={formData.elevator || false}\r\n                  onChange={(checked) => onChange({ elevator: checked })}\r\n                />\r\n              )}\r\n\r\n              {shouldShowField(\"terrace\") && (\r\n                <FormCheckboxToggle\r\n                  label=\"Terraza\"\r\n                  name=\"terrace\"\r\n                  checked={formData.terrace || false}\r\n                  onChange={(checked) => onChange({ terrace: checked })}\r\n                />\r\n              )}\r\n\r\n              {shouldShowField(\"balcony\") && (\r\n                <FormCheckboxToggle\r\n                  label=\"Balcón\"\r\n                  name=\"balcony\"\r\n                  checked={formData.balcony || false}\r\n                  onChange={(checked) => onChange({ balcony: checked })}\r\n                />\r\n              )}\r\n\r\n              {shouldShowField(\"garden\") && (\r\n                <FormCheckboxToggle\r\n                  label=\"Jardín\"\r\n                  name=\"garden\"\r\n                  checked={formData.garden || false}\r\n                  onChange={(checked) => onChange({ garden: checked })}\r\n                />\r\n              )}\r\n\r\n              {shouldShowField(\"laundryArea\") && (\r\n                <FormCheckboxToggle\r\n                  label=\"Área de Lavado\"\r\n                  name=\"laundryArea\"\r\n                  checked={formData.laundryArea || false}\r\n                  onChange={(checked) => onChange({ laundryArea: checked })}\r\n                />\r\n              )}\r\n\r\n              {shouldShowField(\"customizationOptions\") && (\r\n                <FormCheckboxToggle\r\n                  label=\"Opciones de Personalización\"\r\n                  name=\"customizationOptions\"\r\n                  checked={formData.customizationOptions || false}\r\n                  onChange={(checked) =>\r\n                    onChange({ customizationOptions: checked })\r\n                  }\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <StepNavigationButtons\r\n          currentStep={currentStep}\r\n          totalSteps={totalSteps}\r\n          onPrevious={onPrevious}\r\n          onNext={handleNext}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n",
          "imagesPropertieForm.tsx": "\"use client\";\r\n\r\nimport { useState, ChangeEvent, useEffect, useCallback, useMemo } from \"react\";\r\nimport { ProjectData, ImageType, Media } from \"@/lib/definitios\";\r\nimport { useImagesProjectValidation } from \"@/app/hooks/projects/createEditProject/useImagesProjectValidation\";\r\nimport ImageUploadSection from \"./imageUploadSection\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\nimport ModalAlert from \"../../modals/admin/modalAlert\";\r\nimport internal from \"stream\";\r\n\r\ninterface ImagesPropertieFormProps {\r\n  formData: ProjectData;\r\n  onChange: (updatedData: Partial<ProjectData>) => void;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  imagesTypes: ImageType[];\r\n  onSubmit: (media: Media[], validateFields: () => boolean) => void;\r\n}\r\n\r\nexport default function ImagesPropertieForm({\r\n  formData,\r\n  onChange,\r\n  onPrevious,\r\n  onNext,\r\n  currentStep,\r\n  totalSteps,\r\n  imagesTypes,\r\n  onSubmit,\r\n}: ImagesPropertieFormProps) {\r\n  const [initialized, setInitialized] = useState(false);\r\n  const [expandedSections, setExpandedSections] = useState<\r\n    Record<string, boolean>\r\n  >({});\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState(\"\");\r\n\r\n  const { errors, validateFields, validateField } = useImagesProjectValidation(\r\n    formData,\r\n    imagesTypes\r\n  );\r\n\r\n  const imagesByCategory = useMemo(() => {\r\n    const grouped: Record<string, Media[]> = {};\r\n    (formData.media || []).forEach((media) => {\r\n      if (!grouped[media.type]) {\r\n        grouped[media.type] = [];\r\n      }\r\n      grouped[media.type].push(media);\r\n    });\r\n\r\n    return grouped;\r\n  }, [formData.media]);\r\n\r\n  useEffect(() => {\r\n    if (!formData.projectMedia || initialized) return;\r\n\r\n    const transformedMedia: Media[] = formData.projectMedia.map((media) => ({\r\n      id: media.id?.toString() || \"\",\r\n      tag: media.tag || \"\",\r\n      file: media.url.startsWith(\"http\") ? media.url : new File([], media.url),\r\n      description: media.description || \"\",\r\n      idType: media.imageType || media.commonArea || 0,\r\n      type: media.type || \"\",\r\n      category: media.imageType ? \"imageType\" : \"commonArea\",\r\n    }));\r\n\r\n    onChange({ media: transformedMedia });\r\n    setInitialized(true);\r\n  }, [formData.projectMedia]);\r\n\r\n  useEffect(() => {\r\n    setExpandedSections(\r\n      imagesTypes.reduce((acc, item) => ({ ...acc, [item.name]: false }), {})\r\n    );\r\n  }, [imagesTypes]);\r\n\r\n  useEffect(() => {\r\n    if (!formData.media || formData.media.length === 0) return;\r\n    setTimeout(() => {\r\n      validateFields();\r\n    }, 100);\r\n  }, [formData.media]);\r\n\r\n  const toggleSection = useCallback((category: string) => {\r\n    setExpandedSections((prev) => ({ ...prev, [category]: !prev[category] }));\r\n  }, []);\r\n\r\n  const handleImageChange = useCallback(\r\n    (\r\n      category: string,\r\n      categoryId: number,\r\n      isImageType: boolean,\r\n      event: ChangeEvent<HTMLInputElement>\r\n    ) => {\r\n      if (!event.target.files || event.target.files.length === 0) return;\r\n\r\n      const selectedFiles = Array.from(event.target.files);\r\n\r\n      const newMedia = selectedFiles.map((file) => ({\r\n        file,\r\n        tag: \"\",\r\n        description: \"\",\r\n        idType: categoryId,\r\n        type: category,\r\n        category: isImageType ? \"imageType\" : \"commonArea\",\r\n      }));\r\n\r\n      const updatedMedia = [...(formData.media || []), ...newMedia];\r\n\r\n      onChange({ media: updatedMedia });\r\n    },\r\n    [onChange, formData.media, imagesTypes]\r\n  );\r\n\r\n  const handleRemoveImage = useCallback(\r\n    (category: string, index: number) => {\r\n      const imageToRemove = imagesByCategory[category]?.[index];\r\n      if (!imageToRemove) {\r\n        console.error(\r\n          `❌ No se encontró la imagen en la categoría ${category}`\r\n        );\r\n        return;\r\n      }\r\n\r\n      const updatedMedia = (formData.media || []).filter(\r\n        (media) => media.file !== imageToRemove.file\r\n      );\r\n\r\n      onChange({ media: updatedMedia });\r\n    },\r\n    [onChange, formData.media, imagesByCategory]\r\n  );\r\n\r\n  const handleTagChange = useCallback(\r\n    (category: string, index: number, tag: string) => {\r\n      if (!formData.media) return;\r\n\r\n      const imageToUpdate = imagesByCategory[category]?.[index];\r\n      if (!imageToUpdate) {\r\n        console.error(\r\n          `❌ No se encontró la imagen en ${category} con índice ${index}`\r\n        );\r\n        return;\r\n      }\r\n\r\n      const updatedMedia = formData.media.map((mediaItem) =>\r\n        mediaItem.file === imageToUpdate.file\r\n          ? { ...mediaItem, tag }\r\n          : mediaItem\r\n      );\r\n      onChange({ media: updatedMedia });\r\n\r\n      setTimeout(() => {\r\n        validateField(`${category}-tag-${index}`, tag);\r\n      }, 100);\r\n    },\r\n    [formData.media, imagesByCategory, onChange, validateField]\r\n  );\r\n\r\n  const handleDescriptionChange = useCallback(\r\n    (category: string, index: number, description: string) => {\r\n      if (!formData.media) return;\r\n\r\n      const imageToUpdate = imagesByCategory[category]?.[index];\r\n      if (!imageToUpdate) {\r\n        console.error(\r\n          `❌ No se encontró la imagen en ${category} con índice ${index}`\r\n        );\r\n        return;\r\n      }\r\n\r\n      const updatedMedia = formData.media.map((mediaItem) =>\r\n        mediaItem.file === imageToUpdate.file\r\n          ? { ...mediaItem, description }\r\n          : mediaItem\r\n      );\r\n\r\n      onChange({ media: updatedMedia });\r\n\r\n      setTimeout(() => {\r\n        validateField(`${category}-description-${index}`, description);\r\n      }, 100);\r\n    },\r\n    [formData.media, imagesByCategory, onChange, validateField]\r\n  );\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    if (validateFields()) {\r\n      const mediaData: Media[] =\r\n        formData.media?.map((mediaItem) => ({\r\n          tag: mediaItem.tag || \"\",\r\n          file: mediaItem.file,\r\n          description: mediaItem.description || \"\",\r\n          idType: mediaItem.idType || 0,\r\n          type: mediaItem.type,\r\n          category: mediaItem.category,\r\n        })) || [];\r\n\r\n      onSubmit(mediaData, validateFields);\r\n      onNext();\r\n    }\r\n  }, [validateFields, formData.media, onSubmit, onNext]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg space-y-3\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        Subir Imágenes de la Propiedad\r\n      </h2>\r\n\r\n      {imagesTypes.map((type) => (\r\n        <ImageUploadSection\r\n          key={type.name}\r\n          imageType={type}\r\n          category=\"imageType\"\r\n          expanded={expandedSections[type.name]}\r\n          images={\r\n            imagesByCategory[type.name]?.map((media) =>\r\n              typeof media.file === \"string\"\r\n                ? media.file\r\n                : URL.createObjectURL(media.file)\r\n            ) || []\r\n          }\r\n          tags={imagesByCategory[type.name]?.map((img) => img.tag) || []}\r\n          descriptions={\r\n            imagesByCategory[type.name]?.map((img) => img.description || \"\") ||\r\n            []\r\n          }\r\n          error={errors[type.name] || null}\r\n          errors={{ ...errors }}\r\n          onToggleExpand={() => toggleSection(type.name)}\r\n          onImageChange={(e) => handleImageChange(type.name, type.id, true, e)}\r\n          onRemoveImage={(index) => handleRemoveImage(type.name, index)}\r\n          onTagChange={(index, newTag) =>\r\n            handleTagChange(type.name, index, newTag)\r\n          }\r\n          onDescriptionChange={(index, newDescription) =>\r\n            handleDescriptionChange(type.name, index, newDescription)\r\n          }\r\n        />\r\n      ))}\r\n\r\n      {formData.commonAreas && formData.commonAreas.length > 0 && (\r\n        <h3 className=\"my-6 text-center text-xl font-bold text-client-accent\">\r\n          Subir imágenes de las áreas comunes\r\n        </h3>\r\n      )}\r\n\r\n      {formData.commonAreas?.map((area) => (\r\n        <ImageUploadSection\r\n          key={area.name}\r\n          imageType={{\r\n            id: area.id,\r\n            name: area.name,\r\n            maxImagesAllowed: 5,\r\n            isRequired: true,\r\n          }}\r\n          category=\"commonArea\"\r\n          expanded={expandedSections[area.name] || false}\r\n          images={imagesByCategory[area.name]?.map((media) => media.file) || []}\r\n          tags={imagesByCategory[area.name]?.map((media) => media.tag) || []}\r\n          descriptions={\r\n            imagesByCategory[area.name]?.map(\r\n              (media) => media.description || \"\"\r\n            ) || []\r\n          }\r\n          error={errors[area.name] || null}\r\n          errors={{ ...errors }}\r\n          onToggleExpand={() => toggleSection(area.name)}\r\n          onImageChange={(e) => handleImageChange(area.name, area.id, false, e)}\r\n          onRemoveImage={(index) => handleRemoveImage(area.name, index)}\r\n          onTagChange={(index, newTag) =>\r\n            handleTagChange(area.name, index, newTag)\r\n          }\r\n          onDescriptionChange={(index, newDescription) =>\r\n            handleDescriptionChange(area.name, index, newDescription)\r\n          }\r\n        />\r\n      ))}\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={handleSubmit}\r\n      />\r\n\r\n      <ModalAlert\r\n        title=\"Advertencia\"\r\n        message={alertMessage}\r\n        isOpen={showAlert}\r\n        onClose={() => setShowAlert(false)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "imageUploadSection.tsx": "import { useMemo, useCallback } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { ChevronDown } from \"lucide-react\";\r\nimport { ImageType } from \"@/lib/definitios\";\r\nimport ImageWithTag from \"./imageWithTag\";\r\nimport FormErrorMessage from \"../../modals/formErrorMessage\";\r\n\r\ninterface ImageUploadSectionProps {\r\n  imageType: ImageType;\r\n  category: string;\r\n  expanded: boolean;\r\n  images: (File | string)[];\r\n  tags: string[];\r\n  descriptions: string[];\r\n  error: string | null;\r\n  errors: Record<string, string>;\r\n  onToggleExpand: () => void;\r\n  onImageChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  onRemoveImage: (index: number) => void;\r\n  onTagChange: (index: number, tag: string) => void;\r\n  onDescriptionChange: (index: number, description: string) => void;\r\n}\r\n\r\nexport default function ImageUploadSection({\r\n  imageType,\r\n  category,\r\n  expanded,\r\n  images,\r\n  tags,\r\n  descriptions,\r\n  error,\r\n  errors,\r\n  onToggleExpand,\r\n  onImageChange,\r\n  onRemoveImage,\r\n  onTagChange,\r\n  onDescriptionChange,\r\n}: ImageUploadSectionProps) {\r\n  const handleRemoveImage = useCallback(\r\n    (index: number) => onRemoveImage(index),\r\n    [onRemoveImage]\r\n  );\r\n\r\n  const handleTagChange = useCallback(\r\n    (index: number, newTag: string) => {\r\n      onTagChange(index, newTag);\r\n    },\r\n    [onTagChange]\r\n  );\r\n\r\n  const handleDescriptionChange = useCallback(\r\n    (index: number, newDescription: string) => {\r\n      onDescriptionChange(index, newDescription);\r\n    },\r\n    [onDescriptionChange]\r\n  );\r\n\r\n  const imageList = useMemo(() => {\r\n    return images.map((file, index) => (\r\n      <ImageWithTag\r\n        key={`${imageType.name}-${index}`}\r\n        id={`${imageType.name}-${index}`}\r\n        file={typeof file === \"string\" ? file : URL.createObjectURL(file)}\r\n        tag={tags[index] || \"\"}\r\n        description={descriptions[index] || \"\"}\r\n        imageTypeId={imageType.id}\r\n        category={category}\r\n        onRemove={() => handleRemoveImage(index)}\r\n        onTagChange={(newTag) => handleTagChange(index, newTag)}\r\n        onDescriptionChange={(newDescription) =>\r\n          handleDescriptionChange(index, newDescription)\r\n        }\r\n        error={errors[`${imageType.name}-tag-${index}`]}\r\n        descriptionError={errors[`${imageType.name}-description-${index}`]}\r\n      />\r\n    ));\r\n  }, [\r\n    images,\r\n    tags,\r\n    descriptions,\r\n    errors,\r\n    handleRemoveImage,\r\n    handleTagChange,\r\n    handleDescriptionChange,\r\n  ]);\r\n\r\n  const handleImageChange = useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (!event.target.files) return;\r\n\r\n      const selectedFiles = Array.from(event.target.files);\r\n      const totalImages = images.length + selectedFiles.length;\r\n\r\n      if (\r\n        imageType.maxImagesAllowed &&\r\n        totalImages > imageType.maxImagesAllowed\r\n      ) {\r\n        alert(\r\n          `Solo puedes subir hasta ${imageType.maxImagesAllowed} imagen${\r\n            imageType.maxImagesAllowed > 1 ? \"es\" : \"\"\r\n          } para ${imageType.name}`\r\n        );\r\n        return;\r\n      }\r\n\r\n      if (imageType.id === 1006 && totalImages < 3) {\r\n        alert(`Debes subir al menos 3 imágenes para ${imageType.name}`);\r\n        return;\r\n      }\r\n\r\n      onImageChange(event);\r\n    },\r\n    [images.length, imageType.maxImagesAllowed, imageType.name, onImageChange]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        \"rounded-md pb-1 transition bg-client-backgroundLight hover:bg-client-backgroundAlt\",\r\n        error ? \"border border-red-500\" : \"border-none\"\r\n      )}\r\n    >\r\n      <div\r\n        className=\"flex flex-col cursor-pointer p-4 space-y-3\"\r\n        onClick={onToggleExpand}\r\n      >\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"text-lg font-semibold text-client-text\">\r\n            {imageType.name}\r\n          </h4>\r\n\r\n          <ChevronDown\r\n            className={clsx(\r\n              \"transition-transform duration-300 text-client-textSecondary\",\r\n              expanded && \"rotate-180\"\r\n            )}\r\n          />\r\n        </div>\r\n\r\n        {imageType.description && (\r\n          <p className=\"text-sm text-gray-400\">{imageType.description}</p>\r\n        )}\r\n      </div>\r\n\r\n      {expanded && (\r\n        <div className=\"px-4 pb-4\">\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            multiple\r\n            onChange={handleImageChange}\r\n            className={clsx(\r\n              \"mt-2 w-full rounded-lg px-3 py-2 text-client-text\",\r\n              error ? \"border-red-500\" : \"border-none\"\r\n            )}\r\n          />\r\n          <p className=\"ml-2 mt-1 text-sm text-gray-400\">\r\n            {images.length} archivo(s) subido(s)\r\n          </p>\r\n\r\n          {error && <FormErrorMessage error={error} />}\r\n\r\n          <div className=\"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3\">\r\n            {imageList}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
          "imageWithTag.tsx": "import { useEffect, useState, useCallback } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { X } from \"lucide-react\";\r\n\r\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/home/formInput\"), {\r\n  ssr: false,\r\n});\r\nconst FormTextArea = dynamic(\r\n  () => import(\"@/app/ui/modals/home/formTextArea\"),\r\n  {\r\n    ssr: false,\r\n  }\r\n);\r\n\r\ninterface ImageWithTagProps {\r\n  id?: string;\r\n  file: File | string;\r\n  tag: string;\r\n  description: string;\r\n  imageTypeId: number;\r\n  category: string;\r\n  onRemove: () => void;\r\n  onTagChange: (newTag: string) => void;\r\n  onDescriptionChange: (newDescription: string) => void;\r\n  error?: string;\r\n  descriptionError?: string;\r\n}\r\n\r\nexport default function ImageWithTag({\r\n  id,\r\n  file,\r\n  tag,\r\n  description,\r\n  imageTypeId,\r\n  category,\r\n  onRemove,\r\n  onTagChange,\r\n  onDescriptionChange,\r\n  error,\r\n  descriptionError,\r\n}: ImageWithTagProps) {\r\n  const [imageUrl, setImageUrl] = useState<string | null>(null);\r\n  const [localTag, setLocalTag] = useState(tag);\r\n  const [localDescription, setLocalDescription] = useState(description);\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      console.error(\"❌ No se recibió archivo en ImageWithTag.\");\r\n      return;\r\n    }\r\n\r\n    if (typeof file === \"string\") {\r\n      setImageUrl(encodeURI(file));\r\n    } else {\r\n      const url = URL.createObjectURL(file);\r\n      setImageUrl(url);\r\n\r\n      return () => URL.revokeObjectURL(url);\r\n    }\r\n  }, [file]);\r\n\r\n  useEffect(() => {\r\n    setLocalTag(tag);\r\n  }, [tag]);\r\n\r\n  useEffect(() => {\r\n    setLocalDescription(description);\r\n  }, [description]);\r\n\r\n  const handleTagChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setLocalTag(e.target.value);\r\n    onTagChange(e.target.value);\r\n  };\r\n\r\n  const handleDescriptionChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n      setLocalDescription(e.target.value);\r\n      onDescriptionChange(e.target.value);\r\n    },\r\n    [onDescriptionChange]\r\n  );\r\n\r\n  return (\r\n    <div className=\"relative w-full rounded-md border border-gray-700 bg-client-background p-3 space-y-4\">\r\n      {imageUrl && (\r\n        <div\r\n          className=\"relative h-32 w-full rounded-md bg-cover bg-center\"\r\n          style={{ backgroundImage: `url(${imageUrl})` }}\r\n        >\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute right-2 top-2 rounded-full bg-gray-400 p-1 text-white transition hover:bg-gray-600\"\r\n            onClick={onRemove}\r\n            aria-label=\"Eliminar imagen\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <FormInput\r\n        id={id}\r\n        label=\"Nombre\"\r\n        type=\"text\"\r\n        name=\"tag\"\r\n        value={localTag}\r\n        onChange={handleTagChange}\r\n        placeholder=\"Nombre\"\r\n        maxLength={100}\r\n        error={error}\r\n        tooltipText=\"Ingrese un nombre para la imagen.\"\r\n        isAccent={true}\r\n      />\r\n\r\n      {imageTypeId === 1005 && category === \"imageType\" && (\r\n        <FormTextArea\r\n          label=\"Descripción\"\r\n          name=\"description\"\r\n          value={localDescription}\r\n          onChange={handleDescriptionChange}\r\n          placeholder=\"Descripción\"\r\n          maxLength={100}\r\n          error={descriptionError}\r\n          tooltipText=\"Ingrese una breve descripción del plano.\"\r\n          rows={4}\r\n          isAccent={true}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
          "locationPropertieForm.tsx": "import { useCallback, useMemo, memo } from \"react\";\r\nimport { ProjectData, City, Departament } from \"@/lib/definitios\";\r\nimport { useLocationProjectValidation } from \"@/app/hooks/projects/createEditProject/useLocationProjectValidation\";\r\nimport StepNavigationButtons from \"@/app/ui/user/stepNavigationButtons\";\r\nimport LocationMap from \"../../admin/projects/locationMap\";\r\nimport FormSearchAddress from \"../../modals/home/formSearchAddress\";\r\nimport FormSelect from \"@/app/ui/modals/home/formSelect\";\r\nimport FormInput from \"@/app/ui/modals/home/formInput\";\r\n\r\ninterface LocationPropertieFormProps {\r\n  formData: ProjectData;\r\n  onChange: (updatedData: Partial<ProjectData>) => void;\r\n  onSubmit: (data: Partial<ProjectData>) => void;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  departaments: Departament[];\r\n  cities: City[];\r\n  mapAddress: string;\r\n  setMapAddress: (value: string) => void;\r\n}\r\n\r\nfunction LocationPropertieForm({\r\n  formData,\r\n  onChange,\r\n  onPrevious,\r\n  onNext,\r\n  currentStep,\r\n  totalSteps,\r\n  departaments,\r\n  cities,\r\n  mapAddress,\r\n  setMapAddress,\r\n}: LocationPropertieFormProps) {\r\n  const { errors, validateFields, validateField } =\r\n    useLocationProjectValidation(formData);\r\n\r\n  const propertyOptions = useMemo(\r\n    () => departaments.map((dep) => ({ id: dep.id, name: dep.name })),\r\n    [departaments]\r\n  );\r\n\r\n  const cityOptions = useMemo(\r\n    () =>\r\n      cities\r\n        .filter(\r\n          (city) => city.departament.id === formData.city?.departament?.id\r\n        )\r\n        .map((city) => ({ id: city.id, name: city.name })),\r\n    [cities, formData.city?.departament?.id]\r\n  );\r\n\r\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\r\n\r\n  const handleDepartamentChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      const departamentId = parseInt(e.target.value);\r\n      const selectedDepartament = departaments.find(\r\n        (dep) => dep.id === departamentId\r\n      );\r\n\r\n      if (\r\n        selectedDepartament &&\r\n        selectedDepartament.id !== formData.city?.departament?.id\r\n      ) {\r\n        onChange({\r\n          city: { id: 0, name: \"\", departament: selectedDepartament },\r\n          address: \"\",\r\n          latitude: undefined,\r\n          longitude: undefined,\r\n        });\r\n        validateField(\"departamentError\", departamentId);\r\n      }\r\n    },\r\n    [onChange, validateField, formData.city?.departament?.id, departaments]\r\n  );\r\n\r\n  const handleCityChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      const cityId = parseInt(e.target.value);\r\n      const selectedCity = cities.find((city) => city.id === cityId);\r\n\r\n      if (selectedCity && selectedCity.id !== formData.city?.id) {\r\n        onChange({\r\n          city: selectedCity,\r\n          address: \"\",\r\n          latitude: undefined,\r\n          longitude: undefined,\r\n        });\r\n        validateField(\"cityError\", cityId);\r\n      }\r\n    },\r\n    [onChange, validateField, formData.city?.id, cities]\r\n  );\r\n\r\n  const handleAddressSelect = useCallback(\r\n    async (placeId: string) => {\r\n      const placesService = new google.maps.places.PlacesService(\r\n        document.createElement(\"div\")\r\n      );\r\n\r\n      placesService.getDetails({ placeId }, (place, status) => {\r\n        if (\r\n          status === google.maps.places.PlacesServiceStatus.OK &&\r\n          place?.geometry?.location\r\n        ) {\r\n          const lat = place.geometry.location.lat();\r\n          const lng = place.geometry.location.lng();\r\n\r\n          const geocoder = new google.maps.Geocoder();\r\n          geocoder.geocode({ location: { lat, lng } }, (results, status) => {\r\n            if (status === google.maps.GeocoderStatus.OK && results?.length) {\r\n              const formattedAddress = results[0].formatted_address;\r\n              const foundCity = results.find((result) =>\r\n                result.types.includes(\"locality\")\r\n              );\r\n              const foundDepartment = results.find((result) =>\r\n                result.types.includes(\"administrative_area_level_1\")\r\n              );\r\n\r\n              const cityName =\r\n                foundCity?.formatted_address.split(\",\")[0].trim() || \"\";\r\n              const departmentName =\r\n                foundDepartment?.formatted_address.split(\",\")[0].trim() || \"\";\r\n\r\n              const selectedCity = cities.find(\r\n                (c) => c.name.toLowerCase() === cityName.toLowerCase()\r\n              );\r\n              const selectedDepartment = departaments.find(\r\n                (d) => d.name.toLowerCase() === departmentName.toLowerCase()\r\n              );\r\n\r\n              if (\r\n                selectedCity?.id !== formData.city?.id ||\r\n                selectedDepartment?.id !== formData.city?.departament?.id\r\n              ) {\r\n                onChange({\r\n                  address: formattedAddress,\r\n                  latitude: lat,\r\n                  longitude: lng,\r\n                  city: selectedCity || {\r\n                    id: 0,\r\n                    name: \"Ciudad desconocida\",\r\n                    departament: selectedDepartment || {\r\n                      id: 0,\r\n                      name: \"Departamento desconocido\",\r\n                    },\r\n                  },\r\n                });\r\n              } else {\r\n                onChange({ address: formattedAddress });\r\n              }\r\n\r\n              validateField(\"addressError\", formattedAddress);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    [\r\n      onChange,\r\n      validateField,\r\n      formData.city?.id,\r\n      formData.city?.departament?.id,\r\n      cities,\r\n      departaments,\r\n    ]\r\n  );\r\n\r\n  const handleNext = (e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n\r\n    const propertyTypeName = formData.propertyType?.name || \"Propiedad\";\r\n    const projectTypeName = formData.projectType?.name || \"\";\r\n    const cityName = formData.city?.name || \"\";\r\n    const departamentName = formData.city?.departament?.name || \"\";\r\n    const generatedName =\r\n      `${propertyTypeName} en ${projectTypeName} en ${cityName}, ${departamentName}`.trim();\r\n\r\n    onChange({ name: generatedName });\r\n\r\n    if (validateFields(mapAddress)) {\r\n      onNext();\r\n    }\r\n  };\r\n\r\n  const tooltipTexts = useMemo(\r\n    () => ({\r\n      departament:\r\n        \"Seleccione el departamento donde se encuentra la propiedad.\",\r\n      city: \"Seleccione la ciudad correspondiente la propiedad.\",\r\n      address: \"Ingrese la dirección de la propiedad.\",\r\n    }),\r\n    []\r\n  );\r\n\r\n  const handleMapAddressChange = useCallback((value: string) => {\r\n    setMapAddress(value);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg p-6 shadow-lg bg-client-background\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        Ubicación de la Propiedad\"\r\n      </h2>\r\n\r\n      <form className=\"space-y-6\">\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n          <FormSelect\r\n            label=\"Departamento\"\r\n            name=\"departament\"\r\n            value={formData.city?.departament?.id || \"\"}\r\n            options={propertyOptions}\r\n            onChange={handleDepartamentChange}\r\n            error={errors.departamentError}\r\n            tooltipText={tooltipTexts.departament}\r\n            isAccent={true}\r\n          />\r\n\r\n          <FormSelect\r\n            label=\"Ciudad\"\r\n            name=\"city\"\r\n            value={formData.city?.id || \"\"}\r\n            options={cityOptions}\r\n            onChange={handleCityChange}\r\n            error={errors.cityError}\r\n            tooltipText={tooltipTexts.city}\r\n            isAccent={true}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"relative z-20 space-y-4\">\r\n          <FormInput\r\n            label=\"Dirección Pública\"\r\n            name=\"address\"\r\n            type=\"text\"\r\n            placeholder=\"Ej: Calle 123 #45-67, Barrio XYZ\"\r\n            value={formData.address || \"\"}\r\n            onChange={(e) => onChange({ address: e.target.value })}\r\n            error={errors.addressError}\r\n            tooltipText=\"Ingresa la dirección que se mostrará públicamente.\"\r\n            isAccent={true}\r\n          />\r\n\r\n          <FormSearchAddress\r\n            label=\"Ubicación en el Mapa\"\r\n            value={mapAddress || \"\"}\r\n            onChange={handleMapAddressChange}\r\n            onSelect={handleAddressSelect}\r\n            error={errors.mapAddressError}\r\n            isLoaded={isMapsReady}\r\n            tooltipText=\"Busca la dirección en el mapa para obtener la ubicación exacta.\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"relative h-64 w-full\">\r\n          <LocationMap\r\n            isLoaded={isMapsReady}\r\n            coordinates={{\r\n              lat:\r\n                typeof formData.latitude === \"number\"\r\n                  ? formData.latitude\r\n                  : 4.5709,\r\n              lng:\r\n                typeof formData.longitude === \"number\"\r\n                  ? formData.longitude\r\n                  : -74.2973,\r\n            }}\r\n            onLocationSelect={(coords) => {\r\n              setMapAddress(coords.address ?? \"\");\r\n\r\n              const selectedCity = cities.find((c) => c.name === coords.city);\r\n              const selectedDepartment = departaments.find(\r\n                (d) => d.name === coords.department\r\n              );\r\n\r\n              const currentCityId = formData.city?.id || 0;\r\n              const currentDepartmentId = formData.city?.departament?.id || 0;\r\n\r\n              if (\r\n                selectedCity?.id !== currentCityId ||\r\n                selectedDepartment?.id !== currentDepartmentId\r\n              ) {\r\n                onChange({\r\n                  latitude: coords.lat,\r\n                  longitude: coords.lng,\r\n                  city: selectedCity || {\r\n                    id: 0,\r\n                    name: \"Ciudad desconocida\",\r\n                    departament: selectedDepartment || {\r\n                      id: 0,\r\n                      name: \"Departamento desconocido\",\r\n                    },\r\n                  },\r\n                });\r\n              } else {\r\n                onChange({\r\n                  latitude: coords.lat,\r\n                  longitude: coords.lng,\r\n                });\r\n              }\r\n            }}\r\n            showUserLocationButton={true}\r\n          />\r\n        </div>\r\n\r\n        <StepNavigationButtons\r\n          currentStep={currentStep}\r\n          totalSteps={totalSteps}\r\n          onPrevious={onPrevious}\r\n          onNext={handleNext}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(LocationPropertieForm);\r\n",
          "progressBar.tsx": "import dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\n\r\nconst ClipboardList = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.ClipboardList)\r\n);\r\nconst MapPin = dynamic(() => import(\"lucide-react\").then((mod) => mod.MapPin));\r\nconst Building2 = dynamic(() =>\r\n  import(\"lucide-react\").then((mod) => mod.Building2)\r\n);\r\nconst List = dynamic(() => import(\"lucide-react\").then((mod) => mod.List));\r\nconst Images = dynamic(() => import(\"lucide-react\").then((mod) => mod.Images));\r\n\r\ntype ProgressBarProps = {\r\n  currentStep: number;\r\n};\r\n\r\nconst steps = [\r\n  { icon: ClipboardList, title: \"Datos básicos\" },\r\n  { icon: MapPin, title: \"Ubicación\" },\r\n  { icon: Building2, title: \"Características\" },\r\n  { icon: List, title: \"Resumen\" },\r\n  { icon: Images, title: \"Imágenes\" },\r\n];\r\n\r\nexport default function ProgressBar({ currentStep }: ProgressBarProps) {\r\n  return (\r\n    <div className=\"mx-auto flex w-full max-w-xl items-center justify-center\">\r\n      {steps.map((step, index) => {\r\n        const Icon = step.icon;\r\n        const isLastStep = index === steps.length - 1;\r\n        const isActive = currentStep >= index;\r\n\r\n        return (\r\n          <div\r\n            key={index}\r\n            className={clsx(\"flex items-center\", !isLastStep && \"flex-1\")}\r\n          >\r\n            <div\r\n              className={clsx(\r\n                \"z-10 flex h-12 w-12 items-center justify-center rounded-full transition-colors duration-300\",\r\n                isActive\r\n                  ? \"bg-client-accent text-white\"\r\n                  : \"bg-client-background text-client-secondary\"\r\n              )}\r\n            >\r\n              <div title={step.title}>\r\n                <Icon size={25} />\r\n              </div>\r\n            </div>\r\n\r\n            {!isLastStep && (\r\n              <div\r\n                className={clsx(\r\n                  \"h-1 transition-colors duration-300\",\r\n                  currentStep > index\r\n                    ? \"bg-client-accent\"\r\n                    : \"bg-client-background\"\r\n                )}\r\n                style={{\r\n                  width: \"calc(100% - 2.25rem)\",\r\n                  marginLeft: \"-4px\",\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n",
          "propertieForm.tsx": "\"use client\";\r\n\r\nimport { useEffect, useCallback, useMemo, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ProjectData, Media } from \"@/lib/definitios\";\r\nimport useLocations from \"@/app/hooks/projects/metadata/location/useLocations\";\r\nimport useBasicMetadata from \"@/app/hooks/projects/metadata/useBasicMetadata\";\r\nimport useImageTypes from \"@/app/hooks/projects/metadata/imageTypes/useImageTypes\";\r\nimport useDeleteProject from \"@/app/hooks/projects/useDeleteProject\";\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport { useS3ImagesApi } from \"@/app/hooks/s3/useS3ImagesApi\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport { useProjectMediaApi } from \"@/app/hooks/projects/metadata/projectMedia/useProjectMediaApi\";\r\nimport ProgressBar from \"./progressBar\";\r\nimport BasicPropertieForm from \"./basicPropertieForm\";\r\nimport LocationPropertieForm from \"./locationPropertieForm\";\r\nimport FeaturesPropertieForm from \"./featuresPropertieForm\";\r\nimport DetailsPropertieForm from \"./detailsPropertieForm\";\r\nimport ImagesPropertieForm from \"./imagesPropertieForm\";\r\nimport ModalConfirmation from \"../../modals/home/modalConfirmation\";\r\nimport CreateProjectSkeleton from \"@/app/ui/skeletons/admin/createProjectSkeleton\";\r\nimport Loader from \"@/app/ui/loader\";\r\n\r\ninterface PropertieFormProps {\r\n  isEdit: boolean;\r\n  projectId?: number;\r\n  hasPermission?: boolean;\r\n}\r\n\r\nexport default function PropertieForm({\r\n  isEdit,\r\n  projectId,\r\n  hasPermission,\r\n}: PropertieFormProps) {\r\n  const projectQuery = isEdit\r\n    ? useProjectById(projectId, false, true)\r\n    : { project: null, loading: false };\r\n  const { project, loading: loadingProject } = projectQuery;\r\n\r\n  const [projectData, setProjectData] = useState<Partial<ProjectData>>(\r\n    isEdit ? {} : { projectType: { id: 2, name: \"Venta\" }, media: [] }\r\n  );\r\n\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const totalSteps = 5;\r\n  const router = useRouter();\r\n\r\n  const { locations } = useLocations();\r\n  const { metadata } = useBasicMetadata();\r\n  const { imagesTypes } = useImageTypes();\r\n  const { submitProject } = useProjectApi();\r\n  const { deleteProject } = useDeleteProject();\r\n  const { uploadImages, deleteImages } = useS3ImagesApi();\r\n  const { insertProjectMedia, updateProjectMedia, deleteProjectMedia } =\r\n    useProjectMediaApi();\r\n  const [loading, setLoading] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [mediaToSubmit, setMediaToSubmit] = useState<Media[] | null>(null);\r\n  const [mapAddress, _setMapAddress] = useState(isEdit ? \"Ubicación\" : \"\");\r\n  const mapAddressRef = useRef(mapAddress);\r\n\r\n  const setMapAddress = (value: string) => {\r\n    mapAddressRef.current = value;\r\n    _setMapAddress(value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isEdit && project && Object.keys(project).length > 0) {\r\n      setProjectData((prev) => ({\r\n        ...prev,\r\n        ...project,\r\n      }));\r\n\r\n      setMapAddress(project.address || \"\");\r\n    }\r\n  }, [isEdit, project]);\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"\";\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [loading]);\r\n\r\n  const handleUpdateProject = useCallback(\r\n    (updatedData: Partial<ProjectData>) => {\r\n      setProjectData((prevData) => {\r\n        const newData = structuredClone({ ...prevData, ...updatedData });\r\n        return newData;\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleNextStep = useCallback(() => {\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep((prevStep) => prevStep + 1);\r\n    }\r\n  }, [currentStep, totalSteps]);\r\n\r\n  const handlePreviousStep = useCallback(() => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep((prevStep) => prevStep - 1);\r\n    }\r\n  }, [currentStep]);\r\n\r\n  const handleSubmit = useCallback(\r\n    (data: Partial<ProjectData>) => {\r\n      handleUpdateProject(data);\r\n      handleNextStep();\r\n    },\r\n    [handleUpdateProject, handleNextStep]\r\n  );\r\n\r\n  const handleFinalSubmit = async (media: Media[]) => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const finalProjectData = { ...projectData, media };\r\n\r\n      const projectId = await createOrUpdateProject(finalProjectData);\r\n      if (!projectId) {\r\n        console.error(\"❌ No se pudo obtener un ID de propiedad válido.\");\r\n        return;\r\n      }\r\n\r\n      if (isEdit) {\r\n        await handleEditMedia(projectId, media);\r\n      } else {\r\n        await handleNewMedia(projectId, media);\r\n      }\r\n\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"success\",\r\n          message: isEdit\r\n            ? \"Propiedad editada exitosamente.\"\r\n            : \"Propiedad creada exitosamente.\",\r\n        })\r\n      );\r\n    } catch (err) {\r\n      console.error(\"🔥 Error general al crear proyecto:\", err);\r\n\r\n      console.error(\"❌ Error durante el proceso:\", err);\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"error\",\r\n          message: \"Hubo un problema al procesar la propiedad.\",\r\n        })\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n      router.push(\"/usuario/mis-propiedades\");\r\n    }\r\n  };\r\n\r\n  const createOrUpdateProject = async (projectData: Partial<ProjectData>) => {\r\n    const result = await submitProject(projectData, isEdit ? \"edit\" : \"create\");\r\n\r\n    if (isEdit) {\r\n      if (!result) {\r\n        console.error(\"❌ Error al editar la propiedad.\");\r\n        sessionStorage.setItem(\r\n          \"projectMessage\",\r\n          JSON.stringify({\r\n            type: \"error\",\r\n            message: \"Error al editar la propiedad.\",\r\n          })\r\n        );\r\n        return null;\r\n      }\r\n      return projectData.id ?? null;\r\n    } else {\r\n      if (typeof result === \"number\") return result;\r\n\r\n      console.error(\"❌ Error al crear la propiedad.\");\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"error\",\r\n          message: \"Error al crear la propiedad.\",\r\n        })\r\n      );\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleEditMedia = async (projectId: number, media: Media[]) => {\r\n    const existingMedia = media.filter((m) => typeof m.file === \"string\");\r\n    const newMedia = media.filter((m) => m.file instanceof File);\r\n\r\n    const mediaUrls = existingMedia.map((m) => m.file as string);\r\n    const previousMediaUrls = projectData.projectMedia?.map((m) => m.url) || [];\r\n\r\n    await deleteUnusedImages(previousMediaUrls, mediaUrls);\r\n\r\n    if (newMedia.length > 0) {\r\n      await uploadAndInsertMedia(projectId, newMedia);\r\n    }\r\n\r\n    await updateExistingMedia(media);\r\n  };\r\n\r\n  const handleNewMedia = async (projectId: number, media: Media[]) => {\r\n    await uploadAndInsertMedia(projectId, media);\r\n  };\r\n\r\n  const deleteUnusedImages = async (\r\n    previousUrls: string[],\r\n    currentUrls: string[]\r\n  ) => {\r\n    const imagesToDelete = previousUrls.filter(\r\n      (url) => !currentUrls.includes(url)\r\n    );\r\n\r\n    if (imagesToDelete.length > 0) {\r\n      await deleteImages(imagesToDelete);\r\n\r\n      const mediaIdsToDelete =\r\n        projectData.projectMedia\r\n          ?.filter((m) => imagesToDelete.includes(m.url))\r\n          .map((m) => m.id)\r\n          .filter((id): id is number => id !== undefined) || [];\r\n\r\n      if (mediaIdsToDelete.length > 0) {\r\n        await deleteProjectMedia(mediaIdsToDelete);\r\n      }\r\n    }\r\n  };\r\n\r\n  const uploadAndInsertMedia = async (projectId: number, media: Media[]) => {\r\n    const uploadResult = await uploadImages(\r\n      projectId,\r\n      media,\r\n      projectData.propertyType?.name ?? \"default\"\r\n    );\r\n\r\n    if (!uploadResult || uploadResult.length === 0) {\r\n      console.error(\r\n        \"❌ No se pudieron subir imágenes. Eliminando la propiedad...\"\r\n      );\r\n      await deleteProject(projectId);\r\n      throw new Error(\"Error al subir las imágenes. Propiedad eliminada.\");\r\n    }\r\n\r\n    try {\r\n      await insertProjectMedia(uploadResult);\r\n    } catch (error) {\r\n      console.error(\r\n        \"❌ Error al insertar imágenes en la base de datos. Eliminando la propiedad...\"\r\n      );\r\n      await deleteProject(projectId);\r\n      throw new Error(\r\n        \"Error al insertar imágenes en la BD. Propiedad eliminada.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const updateExistingMedia = async (media: Media[]): Promise<void> => {\r\n    const mediaToUpdate =\r\n      projectData.projectMedia\r\n        ?.map((original) => {\r\n          const updated = media.find(\r\n            (m) => typeof m.file === \"string\" && m.file === original.url\r\n          );\r\n\r\n          if (\r\n            updated &&\r\n            (updated.tag.trim() !== original.tag.trim() ||\r\n              (updated.description?.trim() || \"\") !==\r\n                (original.description?.trim() || \"\"))\r\n          ) {\r\n            return {\r\n              id: original.id!,\r\n              tag: updated.tag,\r\n              description: updated.description ?? \"\",\r\n            };\r\n          }\r\n          return null;\r\n        })\r\n        .filter(\r\n          (item): item is { id: number; tag: string; description: string } =>\r\n            item !== null\r\n        ) || [];\r\n\r\n    if (mediaToUpdate.length > 0) {\r\n      await updateProjectMedia(mediaToUpdate);\r\n    }\r\n  };\r\n\r\n  const handleOpenModal = (media: Media[], validateFields: () => boolean) => {\r\n    setProjectData((prevData) => ({\r\n      ...prevData,\r\n      media,\r\n    }));\r\n    setTimeout(() => {\r\n      if (!validateFields()) {\r\n        console.error(\"🚨 Validación fallida antes de abrir el modal.\");\r\n        return;\r\n      }\r\n      setMediaToSubmit(media);\r\n      setIsModalOpen(true);\r\n    }, 100);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setMediaToSubmit(null);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleConfirmSubmit = async () => {\r\n    if (!mediaToSubmit) return;\r\n\r\n    handleCloseModal();\r\n\r\n    setTimeout(() => {\r\n      setLoading(true);\r\n    }, 100);\r\n\r\n    try {\r\n      await handleFinalSubmit(mediaToSubmit);\r\n    } catch (error) {\r\n      console.error(\"Error en la confirmación de envío:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n      handleCloseModal();\r\n    }\r\n  };\r\n\r\n  const currentForm = useMemo(() => {\r\n    if (!metadata || !locations || (loadingProject && isEdit)) {\r\n      return <CreateProjectSkeleton />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {currentStep === 0 && (\r\n          <BasicPropertieForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            propertyTypes={metadata.propertyTypes}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            isEdit={isEdit}\r\n            hasPermission={hasPermission}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 1 && (\r\n          <LocationPropertieForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            departaments={locations.departaments}\r\n            cities={locations.cities}\r\n            mapAddress={mapAddressRef.current}\r\n            setMapAddress={setMapAddress}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 2 && (\r\n          <FeaturesPropertieForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 3 && (\r\n          <DetailsPropertieForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            commonAreas={metadata.commonAreas}\r\n            nearbyServices={metadata.nearbyServices}\r\n            housingTypes={metadata.housingTypes}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 4 && (\r\n          <ImagesPropertieForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleOpenModal}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            imagesTypes={imagesTypes}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }, [currentStep, metadata, locations, projectData]);\r\n\r\n  return (\r\n    <div className=\"bg-client-backgroundLight w-full p-6\">\r\n      {loading && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n          <Loader size={50} />\r\n        </div>\r\n      )}\r\n\r\n      <h1 className=\"mb-10 mt-24 text-center text-3xl font-semibold text-client-text lg:mt-20\">\r\n        {isEdit ? \"Editar \" : \"Agregar \"}\r\n        Propiedad\r\n      </h1>\r\n\r\n      <div className=\"mx-auto mb-10 text-center\">\r\n        <ProgressBar currentStep={currentStep} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 mx-auto max-w-3xl\">{currentForm}</div>\r\n\r\n      <ModalConfirmation\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        onConfirm={handleConfirmSubmit}\r\n        title=\"Confirmar Acción\"\r\n        message={\r\n          isEdit\r\n            ? \"¿Deseas guardar los cambios?\"\r\n            : \"¿Estás seguro de que quieres subir esta propiedad?\"\r\n        }\r\n        confirmLabel=\"Confirmar\"\r\n        cancelLabel=\"Cancelar\"\r\n      />\r\n\r\n      <div className=\"mt-4 text-center\">\r\n        <button\r\n          className=\"rounded-md bg-client-background px-4 py-2 text-white transition-colors hover:bg-client-backgroundAlt\"\r\n          onClick={() => router.push(\"/usuario/mis-propiedades\")}\r\n        >\r\n          Volver\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "propertiesContainer.tsx": "\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\nimport PropertyCard from \"@/app/ui/realEstate/PropertyCard\";\r\n\r\ninterface PropertiesContainerProps {\r\n  projects: ProjectSummary[];\r\n  totalEntries: number;\r\n  isLoading: boolean;\r\n  fetchMoreProjects: () => void;\r\n  onDelete: (id: number, name: string) => void;\r\n  statusFilter: \"aceptado\" | \"pendiente\" | \"revision\";\r\n}\r\n\r\nexport default function PropertiesContainer({\r\n  projects,\r\n  totalEntries,\r\n  isLoading,\r\n  fetchMoreProjects,\r\n  onDelete,\r\n  statusFilter,\r\n}: PropertiesContainerProps) {\r\n  const projectCards = useMemo(\r\n    () =>\r\n      projects.map((project) => (\r\n        <div key={project.id} className=\"flex justify-center\">\r\n          <div className=\"w-full max-w-xs h-80\">\r\n            <PropertyCard\r\n              id={project.id}\r\n              name={project.name}\r\n              location={project.city.name}\r\n              images={project.projectMedia}\r\n              price={project.price || 0}\r\n              area={project.totalArea}\r\n              bedrooms={project.bedrooms || undefined}\r\n              bathrooms={project.bathrooms || undefined}\r\n              parkingSpots={project.parkingSpots || undefined}\r\n              url={\r\n                statusFilter === \"aceptado\"\r\n                  ? \"/inmobiliaria\"\r\n                  : \"/usuario/mis-propiedades\"\r\n              }\r\n              showActions={statusFilter === \"pendiente\" ? false : true}\r\n              onDelete={onDelete}\r\n            />\r\n          </div>\r\n        </div>\r\n      )),\r\n    [projects]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n        {projectCards}\r\n      </div>\r\n\r\n      {projects.length < totalEntries && (\r\n        <div className=\"mt-10 flex justify-center\">\r\n          <button\r\n            onClick={fetchMoreProjects}\r\n            disabled={isLoading}\r\n            className=\"bg-client-backgroundAlt border border-white rounded-full px-6 py-2 text-white shadow-lg transition-colors hover:bg-client-white hover:text-black disabled:cursor-not-allowed\"\r\n          >\r\n            {isLoading ? \"Cargando...\" : \"Mostrar más\"}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
        "propertieView": {
          "basicPropertieView.tsx": "import clsx from \"clsx\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport FormDisplay from \"../../modals/home/formDisplay\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\n\r\ninterface BasicPropertieViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function BasicPropertieView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: BasicPropertieViewProps) {\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        Datos Básicos\r\n      </h2>\r\n\r\n      <div className=\"space-y-6\">\r\n        <FormDisplay\r\n          label={`Nombre del ${project.propertyType?.id ? \"Proyecto\" : \"Propiedad\"}`}\r\n          value={project.name || \"No especificado\"}\r\n        />\r\n\r\n        <div\r\n          className={clsx(\r\n            \"grid grid-cols-1 gap-4\",\r\n            project.propertyType?.id && \"sm:grid-cols-2\"\r\n          )}\r\n        >\r\n          <FormDisplay\r\n            label=\"Tipo de Propiedad\"\r\n            value={project.propertyType?.name || \"No especificado\"}\r\n          />\r\n\r\n          {project.projectType?.id && (\r\n            <FormDisplay\r\n              label=\"Finalidad\"\r\n              value={project.projectType?.name || \"No especificado\"}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <FormDisplay\r\n          label=\"Correo del Propietario\"\r\n          value={project?.email || \"No especificado\"}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Resumen breve\"\r\n          value={project.shortDescription || \"No especificado\"}\r\n          rows={3}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Descripción Completa\"\r\n          value={project.detailedDescription || \"No especificado\"}\r\n          rows={6}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Propio de la empresa\"\r\n          value={project.membership === 1004 ? \"Sí\" : \"No\"}\r\n        />\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "detailsPropertieView.tsx": "import { useMemo } from \"react\";\r\nimport {\r\n  ProjectData,\r\n  CommonArea,\r\n  NearbyService,\r\n  HousingType,\r\n} from \"@/lib/definitios\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport FormDisplay from \"../../modals/home/formDisplay\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\n\r\ninterface DetailsPropertieViewProps {\r\n  project: Partial<ProjectData>;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function DetailsPropertieView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: DetailsPropertieViewProps) {\r\n  const shouldShowField = useMemo(() => {\r\n    const propertyTypeId = project.propertyType?.id;\r\n\r\n    return {\r\n      price: project.projectType?.id === 2 || project.projectType?.id === 3,\r\n      availableUnits:\r\n        project.projectType?.id === 2 || project.projectType?.id === 3,\r\n      housingType: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      complexName:\r\n        propertyTypeId === 1002 &&\r\n        (project.projectType?.id === 2 || project.projectType?.id === 3),\r\n      availableDate: true,\r\n      commonAreas: project.commonAreas && project.commonAreas.length > 0,\r\n      nearbyServices:\r\n        project.nearbyServices && project.nearbyServices.length > 0,\r\n    };\r\n  }, [project]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        {project.projectType?.id === 1\r\n          ? \"Detalles del Proyecto\"\r\n          : \"Detalles de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        {shouldShowField.price && (\r\n          <FormDisplay\r\n            label=\"Precio\"\r\n            value={formatNumber(project.price ?? 0)}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.availableUnits && (\r\n          <FormDisplay\r\n            label=\"Unidades Disponibles\"\r\n            value={String(project.availableUnits ?? \"No especificado\")}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.housingType && (\r\n          <FormDisplay\r\n            label=\"Tipo de Vivienda\"\r\n            value={project.housingType?.name ?? \"No especificado\"}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.availableDate && (\r\n          <FormDisplay\r\n            label=\"Fecha Estimada de Entrega\"\r\n            value={\r\n              project.availableDate\r\n                ? new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\r\n                    year: \"numeric\",\r\n                    month: \"long\",\r\n                  })\r\n                : \"No especificado\"\r\n            }\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.complexName && (\r\n          <FormDisplay\r\n            label=\"Nombre del Conjunto\"\r\n            value={project.complexName ?? \"No especificado\"}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.commonAreas && (\r\n          <DetailList label=\"Áreas Comunes\" items={project.commonAreas} />\r\n        )}\r\n\r\n        {shouldShowField.nearbyServices && (\r\n          <DetailList\r\n            label=\"Servicios Cercanos\"\r\n            items={project.nearbyServices}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DetailList = ({\r\n  label,\r\n  items,\r\n}: {\r\n  label: string;\r\n  items?: (CommonArea | NearbyService | HousingType)[];\r\n}) =>\r\n  items && items.length > 0 ? (\r\n    <div>\r\n      <h3 className=\"mb-2 text-lg font-bold text-client-accent\">{label}</h3>\r\n\r\n      <ul className=\"grid grid-cols-1 gap-2 text-premium-textPrimary dark:text-premium-textSecondary\">\r\n        {items.map((item) => (\r\n          <li key={item.id} className=\"pl-4 before:content-['•'] before:mr-2\">\r\n            {item.name}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  ) : null;\r\n",
          "featuresPropertieView.tsx": "import { useMemo } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport FormDisplay from \"../../modals/home/formDisplay\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\n\r\ninterface FeaturesPropertieViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function FeaturesPropertieView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: FeaturesPropertieViewProps) {\r\n  const shouldShowField = useMemo(() => {\r\n    const propertyTypeId = project.propertyType?.id;\r\n\r\n    return {\r\n      socioeconomicLevel: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      yearBuilt: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      bedrooms: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      storageUnits: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      balcony: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      laundryArea: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      customizationOptions: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      terrace: propertyTypeId === 1001,\r\n      garden: propertyTypeId === 1001,\r\n      bathrooms:\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004,\r\n      lobbies:\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004,\r\n      elevator: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      towers: propertyTypeId === 1002,\r\n      floorNumber: propertyTypeId === 1002,\r\n      freeHeight:\r\n        propertyTypeId === 1004 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1005,\r\n      width:\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007,\r\n      length:\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007,\r\n      heavyParking: propertyTypeId === 1005,\r\n    };\r\n  }, [project.propertyType?.id]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        {project.projectType?.id === 1\r\n          ? \"Características del Proyecto\"\r\n          : \"Características de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        <FormDisplay\r\n          label=\"Área Total (m²)\"\r\n          value={String(project.totalArea ?? \"No especificado\")}\r\n        />\r\n        <FormDisplay\r\n          label=\"Área Construida (m²)\"\r\n          value={String(project.builtArea ?? \"No especificado\")}\r\n        />\r\n        {shouldShowField.socioeconomicLevel && (\r\n          <FormDisplay\r\n            label=\"Nivel Socioeconómico\"\r\n            value={String(project.socioeconomicLevel ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.yearBuilt && (\r\n          <FormDisplay\r\n            label=\"Año de Construcción\"\r\n            value={String(project.yearBuilt ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.bedrooms && (\r\n          <FormDisplay\r\n            label=\"Número de Habitaciones\"\r\n            value={String(project.bedrooms ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.bathrooms && (\r\n          <FormDisplay\r\n            label=\"Número de Baños\"\r\n            value={String(project.bathrooms ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.lobbies && (\r\n          <FormDisplay\r\n            label=\"Número de Salas de Estar\"\r\n            value={String(project.lobbies ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.freeHeight && (\r\n          <FormDisplay\r\n            label=\"Altura Libre (m)\"\r\n            value={String(project.freeHeight ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.width && (\r\n          <FormDisplay\r\n            label=\"Frente (m)\"\r\n            value={String(project.width ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.length && (\r\n          <FormDisplay\r\n            label=\"Fondo (m)\"\r\n            value={String(project.length ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.heavyParking && (\r\n          <FormDisplay\r\n            label=\"Espacios de Parqueo Pesado\"\r\n            value={String(project.heavyParking ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.towers && (\r\n          <FormDisplay\r\n            label=\"Número de Torres\"\r\n            value={String(project.towers ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.floorNumber && (\r\n          <FormDisplay\r\n            label=\"Número de Piso\"\r\n            value={String(project.floorNumber ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.storageUnits && (\r\n          <FormDisplay\r\n            label=\"Número de Depósitos\"\r\n            value={String(project.storageUnits ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        <FormDisplay\r\n          label=\"Espacios de Parqueo\"\r\n          value={String(project.parkingSpots ?? \"No especificado\")}\r\n        />\r\n      </div>\r\n\r\n      {(project.propertyType?.id === 1001 ||\r\n        project.propertyType?.id === 1002) && (\r\n        <div>\r\n          <h3 className=\"my-4 text-center text-lg font-semibold text-client-accent\">\r\n            Características Adicionales\r\n          </h3>\r\n\r\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n            {shouldShowField.elevator && (\r\n              <FormDisplay\r\n                label=\"Elevador\"\r\n                value={project.elevator ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.terrace && (\r\n              <FormDisplay\r\n                label=\"Terraza\"\r\n                value={project.terrace ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.balcony && (\r\n              <FormDisplay\r\n                label=\"Balcón\"\r\n                value={project.balcony ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.garden && (\r\n              <FormDisplay\r\n                label=\"Jardín\"\r\n                value={project.garden ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.laundryArea && (\r\n              <FormDisplay\r\n                label=\"Área de Lavado\"\r\n                value={project.laundryArea ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.customizationOptions && (\r\n              <FormDisplay\r\n                label=\"Opciones de Personalización\"\r\n                value={project.customizationOptions ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "imagesPropertieView.tsx": "import { ProjectData, ImageType } from \"@/lib/definitios\";\r\nimport PropertieMediaGallery from \"./propertieMediaGallery\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\n\r\ninterface ImagesPropertieViewProps {\r\n  project: ProjectData;\r\n  imagesTypes: ImageType[];\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function ImagesPropertieView({\r\n  project,\r\n  imagesTypes,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: ImagesPropertieViewProps) {\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        {project.projectType?.id === 1\r\n          ? \"Imágenes del Proyecto\"\r\n          : \"Imágenes de la Propiedad\"}\r\n      </h2>\r\n\r\n      <PropertieMediaGallery\r\n        images={project.projectMedia || []}\r\n        imageTypes={imagesTypes}\r\n        commonAreas={project.commonAreas || []}\r\n      />\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n        hideConfirmation={true}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "locationPropertieView.tsx": "import { ProjectData } from \"@/lib/definitios\";\r\nimport LocationMap from \"../../admin/projects/locationMap\";\r\nimport FormDisplay from \"../../modals/home/formDisplay\";\r\nimport StepNavigationButtons from \"../stepNavigationButtons\";\r\n\r\ninterface LocationPropertieViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function LocationPropertieView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: LocationPropertieViewProps) {\r\n  const isMapsReady = typeof window !== \"undefined\" && !!window.google?.maps;\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-client-background p-6 shadow-lg\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-client-accent\">\r\n        {project.projectType?.id\r\n          ? \"Ubicación del Proyecto\"\r\n          : \"Ubicación de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n        <FormDisplay\r\n          label=\"Departamento\"\r\n          value={project.city?.departament?.name || \"No especificado\"}\r\n        />\r\n        <FormDisplay\r\n          label=\"Ciudad\"\r\n          value={project.city?.name || \"No especificado\"}\r\n        />\r\n      </div>\r\n\r\n      <FormDisplay\r\n        label=\"Dirección\"\r\n        value={project.address || \"No especificado\"}\r\n      />\r\n\r\n      <div className=\"relative mt-6 h-64 w-full\">\r\n        <LocationMap\r\n          isLoaded={isMapsReady}\r\n          coordinates={{\r\n            lat: project.latitude || 4.5709,\r\n            lng: project.longitude || -74.2973,\r\n          }}\r\n          onLocationSelect={() => {}}\r\n          onUpdateAddress={undefined}\r\n        />\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "propertieMediaGallery.tsx": "import { useState } from \"react\";\r\nimport { ProjectMedia, ImageType, CommonArea } from \"@/lib/definitios\";\r\nimport ImageModal from \"../../realEstate/project/imageModal\";\r\n\r\ninterface PropertieMediaGalleryProps {\r\n  images: ProjectMedia[];\r\n  imageTypes: ImageType[];\r\n  commonAreas: CommonArea[];\r\n}\r\n\r\nexport default function PropertieMediaGallery({\r\n  images,\r\n  imageTypes,\r\n  commonAreas,\r\n}: PropertieMediaGalleryProps) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const handleImageClick = (clickedImage: ProjectMedia) => {\r\n    const realIndex = images.findIndex((img) => img.url === clickedImage.url);\r\n    if (realIndex !== -1) {\r\n      setSelectedIndex(realIndex);\r\n      setIsModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const imagesByType = imageTypes.map((type) => ({\r\n    typeName: type.name,\r\n    images: images.filter((img) => img.imageType === type.id),\r\n  }));\r\n\r\n  const imagesByCommonArea = commonAreas.map((area) => ({\r\n    areaName: area.name,\r\n    images: images.filter((img) => img.commonArea === area.id),\r\n  }));\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {imagesByType.map(({ typeName, images }) => (\r\n        <ImageSection\r\n          key={typeName}\r\n          category={typeName}\r\n          images={images}\r\n          onImageClick={handleImageClick}\r\n        />\r\n      ))}\r\n\r\n      <h2 className=\"text-center text-2xl font-bold text-client-accent mt-6\">\r\n        Imágenes de Áreas Comunes\r\n      </h2>\r\n\r\n      {imagesByCommonArea.map(({ areaName, images }) => (\r\n        <ImageSection\r\n          key={areaName}\r\n          category={areaName}\r\n          images={images}\r\n          onImageClick={handleImageClick}\r\n        />\r\n      ))}\r\n\r\n      <ImageModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        media={images}\r\n        initialIndex={selectedIndex}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ImageSection = ({\r\n  category,\r\n  images,\r\n  onImageClick,\r\n}: {\r\n  category: string;\r\n  images: ProjectMedia[];\r\n  onImageClick: (image: ProjectMedia) => void;\r\n}) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"text-lg font-semibold text-client-text\">{category}</h3>\r\n\r\n    {images.length > 0 ? (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {images.map((image, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"flex flex-col bg-client-backgroundAlt rounded-lg shadow-md overflow-hidden\"\r\n          >\r\n            <div\r\n              onClick={() => onImageClick(image)}\r\n              className=\"relative cursor-pointer\"\r\n            >\r\n              <div\r\n                className=\"relative h-48 w-full rounded-t-lg bg-cover bg-center\"\r\n                style={{ backgroundImage: `url(${encodeURI(image.url)})` }}\r\n              >\r\n                {image.tag && (\r\n                  <p className=\"absolute bottom-0 w-full bg-black bg-opacity-50 p-2 text-center text-xs text-white\">\r\n                    {image.tag}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {image.tag && (\r\n                <p className=\"absolute bottom-0 w-full bg-black bg-opacity-50 p-2 text-center text-xs text-white\">\r\n                  {image.tag}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {image.description && (\r\n              <div className=\"py-2 px-4\">\r\n                <label className=\"text-md font-semibold text-client-textSecondary\">\r\n                  Descripción\r\n                </label>\r\n\r\n                <p className=\"text-sm text-client-secondary\">\r\n                  {image.description}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    ) : (\r\n      <p className=\"text-client-secondary\">No hay imágenes disponibles.</p>\r\n    )}\r\n  </div>\r\n);\r\n",
          "propertieView.tsx": "\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport useLocations from \"@/app/hooks/projects/metadata/location/useLocations\";\r\nimport useBasicMetadata from \"@/app/hooks/projects/metadata/useBasicMetadata\";\r\nimport useImageTypes from \"@/app/hooks/projects/metadata/imageTypes/useImageTypes\";\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport ProgressBar from \"../createEditProperties/progressBar\";\r\nimport BasicPropertieView from \"./basicPropertieView\";\r\nimport LocationPropertieView from \"./locationPropertieView\";\r\nimport FeaturesPropertieView from \"./featuresPropertieView\";\r\nimport DetailsPropertieView from \"./detailsPropertieView\";\r\nimport ImagesPropertieView from \"./imagesPropertieView\";\r\nimport CreateProjectSkeleton from \"@/app/ui/skeletons/admin/createProjectSkeleton\";\r\n\r\ninterface PropertieViewProps {\r\n  projectId: number;\r\n}\r\n\r\nexport default function PropertieView({ projectId }: PropertieViewProps) {\r\n  const { project, loading: loadingProject } = useProjectById(\r\n    projectId,\r\n    false,\r\n    true\r\n  );\r\n\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const totalSteps = 5;\r\n  const router = useRouter();\r\n\r\n  const { locations } = useLocations();\r\n  const { metadata } = useBasicMetadata();\r\n  const { imagesTypes, loadingImages } = useImageTypes();\r\n\r\n  const handleNextStep = () => {\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep((prevStep) => prevStep + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousStep = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep((prevStep) => prevStep - 1);\r\n    }\r\n  };\r\n\r\n  const projectData: Partial<ProjectData> = project ?? {};\r\n\r\n  const currentView = useMemo(() => {\r\n    if (!metadata || !locations || loadingProject || loadingImages) {\r\n      return <CreateProjectSkeleton />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {currentStep === 0 && (\r\n          <BasicPropertieView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 1 && (\r\n          <LocationPropertieView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 2 && (\r\n          <FeaturesPropertieView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 3 && (\r\n          <DetailsPropertieView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 4 && (\r\n          <ImagesPropertieView\r\n            project={projectData}\r\n            imagesTypes={imagesTypes}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }, [currentStep, metadata, locations, project, imagesTypes, loadingImages]);\r\n\r\n  return (\r\n    <div className=\"bg-client-backgroundLight w-full p-6\">\r\n      <h1 className=\"mb-10 mt-24 text-center text-3xl font-semibold text-client-text\">\r\n        Visualizar Propiedad\r\n      </h1>\r\n\r\n      <div className=\"mx-auto mb-10 text-center\">\r\n        <ProgressBar currentStep={currentStep} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 mx-auto max-w-3xl\">{currentView}</div>\r\n\r\n      <div className=\"mt-4 text-center\">\r\n        <button\r\n          className=\"rounded-md bg-client-background px-4 py-2 text-white transition-colors hover:bg-client-backgroundAlt\"\r\n          onClick={() => router.push(\"/usuario/mis-propiedades\")}\r\n        >\r\n          Volver\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "statusFilterTabs.tsx": "\"use client\";\r\n\r\nimport clsx from \"clsx\";\r\n\r\ninterface StatusFilterTabsProps {\r\n  selected: \"aceptado\" | \"pendiente\" | \"revision\";\r\n  onChange: (status: \"aceptado\" | \"pendiente\" | \"revision\") => void;\r\n}\r\n\r\nconst statusDescriptions: Record<StatusFilterTabsProps[\"selected\"], string> = {\r\n  aceptado: \"Estas son tus propiedades activas, ya visibles en la plataforma.\",\r\n  pendiente: \"Estas propiedades están esperando revisión por un administrador.\",\r\n  revision: \"Estas propiedades requieren correcciones antes de ser aprobadas.\",\r\n};\r\n\r\nexport default function StatusFilterTabs({\r\n  selected,\r\n  onChange,\r\n}: StatusFilterTabsProps) {\r\n  const options = [\r\n    { label: \"Actuales\", value: \"aceptado\" },\r\n    { label: \"Pendientes\", value: \"pendiente\" },\r\n    { label: \"En Revisión\", value: \"revision\" },\r\n  ] as const;\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-3 text-center\">\r\n      <div className=\"flex justify-center flex-wrap gap-4\">\r\n        {options.map(({ label, value }) => (\r\n          <button\r\n            key={value}\r\n            onClick={() => onChange(value)}\r\n            className={clsx(\r\n              \"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold transition border shadow\",\r\n              selected === value\r\n                ? \"bg-client-accent text-white border-client-accent\"\r\n                : \"bg-client-backgroundAlt text-client-text border-client-accent hover:bg-white hover:text-black\"\r\n            )}\r\n          >\r\n            {label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <p className=\"text-client-textSecondary text-sm max-w-md\">\r\n        {statusDescriptions[selected]}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n",
        "stepNavigationButtons.tsx": "interface StepNavigationButtonsProps {\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: (e?: React.FormEvent) => void;\r\n  onNext: (e?: React.FormEvent) => void;\r\n  hideConfirmation?: boolean;\r\n}\r\n\r\nexport default function StepNavigationButtons({\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n  hideConfirmation = false,\r\n}: StepNavigationButtonsProps) {\r\n  return (\r\n    <div className=\"mt-6 flex justify-between\">\r\n      {currentStep > 0 && (\r\n        <button\r\n          className=\"rounded-md bg-client-backgroundAlt px-4 py-2 text-sm text-white hover:bg-client-backgroundLight\"\r\n          onClick={(e) => onPrevious(e)}\r\n        >\r\n          Anterior\r\n        </button>\r\n      )}\r\n\r\n      <div className=\"flex-grow\" />\r\n      {currentStep < totalSteps && !hideConfirmation && (\r\n        <button\r\n          className=\"rounded-md bg-client-accent px-4 py-2 text-sm text-white hover:bg-client-accentHover\"\r\n          onClick={(e) => onNext(e)}\r\n        >\r\n          {currentStep !== totalSteps - 1 ? \"Siguiente\" : \"Confirmar\"}\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      }
    },
    "unauthorized": {
      "page.tsx": "\"use client\";\r\n\r\nimport Link from \"next/link\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen px-4\">\r\n      <div className=\"mb-6\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          strokeWidth={2}\r\n          stroke=\"currentColor\"\r\n          className=\"h-24 w-24 text-client-accent\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M9.75 9h4.5M12 15.25v.25m-4.25 2h8.5a2 2 0 002-2v-8.5a2 2 0 00-2-2h-8.5a2 2 0 00-2 2v8.5a2 2 0 002 2z\"\r\n          />\r\n        </svg>\r\n      </div>\r\n\r\n      <h1 className=\"text-3xl font-bold text-client-accent\">Acceso Denegado</h1>\r\n\r\n      <p className=\"mt-4 text-center text-client-text\">\r\n        Lo sentimos, no tienes permiso para acceder a esta página.\r\n        <br />\r\n        Por favor, verifica tu cuenta o contacta al administrador.\r\n      </p>\r\n\r\n      <div className=\"mt-6 flex space-x-4\">\r\n        <Link\r\n          href=\"/\"\r\n          className=\"px-6 py-3 rounded-lg bg-client-accent text-white font-semibold shadow-lg hover:bg-client-accentDark transition-colors\"\r\n        >\r\n          Ir a Inicio\r\n        </Link>\r\n\r\n        <Link\r\n          href=\"/login\"\r\n          className=\"px-6 py-3 rounded-lg bg-client-backgroundLight text-white font-semibold shadow-lg hover:bg-client-backgroundAlt transition-colors\"\r\n        >\r\n          Iniciar Sesión\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
    },
    "usuario": {
      "[id]": {
        "page.tsx": "import type { Metadata } from \"next\";\r\nimport ClientEditPropertyPage from \"@/app/ui/user/ClientEditPropertyPage\";\r\nimport { getProjectById } from \"@/app/data/serverProjectService\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nexport async function generateMetadata({\r\n  params,\r\n}: {\r\n  params: { id: string };\r\n}): Promise<Metadata> {\r\n  const id = Number(params.id);\r\n  const project = await getProjectById(id, false, false);\r\n\r\n  return {\r\n    title: project?.name\r\n      ? `Editar: ${project.name} | EdifiK`\r\n      : \"Editar Propiedad | EdifiK\",\r\n    description:\r\n      project?.shortDescription ||\r\n      \"Edita los datos de tu propiedad publicada en EdifiK.\",\r\n    openGraph: {\r\n      title: project?.name || \"Editar Propiedad en EdifiK\",\r\n      description:\r\n        project?.shortDescription ||\r\n        \"Edita tu propiedad publicada en la plataforma EdifiK.\",\r\n      url: `http://edifika.co/usuario/${params.id}`,\r\n      siteName: \"EdifiK\",\r\n      type: \"website\",\r\n    },\r\n  };\r\n}\r\n\r\nexport default function EditPropertyPage({\r\n  params,\r\n}: {\r\n  params: { id: string };\r\n}) {\r\n  return <ClientEditPropertyPage />;\r\n}\r\n"
      },
      "mis-propiedades": {
        "[id]": {
          "page.tsx": "\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport PropertieView from \"@/app/ui/user/propertieView/propertieView\";\r\n\r\nexport default function ViewPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n  const params = useParams();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\r\n\r\n  if (!projectId) return null;\r\n\r\n  return <PropertieView projectId={Number(projectId)} />;\r\n}\r\n"
        },
        "page.tsx": "import type { Metadata } from \"next\";\r\nimport ClientMyPropertiesPage from \"@/app/ui/user/clientMyPropertiesPage\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Mis Propiedades | EdifiK\",\r\n  description:\r\n    \"Gestiona tus propiedades publicadas, edita información y revisa el estado de cada una desde tu cuenta.\",\r\n};\r\n\r\nexport default function MyPropertiesPage() {\r\n  return <ClientMyPropertiesPage />;\r\n}\r\n"
      },
      "perfil": {
        "page.tsx": "import { Metadata } from \"next\";\r\nimport ClientProfilePage from \"@/app/ui/profile/clientProfilePage\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Mi perfil | EdifiK\",\r\n  description: \"Actualiza tu información personal en tu perfil de usuario.\",\r\n};\r\n\r\nexport default function ProfilePage() {\r\n  return <ClientProfilePage />;\r\n}\r\n"
      },
      "subir-propiedad": {
        "page.tsx": "import type { Metadata } from \"next\";\r\nimport ClientUploadPropertyPage from \"@/app/ui/user/clientUploadPropertyPage\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Publicar Propiedad | EdifiK\",\r\n  description:\r\n    \"Sube una propiedad en pocos pasos. Agrega fotos, precios, ubicación y comienza a recibir contactos.\",\r\n};\r\n\r\nexport default function Page() {\r\n  return <ClientUploadPropertyPage />;\r\n}\r\n"
      }
    }
  },
  "lib": {
    "auth.ts": "import { NextAuthOptions } from \"next-auth\";\nimport { db } from \"@/lib/db\";\nimport GoogleProvider from \"next-auth/providers/google\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { RowDataPacket } from \"mysql2\";\nimport { compare } from \"bcryptjs\";\nimport { UserPermission } from \"@/src/shared\";\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n    }),\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: {\n          label: \"Email\",\n          type: \"email\",\n        },\n        password: {\n          label: \"Password\",\n          type: \"password\",\n        },\n      },\n      async authorize(\n        credentials: Record<\"email\" | \"password\", string> | undefined\n      ) {\n        const { email, password } = credentials ?? {};\n\n        if (!email || !password) {\n          return null;\n        }\n\n        const [result] = await db.query<RowDataPacket[][]>(\n          \"CALL get_user_session(?)\",\n          [email]\n        );\n\n        let [userRows = [], permissionsRows = []] = result;\n\n        if (userRows.length === 0) {\n          return null;\n        }\n\n        const user = userRows[0];\n\n        const ispasswordValid = await compare(password, user.password);\n\n        if (!ispasswordValid) {\n          return null;\n        }\n\n        const permissions: UserPermission[] = permissionsRows.map(\n          ({ id, name }) => ({ id, name })\n        );\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          membershipId: user.membershipId,\n          role: user.role,\n          permissions: permissions || [],\n        };\n      },\n    }),\n  ],\n  secret: process.env.AUTH_SECRET,\n  pages: {\n    signIn: \"/login\",\n  },\n  session: {\n    strategy: \"jwt\",\n    maxAge: 60 * 60,\n    updateAge: 60 * 15,\n  },\n  callbacks: {\n    async jwt({ token, user, account }) {\n      if (account?.provider === \"credentials\" && user) {\n        token.id = user.id?.toString() || \"\";\n        token.membershipId = user.membershipId ? String(user.membershipId) : \"\";\n        token.role = user.role ? String(user.role) : \"\";\n        token.permissions = user.permissions || [];\n        token.permissions = user.permissions || [];\n      }\n\n      if (account?.provider === \"google\" && user && !token.id) {\n        const { email, name, image } = user;\n\n        const [result] = await db.query<RowDataPacket[][]>(\n          \"CALL get_user_session(?)\",\n          [email]\n        );\n\n        let [userRows = [], permissionsRows = []] = result;\n\n        if (userRows.length === 0) {\n          const [resultInsert] = await db.query<RowDataPacket[][]>(\n            \"CALL insert_user_provider(?, ?, ?, ?)\",\n            [name, email, image, \"Google\"]\n          );\n\n          [userRows = [], permissionsRows = []] = resultInsert;\n        }\n\n        const permissions: UserPermission[] = permissionsRows.map(\n          ({ id, name }) => ({ id, name })\n        );\n\n        token.id = userRows[0].id?.toString() || \"\";\n        token.membershipId = userRows[0].membershipId\n          ? String(userRows[0].membershipId)\n          : \"\";\n        token.role = userRows[0].role ? String(userRows[0].role) : \"\";\n        token.permissions = permissions || [];\n      }\n\n      if (!token.permissions) {\n        token.permissions = [];\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      session.user.id = token.id?.toString() || \"\";\n      session.user.membershipId = token.membershipId?.toString() || \"\";\n      session.user.role = token.role?.toString() || \"\";\n      session.user.permissions = (token.permissions as UserPermission[]) || [];\n\n      return session;\n    },\n  },\n\n  debug: process.env.AUTH_DEBUG === \"true\",\n};\n",
    "db.ts": "import mysql from \"mysql2/promise\";\n\nexport const db = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_NAME,\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0,\n});\n",
    "definitios.ts": "import { DateTime } from \"next-auth/providers/kakao\";\nimport { Permission } from \"@/src/shared\";\n\nexport type ColumnType =\n  | \"string\"\n  | \"number\"\n  | \"boolean\"\n  | \"date\"\n  | \"array\"\n  | \"status\";\n\nexport interface Header<T> {\n  label: string;\n  key: keyof T | string;\n  type: ColumnType;\n  subKey?: string;\n  statusMapping?: Record<string, { label: string; className: string }>;\n}\n\nexport interface User {\n  id: number;\n  identityDocument?: string;\n  names?: string;\n  lastnames?: string;\n  birthdate?: Date;\n  email: string;\n  phoneNumber?: string;\n  gender?: Gender;\n  password?: string;\n  state?: boolean;\n  registrationDate?: DateTime;\n  lastLogin?: DateTime;\n  role: Role;\n  membership: MembershipSummary;\n  provider: string;\n  totalProperties?: number;\n}\n\nexport interface Gender {\n  id: number;\n  name: string;\n}\n\nexport interface Role {\n  id: number;\n  name: string;\n  permissions?: Permission[];\n}\n\nexport interface Category {\n  id: number;\n  name: string;\n}\n\nexport interface CommonArea {\n  id: number;\n  name: string;\n}\n\nexport interface HousingType {\n  id: number;\n  name: string;\n}\n\nexport interface NearbyService {\n  id: number;\n  name: string;\n}\n\nexport interface Departament {\n  id: number;\n  name: string;\n}\n\nexport interface City {\n  id: number;\n  name: string;\n  departament: Departament;\n}\n\nexport interface PaymentMethod {\n  id: number;\n  name: string;\n  state: boolean;\n}\n\nexport interface Project {\n  id: number;\n  name: string;\n  state: boolean;\n  price?: number;\n  totalArea: number;\n  builtArea: number;\n  freeHeight?: number;\n  width?: number;\n  length?: number;\n  parkingSpots?: number;\n  elevator?: boolean;\n  heavyParking?: number;\n  availableUnits: number;\n  bathrooms?: number;\n  bedrooms?: number;\n  lobbies?: number;\n  towers?: number;\n  storageUnits?: number;\n  socioeconomicLevel?: number;\n  floorNumber?: number;\n  yearBuilt?: number;\n  customizationOptions?: boolean;\n  terrace?: boolean;\n  balcony?: boolean;\n  garden?: boolean;\n  laundryArea?: boolean;\n  complexName?: string;\n  shortDescription: string;\n  detailedDescription: string;\n  address: string;\n  latitude: number;\n  longitude: number;\n  availableDate?: Date;\n  projectType?: projectType;\n  statusProject?: statusProject;\n  propertyType: propertyType;\n  housingType?: HousingType;\n  city: City;\n  membership: number;\n  commonAreas: CommonArea[];\n  ownerId?: number;\n  email?: string;\n  phoneNumber?: string;\n  residentialProjectId?: number;\n  warehouseProjectId?: number;\n  nearbyServices: NearbyService[];\n  projectMedia: ProjectMedia[];\n  media?: Media[];\n}\n\nexport interface projectType {\n  id: number;\n  name: string;\n}\n\nexport interface propertyType {\n  id: number;\n  name: string;\n}\n\nexport interface statusProject {\n  id: number;\n  name: string;\n}\n\nexport interface Membership {\n  id: number;\n  name: string;\n  benefits: string;\n  price: number;\n  discountThreeMonths: number;\n  discountSixMonths: number;\n  discountTwelveMonths: number;\n  maxProjects: number;\n  projectsFeatured: number;\n}\n\n// export interface Permission {\n//   id: number;\n//   name: string;\n// }\n\nexport interface ImageType {\n  id: number;\n  name: string;\n  description?: string;\n  maxImagesAllowed: number;\n  isRequired: boolean;\n}\n\nexport interface ProjectMedia {\n  id?: number;\n  url: string;\n  tag: string;\n  description?: string;\n  projectId: number;\n  commonArea?: number;\n  imageType?: number;\n  type?: string;\n}\n\nexport interface Media {\n  id?: string;\n  tag: string;\n  file: File | string;\n  description?: string;\n  idType: number;\n  type: string;\n  category: string;\n}\n\nexport interface Request {\n  id: number;\n  date: Date;\n  operation: string;\n  responseMessage?: string;\n  userId: number;\n  userEmail: string;\n  statusRequestName: string;\n  projectId: number;\n  projectName: string;\n}\n\nexport interface ProjectView {\n  id: number;\n  name: string;\n  cityName: string;\n  price?: number;\n  area?: number;\n  bathrooms?: number;\n  parkingSpots?: number;\n  bedrooms?: number;\n  longitude?: number;\n  latitude?: number;\n  images: ProjectMedia[];\n}\n\nexport type ProjectData = Partial<Project>;\nexport type UserData = Partial<User>;\n\nexport type ProjectSummary = Pick<\n  Project,\n  | \"id\"\n  | \"name\"\n  | \"price\"\n  | \"totalArea\"\n  | \"bedrooms\"\n  | \"bathrooms\"\n  | \"parkingSpots\"\n  | \"address\"\n  | \"longitude\"\n  | \"latitude\"\n  | \"city\"\n  | \"projectMedia\"\n  | \"email\"\n>;\n\nexport type MembershipSummary = Pick<Membership, \"id\" | \"name\">;\n\nexport type ProjectMediaData = Partial<ProjectMedia>;\n",
    "email": {
      "sendEmail.ts": "import nodemailer from \"nodemailer\";\r\n\r\nexport async function sendEmail(\r\n  to: string,\r\n  subject: string,\r\n  htmlContent: string\r\n) {\r\n  try {\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS,\r\n      },\r\n    });\r\n\r\n    const mailOptions = {\r\n      from: `\"EdifiK\" <${process.env.EMAIL_USER}>`,\r\n      to,\r\n      subject,\r\n      html: htmlContent,\r\n    };\r\n\r\n    await transporter.sendMail(mailOptions);\r\n  } catch (error) {\r\n    console.error(\"❌ Error al enviar el correo:\", error);\r\n  }\r\n}\r\n"
    },
    "middleware": {
      "withPath.ts": "import { NextResponse } from \"next/server\";\r\n\r\nexport function withPath(\r\n  response: NextResponse,\r\n  pathname: string\r\n): NextResponse {\r\n  response.headers.set(\"x-pathname\", pathname);\r\n  return response;\r\n}\r\n"
    },
    "s3.ts": "import { S3Client } from \"@aws-sdk/client-s3\";\n\nexport const s3 = new S3Client({\n  region: process.env.AWS_BUCKET_REGION,\n  credentials: {\n    accessKeyId: process.env.AWS_ACCESS_KEY as string,\n    secretAccessKey: process.env.AWS_SECRET_KEY as string,\n  },\n});\n"
  },
  "middleware.ts": "import { NextResponse } from \"next/server\";\nimport { getToken } from \"next-auth/jwt\";\nimport type { NextRequest } from \"next/server\";\nimport { Permission, isAdmin, AppJWT } from \"./src/shared\";\nimport { PROTECTED_ROUTES } from \"./src/config/protectedRoutes\";\nimport { withPath } from \"@/lib/middleware/withPath\";\n\nexport async function middleware(req: NextRequest) {\n  const { pathname } = req.nextUrl;\n\n  const matchedRoute = Object.keys(PROTECTED_ROUTES)\n    .sort((a, b) => b.length - a.length)\n    .find((route) => pathname.startsWith(route));\n\n  if (!matchedRoute) {\n    return NextResponse.next();\n  }\n\n  const routeConfig = PROTECTED_ROUTES[matchedRoute];\n\n  const token = (await getToken({\n    req,\n    secret: process.env.AUTH_SECRET,\n  })) as AppJWT | null;\n\n  const roleId = Number(token?.role);\n  const membershipId = Number(token?.membershipId);\n\n  const userPermissions = (token?.permissions ?? []).map(\n    (p: any) => p.name as Permission\n  );\n\n  const userIsAdmin = isAdmin(userPermissions);\n\n  /**\n   * NO autenticado\n   */\n  if (!token && !pathname.startsWith(\"/login\")) {\n    return withPath(\n      NextResponse.redirect(new URL(\"/login\", req.url)),\n      pathname\n    );\n  }\n\n  /**\n   * Usuario logueado intentando ir a login\n   */\n  if (pathname.startsWith(\"/login\") && token) {\n    return withPath(\n      NextResponse.redirect(new URL(userIsAdmin ? \"/admin\" : \"/\", req.url)),\n      pathname\n    );\n  }\n\n  /**\n   * Membresías solo para rol específico\n   */\n  if (pathname === \"/membresias\" && roleId !== 2) {\n    return withPath(\n      NextResponse.redirect(new URL(\"/unauthorized\", req.url)),\n      pathname\n    );\n  }\n\n  /**\n   * Subir propiedad requiere membresía\n   */\n  if (pathname === \"/usuario/subir-propiedad\" && token && !membershipId) {\n    return withPath(\n      NextResponse.redirect(new URL(\"/membresias\", req.url)),\n      pathname\n    );\n  }\n\n  /**\n   * Ruta sin permisos específicos\n   */\n  if (!routeConfig.permissions) {\n    return withPath(NextResponse.next(), pathname);\n  }\n\n  /**\n   * Sin permisos\n   */\n  if (!userPermissions.length) {\n    return withPath(\n      NextResponse.redirect(new URL(\"/unauthorized\", req.url)),\n      pathname\n    );\n  }\n\n  const hasPermission = routeConfig.permissions.some((perm) =>\n    userPermissions.includes(perm)\n  );\n\n  if (!hasPermission) {\n    return withPath(\n      NextResponse.redirect(new URL(\"/unauthorized\", req.url)),\n      pathname\n    );\n  }\n\n  return withPath(NextResponse.next(), pathname);\n}\n\nexport const config = {\n  matcher: [\"/admin/:path*\", \"/usuario/:path*\", \"/login/:path*\", \"/membresias\"],\n};\n",
  "next.config.mjs": "/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: false, // Deactivate in production if necessary\n\n  experimental: {\n    optimizeCss: true, // Minifica CSS\n  },\n\n  images: {\n    domains: [\"d3fhc8hmbgwz4k.cloudfront.net\"],\n    remotePatterns: [\n      {\n        protocol: \"https\",\n        hostname: \"images.unsplash.com\",\n      },\n    ],\n  },\n\n  webpack: (config, { dev }) => {\n    if (dev) {\n      config.devtool = \"cheap-module-source-map\";\n    }\n    return config;\n  },\n};\n\nexport default nextConfig;\n",
  "package.json": "{\n  \"name\": \"edifik-website\",\n  \"version\": \"0.1.0\",\n  \"type\": \"module\",\n  \"private\": true,\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\",\n    \"analyze\": \"cross-env ANALYZE=true next build\"\n  },\n  \"dependencies\": {\n    \"@aws-sdk/client-s3\": \"^3.679.0\",\n    \"@aws-sdk/s3-request-presigner\": \"^3.679.0\",\n    \"@react-google-maps/api\": \"^2.20.5\",\n    \"@tailwindcss/line-clamp\": \"^0.4.4\",\n    \"autoprefixer\": \"^10.4.20\",\n    \"bcryptjs\": \"^3.0.3\",\n    \"clsx\": \"^2.1.1\",\n    \"jsonwebtoken\": \"^9.0.2\",\n    \"lucide-react\": \"^0.469.0\",\n    \"mysql2\": \"^3.11.3\",\n    \"next\": \"^15.1.0\",\n    \"next-auth\": \"^4.24.11\",\n    \"nodemailer\": \"^6.10.0\",\n    \"react\": \"^18\",\n    \"react-datepicker\": \"^7.5.0\",\n    \"react-dom\": \"^18\",\n    \"sharp\": \"^0.33.5\",\n    \"use-debounce\": \"^10.0.3\",\n    \"uuid\": \"^11.0.1\",\n    \"zod\": \"^4.1.13\"\n  },\n  \"devDependencies\": {\n    \"@types/bcrypt\": \"^5.0.2\",\n    \"@types/jsonwebtoken\": \"^9.0.7\",\n    \"@types/node\": \"^22.7.5\",\n    \"@types/nodemailer\": \"^6.4.17\",\n    \"@types/react\": \"^18.3.11\",\n    \"@types/react-dom\": \"^18\",\n    \"cross-env\": \"^7.0.3\",\n    \"eslint\": \"^8\",\n    \"eslint-config-next\": \"14.2.11\",\n    \"postcss\": \"^8.4.47\",\n    \"prettier\": \"^3.4.2\",\n    \"prettier-plugin-tailwindcss\": \"^0.6.9\",\n    \"tailwindcss\": \"^3.4.13\",\n    \"typescript\": \"^5\"\n  }\n}\n",
  "src": {
    "config": {
      "brand.ts": "export const BRAND = {\r\n  name: \"Habitta\",\r\n  legalName: \"Habitta\",\r\n  domain: \"habitta.co\",\r\n  appUrl: \"https://habitta.co\",\r\n  supportEmail: \"soporte@habitta.co\",\r\n  year: new Date().getFullYear(),\r\n  description:\r\n    \"Plataforma digital para la gestión y administración de propiedades.\",\r\n};\r\n",
      "env.ts": "",
      "protectedRoutes.ts": "import { Permission } from \"../shared\";\r\n\r\nexport type ProtectedRouteConfig = {\r\n  permissions: Permission[] | null;\r\n};\r\n\r\nexport const PROTECTED_ROUTES: Record<string, ProtectedRouteConfig> = {\r\n  \"/admin\": {\r\n    permissions: [\r\n      Permission.ManageProjects,\r\n      Permission.ManageProperties,\r\n      Permission.ManageUsers,\r\n      Permission.ManageRoles,\r\n      Permission.ManageMemberships,\r\n      Permission.ManageRequests,\r\n    ],\r\n  },\r\n\r\n  \"/admin/proyectos\": { permissions: [Permission.ManageProjects] },\r\n  \"/admin/propiedades\": { permissions: [Permission.ManageProperties] },\r\n  \"/admin/usuarios\": { permissions: [Permission.ManageUsers] },\r\n  \"/admin/roles\": { permissions: [Permission.ManageRoles] },\r\n  \"/admin/membresias\": { permissions: [Permission.ManageMemberships] },\r\n  \"/admin/solicitudes\": { permissions: [Permission.ManageRequests] },\r\n\r\n  \"/usuario\": { permissions: null },\r\n  \"/usuario/perfil\": { permissions: null },\r\n  \"/usuario/mis-propiedades\": {\r\n    permissions: [Permission.ManageOwnProperties],\r\n  },\r\n  \"/usuario/subir-propiedad\": {\r\n    permissions: [Permission.ManageOwnProperties],\r\n  },\r\n\r\n  \"/membresias\": { permissions: null },\r\n\r\n  \"/login\": { permissions: null },\r\n  \"/login/register\": { permissions: null },\r\n  \"/login/forget-password\": { permissions: null },\r\n};\r\n",
      "routes.ts": "import { BRAND } from \"./brand\";\r\n\r\nexport const ROUTES = {\r\n  home: BRAND.appUrl,\r\n  login: `${BRAND.appUrl}/login`,\r\n  dashboard: `${BRAND.appUrl}/dashboard`,\r\n};\r\n"
    },
    "modules": {
      "auth": {
        "application": {
          "requireAuth.ts": "import { getServerSession } from \"next-auth\";\r\nimport { UnauthorizedError } from \"../../../shared/errors/UnauthorizedError\";\r\n\r\nexport async function requireAuth() {\r\n  const session = await getServerSession();\r\n\r\n  if (!session) {\r\n    throw new UnauthorizedError();\r\n  }\r\n\r\n  return session;\r\n}\r\n",
          "requirePermission.ts": "import { getServerSession } from \"../infrastructure/nextAuth/getServerSession\";\r\nimport { Permission } from \"../domain/Permission\";\r\nimport { ForbiddenError } from \"../../../shared/errors/ForbiddenError\";\r\n\r\nexport async function requirePermission(permission: Permission): Promise<void> {\r\n  const session = await getServerSession();\r\n\r\n  if (!session || !session.user) {\r\n    throw new ForbiddenError();\r\n  }\r\n\r\n  const hasPermission = session.user.permissions?.some(\r\n    (p) => p.name === permission\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    throw new ForbiddenError();\r\n  }\r\n}\r\n"
        },
        "domain": {
          "Permission.ts": "export enum Permission {\r\n  ManageProjects = \"Gestionar proyectos\",\r\n  ManageProperties = \"Gestionar propiedades\",\r\n  ManageUsers = \"Gestionar usuarios\",\r\n  ManageRoles = \"Gestionar roles\",\r\n  ManageMemberships = \"Gestionar membresias\",\r\n  ManageRequests = \"Gestionar solicitudes\",\r\n  ManageOwnProperties = \"Gestionar propiedades propias\",\r\n}\r\n",
          "SesionUser.ts": "import { Permission } from \"./Permission\";\r\n\r\nexport interface UserPermission {\r\n  id: number;\r\n  name: Permission | string;\r\n}\r\n\r\nexport interface SessionUser {\r\n  id: string;\r\n  email?: string | null;\r\n  name?: string | null;\r\n  membershipId?: string;\r\n  role?: string;\r\n  permissions?: UserPermission[];\r\n}\r\n"
        },
        "index.ts": "export * from \"./application/requireAuth\";\r\nexport * from \"./application/requirePermission\";\r\nexport * from \"./domain/Permission\";\r\nexport * from \"./domain/SesionUser\";\r\nexport * from \"./infrastructure/nextAuth/authOptions\";\r\nexport * from \"./infrastructure/nextAuth/getServerSession\";\r\n// export * from \"./presentation/auth.controller\";\r\n",
        "infrastructure": {
          "nextAuth": {
            "authOptions.ts": "import { NextAuthOptions } from \"next-auth\";\r\nimport { db } from \"@/lib/db\";\r\nimport GoogleProvider from \"next-auth/providers/google\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { compare } from \"bcryptjs\";\r\nimport { UserPermission } from \"@/src/shared\";\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n  providers: [\r\n    GoogleProvider({\r\n      clientId: process.env.GOOGLE_CLIENT_ID || \"\",\r\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\r\n    }),\r\n    CredentialsProvider({\r\n      name: \"Credentials\",\r\n      credentials: {\r\n        email: {\r\n          label: \"Email\",\r\n          type: \"email\",\r\n        },\r\n        password: {\r\n          label: \"Password\",\r\n          type: \"password\",\r\n        },\r\n      },\r\n      async authorize(\r\n        credentials: Record<\"email\" | \"password\", string> | undefined\r\n      ) {\r\n        const { email, password } = credentials ?? {};\r\n\r\n        if (!email || !password) {\r\n          return null;\r\n        }\r\n\r\n        const [result] = await db.query<RowDataPacket[][]>(\r\n          \"CALL get_user_session(?)\",\r\n          [email]\r\n        );\r\n\r\n        let [userRows = [], permissionsRows = []] = result;\r\n\r\n        if (userRows.length === 0) {\r\n          return null;\r\n        }\r\n\r\n        const user = userRows[0];\r\n\r\n        const ispasswordValid = await compare(password, user.password);\r\n\r\n        if (!ispasswordValid) {\r\n          return null;\r\n        }\r\n\r\n        const permissions: UserPermission[] = permissionsRows.map(\r\n          ({ id, name }) => ({ id, name })\r\n        );\r\n\r\n        return {\r\n          id: user.id,\r\n          email: user.email,\r\n          name: user.name,\r\n          membershipId: user.membershipId,\r\n          role: user.role,\r\n          permissions: permissions || [],\r\n        };\r\n      },\r\n    }),\r\n  ],\r\n  secret: process.env.AUTH_SECRET,\r\n  pages: {\r\n    signIn: \"/login\",\r\n  },\r\n  session: {\r\n    strategy: \"jwt\",\r\n    maxAge: 60 * 60,\r\n    updateAge: 60 * 15,\r\n  },\r\n  callbacks: {\r\n    async jwt({ token, user, account }) {\r\n      if (account?.provider === \"credentials\" && user) {\r\n        token.id = user.id?.toString() || \"\";\r\n        token.membershipId = user.membershipId ? String(user.membershipId) : \"\";\r\n        token.role = user.role ? String(user.role) : \"\";\r\n        token.permissions = user.permissions || [];\r\n        token.permissions = user.permissions || [];\r\n      }\r\n\r\n      if (account?.provider === \"google\" && user && !token.id) {\r\n        const { email, name, image } = user;\r\n\r\n        const [result] = await db.query<RowDataPacket[][]>(\r\n          \"CALL get_user_session(?)\",\r\n          [email]\r\n        );\r\n\r\n        let [userRows = [], permissionsRows = []] = result;\r\n\r\n        if (userRows.length === 0) {\r\n          const [resultInsert] = await db.query<RowDataPacket[][]>(\r\n            \"CALL insert_user_provider(?, ?, ?, ?)\",\r\n            [name, email, image, \"Google\"]\r\n          );\r\n\r\n          [userRows = [], permissionsRows = []] = resultInsert;\r\n        }\r\n\r\n        const permissions: UserPermission[] = permissionsRows.map(\r\n          ({ id, name }) => ({ id, name })\r\n        );\r\n\r\n        token.id = userRows[0].id?.toString() || \"\";\r\n        token.membershipId = userRows[0].membershipId\r\n          ? String(userRows[0].membershipId)\r\n          : \"\";\r\n        token.role = userRows[0].role ? String(userRows[0].role) : \"\";\r\n        token.permissions = permissions || [];\r\n      }\r\n\r\n      if (!token.permissions) {\r\n        token.permissions = [];\r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }) {\r\n      session.user.id = token.id?.toString() || \"\";\r\n      session.user.membershipId = token.membershipId?.toString() || \"\";\r\n      session.user.role = token.role?.toString() || \"\";\r\n      session.user.permissions = (token.permissions as UserPermission[]) || [];\r\n\r\n      return session;\r\n    },\r\n  },\r\n\r\n  debug: process.env.AUTH_DEBUG === \"true\",\r\n};\r\n",
            "getServerSession.ts": "import { getServerSession as nextGetServerSession } from \"next-auth\";\r\nimport { authOptions } from \"./authOptions\";\r\n\r\nexport async function getServerSession() {\r\n  return nextGetServerSession(authOptions);\r\n}\r\n"
          }
        },
        "presentation": {
          "auth.controller.ts": ""
        }
      },
      "contacts": {
        "application": {
          "SendContactMessage.ts": ""
        },
        "domain": {
          "ContactMessage.ts": ""
        },
        "index.ts": "",
        "infrastructure": {
          "EmailContactService.ts": ""
        },
        "presentation": {
          "contacts.controller.ts": ""
        }
      },
      "index.ts": "export * from \"./auth/infrastructure/nextAuth/authOptions\";\r\n",
      "memberships": {
        "application": {
          "CreateMembership.ts": "",
          "dto": {
            "updateMembership.schema.ts": "import { z } from \"zod\";\r\nimport { UpdateMembershipDTO } from \"./UpdateMembershipDTO\";\r\n\r\nexport const updateMembershipSchema = z.object({\r\n  id: z.number().int().positive(),\r\n  name: z.string().min(3).max(100),\r\n  price: z.number().positive(),\r\n  durationMonths: z.number().int().positive(),\r\n  isActive: z.boolean(),\r\n}) satisfies z.ZodType<UpdateMembershipDTO>;\r\n",
            "UpdateMembershipDTO.ts": "export interface UpdateMembershipDTO {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  durationMonths: number;\r\n  isActive: boolean;\r\n}\r\n"
          },
          "UpdateMembership.ts": "import { MembershipRepository } from \"../domain/MembershipRepository\";\r\nimport { UpdateMembershipDTO } from \"./dto/UpdateMembershipDTO\";\r\n\r\nexport class UpdateMembershipUseCase {\r\n  constructor(private readonly repository: MembershipRepository) {}\r\n\r\n  async execute(dto: UpdateMembershipDTO): Promise<{ success: true }> {\r\n    await this.repository.update(dto);\r\n    return { success: true };\r\n  }\r\n}\r\n"
        },
        "domain": {
          "Membership.ts": "",
          "MembershipRepository.ts": "import { UpdateMembershipDTO } from \"../application/dto/UpdateMembershipDTO\";\r\n\r\nexport interface MembershipRepository {\r\n  update(dto: UpdateMembershipDTO): Promise<void>;\r\n}\r\n"
        },
        "index.ts": "import { UpdateMembershipUseCase } from \"./application/UpdateMembership\";\r\nimport { MysqlMembershipRepository } from \"./infrastructure/MysqlMembershipRepository\";\r\n\r\nconst repository = new MysqlMembershipRepository();\r\n\r\nexport const updateMembershipUseCase = new UpdateMembershipUseCase(repository);\r\n",
        "infrastructure": {
          "MysqlMembershipRepository.ts": "import { MembershipRepository } from \"../domain/MembershipRepository\";\r\nimport { UpdateMembershipDTO } from \"../application/dto/UpdateMembershipDTO\";\r\nimport { db } from \"@/lib/db\";\r\n\r\nexport class MysqlMembershipRepository implements MembershipRepository {\r\n  async update(dto: UpdateMembershipDTO): Promise<void> {\r\n    const { id, name, price, durationMonths, isActive } = dto;\r\n\r\n    await db.query(\"CALL update_membership(?, ?, ?, ?, ?)\", [\r\n      id,\r\n      name,\r\n      price,\r\n      durationMonths,\r\n      isActive,\r\n    ]);\r\n  }\r\n}\r\n"
        },
        "presentation": {
          "memberships.controller.ts": "import { NextRequest, NextResponse } from \"next/server\";\r\nimport { updateMembershipUseCase } from \"..\";\r\nimport { validateRequest } from \"@/src/shared\";\r\nimport { updateMembershipSchema } from \"../application/dto/updateMembership.schema\";\r\n\r\nexport class MembershipsController {\r\n  static async update(req: NextRequest): Promise<NextResponse> {\r\n    const body = await req.json();\r\n\r\n    const dto = validateRequest(updateMembershipSchema, body);\r\n\r\n    const result = await updateMembershipUseCase.execute(dto);\r\n\r\n    return NextResponse.json(result, { status: 200 });\r\n  }\r\n}\r\n"
        }
      },
      "payments": {
        "application": {
          "CreatePayment.ts": "import { PaymentRepository } from \"../domain/PaymentRepository\";\r\nimport { PaymentStatus } from \"../domain/PaymentStatus\";\r\n\r\ninterface CreatePaymentInput {\r\n  userId: number;\r\n  amount: number;\r\n  currency: string;\r\n  idempotencyKey: string;\r\n}\r\n\r\nexport class CreatePaymentUseCase {\r\n  constructor(private readonly repository: PaymentRepository) {}\r\n\r\n  async execute(input: CreatePaymentInput) {\r\n    const existing = await this.repository.findByIdempotencyKey(\r\n      input.idempotencyKey\r\n    );\r\n\r\n    if (existing) {\r\n      return existing;\r\n    }\r\n\r\n    return this.repository.create({\r\n      userId: input.userId,\r\n      amount: input.amount,\r\n      currency: input.currency,\r\n      status: PaymentStatus.Pending,\r\n      providerRef: \"\",\r\n      idempotencyKey: input.idempotencyKey,\r\n    });\r\n  }\r\n}\r\n",
          "HandleWebhook.ts": "import { PaymentRepository } from \"../domain/PaymentRepository\";\r\nimport { PaymentStatus } from \"../domain/PaymentStatus\";\r\n\r\ninterface WebhookInput {\r\n  idempotencyKey: string;\r\n  approved: boolean;\r\n}\r\n\r\nexport class HandleWebhookUseCase {\r\n  constructor(private readonly repository: PaymentRepository) {}\r\n\r\n  async execute(input: WebhookInput): Promise<void> {\r\n    const payment = await this.repository.findByIdempotencyKey(\r\n      input.idempotencyKey\r\n    );\r\n\r\n    if (!payment) return;\r\n\r\n    const newStatus = input.approved\r\n      ? PaymentStatus.Approved\r\n      : PaymentStatus.Rejected;\r\n\r\n    await this.repository.updateStatus(payment.id, newStatus);\r\n  }\r\n}\r\n"
        },
        "domain": {
          "Payment.ts": "import { PaymentStatus } from \"./PaymentStatus\";\r\n\r\nexport interface Payment {\r\n  id: number;\r\n  userId: number;\r\n  amount: number;\r\n  currency: string;\r\n  status: PaymentStatus;\r\n  providerRef: string;\r\n  idempotencyKey: string;\r\n  createdAt: Date;\r\n}\r\n",
          "PaymentRepository.ts": "import { Payment } from \"./Payment\";\r\nimport { PaymentStatus } from \"./PaymentStatus\";\r\n\r\nexport interface PaymentRepository {\r\n  findByIdempotencyKey(key: string): Promise<Payment | null>;\r\n  create(payment: Omit<Payment, \"id\" | \"createdAt\">): Promise<Payment>;\r\n  updateStatus(id: number, status: PaymentStatus): Promise<void>;\r\n}\r\n",
          "PaymentStatus.ts": "export enum PaymentStatus {\r\n  Pending = \"PENDING\",\r\n  Approved = \"APPROVED\",\r\n  Rejected = \"REJECTED\",\r\n}\r\n"
        },
        "index.ts": "import { MysqlPaymentRepository } from \"./infrastructure/MysqlPaymentRepository\";\r\nimport { CreatePaymentUseCase } from \"./application/CreatePayment\";\r\nimport { HandleWebhookUseCase } from \"./application/HandleWebhook\";\r\n\r\nconst repository = new MysqlPaymentRepository();\r\n\r\nexport const createPaymentUseCase = new CreatePaymentUseCase(repository);\r\nexport const handleWebhookUseCase = new HandleWebhookUseCase(repository);\r\n",
        "infrastructure": {
          "EpaycoGateway.ts": "",
          "MysqlPaymentRepository.ts": "import { PaymentRepository } from \"../domain/PaymentRepository\";\r\nimport { PaymentStatus } from \"../domain/PaymentStatus\";\r\nimport { db } from \"@/lib/db\";\r\n\r\nexport class MysqlPaymentRepository implements PaymentRepository {\r\n  async findByIdempotencyKey(key: string) {\r\n    const [rows]: any = await db.query(\r\n      \"SELECT * FROM payments WHERE idempotency_key = ? LIMIT 1\",\r\n      [key]\r\n    );\r\n    return rows[0] ?? null;\r\n  }\r\n\r\n  async create(payment: any) {\r\n    const [result]: any = await db.query(\r\n      `INSERT INTO payments \r\n      (user_id, amount, currency, status, provider_ref, idempotency_key)\r\n      VALUES (?, ?, ?, ?, ?, ?)`,\r\n      [\r\n        payment.userId,\r\n        payment.amount,\r\n        payment.currency,\r\n        payment.status,\r\n        payment.providerRef,\r\n        payment.idempotencyKey,\r\n      ]\r\n    );\r\n\r\n    return { ...payment, id: result.insertId, createdAt: new Date() };\r\n  }\r\n\r\n  async updateStatus(id: number, status: PaymentStatus): Promise<void> {\r\n    await db.query(\"UPDATE payments SET status = ? WHERE id = ?\", [status, id]);\r\n  }\r\n}\r\n"
        },
        "presentation": {
          "payments.controller.ts": "import { NextRequest, NextResponse } from \"next/server\";\r\nimport { createPaymentUseCase, handleWebhookUseCase } from \"../index\";\r\n\r\nexport class PaymentsController {\r\n  static async create(req: NextRequest) {\r\n    const body = await req.json();\r\n    const payment = await createPaymentUseCase.execute(body);\r\n    return NextResponse.json(payment, { status: 201 });\r\n  }\r\n\r\n  static async webhook(req: NextRequest) {\r\n    const body = await req.json();\r\n    await handleWebhookUseCase.execute(body);\r\n    return NextResponse.json({ received: true });\r\n  }\r\n}\r\n"
        }
      },
      "projects": {
        "application": {
          "CreateProject.ts": "",
          "GetProjects.ts": ""
        },
        "domain": {
          "Project.ts": "",
          "ProjectRepository.ts": ""
        },
        "index.ts": "",
        "infrastructure": {
          "MysqlProjectRepository.ts": ""
        },
        "presentation": {
          "projects.controller.ts": ""
        }
      },
      "shared": {
        "domain": {
          "access.ts": "export interface Permission {\r\n  id: number;\r\n  name: string;\r\n}\r\n",
          "catalog.ts": "export interface Role {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport interface Gender {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport interface Membership {\r\n  id: number;\r\n  name: string;\r\n}\r\n",
          "index.ts": "export * from \"./access\";\r\nexport * from \"./catalog\";\r\n"
        }
      },
      "users": {
        "application": {
          "CheckUserEmail.ts": "import { UserEmailCheckerRepository } from \"../domain/UserRepository\";\r\n\r\nexport class CheckUserEmail {\r\n  constructor(private readonly repository: UserEmailCheckerRepository) {}\r\n\r\n  async execute(email: string) {\r\n    if (!email || !email.trim()) {\r\n      throw new Error(\"Debe proporcionar un correo electrónico.\");\r\n    }\r\n\r\n    return this.repository.check(email.trim());\r\n  }\r\n}\r\n",
          "CreateUser.ts": "import { UserRepository } from \"../domain/UserRepository\";\r\nimport { CreateUserInput } from \"../domain/CreateUserInput\";\r\n\r\nexport class CreateUser {\r\n  constructor(private readonly userRepository: UserRepository) {}\r\n\r\n  async execute(input: CreateUserInput): Promise<void> {\r\n    if (!input.names || !input.lastnames || !input.email) {\r\n      throw new Error(\"Datos obligatorios faltantes\");\r\n    }\r\n\r\n    await this.userRepository.create(input);\r\n  }\r\n}\r\n",
          "GetUser.ts": "import { UserRepository } from \"../domain/UserRepository\";\r\n\r\ninterface GetUsersParams {\r\n  page: number;\r\n  pageSize: number;\r\n  searchTerm: string | null;\r\n}\r\n\r\nexport class GetUsersUseCase {\r\n  constructor(private readonly repository: UserRepository) {}\r\n\r\n  async execute(params: GetUsersParams) {\r\n    const { page, pageSize } = params;\r\n\r\n    if (page < 1) throw new Error(\"Page inválida\");\r\n    if (pageSize < 1) throw new Error(\"PageSize inválido\");\r\n\r\n    return this.repository.findPaginated(params);\r\n  }\r\n}\r\n",
          "GetUsersMetadata.ts": "import { UsersMetadata } from \"../domain/User\";\r\nimport { UserMetadataRepository } from \"../domain/UserRepository\";\r\n\r\nexport class GetUsersMetadata {\r\n  constructor(private readonly repository: UserMetadataRepository) {}\r\n\r\n  async execute(): Promise<UsersMetadata> {\r\n    return this.repository.getMetadata();\r\n  }\r\n}\r\n",
          "SearchUserEmail.ts": "import { UserEmailRepository } from \"../domain/UserRepository\";\r\n\r\nexport class SearchUserEmails {\r\n  constructor(private readonly repository: UserEmailRepository) {}\r\n\r\n  async execute(searchTerm: string): Promise<{ id: number; email: string }[]> {\r\n    if (!searchTerm.trim()) {\r\n      return [];\r\n    }\r\n\r\n    return this.repository.searchByEmail(searchTerm.trim());\r\n  }\r\n}\r\n",
          "UpdateUser.ts": "import { UserRepository } from \"../domain/UserRepository\";\r\n\r\ninterface UpdateUserInput {\r\n  id: string;\r\n  names: string;\r\n  lastnames: string;\r\n  email: string;\r\n  phoneNumber?: string | null;\r\n  genderId: number;\r\n  roleId: number;\r\n  membershipId?: string;\r\n  state: boolean;\r\n  updatedBy: string;\r\n}\r\n\r\nexport class UpdateUser {\r\n  constructor(private readonly userRepository: UserRepository) {}\r\n\r\n  async execute(input: UpdateUserInput): Promise<void> {\r\n    if (!input.id || !input.names || !input.lastnames || !input.email) {\r\n      throw new Error(\"Datos obligatorios faltantes\");\r\n    }\r\n\r\n    await this.userRepository.update(input);\r\n  }\r\n}\r\n"
        },
        "domain": {
          "CreateUserInput.ts": "export interface CreateUserInput {\r\n  names: string;\r\n  lastnames: string;\r\n  email: string;\r\n  phoneNumber?: string | null;\r\n  genderId: number;\r\n  roleId: number;\r\n  membershipId?: string;\r\n  state: boolean;\r\n  createdBy: string;\r\n}\r\n",
          "UpdateUserInput.ts": "export interface UpdateUserInput {\r\n  id: string;\r\n  names: string;\r\n  lastnames: string;\r\n  email: string;\r\n  phoneNumber?: string | null;\r\n  genderId: number;\r\n  roleId: number;\r\n  membershipId?: string;\r\n  state: boolean;\r\n  updatedBy: string;\r\n}\r\n",
          "User.ts": "import { Role, Membership, Gender } from \"@/src/modules/shared/domain\";\r\n\r\nexport interface User {\r\n  id: number;\r\n  names: string;\r\n  lastnames: string;\r\n  email: string;\r\n  phoneNumber: string | null;\r\n  state: boolean;\r\n  registrationDate: Date;\r\n  lastLogin: Date | null;\r\n  totalProperties: number;\r\n  provider: string;\r\n  gender: Gender;\r\n  role: Role;\r\n  membership: Membership;\r\n}\r\n\r\nexport interface UsersMetadata {\r\n  roles: Role[];\r\n  genders: Gender[];\r\n  memberships: Membership[];\r\n}\r\n\r\nexport interface UserEmail {\r\n  id: number;\r\n  email: string;\r\n}\r\n\r\nexport interface UserEmailCheckResult {\r\n  id: number | null;\r\n}\r\n",
          "UserRepository.ts": "import { User, UsersMetadata, UserEmail, UserEmailCheckResult } from \"./User\";\r\nimport { UpdateUserInput } from \"./UpdateUserInput\";\r\nimport { CreateUserInput } from \"./CreateUserInput\";\r\n\r\nexport interface UserRepository {\r\n  findPaginated(params: {\r\n    page: number;\r\n    pageSize: number;\r\n    searchTerm: string | null;\r\n  }): Promise<{\r\n    users: User[];\r\n    totalEntries: number;\r\n  }>;\r\n\r\n  create(input: CreateUserInput): Promise<void>;\r\n\r\n  update(input: UpdateUserInput): Promise<void>;\r\n}\r\n\r\nexport interface UserMetadataRepository {\r\n  getMetadata(): Promise<UsersMetadata>;\r\n}\r\n\r\nexport interface UserEmailRepository {\r\n  searchByEmail(term: string): Promise<UserEmail[]>;\r\n}\r\n\r\nexport interface UserEmailCheckerRepository {\r\n  check(email: string): Promise<UserEmailCheckResult>;\r\n}\r\n"
        },
        "index.ts": "export * from \"./application/CreateUser\";\r\nexport * from \"./application/GetUser\";\r\nexport * from \"./application/GetUsersMetadata\";\r\nexport * from \"./application/UpdateUser\";\r\n\r\nexport * from \"./domain/CreateUserInput\";\r\nexport * from \"./domain/UpdateUserInput\";\r\nexport * from \"./domain/User\";\r\nexport * from \"./domain/UserRepository\";\r\n\r\nexport * from \"./infrastructure/MysqlUserEmailRepository\";\r\nexport * from \"./infrastructure/MysqlUserMetadataRepository\";\r\nexport * from \"./infrastructure/MysqlUserRepository\";\r\n\r\nexport * from \"./presentation/createUser.controller\";\r\nexport * from \"./presentation/updateUser.controller\";\r\nexport * from \"./presentation/users.controller\";\r\nexport * from \"./presentation/getUsersMetadata.controller\";\r\nexport * from \"./presentation/checkUserEmail.controller\";\r\nexport * from \"./presentation/searchUserEmails.controller\";\r\n",
        "infrastructure": {
          "MysqlUserEmailCheckerRepository.ts": "import { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { UserEmailCheckerRepository } from \"../domain/UserRepository\";\r\nimport { UserEmailCheckResult } from \"../domain/User\";\r\n\r\nexport class MysqlUserEmailCheckerRepository\r\n  implements UserEmailCheckerRepository\r\n{\r\n  async check(email: string): Promise<UserEmailCheckResult> {\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL check_user_email(?)\",\r\n      [email]\r\n    );\r\n\r\n    if (!result || result.length === 0 || result[0].length === 0) {\r\n      return { id: null };\r\n    }\r\n\r\n    const row = result[0][0] as { id: number };\r\n\r\n    return { id: row.id };\r\n  }\r\n}\r\n",
          "MysqlUserEmailRepository.ts": "import { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { UserEmailRepository } from \"../domain/UserRepository\";\r\nimport { UserEmail } from \"../domain/User\";\r\n\r\nexport class MysqlUserEmailRepository implements UserEmailRepository {\r\n  async searchByEmail(term: string): Promise<UserEmail[]> {\r\n    const safeTerm = escapeSearchTerm(term);\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL search_user_emails(?)\",\r\n      [safeTerm]\r\n    );\r\n\r\n    if (!result || result.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return (result[0] as any[]).map((row) => ({\r\n      id: row.id,\r\n      email: row.email,\r\n    }));\r\n  }\r\n}\r\n",
          "MysqlUserMetadataRepository.ts": "import { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { UserMetadataRepository } from \"../domain/UserMetadataRepository\";\r\nimport { UsersMetadata } from \"../domain/UsersMetadata\";\r\n\r\nexport class MysqlUserMetadataRepository implements UserMetadataRepository {\r\n  async getMetadata(): Promise<UsersMetadata> {\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_users_metadata()\"\r\n    );\r\n\r\n    const [rolesRows = [], gendersRows = [], membershipsRows = []] = result;\r\n\r\n    return {\r\n      roles: rolesRows.map(({ id, name }) => ({ id, name })),\r\n      genders: gendersRows.map(({ id, name }) => ({ id, name })),\r\n      memberships: membershipsRows.map(({ id, name }) => ({ id, name })),\r\n    };\r\n  }\r\n}\r\n",
          "MysqlUserRepository.ts": "import { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { UserRepository } from \"../domain/UserRepository\";\r\nimport { CreateUserInput } from \"../domain/CreateUserInput\";\r\nimport { UpdateUserInput } from \"../domain/UpdateUserInput\";\r\nimport { User } from \"../domain/User\";\r\n\r\nexport class MysqlUserRepository implements UserRepository {\r\n  async findPaginated({\r\n    page,\r\n    pageSize,\r\n    searchTerm,\r\n  }: {\r\n    page: number;\r\n    pageSize: number;\r\n    searchTerm: string | null;\r\n  }) {\r\n    const safeSearchTerm = searchTerm ? escapeSearchTerm(searchTerm) : null;\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_users(?, ?, ?)\",\r\n      [page, pageSize, safeSearchTerm]\r\n    );\r\n\r\n    const rows = Array.isArray(result[0]) ? result[0] : [];\r\n    const totalEntriesRow =\r\n      Array.isArray(result[1]) && result[1].length > 0 ? result[1][0] : null;\r\n\r\n    const users: User[] = rows.map((row: any) => ({\r\n      id: row.id,\r\n      names: row.names,\r\n      lastnames: row.lastnames,\r\n      email: row.email,\r\n      phoneNumber: row.phoneNumber,\r\n      state: row.state,\r\n      registrationDate: row.registrationDate,\r\n      lastLogin: row.lastLogin,\r\n      totalProperties: row.totalProperties,\r\n      provider: row.providerName,\r\n      gender: {\r\n        id: row.genderId,\r\n        name: row.genderName,\r\n      },\r\n      role: {\r\n        id: row.roleId,\r\n        name: row.roleName,\r\n      },\r\n      membership: {\r\n        id: row.membershipId,\r\n        name: row.membershipName,\r\n      },\r\n    }));\r\n\r\n    return {\r\n      users,\r\n      totalEntries: totalEntriesRow?.totalEntries ?? 0,\r\n    };\r\n  }\r\n\r\n  async create(input: CreateUserInput): Promise<void> {\r\n    await db.query(\"CALL insert_user(?, ?, ?, ?, ?, ?, ?, ?, ?)\", [\r\n      input.names,\r\n      input.lastnames,\r\n      input.email,\r\n      input.phoneNumber ?? null,\r\n      input.genderId,\r\n      input.roleId,\r\n      input.membershipId ?? \"1001\",\r\n      input.state,\r\n      input.createdBy,\r\n    ]);\r\n  }\r\n\r\n  async update(input: UpdateUserInput): Promise<void> {\r\n    await db.query(\"CALL update_user_admin(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [\r\n      input.id,\r\n      input.names,\r\n      input.lastnames,\r\n      input.email,\r\n      input.phoneNumber ?? null,\r\n      input.state,\r\n      input.genderId,\r\n      input.roleId,\r\n      input.membershipId ?? \"1001\",\r\n      input.updatedBy,\r\n    ]);\r\n  }\r\n}\r\n"
        },
        "presentation": {
          "checkUserEmail.controller.ts": "import { CheckUserEmail } from \"../application/CheckUserEmail\";\r\nimport { MysqlUserEmailCheckerRepository } from \"../infrastructure/MysqlUserEmailCheckerRepository\";\r\n\r\nexport async function checkUserEmailController(email: string) {\r\n  const useCase = new CheckUserEmail(new MysqlUserEmailCheckerRepository());\r\n\r\n  return useCase.execute(email);\r\n}\r\n",
          "createUser.controller.ts": "import { CreateUser } from \"../application/CreateUser\";\r\nimport { MysqlUserRepository } from \"../infrastructure/MysqlUserRepository\";\r\nimport { getServerSession } from \"../../auth\";\r\n\r\nexport async function createUserController(body: any) {\r\n  const session = await getServerSession();\r\n\r\n  if (!session) {\r\n    throw new Error(\"No autenticado\");\r\n  }\r\n\r\n  const userId = session.user.id;\r\n\r\n  if (!userId) {\r\n    throw new Error(\"Usuario autenticado sin identificador\");\r\n  }\r\n\r\n  const useCase = new CreateUser(new MysqlUserRepository());\r\n\r\n  await useCase.execute({\r\n    names: body.names,\r\n    lastnames: body.lastnames,\r\n    email: body.email,\r\n    phoneNumber: body.phoneNumber,\r\n    genderId: body.gender.id,\r\n    roleId: body.role.id,\r\n    membershipId: body.membership?.id,\r\n    state: body.state ?? false,\r\n    createdBy: userId,\r\n  });\r\n\r\n  return { message: \"Usuario creado exitosamente\" };\r\n}\r\n",
          "getUsersMetadata.controller.ts": "import { GetUsersMetadata } from \"../application/GetUsersMetadata\";\r\nimport { MysqlUserMetadataRepository } from \"../infrastructure/MysqlUserMetadataRepository\";\r\nimport { requirePermission } from \"@/src/modules/auth/application/requirePermission\";\r\nimport { Permission } from \"@/src/modules/auth/domain/Permission\";\r\n\r\nexport async function getUsersMetadataController() {\r\n  await requirePermission(Permission.ManageUsers);\r\n\r\n  const useCase = new GetUsersMetadata(new MysqlUserMetadataRepository());\r\n\r\n  return useCase.execute();\r\n}\r\n",
          "searchUserEmails.controller.ts": "import { SearchUserEmails } from \"../application/SearchUserEmail\";\r\nimport { MysqlUserEmailRepository } from \"../infrastructure/MysqlUserEmailRepository\";\r\nimport { getServerSession } from \"@/src/modules/auth\";\r\nimport { Permission } from \"@/src/modules/auth\";\r\nimport { ForbiddenError } from \"@/src/shared/errors/ForbiddenError\";\r\n\r\nexport async function searchUserEmailsController(searchTerm: string) {\r\n  const session = await getServerSession();\r\n\r\n  if (!session) {\r\n    throw new ForbiddenError();\r\n  }\r\n\r\n  const hasPermission = session.user.permissions?.some(\r\n    (p) => p.name === Permission.ManageProperties\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    throw new ForbiddenError();\r\n  }\r\n\r\n  const useCase = new SearchUserEmails(new MysqlUserEmailRepository());\r\n\r\n  return useCase.execute(searchTerm);\r\n}\r\n",
          "updateUser.controller.ts": "import { UpdateUser } from \"../application/UpdateUser\";\r\nimport { MysqlUserRepository } from \"../infrastructure/MysqlUserRepository\";\r\nimport { getServerSession } from \"../../auth\";\r\n\r\nexport async function updateUserController(body: any) {\r\n  const session = await getServerSession();\r\n\r\n  if (!session || !session.user?.id) {\r\n    throw new Error(\"Usuario no autenticado\");\r\n  }\r\n\r\n  const useCase = new UpdateUser(new MysqlUserRepository());\r\n\r\n  await useCase.execute({\r\n    id: body.id,\r\n    names: body.names,\r\n    lastnames: body.lastnames,\r\n    email: body.email,\r\n    phoneNumber: body.phoneNumber,\r\n    genderId: body.gender.id,\r\n    roleId: body.role.id,\r\n    membershipId: body.membership?.id,\r\n    state: body.state ?? false,\r\n    updatedBy: session.user.id,\r\n  });\r\n\r\n  return { message: \"Usuario actualizado exitosamente\" };\r\n}\r\n",
          "users.controller.ts": "import { MysqlUserRepository } from \"../infrastructure/MysqlUserRepository\";\r\nimport { GetUsersUseCase } from \"../application/GetUser\";\r\n\r\ninterface GetUsersControllerParams {\r\n  page: number;\r\n  pageSize: number;\r\n  searchTerm: string | null;\r\n}\r\n\r\nexport async function getUsersController(params: GetUsersControllerParams) {\r\n  const repository = new MysqlUserRepository();\r\n  const useCase = new GetUsersUseCase(repository);\r\n\r\n  return useCase.execute(params);\r\n}\r\n"
        }
      }
    },
    "shared": {
      "auth": {
        "isAdmin.ts": "import { Permission } from \"../../modules/auth/domain/Permission\";\r\n\r\nexport function isAdmin(permissions: Permission[] = []): boolean {\r\n  const adminPermissions = [\r\n    Permission.ManageProjects,\r\n    Permission.ManageProperties,\r\n    Permission.ManageUsers,\r\n    Permission.ManageRoles,\r\n    Permission.ManageMemberships,\r\n    Permission.ManageRequests,\r\n  ];\r\n\r\n  return adminPermissions.some((p) => permissions.includes(p));\r\n}\r\n",
        "jwt.ts": "export interface AppJWT {\r\n  role?: string;\r\n  membershipId?: string;\r\n  permissions?: { name: string }[];\r\n}\r\n",
        "session.ts": ""
      },
      "errors": {
        "AppError.ts": "export abstract class AppError extends Error {\r\n  abstract readonly statusCode: number;\r\n  abstract readonly code: string;\r\n\r\n  protected constructor(message: string) {\r\n    super(message);\r\n  }\r\n}\r\n",
        "BadRequestError.ts": "import { AppError } from \"./AppError\";\r\n\r\nexport class BadRequestError extends AppError {\r\n  readonly statusCode = 400;\r\n  readonly code = \"BAD_REQUEST\";\r\n\r\n  constructor(message: string) {\r\n    super(message);\r\n  }\r\n}\r\n",
        "ForbiddenError.ts": "import { AppError } from \"./AppError\";\r\n\r\nexport class ForbiddenError extends AppError {\r\n  readonly statusCode = 403;\r\n  readonly code = \"FORBIDDEN\";\r\n\r\n  constructor(message = \"No autorizado\") {\r\n    super(message);\r\n  }\r\n}\r\n",
        "HandleHttpError.ts": "import { NextResponse } from \"next/server\";\r\nimport { ZodError } from \"zod\";\r\nimport { AppError } from \"./AppError\";\r\nimport { BadRequestError } from \"./BadRequestError\";\r\nimport { InternalServerError } from \"./InternalServerError\";\r\n\r\nexport function handleHttpError(error: unknown): NextResponse {\r\n  if (error instanceof ZodError) {\r\n    return NextResponse.json(\r\n      {\r\n        error: \"VALIDATION_ERROR\",\r\n        details: error.flatten(),\r\n      },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  if (error instanceof AppError) {\r\n    return NextResponse.json(\r\n      {\r\n        error: error.code,\r\n        message: error.message,\r\n      },\r\n      { status: error.statusCode }\r\n    );\r\n  }\r\n\r\n  const internalError = new InternalServerError();\r\n  console.error(error);\r\n\r\n  return NextResponse.json(\r\n    {\r\n      error: internalError.code,\r\n      message: internalError.message,\r\n    },\r\n    { status: internalError.statusCode }\r\n  );\r\n}\r\n",
        "HttpError.ts": "",
        "InternalServerError.ts": "import { AppError } from \"./AppError\";\r\n\r\nexport class InternalServerError extends AppError {\r\n  readonly statusCode = 500;\r\n  readonly code = \"INTERNAL_ERROR\";\r\n\r\n  constructor(message = \"Error interno del servidor\") {\r\n    super(message);\r\n  }\r\n}\r\n",
        "UnauthorizedError.ts": "import { AppError } from \"./AppError\";\r\n\r\nexport class UnauthorizedError extends AppError {\r\n  readonly statusCode = 401;\r\n  readonly code = \"UNAUTHORIZED\";\r\n\r\n  constructor(message = \"No autenticado\") {\r\n    super(message);\r\n  }\r\n}\r\n"
      },
      "index.ts": "export * from \"./auth/isAdmin\";\r\nexport * from \"./auth/jwt\";\r\nexport * from \"../modules/auth/application/requireAuth\";\r\nexport * from \"../modules/auth/application/requirePermission\";\r\n// export * from \"./auth/session\";\r\n\r\nexport * from \"./errors/AppError\";\r\nexport * from \"./errors/BadRequestError\";\r\nexport * from \"./errors/ForbiddenError\";\r\nexport * from \"./errors/HandleHttpError\";\r\n// export * from \"./errors/HttpError\";\r\nexport * from \"./errors/InternalServerError\";\r\nexport * from \"./errors/UnauthorizedError\";\r\n\r\n// export * from \"./logger\"\r\n\r\nexport * from \"../modules/auth/domain/Permission\";\r\nexport * from \"./permissions/UserPermissions\";\r\n\r\nexport * from \"./validation/validateRequest\";\r\n// export * from \"./validation/zodSchemas\";\r\n",
      "permissions": {
        "UserPermissions.ts": "import { Permission } from \"../../modules/auth/domain/Permission\";\r\n\r\nexport interface UserPermission {\r\n  id: number;\r\n  name: Permission;\r\n}\r\n"
      },
      "validation": {
        "validateRequest.ts": "import { ZodSchema } from \"zod\";\r\n\r\nexport function validateRequest<T>(schema: ZodSchema<T>, data: unknown): T {\r\n  return schema.parse(data);\r\n}\r\n",
        "zodSchemas.ts": ""
      }
    }
  },
  "tailwind.config.ts": "import type { Config } from \"tailwindcss\";\n\nconst config: Config = {\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./components/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./app/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./ui/**/*.{js,ts,jsx,tsx,mdx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        premium: {\n          primary: \"var(--premium-primary)\",\n          primaryLight: \"var(--premium-primary-light)\",\n          primaryDark: \"var(--premium-primary-dark)\",\n\n          secondary: \"var(--premium-secondary)\",\n          secondaryLight: \"var(--premium-secondary-light)\",\n          secondaryDark: \"var(--premium-secondary-dark)\",\n\n          background: \"var(--premium-background)\",\n          backgroundLight: \"var(--premium-background-light)\",\n          backgroundDark: \"var(--premium-background-dark)\",\n          backgroundAlt: \"var(--premium-background-alt)\",\n\n          textPrimary: \"var(--premium-text-primary)\",\n          textSecondary: \"var(--premium-text-secondary)\",\n          textPlaceholder: \"var(--premium-text-placeholder)\",\n\n          borderColor: \"var(--premium-border-color)\",\n          borderColorHover: \"var(--premium-border-color-hover)\",\n        },\n\n        client: {\n          primary: \"var(--client-primary)\",\n          primaryLight: \"var(--client-primary-light)\",\n          primaryDark: \"var(--client-primary-dark)\",\n          primaryHover: \"var(--client-primary-hover)\",\n\n          secondary: \"var(--client-secondary)\",\n          secondaryLight: \"var(--client-secondary-light)\",\n          secondaryDark: \"var(--client-secondary-dark)\",\n          secondaryHover: \"var(--client-secondary-hover)\",\n\n          accent: \"var(--client-accent)\",\n          accentLight: \"var(--client-accent-light)\",\n          accentDark: \"var(--client-accent-dark)\",\n          accentHover: \"var(--client-accent-hover)\",\n\n          white: \"var(--client-white)\",\n          whiteOff: \"var(--client-white-off)\",\n\n          background: \"var(--client-background)\",\n          backgroundLight: \"var(--client-background-light)\",\n          backgroundDark: \"var(--client-background-dark)\",\n          backgroundAlt: \"var(--client-background-alt)\",\n\n          text: \"var(--client-text-primary)\",\n          textSecondary: \"var(--client-text-secondary)\",\n          textPlaceholder: \"var(--client-text-placeholder)\",\n        },\n      },\n      animation: {\n        gradient: \"gradient 3s ease-in-out infinite\",\n        \"slide-left-infinite\": \"slide-left 16s linear infinite\",\n      },\n      keyframes: {\n        gradient: {\n          \"0%\": { \"background-position\": \"200% 0%\" },\n          \"100%\": { \"background-position\": \"-200% 0%\" },\n        },\n        \"slide-left\": {\n          from: { transform: \"translateX(0)\" },\n          to: { transform: \"translateX(-100%)\" },\n        },\n      },\n      backgroundImage: {\n        \"custom-pattern\":\n          \"radial-gradient(rgba(12, 12, 12, 0.171) 2px, transparent 0)\",\n      },\n    },\n  },\n  plugins: [],\n};\n\nexport default config;\n",
  "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"lib\": [\n      \"dom\",\n      \"dom.iterable\",\n      \"esnext\"\n    ],\n    \"allowJs\": false,\n    \"skipLibCheck\": true,\n    \"strict\": true,\n    \"noEmit\": true,\n    \"esModuleInterop\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"node\",\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"jsx\": \"preserve\",\n    \"incremental\": true,\n    \"plugins\": [\n      {\n        \"name\": \"next\"\n      }\n    ],\n    \"paths\": {\n      \"@/*\": [\n        \"./*\"\n      ]\n    },\n    \"target\": \"ES2022\"\n  },\n  \"include\": [\n    \"**/*.ts\",\n    \"**/*.tsx\",\n    \"next-env.d.ts\",\n    \".next/types/**/*.ts\"\n  ],\n  \"exclude\": [\n    \"node_modules\"\n  ],\n  \"typeRoots\": [\n    \"./types\",\n    \"./node_modules/@types\"\n  ]\n}\r\n",
  "types": {
    "next-auth.d..ts": "import NextAuth, { DefaultSession, DefaultUser } from \"next-auth\";\nimport { Permission } from \"@/lib/definitios\";\n\ndeclare module \"next-auth\" {\n  interface Session {\n    user: {\n      id?: string | null;\n      role?: string | null;\n      membershipId?: string | null;\n      permissions?: Permission[] | null;\n    } & DefaultSession[\"user\"];\n  }\n\n  interface User extends DefaultUser {\n    id: string;\n    role: string;\n    membershipId: string;\n    permissions: Permission[];\n  }\n}\n\ndeclare module \"next-auth/jwt\" {\n  interface JWT {\n    id: string;\n    role: string;\n    membershipId: string;\n    permissions: Permission[];\n  }\n}\n"
  },
  "utils": {
    "emailTemplates.ts": "export type EmailTemplateOptions = {\r\n  title: string;\r\n  greeting?: string;\r\n  intro?: string;\r\n  items?: { label: string; value: string }[];\r\n  body?: string;\r\n  buttonText?: string;\r\n  buttonUrl?: string;\r\n};\r\n\r\nexport function generateEmailTemplate(options: EmailTemplateOptions) {\r\n  const {\r\n    title,\r\n    greeting = \"Hola,\",\r\n    intro,\r\n    items = [],\r\n    body,\r\n    buttonText = \"Ir a EdifiK\",\r\n    buttonUrl = \"https://edifik.co/login\",\r\n  } = options;\r\n\r\n  const itemsHtml = items\r\n    .map((item) => `<li><strong>${item.label}:</strong> ${item.value}</li>`)\r\n    .join(\"\");\r\n\r\n  return `\r\n      <!DOCTYPE html>\r\n      <html lang=\"es\">\r\n      <head>\r\n          <meta charset=\"UTF-8\">\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n          <title>${title}</title>\r\n          <style>\r\n              body {\r\n                  font-family: Arial, sans-serif;\r\n                  background-color: #000917;\r\n                  margin: 0;\r\n                  padding: 0;\r\n                  color: #ffffff;\r\n              }\r\n              .container {\r\n                  max-width: 600px;\r\n                  margin: 20px auto;\r\n                  background: #ffffff;\r\n                  padding: 20px;\r\n                  border-radius: 8px;\r\n                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n                  color: #333;\r\n              }\r\n              .header {\r\n                  text-align: center;\r\n                  padding: 20px 0;\r\n                  background-color: #9A5939;\r\n                  border-top-left-radius: 8px;\r\n                  border-top-right-radius: 8px;\r\n              }\r\n              .header img {\r\n                  max-width: 150px;\r\n              }\r\n              .content {\r\n                  padding: 20px;\r\n                  text-align: left;\r\n                  color: #000917;\r\n              }\r\n              .footer {\r\n                  text-align: center;\r\n                  font-size: 12px;\r\n                  color: #979CA3;\r\n                  margin-top: 20px;\r\n                  padding: 15px;\r\n                  background-color: #000917;\r\n                  border-bottom-left-radius: 8px;\r\n                  border-bottom-right-radius: 8px;\r\n              }\r\n              .footer a {\r\n                  color: #9A5939;\r\n                  text-decoration: none;\r\n                  font-weight: bold;\r\n                  transition: color 0.3s;\r\n              }\r\n              .footer a:hover {\r\n                  color: #ffffff;\r\n              }\r\n              .button-container {\r\n                  text-align: center;\r\n                  margin-top: 20px;\r\n              }\r\n              .btn {\r\n                  display: inline-block;\r\n                  width: 100%;\r\n                  max-width: 250px;\r\n                  padding: 14px 0;\r\n                  background-color: #9A5939;\r\n                  color: #ffffff !important;\r\n                  text-decoration: none !important;\r\n                  font-size: 16px;\r\n                  font-weight: bold;\r\n                  border-radius: 8px;\r\n                  text-align: center;\r\n                  transition: background-color 0.3s, transform 0.2s;\r\n              }\r\n              .btn:hover {\r\n                  background-color: #7d442b;\r\n                  transform: scale(1.05);\r\n                  color: #ffffff !important;\r\n              }\r\n          </style>\r\n      </head>\r\n      <body>\r\n          <div class=\"container\">\r\n              <div class=\"header\">\r\n                  <img src=\"https://tu-dominio.com/images/logo.webp\" alt=\"EdifiK Logo\">\r\n              </div>\r\n              <div class=\"content\">\r\n                  <h2>${title}</h2>\r\n                  <p>${greeting}</p>\r\n                  ${intro ? `<p>${intro}</p>` : \"\"}\r\n                  ${items.length > 0 ? `<ul>${itemsHtml}</ul>` : \"\"}\r\n                  ${body ? `<p>${body}</p>` : \"\"}\r\n                  <div class=\"button-container\">\r\n                      <a href=\"${buttonUrl}\" class=\"btn\">${buttonText}</a>\r\n                  </div>\r\n              </div>\r\n              <div class=\"footer\">\r\n                  <p>© ${new Date().getFullYear()} EdifiK. Todos los derechos reservados.</p>\r\n                  <p><a href=\"https://edifik.com\">Sitio Web</a> | <a href=\"mailto:edifik.arquitectos23@edifik.com\">Soporte</a></p>\r\n              </div>\r\n          </div>\r\n      </body>\r\n      </html>\r\n    `;\r\n}\r\n",
    "escapeSearchTerm.ts": "export function escapeSearchTerm(searchTerm: string | null): string | null {\r\n  if (!searchTerm || searchTerm.trim() === \"\") {\r\n    return null;\r\n  }\r\n\r\n  let escapedTerm = searchTerm.trim();\r\n  escapedTerm = escapedTerm.replace(/\\\\/g, \"\\\\\\\\\");\r\n  escapedTerm = escapedTerm.replace(/%/g, \"\\\\%\");\r\n  escapedTerm = escapedTerm.replace(/_/g, \"\\\\_\");\r\n\r\n  return `%${escapedTerm}%`;\r\n}\r\n",
    "extractS3KeyFromUrl.ts": "export const extractS3KeyFromUrl = (url: string) => {\r\n  try {\r\n    const cloudFrontDomain = \"https://d3fhc8hmbgwz4k.cloudfront.net/\";\r\n\r\n    if (!url.startsWith(cloudFrontDomain)) {\r\n      console.warn(\r\n        `⚠️ La URL no tiene dominio de CloudFront, se asume que ya es un key: ${url}`\r\n      );\r\n      return url;\r\n    }\r\n\r\n    return url.replace(cloudFrontDomain, \"\");\r\n  } catch (error) {\r\n    console.error(\"❌ Error al extraer la clave S3:\", error);\r\n    return null;\r\n  }\r\n};\r\n",
    "formatters.ts": "export const formatNumber = (number: number) =>\n  new Intl.NumberFormat(\"es-CO\", {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(number);\n",
    "getNestedValue.ts": "export function getNestedValue<T>(item: T, path: string): any {\n  return path.split(\".\").reduce((acc: any, key) => acc && acc[key], item);\n}\n",
    "mergeSort.ts": "import { getNestedValue } from \"./getNestedValue\";\n\nexport const mergeSort = <T>(\n  array: T[],\n  key: keyof T | string,\n  direction: \"asc\" | \"desc\",\n): T[] => {\n  if (array.length <= 1) return array;\n\n  const middle = Math.floor(array.length / 2);\n  const left = mergeSort(array.slice(0, middle), key, direction);\n  const right = mergeSort(array.slice(middle), key, direction);\n\n  return merge(left, right, key, direction);\n};\n\nconst merge = <T>(\n  left: T[],\n  right: T[],\n  key: keyof T | string,\n  direction: \"asc\" | \"desc\",\n): T[] => {\n  const result: T[] = [];\n  let indexLeft = 0;\n  let indexRight = 0;\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    const leftValue = getNestedValue(left[indexLeft], key as string);\n    const rightValue = getNestedValue(right[indexRight], key as string);\n\n    const comparison =\n      typeof leftValue === \"string\"\n        ? leftValue.localeCompare(rightValue as string)\n        : (leftValue as number) - (rightValue as number);\n\n    if (\n      (direction === \"asc\" && comparison <= 0) ||\n      (direction === \"desc\" && comparison > 0)\n    ) {\n      result.push(left[indexLeft++]);\n    } else {\n      result.push(right[indexRight++]);\n    }\n  }\n\n  return result.concat(left.slice(indexLeft), right.slice(indexRight));\n};\n"
  }
}