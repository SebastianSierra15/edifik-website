{
  "app": {
    "(pages)": {
      "bim": {
        "page.tsx": ""
      },
      "contactanos": {
        "page.tsx": "import Image from \"next/image\";\n//import { FaMapMarkerAlt, FaPhoneAlt, FaEnvelope } from \"react-icons/fa\";\nimport ContactSection from \"../../ui/contact/contactSection\";\n\ninterface ContactInfoProps {\n  icon: JSX.Element;\n  title: string;\n  info: string;\n  description?: string;\n  py: string;\n}\n\nfunction ContactInfo({ icon, title, info, description, py }: ContactInfoProps) {\n  return (\n    <div className={`flex flex-col py-${py}`}>\n      <div className=\"mb-4 flex items-center\">\n        <h3 className=\"ml-2 text-xl font-bold text-gray-800 md:text-2xl\">\n          {title}\n        </h3>\n      </div>\n      <div className=\"mb-5 ml-4 mt-0 w-1/5 border-t border-gray-400\" />\n      <div className=\"ml-5 flex flex-row gap-5\">\n        {icon}\n        <div className=\"flex flex-col\">\n          <h4 className=\"mb-3 font-bold text-gray-800\">{info}</h4>\n          {description && <p>{description}</p>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function ContactPage() {\n  return (\n    <main className=\"bg-white\">\n      {/* Banner Section */}\n      <div className=\"relative h-[500px] w-full bg-cover bg-center\">\n        <Image\n          src=\"/images/image1.png\"\n          alt=\"Imagen de contacto de EdifiK\"\n          fill\n          className=\"object-cover\"\n          priority\n        />\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center text-white\">\n          <h1 className=\"text-center text-5xl text-white lg:text-7xl\">\n            Contáctanos\n          </h1>\n        </div>\n      </div>\n\n      {/* Contact Form Section */}\n      <ContactSection />\n\n      <hr className=\"mx-auto my-2 w-5/6 border-t border-gray-400 bg-transparent\" />\n\n      {/* Contact Information Section */}\n      <div className=\"py-8\">\n        <div className=\"mx-auto grid max-w-7xl grid-cols-1 gap-0 px-10 md:grid-cols-2 md:gap-4 lg:grid-cols-3 lg:gap-8\">\n          <ContactInfo\n            icon={\n              <FaMapMarkerAlt\n                className=\"h-6 w-6 text-blue-600\"\n                aria-hidden=\"true\"\n              />\n            }\n            title=\"Oficina Central\"\n            info=\"Fusagasugá, Cundinamarca\"\n            description=\"Calle 14 #3-59 Conjunto Parque la colina Bloque E - 801\"\n            py=\"6\"\n          />\n          <ContactInfo\n            icon={\n              <FaPhoneAlt\n                className=\"h-6 w-6 text-blue-600\"\n                aria-hidden=\"true\"\n              />\n            }\n            title=\"Llámanos\"\n            info=\"+57 312 345 6789\"\n            description=\"Lun - Sab: 08am - 06pm\"\n            py=\"8\"\n          />\n          <ContactInfo\n            icon={\n              <FaEnvelope\n                className=\"h-6 w-6 text-blue-600\"\n                aria-hidden=\"true\"\n              />\n            }\n            title=\"Correo Electrónico\"\n            info=\"EdifiK.arquitectos23@gmail.com\"\n            py=\"10\"\n          />\n        </div>\n      </div>\n\n      <hr className=\"mx-auto my-2 w-5/6 border-t border-gray-400 bg-transparent\" />\n\n      {/* Map Section */}\n      <div className=\"py-10\">\n        <div id=\"map\" className=\"h-96 w-full\" />{\" \"}\n        {/* Asegura que el mapa tenga altura definida */}\n      </div>\n    </main>\n  );\n}\n"
      },
      "inmobiliaria": {
        "[id]": {
          "page.tsx": "\"use client\";\n\nimport Head from \"next/head\";\n//import { motion } from \"framer-motion\";\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\nimport ProjectHeader from \"@/app/ui/projects/project/projectHeader\";\nimport ProjectCarousel from \"@/app/ui/projects/project/projectCarousel\";\nimport ProjectPlans from \"@/app/ui/projects/project/projectPlans\";\nimport ProjectDetails from \"@/app/ui/projects/project/projectDetails\";\nimport ProjectNearbyServices from \"@/app/ui/projects/project/projectNearbyServices\";\nimport ProjectCommonAreas from \"@/app/ui/projects/project/projectCommonAreas\";\nimport ContactForm from \"@/app/ui/projects/contactForm\";\nimport CarouselRecommendedProjects from \"@/app/ui/projects/project/carouselRecommendedProjects\";\n\nimport ProjectHeaderSkeleton from \"@/app/ui/skeletons/projectHeaderSkeleton\";\nimport { ProjectCarouselSkeleton } from \"@/app/ui/skeletons/projectCarouselSkeleton\";\nimport { ProjectPlansSkeleton } from \"@/app/ui/skeletons/projectPlansSkeleton\";\nimport ProjectDetailsSkeleton from \"@/app/ui/skeletons/projectDetailsSkeleton\";\nimport { ProjectNearbyServicesSkeleton } from \"@/app/ui/skeletons/projectNearbyServicesSkeleton\";\nimport { ProjectCommonAreasSkeleton } from \"@/app/ui/skeletons/projectCommonAreasSkeleton\";\nimport { ProjectShortDescriptionSkeleton } from \"@/app/ui/skeletons/projectShortDescriptionSkeleton\";\nimport { ProjectDetailedDescriptionSkeleton } from \"@/app/ui/skeletons/projectDetailedDescriptionSkeleton\";\n\nimport Map from \"@/app/ui/projects/project/map\";\n\nexport default function PropertyPage({ params }: { params: { id: number } }) {\n  const { project, projectRecommended, loading } = useProjectById(params.id);\n\n  return (\n    <div\n      className=\"min-h-screen w-full\"\n      style={{ backgroundColor: \"#EDEDED\", color: \"#5D4037\" }}\n    >\n      <Head>\n        <title>{project?.name || \"Cargando proyecto...\"} - EdifiK</title>\n        <meta\n          property=\"og:title\"\n          content={project?.name || \"Cargando proyecto...\"}\n        />\n        <meta\n          property=\"og:description\"\n          content={\n            project?.shortDescription ||\n            \"Descubre este increíble proyecto con EdifiK\"\n          }\n        />\n        <meta\n          property=\"og:url\"\n          content={`https://tu-dominio.com/proyectos/${params.id}`}\n        />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:site_name\" content=\"EdifiK\" />\n      </Head>\n\n      {loading ? (\n        <>\n          <ProjectHeaderSkeleton />\n\n          <ProjectCarouselSkeleton />\n\n          <div className=\"mt-4 flex justify-center\">\n            <hr\n              className=\"w-3/4\"\n              style={{\n                borderTop: \"2px solid #DAA520\",\n              }}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4 pt-8 lg:grid-cols-3\">\n            <div className=\"space-y-8 px-16 lg:col-span-2 lg:pr-10\">\n              <ProjectPlansSkeleton />\n\n              <ProjectShortDescriptionSkeleton />\n\n              <ProjectDetailsSkeleton />\n\n              <ProjectDetailedDescriptionSkeleton />\n\n              <ProjectNearbyServicesSkeleton />\n\n              <ProjectCommonAreasSkeleton />\n\n              <div className=\"h-80 w-full animate-pulse rounded bg-gray-300\" />\n            </div>\n\n            <motion.div\n              initial={{ opacity: 0, x: 50 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ duration: 0.8 }}\n              className=\"pr-16 pt-8 transition-all duration-300\"\n            >\n              <ContactForm />\n            </motion.div>\n          </div>\n        </>\n      ) : (\n        project && (\n          <>\n            <ProjectHeader project={project} />\n\n            <ProjectCarousel\n              projectMedia={project.projectMedia.filter(\n                (media) => media.imageType !== null && media.imageType !== 1005\n              )}\n            />\n\n            <div className=\"mt-4 flex justify-center\">\n              <hr\n                className=\"w-3/4\"\n                style={{\n                  borderTop: \"2px solid #DAA520\",\n                }}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-4 pt-8 lg:grid-cols-3\">\n              <div className=\"px-4 sm:px-6 lg:col-span-2 lg:px-12 lg:pr-10\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8, delay: 0.2 }}\n                >\n                  <ProjectPlans\n                    projectMedia={project.projectMedia.filter(\n                      (media) => media.imageType === 1005\n                    )}\n                  />\n                </motion.div>\n\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <p className=\"my-8 text-lg\" style={{ color: \"#000000\" }}>\n                    {project.shortDescription}\n                  </p>\n                </motion.div>\n\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8, delay: 0.2 }}\n                >\n                  <ProjectDetails project={project} />\n                </motion.div>\n\n                <motion.div\n                  initial={{ opacity: 0, x: -30 }}\n                  whileInView={{ opacity: 1, x: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <div className=\"my-8 text-base\">\n                    <h2\n                      className=\"mb-2 text-2xl font-semibold\"\n                      style={{ color: \"#8B4513\" }}\n                    >\n                      Descripción General\n                    </h2>\n                    <p className=\"whitespace-pre-line text-black\">\n                      {project.detailedDescription}\n                    </p>\n                  </div>\n                </motion.div>\n\n                <motion.div\n                  initial=\"hidden\"\n                  whileInView=\"visible\"\n                  viewport={{ once: true }}\n                  transition={{ staggerChildren: 0.2 }}\n                >\n                  <ProjectNearbyServices services={project.nearbyServices} />\n                </motion.div>\n\n                {project.commonAreas && project.commonAreas.length > 0 && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ duration: 0.8, delay: 0.8 }}\n                  >\n                    <ProjectCommonAreas\n                      areas={project.commonAreas}\n                      projectMedia={project.projectMedia.filter(\n                        (media) => media.commonArea !== null\n                      )}\n                    />\n                  </motion.div>\n                )}\n\n                <motion.div\n                  initial={{ opacity: 0, y: 50 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <Map\n                    latitude={project.latitude}\n                    longitude={project.longitude}\n                    address={project.address}\n                  />\n                </motion.div>\n              </div>\n\n              <div className=\"pr-16 pt-8\">\n                {/*\n                <ContactForm />*/}\n              </div>\n            </div>\n\n            <div className=\"mx-32 mt-20\">\n              <CarouselRecommendedProjects projects={projectRecommended} />\n            </div>\n          </>\n        )\n      )}\n    </div>\n  );\n}\n"
        },
        "page.tsx": "\"use client\";\n\nimport Image from \"next/image\";\nimport { useState } from \"react\";\n\nconst HomePage = () => {\n  const [selectedTab, setSelectedTab] = useState(0);\n\n  const tabs = [\"Destacadas\", \"Venta\", \"Sobre Planos\", \"Arriendo\"];\n\n  const handleTabChange = (index: number) => {\n    setSelectedTab(index);\n  };\n\n  return (\n    <main>\n      <div className=\"relative h-[500px] w-full bg-cover bg-center\">\n        <Image\n          src=\"/images/image1.png\"\n          alt=\"Imagen de nosotros\"\n          fill\n          className=\"object-cover\"\n        />\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center text-white\">\n          <h1 className=\"text-center text-5xl text-white lg:text-7xl\">\n            Nosotros\n          </h1>\n        </div>\n      </div>\n\n      <div className=\"bg-gray-200 px-1 py-10 md:px-5 lg:px-16\">\n        <div className=\"container mx-auto rounded-lg bg-slate-800 px-5 py-2\">\n          <h2 className=\"border-b pb-5 pt-3 text-center text-2xl font-bold text-white lg:text-4xl\">\n            Propiedades\n          </h2>\n\n          <div className=\"flex justify-between border-b border-gray-300 px-0 py-2 text-center text-white md:px-10\">\n            {tabs.map((tab, index) => (\n              <button\n                key={index}\n                className={`tab-button text-md border-b-2 border-transparent px-0 font-semibold hover:border-blue-600 md:px-4 md:text-xl ${\n                  selectedTab === index ? \"border-blue-600 text-blue-600\" : \"\"\n                }`}\n                onClick={() => handleTabChange(index)}\n              >\n                {tab}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"mb-2 mt-4 py-3\">\n            <div\n              className={`grid grid-cols-1 justify-items-center gap-5 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 ${\n                selectedTab === 0 ? \"block\" : \"hidden\"\n              }`}\n            >\n              {/* Otras propiedades */}\n            </div>\n            {/* Otros div de propiedades ocultos con hidden o visible en función del selectedTab */}\n          </div>\n\n          <div className=\"py-2 text-center text-white\">\n            <button className=\"rounded-full border-2 border-white px-5 py-2 font-semibold hover:bg-slate-600\">\n              Mostrar más\n            </button>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default HomePage;\n"
      },
      "layout.tsx": "import type { Metadata } from \"next\";\nimport { poppins } from \"@/app/fonts/fonts\";\nimport Header from \"../ui/header\";\nimport Footer from \"../ui/footer\";\nimport { Providers } from \"../providers\";\nimport \"../globals.css\";\n\nexport const metadata: Metadata = {\n  title: \"EdifiK\",\n  description: \"Bienvenido a EdifiK\",\n};\n\nexport default function AdminLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"es\">\n      <body\n        className={`${poppins.className} flex min-h-screen flex-col bg-premium-background antialiased dark:bg-premium-background`}\n      >\n        <Providers>\n          <Header />\n          <main className=\"flex-grow\">{children}</main>\n          <Footer />\n        </Providers>\n      </body>\n    </html>\n  );\n}\n",
      "nosotros": {
        "page.tsx": "import Image from \"next/image\";\nimport Timeline from \"../../ui/about/timeline\";\nimport TeamSection from \"../../ui/about/teamSection\";\nimport StatsSection from \"../../ui/about/statsSection\";\nimport VisionMisionSection from \"../../ui/about/visionMisionSection\";\nimport SocialResponsibilitySection from \"../../ui/about/socialResponsibilitySection\";\nimport CertificationCard from \"../../ui/about/certificationCard\";\n\nexport default function AboutUsPage() {\n  return (\n    <main>\n      {/* Banner Section */}\n      <div className=\"relative h-[500px] w-full bg-cover bg-center\">\n        <Image\n          src=\"/images/image1.png\"\n          alt=\"Imagen de nosotros\"\n          fill\n          className=\"object-cover\"\n          priority\n        />\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center text-white\">\n          <h1 className=\"text-center text-5xl text-white lg:text-7xl\">\n            Nosotros\n          </h1>\n        </div>\n      </div>\n\n      {/* About Section */}\n      <div className=\"bg-white p-5 lg:p-20\">\n        <div className=\"mx-auto grid grid-cols-1 gap-10 lg:grid-cols-2\">\n          <div className=\"mx-8 py-5 text-center lg:text-left\">\n            <h1 className=\"mb-10 text-3xl font-bold text-blue-600 lg:text-5xl\">\n              Te damos la bienvenida a EdifiK\n            </h1>\n            <h2 className=\"mb-10 text-2xl font-semibold text-blue-600 lg:text-4xl\">\n              ¿Quiénes Somos?\n            </h2>\n            <p className=\"text-justify text-sm text-gray-700 lg:text-base\">\n              Somos EdifiK, tu socio ideal en diseño y desarrollo de proyectos\n              arquitectónicos. Especializados en metodología BIM, nos dedicamos\n              a crear y planificar cada etapa de tu proyecto con precisión y\n              eficiencia. Desde el modelado y renderizado hasta la planificación\n              detallada, garantizamos soluciones innovadoras que transforman tus\n              ideas en realidades tangibles. Con EdifiK, cada proyecto es una\n              oportunidad para plasmar tus ideas y volverlas realidad.\n            </p>\n          </div>\n\n          <div className=\"mx-auto grid grid-cols-1 justify-center gap-5 text-center\">\n            <Image\n              className=\"self-center object-cover\"\n              src=\"/images/services-11.jpg\"\n              alt=\"Arquitecto trabajando en un proyecto\"\n              width={400}\n              height={300}\n              priority\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Timeline, Team, and Stats Section */}\n      <Timeline />\n      <TeamSection />\n      <StatsSection />\n\n      {/* Vision and Mission Section */}\n      <div className=\"bg-gray-200 px-0 pt-44 sm:px-10 md:pt-16 lg:px-32 lg:pt-8\">\n        <section className=\"relative p-5\">\n          <div className=\"relative mx-auto max-w-7xl px-4 py-12 md:px-6 md:py-16 lg:py-20\">\n            <div className=\"max-w-3xl text-center md:mx-auto\">\n              <h2 className=\"text-2xl font-semibold text-blue-600 md:text-4xl\">\n                Nuestra Visión y Misión\n              </h2>\n              <hr className=\"mx-auto my-2 w-1/4 border-t border-gray-400\" />\n            </div>\n\n            <div className=\"mt-14 flex items-stretch justify-center md:mt-20\">\n              <div className=\"grid grid-cols-1 gap-10 md:grid-cols-2\">\n                <VisionMisionSection\n                  title=\"Visión\"\n                  description=\"Convertirse en el referente líder en soluciones integrales de arquitectura...\"\n                  imageSrc=\"/images/house2.png\"\n                  bgColor=\"bg-blue-200\"\n                  textColor=\"text-blue-700\"\n                />\n                <VisionMisionSection\n                  title=\"Misión\"\n                  description=\"Ofrecer servicios de arquitectura, modelado 3D...\"\n                  imageSrc=\"/images/house1.png\"\n                  bgColor=\"bg-yellow-100\"\n                  textColor=\"text-blue-700\"\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n\n      {/* Social Responsibility Section */}\n      <div className=\"bg-white\">\n        <SocialResponsibilitySection\n          title=\"Responsabilidad Social\"\n          description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet, est?\"\n          points={[\n            {\n              title: \"Lorem, ipsum dolor.\",\n              description:\n                \"Lorem ipsum dolor sit amet consectetur adipisicing elit.\",\n            },\n            {\n              title: \"Lorem, ipsum dolor.\",\n              description:\n                \"Lorem ipsum dolor sit amet consectetur adipisicing elit.\",\n            },\n            {\n              title: \"Lorem, ipsum dolor.\",\n              description:\n                \"Lorem ipsum dolor sit amet consectetur adipisicing elit.\",\n            },\n          ]}\n          imageSrc=\"https://images.unsplash.com/photo-1600132806370-bf17e65e942f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=768&q=80&h=768\"\n          imagePosition=\"right\"\n        />\n\n        <hr className=\"mx-auto my-2 w-5/6 border-t border-gray-400 bg-transparent\" />\n\n        <SocialResponsibilitySection\n          title=\"Responsabilidad Social\"\n          description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet, est?\"\n          points={[\n            {\n              title: \"Lorem, ipsum dolor.\",\n              description:\n                \"Lorem ipsum dolor sit amet consectetur adipisicing elit.\",\n            },\n            {\n              title: \"Lorem, ipsum dolor.\",\n              description:\n                \"Lorem ipsum dolor sit amet consectetur adipisicing elit.\",\n            },\n            {\n              title: \"Lorem, ipsum dolor.\",\n              description:\n                \"Lorem ipsum dolor sit amet consectetur adipisicing elit.\",\n            },\n          ]}\n          imageSrc=\"https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=768&q=80&h=768\"\n          imagePosition=\"left\"\n        />\n      </div>\n\n      {/* Certifications Section */}\n      <div className=\"bg-gray-200 px-10 md:px-20\">\n        <section className=\"relative px-5\">\n          <div className=\"relative mx-auto max-w-7xl px-4 py-8 md:px-6 md:py-12 lg:py-16\">\n            <div className=\"max-w-3xl text-center md:mx-auto\">\n              <h2 className=\"text-center text-2xl font-semibold text-blue-600 md:text-4xl\">\n                Estamos Certificados\n              </h2>\n              <hr className=\"mx-auto my-2 w-1/4 border-t border-gray-400\" />\n            </div>\n\n            <div className=\"mt-14 flex items-stretch justify-center md:mt-20\">\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                <CertificationCard\n                  title=\"BIM\"\n                  description=\"Certificación en metodología BIM, garantizando calidad y precisión.\"\n                  imageSrc=\"/images/BIM-Logo.png\"\n                  bgColor=\"bg-blue-200\"\n                />\n                <CertificationCard\n                  title=\"Certificación 2\"\n                  description=\"Certificación en construcción ecológica.\"\n                  imageSrc=\"/images/BIM-Logo.png\"\n                  bgColor=\"bg-orange-200\"\n                />\n                <CertificationCard\n                  title=\"Certificación 3\"\n                  description=\"Reconocimiento por seguridad en la construcción.\"\n                  imageSrc=\"/images/BIM-Logo.png\"\n                  bgColor=\"bg-pink-50\"\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    </main>\n  );\n}\n"
      },
      "page.tsx": "import Image from \"next/image\";\n\nexport default function Home() {\n  return (\n    <div className=\"relative m-0 h-[500px] w-full bg-cover bg-center p-0\">\n      <Image\n        src=\"/images/image1.png\"\n        alt=\"Vista aérea del edificio de EdifiK\"\n        fill\n        className=\"object-cover\"\n        priority\n      />\n\n      <div className=\"absolute inset-0 flex flex-col items-center justify-center text-white\">\n        <Image\n          src=\"/images/logo.webp\"\n          alt=\"Logotipo de EdifiK\"\n          width={400}\n          height={150}\n          priority\n          style={{ width: \"auto\", height: \"auto\" }}\n        />\n\n        <h1 className=\"mt-4 text-center text-xl text-white\">\n          Diseñamos Sueños, Construimos Realidades\n        </h1>\n      </div>\n    </div>\n  );\n}\n",
      "proyectos": {
        "[name]": {
          "page.tsx": "\"use client\";\n\nimport Head from \"next/head\";\n//import { motion } from \"framer-motion\";\nimport { useProjectByName } from \"@/app/hooks/projects/useProjectById\";\nimport ProjectHeader from \"@/app/ui/projects/project/projectHeader\";\nimport ProjectCarousel from \"@/app/ui/projects/project/projectCarousel\";\nimport ProjectPlans from \"@/app/ui/projects/project/projectPlans\";\nimport ProjectDetails from \"@/app/ui/projects/project/projectDetails\";\nimport ProjectNearbyServices from \"@/app/ui/projects/project/projectNearbyServices\";\nimport ProjectCommonAreas from \"@/app/ui/projects/project/projectCommonAreas\";\nimport ContactForm from \"@/app/ui/projects/contactForm\";\nimport CarouselRecommendedProjects from \"@/app/ui/projects/project/carouselRecommendedProjects\";\n\nimport ProjectHeaderSkeleton from \"@/app/ui/skeletons/projectHeaderSkeleton\";\nimport { ProjectCarouselSkeleton } from \"@/app/ui/skeletons/projectCarouselSkeleton\";\nimport { ProjectPlansSkeleton } from \"@/app/ui/skeletons/projectPlansSkeleton\";\nimport ProjectDetailsSkeleton from \"@/app/ui/skeletons/projectDetailsSkeleton\";\nimport { ProjectNearbyServicesSkeleton } from \"@/app/ui/skeletons/projectNearbyServicesSkeleton\";\nimport { ProjectCommonAreasSkeleton } from \"@/app/ui/skeletons/projectCommonAreasSkeleton\";\nimport { ProjectShortDescriptionSkeleton } from \"@/app/ui/skeletons/projectShortDescriptionSkeleton\";\nimport { ProjectDetailedDescriptionSkeleton } from \"@/app/ui/skeletons/projectDetailedDescriptionSkeleton\";\n\nimport Map from \"@/app/ui/projects/project/map\";\n\nexport default function ProjectPage({ params }: { params: { name: string } }) {\n  const { project, projectRecommended, loading } = useProjectByName(\n    params.name\n  );\n\n  return (\n    <div\n      className=\"min-h-screen w-full\"\n      style={{ backgroundColor: \"#EDEDED\", color: \"#5D4037\" }}\n    >\n      <Head>\n        <title>{project?.name || \"Cargando proyecto...\"} - EdifiK</title>\n        <meta\n          property=\"og:title\"\n          content={project?.name || \"Cargando proyecto...\"}\n        />\n        <meta\n          property=\"og:description\"\n          content={\n            project?.shortDescription ||\n            \"Descubre este increíble proyecto con EdifiK\"\n          }\n        />\n        <meta\n          property=\"og:url\"\n          content={`https://tu-dominio.com/proyectos/${params.name}`}\n        />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:site_name\" content=\"EdifiK\" />\n      </Head>\n\n      {loading ? (\n        <>\n          <ProjectHeaderSkeleton />\n\n          <ProjectCarouselSkeleton />\n\n          <div className=\"mt-4 flex justify-center\">\n            <hr\n              className=\"w-3/4\"\n              style={{\n                borderTop: \"2px solid #DAA520\",\n              }}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4 pt-8 lg:grid-cols-3\">\n            <div className=\"space-y-8 px-16 lg:col-span-2 lg:pr-10\">\n              <ProjectPlansSkeleton />\n\n              <ProjectShortDescriptionSkeleton />\n\n              <ProjectDetailsSkeleton />\n\n              <ProjectDetailedDescriptionSkeleton />\n\n              <ProjectNearbyServicesSkeleton />\n\n              <ProjectCommonAreasSkeleton />\n\n              <div className=\"h-80 w-full animate-pulse rounded bg-gray-300\" />\n            </div>\n\n            <motion.div\n              initial={{ opacity: 0, x: 50 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ duration: 0.8 }}\n              className=\"pr-16 pt-8 transition-all duration-300\"\n            >\n              <ContactForm />\n            </motion.div>\n          </div>\n        </>\n      ) : (\n        project && (\n          <>\n            <ProjectHeader project={project} />\n\n            <ProjectCarousel\n              projectMedia={project.projectMedia.filter(\n                (media) => media.imageType !== null && media.imageType !== 1005\n              )}\n            />\n\n            <div className=\"mt-4 flex justify-center\">\n              <hr\n                className=\"w-3/4\"\n                style={{\n                  borderTop: \"2px solid #DAA520\",\n                }}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-4 pt-8 lg:grid-cols-3\">\n              <div className=\"px-4 sm:px-6 lg:col-span-2 lg:px-12 lg:pr-10\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8, delay: 0.2 }}\n                >\n                  <ProjectPlans\n                    projectMedia={project.projectMedia.filter(\n                      (media) => media.imageType === 1005\n                    )}\n                  />\n                </motion.div>\n\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <p className=\"my-8 text-lg\" style={{ color: \"#000000\" }}>\n                    {project.shortDescription}\n                  </p>\n                </motion.div>\n\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8, delay: 0.2 }}\n                >\n                  <ProjectDetails project={project} />\n                </motion.div>\n\n                <motion.div\n                  initial={{ opacity: 0, x: -30 }}\n                  whileInView={{ opacity: 1, x: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <div className=\"my-8 text-base\">\n                    <h2\n                      className=\"mb-2 text-2xl font-semibold\"\n                      style={{ color: \"#8B4513\" }}\n                    >\n                      Descripción General\n                    </h2>\n                    <p className=\"whitespace-pre-line text-black\">\n                      {project.detailedDescription}\n                    </p>\n                  </div>\n                </motion.div>\n\n                <motion.div\n                  initial=\"hidden\"\n                  whileInView=\"visible\"\n                  viewport={{ once: true }}\n                  transition={{ staggerChildren: 0.2 }}\n                >\n                  <ProjectNearbyServices services={project.nearbyServices} />\n                </motion.div>\n\n                {project.commonAreas && project.commonAreas.length > 0 && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ duration: 0.8, delay: 0.8 }}\n                  >\n                    <ProjectCommonAreas\n                      areas={project.commonAreas}\n                      projectMedia={project.projectMedia.filter(\n                        (media) => media.commonArea !== null\n                      )}\n                    />\n                  </motion.div>\n                )}\n\n                <motion.div\n                  initial={{ opacity: 0, y: 50 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <Map\n                    latitude={project.latitude}\n                    longitude={project.longitude}\n                    address={project.address}\n                  />\n                </motion.div>\n              </div>\n\n              <div className=\"pr-16 pt-8\">\n                <ContactForm />\n              </div>\n            </div>\n\n            <div className=\"mx-32 mt-20\">\n              <CarouselRecommendedProjects projects={projectRecommended} />\n            </div>\n          </>\n        )\n      )}\n    </div>\n  );\n}\n"
        },
        "page.tsx": ""
      },
      "unauthorized": {
        "page.tsx": "\"use client\";\r\n\r\nimport Link from \"next/link\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen bg-premium-background px-4 dark:bg-premium-backgroundDark\">\r\n      {/* Icon */}\r\n      <div className=\"mb-6\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          strokeWidth={2}\r\n          stroke=\"currentColor\"\r\n          className=\"h-24 w-24 text-premium-primary dark:text-premium-primaryLight\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M9.75 9h4.5M12 15.25v.25m-4.25 2h8.5a2 2 0 002-2v-8.5a2 2 0 00-2-2h-8.5a2 2 0 00-2 2v8.5a2 2 0 002 2z\"\r\n          />\r\n        </svg>\r\n      </div>\r\n\r\n      {/* Title */}\r\n      <h1 className=\"text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        Acceso Denegado\r\n      </h1>\r\n\r\n      {/* Description */}\r\n      <p className=\"mt-4 text-center text-premium-textSecondary dark:text-premium-textPlaceholder\">\r\n        Lo sentimos, no tienes permiso para acceder a esta página.\r\n        <br />\r\n        Por favor, verifica tu cuenta o contacta al administrador.\r\n      </p>\r\n\r\n      {/* Actions */}\r\n      <div className=\"mt-6 flex space-x-4\">\r\n        <Link\r\n          href=\"/\"\r\n          className=\"px-6 py-3 rounded-lg bg-premium-primary text-white font-semibold shadow-lg hover:bg-premium-primaryDark transition-colors dark:bg-premium-primaryLight dark:hover:bg-premium-primaryDark\"\r\n        >\r\n          Ir a Inicio\r\n        </Link>\r\n        <Link\r\n          href=\"/login\"\r\n          className=\"px-6 py-3 rounded-lg bg-premium-secondary text-white font-semibold shadow-lg hover:bg-premium-secondaryDark transition-colors dark:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark\"\r\n        >\r\n          Iniciar Sesión\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
      }
    },
    "admin": {
      "layout.tsx": "import type { Metadata } from \"next\";\nimport { inter } from \"@/app/fonts/fonts\";\nimport { Providers } from \"../providers\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\nimport AdminHeader from \"../ui/admin/adminHeader\";\nimport AdminFooter from \"../ui/admin/adminFooter\";\nimport \"../globals.css\";\n\nexport const metadata: Metadata = {\n  title: \"EdifiK Admin\",\n  description: \"Panel de administración de EdifiK\",\n};\n\nexport default async function AdminLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  const session = await getServerSession(authOptions);\n\n  return (\n    <html lang=\"es\">\n      <body\n        className={`${inter.className} flex min-h-screen flex-col bg-premium-background antialiased dark:bg-premium-background`}\n      >\n        <Providers>\n          <AdminHeader />\n          <main className=\"flex-grow\">{children}</main>\n          <AdminFooter />\n        </Providers>\n      </body>\n    </html>\n  );\n}\n",
      "membresias": {
        "page.tsx": "\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { useCallback } from \"react\";\nimport { Membership, Header } from \"@/lib/definitios\";\nimport { useMemberships } from \"@/app/hooks/memberships/useMemberships\";\nimport { useMembershipValidation } from \"@/app/hooks/memberships/useMembershipValidation\";\nimport { useMembershipUpdate } from \"@/app/hooks/memberships/useMembershipUpdate\";\nimport Alert from \"@/app/ui/alert\";\nimport Table from \"@/app/ui/table/table\";\nimport TableSkeleton from \"@/app/ui/skeletons/tableSkeleton\";\nimport ModalConfirmation from \"@/app/ui/modals/modalConfirmation\";\n\nconst MembershipModal = dynamic(\n  () => import(\"@/app/ui/memberships/membershipModal\"),\n  { ssr: false }\n);\n\nexport default function MembershipsPage() {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\" as \"success\" | \"error\" | null,\n    message: \"\",\n    show: false,\n  });\n\n  const { memberships, totalEntries, isLoading } = useMemberships(\n    currentPage,\n    entriesPerPage,\n    searchTerm,\n    refreshTrigger\n  );\n\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\n  const showSkeleton = !hasLoadedOnce && isLoading;\n  if (!isLoading && !hasLoadedOnce) {\n    setHasLoadedOnce(true);\n  }\n\n  const [membership, setMembership] = useState<Membership>({\n    id: 0,\n    name: \"\",\n    benefits: \"\",\n    price: 0,\n    projectsFeatured: 0,\n    maxProjects: 0,\n    discountThreeMonths: 0,\n    discountSixMonths: 0,\n    discountTwelveMonths: 0,\n  });\n\n  const { errors, validateFields } = useMembershipValidation(membership, true);\n\n  const { updateMembership } = useMembershipUpdate();\n\n  const debouncedSearch = useDebouncedCallback((term: string) => {\n    setSearchTerm(term);\n    setCurrentPage(1);\n  }, 500);\n\n  const filteredMemberships = useMemo(() => {\n    return memberships.filter((membership) => membership.id !== 1004);\n  }, [memberships]);\n\n  const handleEditClick = useCallback((membership: Membership) => {\n    setMembership(membership);\n    setModalOpen(true);\n  }, []);\n\n  const goToNextPage = useCallback(() => {\n    setCurrentPage((prevPage) => prevPage + 1);\n  }, []);\n\n  const handleConfirmUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const isValid = await validateFields();\n\n    if (!isValid) {\n      return;\n    }\n\n    setIsConfirmationModalOpen(true);\n  };\n\n  const handleConfirmedAction = async () => {\n    const success = await updateMembership(membership);\n    if (success) {\n      setRefreshTrigger((prev) => prev + 1);\n      setModalOpen(false);\n      setIsConfirmationModalOpen(false);\n\n      setAlert({\n        type: \"success\",\n        message: \"Membresía editada correctamente.\",\n        show: true,\n      });\n    } else {\n      setAlert({\n        type: \"error\",\n        message: \"Lo sentimos, algo salió mal, intentalo más tarde.\",\n        show: true,\n      });\n    }\n  };\n\n  const handleCloseConfirmationModal = () => {\n    setIsConfirmationModalOpen(false);\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target;\n\n    setMembership({\n      ...membership,\n      [name]: name === \"price\" ? Number(value) || 0 : value,\n    });\n  };\n\n  const goToPreviousPage = () => {\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\n  };\n\n  const goToPage = (pageNumber: number) => {\n    setCurrentPage(pageNumber);\n  };\n\n  const handleEntriesPerPageChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    setEntriesPerPage(Number(e.target.value));\n    setCurrentPage(1);\n  };\n\n  const headers: Header<Membership>[] = [\n    { label: \"Membresía\", key: \"name\", type: \"string\" },\n    { label: \"Beneficios\", key: \"benefits\", type: \"string\" },\n    { label: \"Precio\", key: \"price\", type: \"number\" },\n    {\n      label: \"Propiedades Destacadas\",\n      key: \"projectsFeatured\",\n      type: \"number\",\n    },\n    { label: \"Max. Propiedades\", key: \"maxProjects\", type: \"number\" },\n    {\n      label: \"Descuento por 3 Meses\",\n      key: \"discountThreeMonths\",\n      type: \"number\",\n    },\n    {\n      label: \"Descuento por 6 Meses\",\n      key: \"discountSixMonths\",\n      type: \"number\",\n    },\n    {\n      label: \"Descuento por 12 Meses\",\n      key: \"discountTwelveMonths\",\n      type: \"number\",\n    },\n  ];\n\n  return (\n    <div className=\"container mx-auto mt-24 pb-10\">\n      <h1 className=\"mb-6 pb-5 text-center text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        Gestión de Membresías\n      </h1>\n\n      {showSkeleton ? (\n        <TableSkeleton />\n      ) : (\n        <Table\n          data={filteredMemberships}\n          headers={headers}\n          totalEntries={totalEntries}\n          entry=\"membresías\"\n          currentPage={currentPage}\n          goToPage={goToPage}\n          goToNextPage={goToNextPage}\n          goToPreviousPage={goToPreviousPage}\n          entriesPerPage={entriesPerPage}\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\n          onEditClick={handleEditClick}\n        />\n      )}\n\n      {modalOpen && (\n        <MembershipModal\n          show={modalOpen}\n          onClose={() => setModalOpen(false)}\n          onSubmit={handleConfirmUpdate}\n          handleChange={handleChange}\n          membership={membership}\n          errors={errors}\n        />\n      )}\n\n      {isConfirmationModalOpen && (\n        <ModalConfirmation\n          isOpen={isConfirmationModalOpen}\n          onClose={handleCloseConfirmationModal}\n          onConfirm={handleConfirmedAction}\n          title=\"Confirmar Acción\"\n          message=\"¿Estás seguro de que quieres actualizar esta membresía?\"\n          confirmLabel=\"Confirmar\"\n          cancelLabel=\"Cancelar\"\n        />\n      )}\n\n      {alert.show && (\n        <Alert\n          type={alert.type!}\n          message={alert.message}\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\n        />\n      )}\n    </div>\n  );\n}\n"
      },
      "page.tsx": "\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport dynamic from \"next/dynamic\";\nimport AdminCardSkeleton from \"../ui/skeletons/AdminCardSkeleton\";\n\nconst AdminCard = dynamic(() => import(\"../ui/admin/adminCard\"), {\n  ssr: false,\n});\n\nconst Building2 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building2)\n);\nconst House = dynamic(() => import(\"lucide-react\").then((mod) => mod.House));\nconst Users = dynamic(() => import(\"lucide-react\").then((mod) => mod.Users));\nconst ShieldCheck = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ShieldCheck)\n);\nconst Tag = dynamic(() => import(\"lucide-react\").then((mod) => mod.Tag));\nconst ClipboardList = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ClipboardList)\n);\n\nexport default function Page() {\n  const { data: session, status } = useSession();\n\n  const cards = [\n    {\n      href: \"/admin/proyectos\",\n      icon: Building2,\n      title: \"Proyectos\",\n      description:\n        \"Administra y gestiona todos los proyectos en desarrollo, incluyendo información y detalles de cada proyecto.\",\n      permission: \"Gestionar proyectos\",\n    },\n    {\n      href: \"/admin/propiedades\",\n      icon: House,\n      title: \"Propiedades\",\n      description:\n        \"Gestiona las propiedades disponibles para venta y arriendo, incluyendo tipos de vivienda y características.\",\n      permission: \"Gestionar propiedades\",\n    },\n    {\n      href: \"/admin/usuarios\",\n      icon: Users,\n      title: \"Usuarios\",\n      description: \"Gestiona los usuarios registrados en la plataforma.\",\n      permission: \"Gestionar usuarios\",\n    },\n    {\n      href: \"/admin/roles\",\n      icon: ShieldCheck,\n      title: \"Roles\",\n      description: \"Administra los roles, permisos y accesos de los usuarios.\",\n      permission: \"Gestionar roles\",\n    },\n    {\n      href: \"/admin/membresias\",\n      icon: Tag,\n      title: \"Membresías\",\n      description:\n        \"Gestiona las membresías disponibles para usuarios y propiedades, incluyendo niveles y beneficios.\",\n      permission: \"Gestionar membresias\",\n    },\n    {\n      href: \"/admin/solicitudes\",\n      icon: ClipboardList,\n      title: \"Solicitudes\",\n      description:\n        \"Revisa y gestiona las solicitudes de los usuarios relacionadas con propiedades.\",\n      permission: \"Gestionar solicitudes\",\n    },\n  ];\n\n  const userPermissions = session?.user?.permissions || [];\n  const filteredCards =\n    status === \"authenticated\"\n      ? cards.filter((card) =>\n          userPermissions.some((perm) => perm.name === card.permission)\n        )\n      : [];\n\n  return (\n    <div className=\"container mx-auto min-h-[calc(100vh-200px)] bg-premium-background px-4 py-12 dark:bg-premium-background\">\n      <h1 className=\"mb-10 mt-20 text-center text-4xl font-semibold text-premium-primary lg:mt-16 dark:text-premium-primaryLight min-h-[4rem]\">\n        Bienvenido al Panel de Administración de EdifiK\n      </h1>\n\n      <div className=\"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3\">\n        {status === \"loading\" &&\n          cards.map((_, index) => (\n            <div\n              key={index}\n              className=\"min-h-[200px] bg-premium-backgroundAlt dark:bg-premium-secondaryLight rounded-lg\"\n            >\n              <AdminCardSkeleton />\n            </div>\n          ))}\n\n        {status === \"authenticated\" &&\n          filteredCards.map(({ href, icon: Icon, title, description }) => (\n            <div\n              key={href}\n              className=\"min-h-[200px] bg-premium-backgroundAlt dark:bg-premium-secondaryLight rounded-lg\"\n            >\n              <AdminCard\n                href={href}\n                Icon={Icon}\n                title={title}\n                description={description}\n              />\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n}\n",
      "propiedades": {
        "[id]": {
          "page.tsx": "\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport ProjectForm from \"@/app/ui/projects/createEditProject/projectForm\";\r\n\r\nexport default function EditPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n  const params = useParams();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const hasPermission =\r\n    session?.user?.permissions?.some(\r\n      (perm) => perm.name === \"Gestionar propiedades\"\r\n    ) || false;\r\n\r\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\r\n\r\n  if (!projectId) return null;\r\n\r\n  return (\r\n    <ProjectForm\r\n      isEdit={true}\r\n      isProperty={true}\r\n      projectId={Number(projectId)}\r\n      hasPermission={hasPermission}\r\n    />\r\n  );\r\n}\r\n"
        },
        "crear-propiedad": {
          "page.tsx": "\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport ProjectForm from \"@/app/ui/projects/createEditProject/projectForm\";\n\nexport default function CreatePropertyPage() {\n  const { data: session, status } = useSession();\n\n  if (status !== \"authenticated\") return null;\n\n  const hasPermission =\n    session?.user?.permissions?.some(\n      (perm) => perm.name === \"Gestionar propiedades\"\n    ) || false;\n\n  return (\n    <ProjectForm\n      isEdit={false}\n      isProperty={true}\n      hasPermission={hasPermission}\n    />\n  );\n}\n"
        },
        "page.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport ProjectManager from \"@/app/ui/projects/projectManager\";\n\nexport default function PropertyPage() {\n  const [projectTypeId, setProjectTypeId] = useState<number>(2);\n\n  return (\n    <ProjectManager\n      isProperty={true}\n      projectTypeId={projectTypeId}\n      setProjectTypeId={setProjectTypeId}\n    />\n  );\n}\n"
      },
      "proyectos": {
        "[id]": {
          "page.tsx": "\"use client\";\n\nimport { useParams } from \"next/navigation\";\nimport { useSession } from \"next-auth/react\";\nimport ProjectForm from \"@/app/ui/projects/createEditProject/projectForm\";\n\nexport default function EditProjectPage() {\n  const { data: session, status } = useSession();\n  const params = useParams();\n\n  if (status !== \"authenticated\") return null;\n\n  const hasPermission =\n    session?.user?.permissions?.some(\n      (perm) => perm.name === \"Gestionar proyectos\"\n    ) || false;\n\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\n\n  if (!projectId) return null;\n\n  return (\n    <ProjectForm\n      isEdit={true}\n      isProperty={false}\n      projectId={Number(projectId)}\n      hasPermission={hasPermission}\n    />\n  );\n}\n"
        },
        "crear-proyecto": {
          "page.tsx": "import ProjectForm from \"@/app/ui/projects/createEditProject/projectForm\";\n\nexport default function CreateProjectPage() {\n  return <ProjectForm isEdit={false} isProperty={false} />;\n}\n"
        },
        "page.tsx": "import ProjectManager from \"@/app/ui/projects/projectManager\";\n\nexport default function ProjectPage() {\n  return <ProjectManager isProperty={false} projectTypeId={1} />;\n}\n"
      },
      "roles": {
        "page.tsx": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Role, Header } from \"@/lib/definitios\";\r\nimport { useDebouncedCallback } from \"use-debounce\";\r\nimport { Plus } from \"lucide-react\";\r\nimport { useRoles } from \"@/app/hooks/roles/useRoles\";\r\nimport { useRoleValidation } from \"@/app/hooks/roles/useRoleValidation\";\r\nimport { useRoleApi } from \"@/app/hooks/roles/useRoleApi\";\r\nimport { usePermissions } from \"@/app/hooks/roles/usePermissions\";\r\nimport Table from \"@/app/ui/table/table\";\r\nimport TableSkeleton from \"@/app/ui/skeletons/tableSkeleton\";\r\nimport Alert from \"@/app/ui/alert\";\r\nimport ModalConfirmation from \"@/app/ui/modals/modalConfirmation\";\r\n\r\nconst RoleModal = dynamic(() => import(\"@/app/ui/roles/roleModal\"), {\r\n  ssr: false,\r\n});\r\n\r\nexport default function RolesPage() {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editRole, setEditRole] = useState<Role | null>(null);\r\n  const [registerRole, setRegisterRole] = useState<Role>({\r\n    id: 0,\r\n    name: \"\",\r\n    permissions: [],\r\n  });\r\n  const [tempEditRole, setTempEditRole] = useState<Role | null>(null);\r\n  const [deleteRole, setDeleteRole] = useState<Role | null>(null);\r\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\r\n  const [confirmationAction, setConfirmationAction] = useState<\r\n    \"register\" | \"edit\" | \"delete\" | null\r\n  >(null);\r\n  const [flag, setFlag] = useState(true);\r\n  const [alert, setAlert] = useState({\r\n    type: \"\" as \"success\" | \"error\" | null,\r\n    message: \"\",\r\n    show: false,\r\n  });\r\n\r\n  const { roles, totalEntries, isLoadingRoles, refetchRoles } = useRoles(\r\n    currentPage,\r\n    entriesPerPage,\r\n    searchTerm\r\n  );\r\n  const { permissions } = usePermissions();\r\n\r\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\r\n  const showSkeleton = !hasLoadedOnce && isLoadingRoles;\r\n  if (!isLoadingRoles && !hasLoadedOnce) {\r\n    setHasLoadedOnce(true);\r\n  }\r\n\r\n  const { errors, validateFields, validateField } = useRoleValidation(\r\n    editRole || registerRole,\r\n    !!editRole\r\n  );\r\n\r\n  const { submitRole } = useRoleApi();\r\n\r\n  const debouncedSearch = useDebouncedCallback((term: string) => {\r\n    setSearchTerm(term);\r\n    setCurrentPage(1);\r\n  }, 500);\r\n\r\n  const handleEditClick = (role: Role) => {\r\n    setEditRole(role);\r\n    setTempEditRole({ ...role });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleRegisterClick = () => {\r\n    setEditRole(null);\r\n    setRegisterRole({ id: 0, name: \"\", permissions: [] });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteClick = (role: Role) => {\r\n    setDeleteRole(role);\r\n    setConfirmationAction(\"delete\");\r\n    setIsConfirmationModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmedAction = async () => {\r\n    let roleData: Role | null = null;\r\n\r\n    if (confirmationAction === \"delete\") {\r\n      if (!deleteRole || !deleteRole.id) {\r\n        console.error(\"Error: No se puede eliminar un rol sin ID.\");\r\n        setAlert({\r\n          type: \"error\",\r\n          message: \"Error: No se puede eliminar un rol sin ID.\",\r\n          show: true,\r\n        });\r\n        return;\r\n      }\r\n      roleData = deleteRole;\r\n    } else {\r\n      roleData = confirmationAction === \"edit\" ? tempEditRole : registerRole;\r\n    }\r\n\r\n    if (!roleData) return;\r\n\r\n    const success = await submitRole(roleData, confirmationAction!);\r\n\r\n    if (success) {\r\n      setModalOpen(false);\r\n      setIsConfirmationModalOpen(false);\r\n      setFlag(true);\r\n\r\n      if (confirmationAction === \"edit\") {\r\n        setEditRole(tempEditRole);\r\n      }\r\n\r\n      await refetchRoles();\r\n\r\n      setAlert({\r\n        type: \"success\",\r\n        message: `Rol ${\r\n          confirmationAction === \"edit\"\r\n            ? \"editado\"\r\n            : confirmationAction === \"delete\"\r\n              ? \"eliminado\"\r\n              : \"registrado\"\r\n        } correctamente.`,\r\n        show: true,\r\n      });\r\n    } else {\r\n      setIsConfirmationModalOpen(false);\r\n      setAlert({\r\n        type: \"error\",\r\n        message: \"Lo sentimos, algo salió mal, inténtalo más tarde.\",\r\n        show: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFlag(false);\r\n\r\n    const isValid = await validateFields();\r\n    if (!isValid) {\r\n      return;\r\n    }\r\n\r\n    setConfirmationAction(editRole ? \"edit\" : \"register\");\r\n    setIsConfirmationModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setIsConfirmationModalOpen(false);\r\n    setFlag(true);\r\n  };\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n\r\n    if (name === \"addPermission\") {\r\n      const selectedPermission = permissions.find(\r\n        (perm) => perm.id === Number(value)\r\n      );\r\n      if (!selectedPermission) return;\r\n\r\n      if (tempEditRole) {\r\n        setTempEditRole((prev) => ({\r\n          ...prev!,\r\n          permissions: [...(prev!.permissions || []), selectedPermission],\r\n        }));\r\n      } else {\r\n        setRegisterRole((prev) => ({\r\n          ...prev,\r\n          permissions: [...(prev.permissions || []), selectedPermission],\r\n        }));\r\n      }\r\n    } else if (name === \"deletePermission\") {\r\n      if (tempEditRole) {\r\n        setTempEditRole((prev) => ({\r\n          ...prev!,\r\n          permissions: prev!.permissions?.filter(\r\n            (perm) => perm.id !== Number(value)\r\n          ),\r\n        }));\r\n      } else {\r\n        setRegisterRole((prev) => ({\r\n          ...prev,\r\n          permissions: prev.permissions?.filter(\r\n            (perm) => perm.id !== Number(value)\r\n          ),\r\n        }));\r\n      }\r\n    } else {\r\n      if (tempEditRole) {\r\n        setTempEditRole((prev) => ({\r\n          ...prev!,\r\n          [name]: value,\r\n        }));\r\n      } else {\r\n        setRegisterRole((prev) => ({\r\n          ...prev,\r\n          [name]: value,\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const goToNextPage = () => {\r\n    setCurrentPage((prevPage) => prevPage + 1);\r\n  };\r\n\r\n  const goToPreviousPage = () => {\r\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\r\n  };\r\n\r\n  const goToPage = (pageNumber: number) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  const handleEntriesPerPageChange = (\r\n    e: React.ChangeEvent<HTMLSelectElement>\r\n  ) => {\r\n    setEntriesPerPage(Number(e.target.value));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const headers: Header<Role>[] = [\r\n    { label: \"Id\", key: \"id\", type: \"number\" },\r\n    { label: \"Nombre\", key: \"name\", type: \"string\" },\r\n    { label: \"Permisos\", key: \"permissions\", type: \"array\", subKey: \"name\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-24 pb-10\">\r\n      <h1 className=\"text-3xl font-bold mb-6 text-center text-premium-primary dark:text-premium-primaryLight pb-5\">\r\n        Gestión de Roles\r\n      </h1>\r\n\r\n      <div className=\"mb-4 flex justify-center px-4 md:justify-end\">\r\n        <button\r\n          onClick={handleRegisterClick}\r\n          className=\"flex items-center space-x-2 whitespace-nowrap rounded-lg bg-green-600 px-6 py-2 text-white shadow-md transition-colors hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800\"\r\n        >\r\n          <Plus className=\"mr-2 size-6\" />\r\n          <span>Registrar Rol</span>\r\n        </button>\r\n      </div>\r\n\r\n      {showSkeleton ? (\r\n        <TableSkeleton />\r\n      ) : (\r\n        <Table\r\n          data={roles}\r\n          headers={headers}\r\n          totalEntries={totalEntries}\r\n          entry=\"roles\"\r\n          currentPage={currentPage}\r\n          goToPage={goToPage}\r\n          goToNextPage={goToNextPage}\r\n          goToPreviousPage={goToPreviousPage}\r\n          entriesPerPage={entriesPerPage}\r\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\r\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\r\n          onEditClick={handleEditClick}\r\n          onDeleteClick={handleDeleteClick}\r\n        />\r\n      )}\r\n\r\n      {modalOpen && (\r\n        <RoleModal\r\n          show={modalOpen}\r\n          onClose={() => {\r\n            setModalOpen(false);\r\n            setFlag(true);\r\n          }}\r\n          onSubmit={handleConfirmSubmit}\r\n          handleChange={handleChange}\r\n          role={tempEditRole || registerRole}\r\n          permissions={permissions}\r\n          errors={errors}\r\n          flag={flag}\r\n        />\r\n      )}\r\n\r\n      {isConfirmationModalOpen && (\r\n        <ModalConfirmation\r\n          isOpen={isConfirmationModalOpen}\r\n          onClose={handleCloseConfirmationModal}\r\n          onConfirm={handleConfirmedAction}\r\n          title=\"Confirmar Acción\"\r\n          message={`¿Estás seguro de que quieres ${confirmationAction === \"edit\" ? \"editar\" : \"registrar\"} este rol?`}\r\n          confirmLabel=\"Confirmar\"\r\n          cancelLabel=\"Cancelar\"\r\n        />\r\n      )}\r\n\r\n      {alert.show && (\r\n        <Alert\r\n          type={alert.type!}\r\n          message={alert.message}\r\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "solicitudes": {
        "[id]": {
          "page.tsx": "\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport ProjectView from \"@/app/ui/projects/projectView/projectView\";\r\n\r\nexport default function ViewPropertyPage() {\r\n  const { data: session, status } = useSession();\r\n  const params = useParams();\r\n\r\n  if (status !== \"authenticated\") return null;\r\n\r\n  const projectId = params?.id ? decodeURIComponent(params.id as string) : \"\";\r\n\r\n  if (!projectId) return null;\r\n\r\n  return <ProjectView projectId={Number(projectId)} isProperty={true} />;\r\n}\r\n"
        },
        "page.tsx": "\"use client\";\r\n\r\nimport { useState, useCallback } from \"react\";\r\nimport { useDebouncedCallback } from \"use-debounce\";\r\nimport { Eye, CheckCircle } from \"lucide-react\";\r\nimport { Request, Header } from \"@/lib/definitios\";\r\nimport { useRequests } from \"@/app/hooks/requests/useRequests\";\r\nimport { useRequestApi } from \"@/app/hooks/requests/useRequestApi\";\r\nimport { useRequestValidation } from \"@/app/hooks/requests/useRequestValidation\";\r\nimport Table from \"@/app/ui/table/table\";\r\nimport TableSkeleton from \"@/app/ui/skeletons/tableSkeleton\";\r\nimport RequestModal from \"@/app/ui/requests/requestModal\";\r\nimport ModalConfirmation from \"@/app/ui/modals/modalConfirmation\";\r\nimport Alert from \"@/app/ui/alert\";\r\n\r\nexport default function RequestsPage() {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\r\n  const [requestAction, setRequestAction] = useState<\r\n    \"approve\" | \"reject\" | \"revision\"\r\n  >(() => \"approve\");\r\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\r\n  const [isRequestModalOpen, setIsRequestModalOpen] = useState(false);\r\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\r\n\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  const { requests, totalEntries, isLoadingRequests } = useRequests(\r\n    currentPage,\r\n    entriesPerPage,\r\n    searchTerm,\r\n    refreshTrigger\r\n  );\r\n\r\n  const { errors, validateFields, validateField } = useRequestValidation();\r\n  const [flag, setFlag] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const showSkeleton = !hasLoadedOnce && isLoadingRequests;\r\n  if (!isLoadingRequests && !hasLoadedOnce) {\r\n    setHasLoadedOnce(true);\r\n  }\r\n\r\n  const [alert, setAlert] = useState({\r\n    type: \"\" as \"success\" | \"error\" | null,\r\n    message: \"\",\r\n    show: false,\r\n  });\r\n\r\n  const debouncedSearch = useDebouncedCallback((term: string) => {\r\n    setSearchTerm(term);\r\n    setCurrentPage(1);\r\n  }, 500);\r\n\r\n  const { processRequest } = useRequestApi();\r\n\r\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFlag(false);\r\n\r\n    const isValid = validateFields(message, requestAction);\r\n    if (!isValid) return;\r\n\r\n    setIsConfirmationModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setIsConfirmationModalOpen(false);\r\n    setFlag(true);\r\n  };\r\n\r\n  const handleConfirmedAction = async () => {\r\n    if (!selectedRequest || !message.trim() || !requestAction) {\r\n      return;\r\n    }\r\n\r\n    const success = await processRequest(\r\n      selectedRequest.id,\r\n      requestAction,\r\n      message\r\n    );\r\n\r\n    closeConfirmationModal();\r\n    closeRequestModal();\r\n\r\n    if (success) {\r\n      setAlert({\r\n        type: \"success\",\r\n        message: `Solicitud ${\r\n          requestAction === \"approve\"\r\n            ? \"aprobada\"\r\n            : requestAction === \"reject\"\r\n              ? \"rechazada\"\r\n              : \"enviada a revisión\"\r\n        } correctamente.`,\r\n        show: true,\r\n      });\r\n\r\n      setRefreshTrigger((prev) => prev + 1);\r\n    } else {\r\n      setAlert({\r\n        type: \"error\",\r\n        message: \"Hubo un error al procesar la solicitud.\",\r\n        show: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const openRequestModal = (\r\n    request: Request,\r\n    action: \"approve\" | \"reject\" | \"revision\"\r\n  ) => {\r\n    setSelectedRequest(request);\r\n    setRequestAction(action);\r\n    setMessage(\"\");\r\n    setFlag(true);\r\n    setIsRequestModalOpen(true);\r\n  };\r\n\r\n  const closeRequestModal = () => {\r\n    setIsRequestModalOpen(false);\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const closeConfirmationModal = () => {\r\n    setIsConfirmationModalOpen(false);\r\n  };\r\n\r\n  const goToNextPage = useCallback(\r\n    () => setCurrentPage((prev) => prev + 1),\r\n    []\r\n  );\r\n\r\n  const goToPreviousPage = useCallback(\r\n    () => setCurrentPage((prev) => Math.max(prev - 1, 1)),\r\n    []\r\n  );\r\n\r\n  const goToPage = useCallback((page: number) => setCurrentPage(page), []);\r\n\r\n  const handleEntriesPerPageChange = (\r\n    e: React.ChangeEvent<HTMLSelectElement>\r\n  ) => {\r\n    setEntriesPerPage(Number(e.target.value));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const headers: Header<Request>[] = [\r\n    { label: \"ID\", key: \"id\", type: \"number\" },\r\n    { label: \"Fecha\", key: \"date\", type: \"date\" },\r\n    {\r\n      label: \"Operación\",\r\n      key: \"operation\",\r\n      type: \"status\",\r\n      statusMapping: {\r\n        agregar: {\r\n          label: \"Agregar\",\r\n          className:\r\n            \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\",\r\n        },\r\n        editar: {\r\n          label: \"Editar\",\r\n          className:\r\n            \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\",\r\n        },\r\n      },\r\n    },\r\n    { label: \"Mensaje\", key: \"responseMessage\", type: \"string\" },\r\n    { label: \"Usuario\", key: \"userEmail\", type: \"string\" },\r\n    { label: \"Propiedad\", key: \"projectName\", type: \"string\" },\r\n    {\r\n      label: \"Estado\",\r\n      key: \"statusRequestName\",\r\n      type: \"status\",\r\n      statusMapping: {\r\n        aprobado: {\r\n          label: \"Aprobado\",\r\n          className:\r\n            \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\",\r\n        },\r\n        rechazado: {\r\n          label: \"Rechazado\",\r\n          className:\r\n            \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\",\r\n        },\r\n        pendiente: {\r\n          label: \"Pendiente\",\r\n          className:\r\n            \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\",\r\n        },\r\n        revision: {\r\n          label: \"Revisión\",\r\n          className:\r\n            \"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200\",\r\n        },\r\n      },\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      icon: Eye,\r\n      title: \"Ver Propiedad\",\r\n      className: \"text-green-500 hover:text-green-600\",\r\n      redirectUrl: (item: Request) => `/admin/solicitudes/${item.projectId}`,\r\n      openInNewTab: false,\r\n    },\r\n    {\r\n      icon: CheckCircle,\r\n      title: \"Responder Solicitud\",\r\n      className: \"text-blue-500 hover:text-blue-600\",\r\n      onClick: (item: Request) => openRequestModal(item, \"approve\"),\r\n      shouldRender: (item: Request) =>\r\n        item.statusRequestName.toLowerCase() === \"pendiente\",\r\n    },\r\n  ];\r\n\r\n  const actionLabels = {\r\n    approve: {\r\n      title: \"Confirmar Aprobación\",\r\n      verb: \"aprobar\",\r\n      result: \"aprobada\",\r\n    },\r\n    reject: {\r\n      title: \"Confirmar Rechazo\",\r\n      verb: \"rechazar\",\r\n      result: \"rechazada\",\r\n    },\r\n    revision: {\r\n      title: \"Confirmar Envío a Revisión\",\r\n      verb: \"enviar a revisión\",\r\n      result: \"en revisión\",\r\n    },\r\n  };\r\n\r\n  const actionInfo = actionLabels[requestAction] ?? actionLabels[\"approve\"];\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-24 pb-10\">\r\n      <h1 className=\"mb-6 pb-5 text-center text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        Gestión de Solicitudes\r\n      </h1>\r\n\r\n      {showSkeleton ? (\r\n        <TableSkeleton />\r\n      ) : (\r\n        <Table<Request>\r\n          data={requests}\r\n          headers={headers}\r\n          totalEntries={totalEntries}\r\n          entry=\"solicitudes\"\r\n          currentPage={currentPage}\r\n          goToPage={goToPage}\r\n          goToNextPage={goToNextPage}\r\n          goToPreviousPage={goToPreviousPage}\r\n          entriesPerPage={entriesPerPage}\r\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\r\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\r\n          actions={actions}\r\n        />\r\n      )}\r\n\r\n      {isRequestModalOpen && selectedRequest && (\r\n        <RequestModal\r\n          show={isRequestModalOpen}\r\n          flag={flag}\r\n          onClose={closeRequestModal}\r\n          onSubmit={handleConfirmSubmit}\r\n          handleChange={(e) => {\r\n            setMessage(e.target.value);\r\n            validateField(\"messageError\", e.target.value);\r\n          }}\r\n          message={message}\r\n          actionType={requestAction}\r\n          errors={errors}\r\n          setRequestAction={(action) => {\r\n            setRequestAction(action);\r\n            validateField(\"actionTypeError\", action);\r\n            setFlag(false);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {isConfirmationModalOpen && selectedRequest && (\r\n        <ModalConfirmation\r\n          isOpen={isConfirmationModalOpen}\r\n          onClose={handleCloseConfirmationModal}\r\n          onConfirm={handleConfirmedAction}\r\n          title={actionInfo.title}\r\n          message={`¿Estás seguro de que deseas ${actionInfo.verb} esta solicitud? Una vez ${actionInfo.result}, no se podrá modificar la respuesta.`}\r\n          confirmLabel={\r\n            actionInfo.verb.charAt(0).toUpperCase() + actionInfo.verb.slice(1)\r\n          }\r\n          cancelLabel=\"Cancelar\"\r\n        />\r\n      )}\r\n\r\n      {alert.show && (\r\n        <Alert\r\n          type={alert.type!}\r\n          message={alert.message}\r\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "usuarios": {
        "page.tsx": "\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { useCallback } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Plus, Eye } from \"lucide-react\";\nimport { User, UserData, Header } from \"@/lib/definitios\";\nimport { useUsers } from \"@/app/hooks/users/useUsers\";\nimport { useUserValidation } from \"@/app/hooks/users/useUserValidation\";\nimport { useUserApi } from \"@/app/hooks/users/useUserApi\";\nimport { useUsersMetadata } from \"@/app/hooks/users/useUsersMetadata\";\nimport Table from \"@/app/ui/table/table\";\nimport TableSkeleton from \"@/app/ui/skeletons/tableSkeleton\";\nimport UserProjectsModal from \"@/app/ui/users/userProjectsModal \";\nimport ModalConfirmation from \"@/app/ui/modals/modalConfirmation\";\nimport Alert from \"@/app/ui/alert\";\n\nconst UserModal = dynamic(() => import(\"@/app/ui/users/userModal\"), {\n  ssr: false,\n});\n\nexport default function UsersPage() {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [modalOpen, setModalOpen] = useState(false);\n  const [editUser, setEditUser] = useState<UserData | null>(null);\n  const [registerUser, setRegisterUser] = useState<UserData>({});\n  const [tempUser, setTempUser] = useState<UserData | null>(null);\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\n  const [isUserProjectsModalOpen, setIsUserProjectsModalOpen] = useState(false);\n  const [selectedUserId, setSelectedUserId] = useState<number | null>(null);\n  const [confirmationAction, setConfirmationAction] = useState<\n    \"register\" | \"edit\" | null\n  >(null);\n  const [flag, setFlag] = useState(true);\n  const [alert, setAlert] = useState({\n    type: \"\" as \"success\" | \"error\" | null,\n    message: \"\",\n    show: false,\n  });\n\n  const { users, totalEntries, isLoadingUsers, refetchUsers } = useUsers(\n    currentPage,\n    entriesPerPage,\n    searchTerm\n  );\n  const { roles, genders, memberships } = useUsersMetadata();\n\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\n  const showSkeleton = !hasLoadedOnce && isLoadingUsers;\n  if (!isLoadingUsers && !hasLoadedOnce) {\n    setHasLoadedOnce(true);\n  }\n\n  const { errors, validateFields } = useUserValidation(\n    tempUser || {},\n    !!editUser\n  );\n\n  const { submitUser } = useUserApi();\n\n  const debouncedSearch = useDebouncedCallback((term: string) => {\n    setSearchTerm(term);\n    setCurrentPage(1);\n  }, 500);\n\n  const filteredMemberships = useMemo(() => {\n    return memberships.filter((membership) => membership.id !== 1004);\n  }, [memberships]);\n\n  const handleEditClick = (user: User) => {\n    setEditUser(user);\n    setTempUser({ ...user });\n    setModalOpen(true);\n  };\n\n  const handleRegisterClick = () => {\n    setEditUser(null);\n    setTempUser({});\n    setModalOpen(true);\n  };\n\n  const handleConfirmedAction = async () => {\n    if (!tempUser) {\n      return;\n    }\n\n    const success = await submitUser(tempUser, confirmationAction!);\n\n    if (success) {\n      setModalOpen(false);\n      setIsConfirmationModalOpen(false);\n      setFlag(true);\n\n      if (confirmationAction === \"edit\") {\n        setEditUser(tempUser);\n      }\n\n      await refetchUsers();\n\n      setAlert({\n        type: \"success\",\n        message: `Usuario ${\n          confirmationAction === \"edit\" ? \"editado\" : \"registrado\"\n        } correctamente.`,\n        show: true,\n      });\n    } else {\n      setIsConfirmationModalOpen(false);\n      setAlert({\n        type: \"error\",\n        message: \"Lo sentimos, algo salió mal, inténtalo más tarde.\",\n        show: true,\n      });\n    }\n  };\n\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setFlag(false);\n\n    const isValid = await validateFields();\n\n    if (!isValid) {\n      return;\n    }\n\n    setConfirmationAction(editUser ? \"edit\" : \"register\");\n    setIsConfirmationModalOpen(true);\n  };\n\n  const handleCloseConfirmationModal = () => {\n    setIsConfirmationModalOpen(false);\n    setFlag(true);\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => {\n    const { name, value, type } = e.target;\n    const newValue =\n      type === \"checkbox\" ? (e.target as HTMLInputElement).checked : value;\n\n    const updateNestedValue = (obj: any, path: string, value: any) => {\n      const keys = path.split(\".\");\n      let current = obj;\n\n      keys.forEach((key, index) => {\n        if (index === keys.length - 1) {\n          current[key] = value;\n        } else {\n          if (!current[key]) current[key] = {};\n          current = current[key];\n        }\n      });\n\n      return { ...obj };\n    };\n\n    setTempUser((prev) => {\n      const updatedUser = updateNestedValue(prev || {}, name, newValue);\n      return updatedUser;\n    });\n  };\n\n  const goToNextPage = useCallback(() => {\n    setCurrentPage((prevPage) => prevPage + 1);\n  }, []);\n\n  const goToPreviousPage = useCallback(() => {\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\n  }, []);\n\n  const goToPage = useCallback((pageNumber: number) => {\n    setCurrentPage(pageNumber);\n  }, []);\n\n  const handleEntriesPerPageChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    setEntriesPerPage(Number(e.target.value));\n    setCurrentPage(1);\n  };\n\n  const openUserProjectsModal = (userId: number) => {\n    setSelectedUserId(userId);\n    setIsUserProjectsModalOpen(true);\n  };\n\n  const headers: Header<User>[] = [\n    { label: \"Id\", key: \"id\", type: \"number\" },\n    { label: \"Username\", key: \"username\", type: \"string\" },\n    { label: \"Nombres\", key: \"names\", type: \"string\" },\n    { label: \"Apellidos\", key: \"lastnames\", type: \"string\" },\n    { label: \"Email\", key: \"email\", type: \"string\" },\n    { label: \"Teléfono\", key: \"phoneNumber\", type: \"string\" },\n    { label: \"Género\", key: \"gender.name\", type: \"string\" },\n    { label: \"Estado\", key: \"state\", type: \"boolean\" },\n    { label: \"Fecha de registro\", key: \"registrationDate\", type: \"date\" },\n    { label: \"Última conexión\", key: \"lastLogin\", type: \"date\" },\n    { label: \"Rol\", key: \"role.name\", type: \"string\" },\n    { label: \"Membresía\", key: \"membership.name\", type: \"string\" },\n    { label: \"Num. Propiedades\", key: \"totalProperties\", type: \"number\" },\n    { label: \"Prov. autenticación\", key: \"provider\", type: \"string\" },\n  ];\n\n  const actions = [\n    {\n      icon: Eye,\n      title: \"Ver Propiedades\",\n      className: \"text-green-500 hover:text-green-600\",\n      onClick: (item: User) => openUserProjectsModal(item.id),\n      shouldRender: (item: User) => (item.totalProperties ?? 0) > 0,\n    },\n  ];\n\n  return (\n    <div className=\"container mx-auto mt-24 pb-10\">\n      <h1 className=\"mb-6 pb-5 text-center text-3xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        Gestión de Usuarios\n      </h1>\n      <div className=\"mb-4 flex justify-center px-4 md:justify-end\">\n        <button\n          onClick={handleRegisterClick}\n          className=\"flex items-center space-x-2 whitespace-nowrap rounded-lg bg-green-600 px-6 py-2 text-white shadow-md transition-colors hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800\"\n        >\n          <Plus className=\"mr-2 size-6\" />\n          <span>Registrar Usuario</span>\n        </button>\n      </div>\n\n      {showSkeleton ? (\n        <TableSkeleton />\n      ) : (\n        <Table\n          data={users}\n          headers={headers}\n          totalEntries={totalEntries}\n          entry=\"usuarios\"\n          currentPage={currentPage}\n          goToPage={goToPage}\n          goToNextPage={goToNextPage}\n          goToPreviousPage={goToPreviousPage}\n          entriesPerPage={entriesPerPage}\n          handleEntriesPerPageChange={handleEntriesPerPageChange}\n          handleSearchChange={(e) => debouncedSearch(e.target.value)}\n          onEditClick={handleEditClick}\n          actions={actions}\n        />\n      )}\n\n      {modalOpen && (\n        <UserModal\n          show={modalOpen}\n          onClose={() => {\n            setModalOpen(false);\n            setFlag(true);\n          }}\n          onSubmit={handleConfirmSubmit}\n          handleChange={handleChange}\n          user={tempUser || {}}\n          roles={roles}\n          genders={genders}\n          memberships={filteredMemberships}\n          errors={errors || {}}\n          flag={flag}\n        />\n      )}\n\n      {isUserProjectsModalOpen && selectedUserId && (\n        <UserProjectsModal\n          show={isUserProjectsModalOpen}\n          onClose={() => setIsUserProjectsModalOpen(false)}\n          userId={selectedUserId}\n        />\n      )}\n\n      {isConfirmationModalOpen && (\n        <ModalConfirmation\n          isOpen={isConfirmationModalOpen}\n          onClose={handleCloseConfirmationModal}\n          onConfirm={handleConfirmedAction}\n          title=\"Confirmar Acción\"\n          message={`¿Estás seguro de que quieres ${\n            confirmationAction === \"edit\" ? \"editar\" : \"registrar\"\n          } este usuario?`}\n          confirmLabel=\"Confirmar\"\n          cancelLabel=\"Cancelar\"\n        />\n      )}\n\n      {alert.show && (\n        <Alert\n          type={alert.type!}\n          message={alert.message}\n          onClose={() => setAlert({ type: null, message: \"\", show: false })}\n        />\n      )}\n    </div>\n  );\n}\n"
      }
    },
    "api": {
      "auth": {
        "[...nextauth]": {
          "route.ts": "import { authOptions } from \"@/lib/auth\";\nimport NextAuth from \"next-auth\";\n\nconst handler = NextAuth(authOptions);\nexport { handler as GET, handler as POST };\n"
        }
      },
      "check-name": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\n\r\nexport async function GET(request: Request) {\r\n  try {\r\n    const startTime = performance.now();\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const table = searchParams.get(\"table\");\r\n    const name = searchParams.get(\"name\");\r\n    const id = searchParams.get(\"id\");\r\n\r\n    if (!name) {\r\n      return NextResponse.json(\r\n        { error: \"El nombre es requerido\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const procedureName = `check_${table}_name`;\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      `CALL ${procedureName}(?, ?)`,\r\n      [id || null, name]\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const total = (result[0] as RowDataPacket[])[0]?.total || 0;\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({ total }, { status: 200 });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Error al verificar el nombre\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "memberships": {
        "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { Membership } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) => perm.name === \"Gestionar membresias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { searchParams } = new URL(req.url);\n\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\n    const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || null);\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query(\"CALL get_memberships(?, ?, ?)\", [\n      page,\n      pageSize,\n      searchTerm,\n    ]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const rows = (result as RowDataPacket[][])[0];\n    const totalEntries = (result as RowDataPacket[][])[1][0].totalEntries - 1;\n\n    const memberships = rows as Membership[];\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({ memberships, totalEntries });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"Error al recuperar las membresías\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) => perm.name === \"Gestionar membresias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const {\n      id,\n      name,\n      benefits,\n      price,\n      discountThreeMonths,\n      discountSixMonths,\n      discountTwelveMonths,\n      maxProjects,\n      projectsFeatured,\n    } = await req.json();\n\n    if (\n      id === undefined ||\n      name === undefined ||\n      benefits === undefined ||\n      price === undefined ||\n      maxProjects === undefined\n    ) {\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL update_membership(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [\n      id,\n      name,\n      benefits,\n      price,\n      discountThreeMonths,\n      discountSixMonths,\n      discountTwelveMonths,\n      maxProjects,\n      projectsFeatured,\n      userId,\n    ]);\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      message: \"Membresía actualizada correctamente\",\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"Error al actualizar la membresía\" },\n      { status: 500 }\n    );\n  }\n}\n"
      },
      "projects": {
        "[id]": {
          "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { Project, ProjectSummary } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET(request: Request, context: any) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  try {\n    const session = await getServerSession(authOptions);\n    const permissions = session?.user?.permissions || [];\n\n    const hasPermission = permissions?.some(\n      (perm) =>\n        perm.name === \"Gestionar proyectos\" ||\n        perm.name === \"Gestionar propiedades\"\n    );\n\n    const params = await context.params;\n\n    if (!params?.id) {\n      return NextResponse.json(\n        { error: \"Id del proyecto no proporcionado\" },\n        { status: 400 }\n      );\n    }\n\n    const id = decodeURIComponent(params.id).replace(/-/g, \" \");\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_project_by_id(?)\",\n      [id]\n    );\n\n    const dbEndTime = performance.now(); // Finaliza medición de la consulta del proyecto\n\n    const [\n      projectsRows = [],\n      nearbyServicesRows = [],\n      commonAreasRows = [],\n      projectMediaRows = [],\n    ] = result;\n\n    if (projectsRows.length === 0) {\n      return NextResponse.json(\n        { error: \"Proyecto no encontrado\" },\n        { status: 404 }\n      );\n    }\n\n    const project: Project = {\n      id: projectsRows[0].id,\n      name: projectsRows[0].name,\n      state: projectsRows[0].state,\n      price: projectsRows[0].price,\n      totalArea: projectsRows[0].totalArea,\n      builtArea: projectsRows[0].builtArea,\n      freeHeight: projectsRows[0].freeHeight,\n      width: projectsRows[0].width,\n      length: projectsRows[0].length,\n      parkingSpots: projectsRows[0].parkingSpots,\n      elevator: projectsRows[0].elevator,\n      heavyParking: projectsRows[0].heavyParking,\n      availableUnits: projectsRows[0].availableUnits,\n      bathrooms: projectsRows[0].bathrooms,\n      bedrooms: projectsRows[0].bedrooms,\n      lobbies: projectsRows[0].lobbies,\n      towers: projectsRows[0].towers,\n      storageUnits: projectsRows[0].storageUnits,\n      socioeconomicLevel: projectsRows[0].socioeconomicLevel,\n      floorNumber: projectsRows[0].floorNumber,\n      yearBuilt: projectsRows[0].yearBuilt,\n      customizationOptions: projectsRows[0].customizationOptions,\n      terrace: projectsRows[0].terrace,\n      balcony: projectsRows[0].balcony,\n      garden: projectsRows[0].garden,\n      laundryArea: projectsRows[0].laundryArea,\n      complexName: projectsRows[0].complexName,\n      shortDescription: projectsRows[0].shortDescription,\n      detailedDescription: projectsRows[0].detailedDescription,\n      address: projectsRows[0].address,\n      latitude: Number(projectsRows[0].latitude),\n      longitude: Number(projectsRows[0].longitude),\n      availableDate: projectsRows[0].availableDate\n        ? new Date(projectsRows[0].availableDate)\n        : undefined,\n      propertyType: {\n        id: projectsRows[0].propertyTypeId,\n        name: projectsRows[0].propertyTypeName,\n      },\n      projectType: {\n        id: projectsRows[0].projectTypeId,\n        name: projectsRows[0].projectTypeName,\n      },\n      housingType: {\n        id: projectsRows[0].housingTypeId,\n        name: projectsRows[0].housingTypeName,\n      },\n      city: {\n        id: projectsRows[0].cityId,\n        name: projectsRows[0].cityName,\n        departament: {\n          id: projectsRows[0].departamentId,\n          name: projectsRows[0].departamentName,\n        },\n      },\n      membership: hasPermission\n        ? projectsRows[0].membership\n        : \"Membresía Privada\",\n      statusProject: {\n        id: projectsRows[0].statusProjectId,\n        name: projectsRows[0].statusProjectName,\n      },\n      ownerId: projectsRows[0].ownerId,\n      email: projectsRows[0].email,\n      residentialProjectId: projectsRows[0].residentialProjectId,\n      warehouseProjectId: projectsRows[0].warehouseProjectId,\n      commonAreas: [],\n      nearbyServices: [],\n      projectMedia: [],\n    };\n\n    project.nearbyServices = nearbyServicesRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    project.commonAreas = commonAreasRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    project.projectMedia = projectMediaRows.map((row: any) => ({\n      id: row.id,\n      url: row.url,\n      tag: row.tag,\n      description: row.description,\n      projectId: row.project,\n      commonArea: row.commonAreaId,\n      imageType: row.imageTypeId,\n      type: row.commonAreaName ?? row.imageTypeName ?? \"Sin categoría\",\n    }));\n\n    const dbRecommendedStartTime = performance.now(); // Inicia medición de la consulta de proyectos recomendados\n\n    const [recommendedResult] = await db.query<RowDataPacket[][]>(\n      \"CALL get_recommended_projects(1000, ?, 10, 5, 3, 2)\",\n      [project.propertyType.id]\n    );\n\n    const dbRecommendedEndTime = performance.now(); // Finaliza medición de la consulta de proyectos recomendados\n\n    const recommendedRows = (recommendedResult as RowDataPacket[][])[0] || [];\n\n    const [recommendedProjectMediaRows = []] = result;\n\n    let projectRecommended: ProjectSummary[] = [];\n\n    if (recommendedProjectMediaRows.length > 0) {\n      const projectMediaMap: Record<\n        number,\n        { url: string; tag: string; projectId: number }[]\n      > = {};\n      recommendedProjectMediaRows.forEach((media: any) => {\n        if (!projectMediaMap[media.projectId]) {\n          projectMediaMap[media.projectId] = [];\n        }\n        projectMediaMap[media.projectId].push({\n          url: media.url,\n          tag: media.tag,\n          projectId: media.projectId,\n        });\n      });\n\n      projectRecommended = recommendedRows.map((row: any) => ({\n        id: row.id,\n        name: row.name,\n        price: row.price,\n        totalArea: row.area,\n        address: row.address,\n        longitude: row.longitude,\n        latitude: row.latitude,\n        city: {\n          id: row.cityId,\n          name: row.cityName,\n          departament: {\n            id: row.departamentId,\n            name: row.departamentName,\n          },\n        },\n        projectMedia: projectMediaMap[row.id] || [],\n      }));\n    }\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n    const dbRecommendedDuration = dbRecommendedEndTime - dbRecommendedStartTime;\n\n    const response = NextResponse.json({ project, projectRecommended });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}, db-recommended;dur=${dbRecommendedDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"Error al buscar el proyecto\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(req: Request, context: any) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n    const { params } = await context;\n    const projectId = Number(params?.id);\n\n    if (!projectId) {\n      return NextResponse.json(\n        { error: \"Id del proyecto no proporcionado\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL delete_project(?, ?)\", [projectId, userId]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json(\n      { message: \"Proyecto eliminado correctamente.\" },\n      { status: 200 }\n    );\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al eliminar el proyecto:\", error);\n    return NextResponse.json(\n      { error: \"Error al eliminar el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n"
        },
        "metadata": {
          "basic-metadata": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport {\n  HousingType,\n  propertyType,\n  NearbyService,\n  CommonArea,\n} from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nfunction mapResults<T>(\n  result: RowDataPacket[] | undefined,\n  mapper: (row: any) => T\n): T[] {\n  if (!result) return [];\n  return result.map(mapper);\n}\n\nexport async function GET() {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_basic_metadata()\"\n    );\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    if (!result || result.length < 5) {\n      throw new Error(\"No se obtuvieron todos los resultados esperados.\");\n    }\n\n    const [\n      commonAreasResult,\n      housingTypesResult,\n      nearbyServicesResult,\n      propertyTypesResult,\n    ] = result;\n\n    const commonAreas: CommonArea[] = mapResults(commonAreasResult, (row) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const housingTypes: HousingType[] = mapResults(\n      housingTypesResult,\n      (row) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const nearbyServices: NearbyService[] = mapResults(\n      nearbyServicesResult,\n      (row) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const propertyTypes: propertyType[] = mapResults(\n      propertyTypesResult,\n      (row) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      commonAreas,\n      housingTypes,\n      nearbyServices,\n      propertyTypes,\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de los datos: \", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los datos\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "cities": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { City, Departament } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nfunction mapResults<T>(\n  result: RowDataPacket[] | undefined,\n  mapper: (row: any) => T\n): T[] {\n  if (!result) return [];\n  return result.map(mapper);\n}\n\nexport async function GET() {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_cities_departaments()\"\n    );\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const [departamentsResult, citiesResult] = result;\n\n    const departaments: Departament[] = mapResults(\n      departamentsResult,\n      (row) => ({\n        id: row.departamentId,\n        name: row.departamentName,\n      })\n    );\n\n    const cities: City[] = mapResults(citiesResult, (row) => ({\n      id: row.cityId,\n      name: row.cityName,\n      departament: {\n        id: row.departamentId,\n        name: row.departamentName,\n      },\n    }));\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({ departaments, cities });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de los datos: \", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los datos\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "image-types": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { ImageType } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET() {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query(\"CALL get_image_types()\");\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const rows = (result as RowDataPacket[][])[0];\n\n    const ImageTypes: ImageType[] = rows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n      description: row.description,\n      maxImagesAllowed: row.maxImagesAllowed,\n      isRequired: row.isRequired,\n    }));\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json(ImageTypes);\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de tipos de imagenes: \", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los tipos de imagenes\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "project-media": {
            "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function POST(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { projectMedia } = await req.json();\n\n    if (\n      !projectMedia ||\n      !Array.isArray(projectMedia) ||\n      projectMedia.length === 0\n    ) {\n      return NextResponse.json(\n        { error: \"El cuerpo de la solicitud no contiene datos válidos.\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL insert_multiple_project_media(?)\", [\n      JSON.stringify(projectMedia),\n    ]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      message: \"Medios insertados correctamente.\",\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"❌ Error al insertar los medios:\", error);\n    return NextResponse.json(\n      { error: \"Error al insertar los medios.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { projectMedia } = await req.json();\n\n    if (\n      !projectMedia ||\n      !Array.isArray(projectMedia) ||\n      projectMedia.length === 0\n    ) {\n      return NextResponse.json(\n        { error: \"El cuerpo de la solicitud no contiene datos válidos.\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL update_multiple_project_media(?)\", [\n      JSON.stringify(projectMedia),\n    ]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      message: \"Medios actualizados correctamente.\",\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"❌ Error al actualizar los medios:\", error);\n    return NextResponse.json(\n      { error: \"Error al actualizar los medios.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const { mediaIds } = await req.json();\n\n    if (!mediaIds || !Array.isArray(mediaIds) || mediaIds.length === 0) {\n      return NextResponse.json(\n        {\n          error:\n            \"El cuerpo de la solicitud no contiene IDs válidos para eliminar.\",\n        },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL delete_multiple_project_media(?)\", [\n      JSON.stringify(mediaIds),\n    ]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      message: \"Medios eliminados correctamente.\",\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"❌ Error al eliminar los medios:\", error);\n    return NextResponse.json(\n      { error: \"Error al eliminar los medios.\" },\n      { status: 500 }\n    );\n  }\n}\n"
          },
          "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport {\n  City,\n  HousingType,\n  propertyType,\n  NearbyService,\n  CommonArea,\n  MembershipSummary,\n} from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\n\nexport async function GET() {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  try {\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query<RowDataPacket[][]>(\"CALL get_metadata()\");\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    if (!result || result.length < 6) {\n      throw new Error(\"No se obtuvieron todos los resultados esperados.\");\n    }\n\n    const [\n      citiesRows = [],\n      commonAreasRows = [],\n      housingTypesRows = [],\n      nearbyServicesRows = [],\n      propertyTypesRows = [],\n      membershipsRows = [],\n    ] = result;\n\n    const cities: City[] = citiesRows.map((row: any) => ({\n      id: row.cityId,\n      name: row.cityName,\n      departament: {\n        id: row.departamentId,\n        name: row.departamentName,\n      },\n    }));\n\n    const commonAreas: CommonArea[] = commonAreasRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const housingTypes: HousingType[] = housingTypesRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const nearbyServices: NearbyService[] = nearbyServicesRows.map(\n      (row: any) => ({\n        id: row.id,\n        name: row.name,\n      })\n    );\n\n    const propertyTypes: propertyType[] = propertyTypesRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n    }));\n\n    const memberships: MembershipSummary[] = membershipsRows.map(\n      (row: any) => ({\n        id: row.membershipId,\n        name: row.membershipName,\n      })\n    );\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      cities,\n      commonAreas,\n      housingTypes,\n      nearbyServices,\n      propertyTypes,\n      memberships,\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al recuperar los datos:\", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los datos\" },\n      { status: 500 }\n    );\n  }\n}\n"
        },
        "owner": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { UserData } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n  const hasPermission = permissions?.some(\r\n    (perm) =>\r\n      perm.name === \"Gestionar proyectos\" ||\r\n      perm.name === \"Gestionar propiedades\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const email = searchParams.get(\"email\");\r\n\r\n    if (!email) {\r\n      return NextResponse.json(\r\n        { error: \"Debe proporcionar un nombre de usuario\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_owner(?)\",\r\n      [email]\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    if (!result || result.length === 0 || result[0].length === 0) {\r\n      return NextResponse.json(\r\n        { error: \"Usuario no encontrado\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    const userRow = result[0][0];\r\n\r\n    const user: UserData = {\r\n      id: userRow.id,\r\n      username: userRow.username,\r\n      names: userRow.names,\r\n      lastnames: userRow.lastnames,\r\n      email: userRow.email,\r\n      phoneNumber: userRow.phoneNumber,\r\n    };\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({ user });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al recuperar el usuario:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar el usuario\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\nimport { sendEmail } from \"@/lib/email/sendEmail\";\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\n\nconst formatDateForMySQL = (date: any) => {\n  if (!date) return null;\n  const validDate = date instanceof Date ? date : new Date(date);\n  if (isNaN(validDate.getTime())) {\n    throw new Error(\"Fecha inválida proporcionada\");\n  }\n  const year = validDate.getFullYear();\n  const month = String(validDate.getMonth() + 1).padStart(2, \"0\");\n  const day = String(validDate.getDate()).padStart(2, \"0\");\n\n  return `${year}-${month}-${day}`;\n};\n\nexport async function GET(req: Request) {\n  try {\n    const session = await getServerSession(authOptions);\n    const permissions = session?.user?.permissions || [];\n\n    const hasPermission = permissions?.some(\n      (perm) => perm.name === \"Gestionar proyectos\"\n    );\n\n    const url = new URL(req.url);\n    const searchParams = url.searchParams;\n\n    // 🔹 Inicia medición de tiempo total de API\n    const startAPITime = performance.now();\n\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\n    const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || \"\");\n    const price = parseInt(searchParams.get(\"price\") || \"\", 10) || null;\n    const area = searchParams.get(\"area\");\n    const bedrooms = searchParams.get(\"bedrooms\");\n    const bathrooms = searchParams.get(\"bathrooms\");\n    const lobbies = searchParams.get(\"lobbies\");\n    const projectTypeId = parseInt(\n      searchParams.get(\"projectTypeId\") || \"1\",\n      10\n    );\n\n    const minLat = searchParams.has(\"minLat\")\n      ? parseFloat(searchParams.get(\"minLat\")!)\n      : null;\n    const maxLat = searchParams.has(\"maxLat\")\n      ? parseFloat(searchParams.get(\"maxLat\")!)\n      : null;\n    const minLng = searchParams.has(\"minLng\")\n      ? parseFloat(searchParams.get(\"minLng\")!)\n      : null;\n    const maxLng = searchParams.has(\"maxLng\")\n      ? parseFloat(searchParams.get(\"maxLng\")!)\n      : null;\n\n    const parseCommaSeparated = (param: string | null): string | null =>\n      param ? JSON.stringify(param.split(\",\").map(Number)) : null;\n\n    const cities = parseCommaSeparated(searchParams.get(\"cities\"));\n    const propertyTypes = parseCommaSeparated(\n      searchParams.get(\"propertyTypes\")\n    );\n    const housingTypes = parseCommaSeparated(searchParams.get(\"housingTypes\"));\n    const memberships = parseCommaSeparated(searchParams.get(\"memberships\"));\n    const commonAreas = parseCommaSeparated(searchParams.get(\"commonAreas\"));\n    const nearbyServices = parseCommaSeparated(\n      searchParams.get(\"nearbyServices\")\n    );\n\n    const validatedPage = page > 0 ? page : 1;\n    const validatedPageSize = pageSize > 0 ? pageSize : 16;\n\n    // 🔹 Inicia medición de la consulta SQL\n    const startDBQuery = performance.now();\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_projects(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\n      [\n        validatedPage,\n        validatedPageSize,\n        cities || null,\n        propertyTypes || null,\n        housingTypes || null,\n        memberships || null,\n        price || null,\n        area || null,\n        bedrooms || null,\n        bathrooms || null,\n        lobbies || null,\n        projectTypeId || 1,\n        commonAreas || null,\n        nearbyServices || null,\n        searchTerm,\n        minLat || null,\n        maxLat || null,\n        minLng || null,\n        maxLng || null,\n      ]\n    );\n    const endDBQuery = performance.now();\n\n    // 🔹 Inicia medición de procesamiento de datos\n    const startProcessing = performance.now();\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\n      result;\n\n    const totalEntries = totalEntriesRow.totalEntries || 0;\n\n    const projectMediaMap: Record<\n      number,\n      { url: string; tag: string; projectId: number }[]\n    > = {};\n    projectMediaRows.forEach((media: any) => {\n      if (!projectMediaMap[media.projectId]) {\n        projectMediaMap[media.projectId] = [];\n      }\n      projectMediaMap[media.projectId].push({\n        url: media.url,\n        tag: media.tag,\n        projectId: media.projectId,\n      });\n    });\n\n    const projects: ProjectSummary[] = projectsRows.map((row: any) => ({\n      id: row.id,\n      name: row.name,\n      price: row.price || null,\n      totalArea: row.area,\n      bedrooms: row.bedrooms || null,\n      bathrooms: row.bathrooms || null,\n      parkingSpots: row.parkingSpots || null,\n      longitude: row.longitude as number,\n      latitude: row.latitude as number,\n      address: row.address,\n      city: {\n        id: row.cityId,\n        name: row.cityName,\n        departament: {\n          id: row.departamentId,\n          name: row.departamentName,\n        },\n      },\n      email: hasPermission ? row.email : \"Usuario Privado\",\n      projectMedia: projectMediaMap[row.id] || [],\n    }));\n    const endProcessing = performance.now();\n\n    // 🔹 Finaliza medición del tiempo total de API\n    const endAPITime = performance.now();\n\n    const response = NextResponse.json({ projects, totalEntries });\n    response.headers.set(\n      \"Server-Timing\",\n      `db_query;dur=${(endDBQuery - startDBQuery).toFixed(2)}, processing;dur=${(endProcessing - startProcessing).toFixed(2)}, total_api;dur=${(endAPITime - startAPITime).toFixed(2)}`\n    );\n    return response;\n  } catch (error) {\n    console.error(\"Error en la búsqueda de propiedades: \", error);\n    return NextResponse.json(\n      { error: \"Fallo al buscar propiedades\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermissionToManageProperties =\n    permissions?.some((perm) => perm.name === \"Gestionar propiedades\") || false;\n\n  const client =\n    permissions?.some(\n      (perm) => perm.name === \"Gestionar propiedades propias\"\n    ) || false;\n\n  const hasPermission =\n    hasPermissionToManageProperties ||\n    permissions?.some(\n      (perm) =>\n        perm.name === \"Gestionar proyectos\" ||\n        perm.name === \"Gestionar propiedades propias\"\n    );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const projectData = await req.json();\n\n    const {\n      id,\n      name,\n      price,\n      builtArea,\n      totalArea,\n      freeHeight,\n      width,\n      length,\n      parkingSpots,\n      elevator,\n      heavyParking,\n      availableUnits,\n      bathrooms,\n      bedrooms,\n      lobbies,\n      towers,\n      storageUnits,\n      socioeconomicLevel,\n      floorNumber,\n      yearBuilt,\n      customizationOptions,\n      terrace,\n      balcony,\n      garden,\n      laundryArea,\n      complexName,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      availableDate,\n      propertyType,\n      housingType,\n      city,\n      membership,\n      projectType,\n      statusProject,\n      commonAreas,\n      nearbyServices,\n      residentialProjectId,\n      warehouseProjectId,\n      ownerId,\n      email,\n    } = projectData;\n\n    if (\n      !id ||\n      !name ||\n      !builtArea ||\n      !totalArea ||\n      !shortDescription ||\n      !detailedDescription ||\n      !address ||\n      !latitude ||\n      !longitude ||\n      !propertyType?.id ||\n      !city?.id ||\n      !city?.departament?.id\n    ) {\n      console.error(\"Faltan datos obligatorios para actualizar el proyecto.\");\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios para actualizar el proyecto.\" },\n        { status: 400 }\n      );\n    }\n\n    const commonAreaIds = commonAreas\n      ? JSON.stringify(commonAreas.map((area: { id: number }) => area.id))\n      : null;\n    const nearbyServiceIds = nearbyServices\n      ? JSON.stringify(\n          nearbyServices.map((service: { id: number }) => service.id)\n        )\n      : null;\n\n    const housingTypeId = housingType?.id || null;\n    const statusProjectId = statusProject?.id || null;\n\n    const queryParams = [\n      id,\n      name,\n      !client ? \"1\" : \"3\", //state\n      price,\n      builtArea,\n      totalArea,\n      freeHeight || null,\n      width || null,\n      length || null,\n      parkingSpots || 0,\n      elevator || 0,\n      availableUnits || 0,\n      heavyParking || null,\n      bedrooms || null,\n      bathrooms || 0,\n      lobbies || 0,\n      towers || null,\n      storageUnits || null,\n      socioeconomicLevel || null,\n      floorNumber || null,\n      yearBuilt || null,\n      customizationOptions || false,\n      balcony || false,\n      terrace || null,\n      garden || null,\n      laundryArea || false,\n      complexName || null,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      formatDateForMySQL(availableDate) || null,\n      city.id,\n      housingTypeId || null,\n      membership || 1001,\n      propertyType.id,\n      projectType.id,\n      statusProjectId || 1,\n      residentialProjectId || null,\n      warehouseProjectId || null,\n      commonAreaIds,\n      nearbyServiceIds,\n      hasPermissionToManageProperties\n        ? ownerId !== undefined && ownerId !== null\n          ? ownerId\n          : 1\n        : userId || null,\n    ];\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query(\n      \"CALL update_project(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\n      queryParams\n    );\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    if (!result) {\n      console.error(\"No se pudo obtener la respuesta de la base de datos.\");\n      return NextResponse.json(\n        { error: \"No se pudo actualizar el proyecto correctamente.\" },\n        { status: 500 }\n      );\n    } else if (!client) {\n      const emailContent = generateEmailTemplate(\n        name,\n        email ? email : ownerId ? ownerId : session.user.email\n      );\n      await sendEmail(\n        \"sebasirra13@gmail.com\",\n        \"Propiedad Editada en EdifiK\",\n        emailContent\n      );\n    }\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json(\n      {\n        message: \"Proyecto actualizado correctamente.\",\n      },\n      { status: 200 }\n    );\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al actualizar el proyecto:\", error);\n    return NextResponse.json(\n      { error: \"Error al actualizar el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermissionToManageProperties =\n    permissions?.some((perm) => perm.name === \"Gestionar propiedades\") || false;\n\n  const client =\n    permissions?.some(\n      (perm) => perm.name === \"Gestionar propiedades propias\"\n    ) || false;\n\n  const hasPermission =\n    hasPermissionToManageProperties ||\n    permissions?.some(\n      (perm) =>\n        perm.name === \"Gestionar proyectos\" ||\n        perm.name === \"Gestionar propiedades propias\"\n    );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const projectData = await req.json();\n\n    const {\n      name,\n      price,\n      builtArea,\n      totalArea,\n      freeHeight,\n      width,\n      length,\n      parkingSpots,\n      elevator,\n      heavyParking,\n      availableUnits,\n      bathrooms,\n      bedrooms,\n      lobbies,\n      towers,\n      storageUnits,\n      socioeconomicLevel,\n      floorNumber,\n      yearBuilt,\n      customizationOptions,\n      terrace,\n      balcony,\n      garden,\n      laundryArea,\n      complexName,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      availableDate,\n      propertyType,\n      housingType,\n      city,\n      membership,\n      projectType,\n      statusProject,\n      commonAreas,\n      nearbyServices,\n      ownerId,\n      email,\n    } = projectData;\n\n    if (\n      !name ||\n      !builtArea ||\n      !totalArea ||\n      !shortDescription ||\n      !detailedDescription ||\n      !address ||\n      !latitude ||\n      !longitude ||\n      !propertyType?.id ||\n      !city?.id ||\n      !city?.departament?.id\n    ) {\n      console.error(\"Faltan datos obligatorios para crear el proyecto.\");\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios para crear el proyecto.\" },\n        { status: 400 }\n      );\n    }\n\n    const commonAreaIds = commonAreas\n      ? JSON.stringify(commonAreas.map((area: { id: number }) => area.id))\n      : null;\n    const nearbyServiceIds = nearbyServices\n      ? JSON.stringify(\n          nearbyServices.map((service: { id: number }) => service.id)\n        )\n      : null;\n\n    const housingTypeId = housingType?.id || null;\n    const statusProjectId = statusProject?.id || null;\n\n    const queryParams = [\n      name,\n      !client ? \"1\" : \"2\", //state\n      price,\n      builtArea,\n      totalArea,\n      freeHeight || null,\n      width || null,\n      length || null,\n      parkingSpots || 0,\n      elevator || 0,\n      availableUnits || 0,\n      heavyParking || null,\n      bedrooms || null,\n      bathrooms || 0,\n      lobbies || 0,\n      towers || null,\n      storageUnits || null,\n      socioeconomicLevel || null,\n      floorNumber || null,\n      yearBuilt || null,\n      customizationOptions || false,\n      balcony || false,\n      terrace || null,\n      garden || null,\n      laundryArea || false,\n      complexName || null,\n      shortDescription,\n      detailedDescription,\n      address,\n      latitude,\n      longitude,\n      formatDateForMySQL(availableDate) || null,\n      city.id,\n      housingTypeId || null,\n      membership || 1001,\n      propertyType.id,\n      projectType.id,\n      statusProjectId || 1,\n      commonAreaIds,\n      nearbyServiceIds,\n      hasPermissionToManageProperties\n        ? ownerId !== undefined && ownerId !== null\n          ? ownerId\n          : 1\n        : userId || null,\n    ];\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query(\n      \"CALL create_project(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\",\n      queryParams\n    );\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const projectIdRow = (result as any[][])[0][0];\n    const projectId = projectIdRow?.projectId;\n\n    if (!projectId) {\n      console.error(\"No se pudo obtener el ID del proyecto.\");\n      return NextResponse.json(\n        { error: \"No se pudo crear el proyecto correctamente.\" },\n        { status: 500 }\n      );\n    } else if (client) {\n      const emailContent = generateEmailTemplate(\n        name,\n        email ? email : ownerId ? ownerId : session.user.email\n      );\n      await sendEmail(\n        \"sebasirra13@gmail.com\",\n        \"Nueva Propiedad Registrada en EdifiK\",\n        emailContent\n      );\n    }\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json(\n      {\n        message: \"Proyecto creado correctamente.\",\n        projectId,\n      },\n      { status: 200 }\n    );\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al crear la propiedad:\", error);\n    return NextResponse.json(\n      { error: \"Error al crear el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) =>\n      perm.name === \"Gestionar proyectos\" ||\n      perm.name === \"Gestionar propiedades\" ||\n      perm.name === \"Gestionar propiedades propias\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const url = new URL(req.url);\n    const projectId = parseInt(url.searchParams.get(\"id\") || \"\", 10);\n\n    if (!projectId) {\n      return NextResponse.json(\n        { error: \"ID del proyecto no proporcionado o inválido.\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL delete_project_state(?, ?)\", [projectId, userId]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json(\n      { message: \"Proyecto eliminado correctamente.\" },\n      { status: 200 }\n    );\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al eliminar el proyecto:\", error);\n    return NextResponse.json(\n      { error: \"Error al eliminar el proyecto.\" },\n      { status: 500 }\n    );\n  }\n}\n"
      },
      "requests": {
        "route.ts": "import { NextResponse, NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { Request } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: NextRequest) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar solicitudes\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  const { searchParams } = new URL(req.url);\r\n\r\n  const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n  const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n  const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || null);\r\n\r\n  try {\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_requests(?, ?, ?)\",\r\n      [page, pageSize, searchTerm]\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const [requestRows = [], [totalEntriesRow] = []] = result;\r\n\r\n    const totalEntries = totalEntriesRow?.totalEntries || 0;\r\n\r\n    const requests: Request[] = requestRows.map((row: any) => ({\r\n      id: row.id,\r\n      date: row.date,\r\n      operation: row.operation ? \"agregar\" : \"editar\",\r\n      responseMessage: row.responseMessage,\r\n      userId: row.userId,\r\n      userEmail: row.userEmail,\r\n      statusRequestName: row.statusRequestName,\r\n      projectId: row.projectId,\r\n      projectName: row.projectName,\r\n    }));\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      requests,\r\n      totalEntries,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al recuperar las solicitudes:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar las solicitudes\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(req: NextRequest) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar solicitudes\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { id, statusId, responseMessage } = await req.json();\r\n\r\n    if (!id || !statusId || !responseMessage) {\r\n      return NextResponse.json(\r\n        { error: \"Faltan datos obligatorios\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query(\"CALL update_request(?, ?, ?, ?)\", [\r\n      id,\r\n      statusId,\r\n      responseMessage,\r\n      userId,\r\n    ]);\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json(\r\n      { message: \"Solicitud actualizada correctamente\", result },\r\n      { status: 200 }\r\n    );\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al actualizar la solicitud:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al actualizar la solicitud\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n",
        "stream": {
          "route.ts": "import { NextRequest } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: NextRequest) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return new Response(\"No autenticado\", { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar solicitudes\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return new Response(\"Acceso denegado\", { status: 403 });\r\n  }\r\n\r\n  const encoder = new TextEncoder();\r\n  const stream = new ReadableStream({\r\n    async start(controller) {\r\n      const sendEvent = (data: any) => {\r\n        try {\r\n          if (controller.desiredSize !== null) {\r\n            // Solo enviar si el stream sigue abierto\r\n            controller.enqueue(\r\n              encoder.encode(`data: ${JSON.stringify(data)}\\n\\n`)\r\n            );\r\n          }\r\n        } catch (err) {\r\n          console.error(\"⚠️ Error en sendEvent: Stream cerrado\", err);\r\n        }\r\n      };\r\n\r\n      const heartbeat = setInterval(() => {\r\n        if (controller.desiredSize !== null) {\r\n          // Solo enviar si el stream sigue abierto\r\n          sendEvent({ type: \"heartbeat\", message: \"Conexión activa\" });\r\n        }\r\n      }, 10000); // Reducir a 10s\r\n\r\n      let lastRequests: any[] = [];\r\n\r\n      const checkForNewRequests = async () => {\r\n        try {\r\n          const [result] = await db.query<RowDataPacket[][]>(\r\n            \"CALL get_pending_requests()\"\r\n          );\r\n\r\n          const requestRows = result[0] || [];\r\n          const requests = requestRows.map((row: any) => ({\r\n            id: row.id,\r\n            date: row.date,\r\n            operation: row.operation ? \"agregar\" : \"editar\",\r\n            userEmail: row.userEmail,\r\n            statusRequestName: row.statusRequestName,\r\n            projectName: row.projectName,\r\n          }));\r\n\r\n          const hasChanged =\r\n            JSON.stringify(requests) !== JSON.stringify(lastRequests);\r\n\r\n          if (hasChanged) {\r\n            sendEvent({ type: \"newRequests\", data: requests });\r\n            lastRequests = requests;\r\n          }\r\n        } catch (error) {\r\n          console.error(\r\n            \"Error al recuperar las solicitudes pendientes:\",\r\n            error\r\n          );\r\n        }\r\n      };\r\n\r\n      const interval = setInterval(checkForNewRequests, 10000);\r\n\r\n      req.signal.onabort = () => {\r\n        console.warn(\"🔴 Conexión SSE cerrada por el cliente\");\r\n        clearInterval(interval);\r\n        clearInterval(heartbeat);\r\n        try {\r\n          controller.close();\r\n        } catch (err) {\r\n          console.error(\"⚠️ Error al cerrar el stream:\", err);\r\n        }\r\n      };\r\n    },\r\n  });\r\n\r\n  return new Response(stream, {\r\n    headers: {\r\n      \"Content-Type\": \"text/event-stream\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Connection: \"keep-alive\",\r\n    },\r\n  });\r\n}\r\n"
        }
      },
      "roles": {
        "permissions": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { Permission } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_permissions()\"\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const [permissionsRows = []] = result;\r\n\r\n    const permission: Permission[] = permissionsRows.map(({ id, name }) => ({\r\n      id,\r\n      name,\r\n    }));\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      permission,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al recuperar los permisos:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar los permisos\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport { Role, Permission } from \"@/lib/definitios\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  const { searchParams } = new URL(req.url);\r\n\r\n  const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n  const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n  const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || null);\r\n\r\n  try {\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_roles_with_permissions(?, ?, ?)\",\r\n      [page, pageSize, searchTerm]\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const [rolesRows = [], [totalEntriesRow] = [], permissionRows = []] =\r\n      result;\r\n\r\n    const totalEntries = totalEntriesRow.totalEntries || 0;\r\n\r\n    const permissionsByRole = permissionRows.reduce(\r\n      (acc: Record<number, Permission[]>, row: any) => {\r\n        if (!acc[row.id_role]) {\r\n          acc[row.id_role] = [];\r\n        }\r\n        acc[row.id_role].push({\r\n          id: row.id_permission,\r\n          name: row.name_permission,\r\n        });\r\n        return acc;\r\n      },\r\n      {}\r\n    );\r\n\r\n    const roles: Role[] = rolesRows.map(({ id, name }: any) => ({\r\n      id,\r\n      name,\r\n      permissions: permissionsByRole[id] || [],\r\n    }));\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      roles,\r\n      totalEntries,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar los roles\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { id, name, permission } = await req.json();\r\n\r\n    if (!id || !name || !permission) {\r\n      return NextResponse.json(\r\n        { error: \"Faltan datos obligatorios\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const permissionsJson = JSON.stringify(permission);\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    await db.query(\"CALL update_role(?, ?, ?, ?)\", [\r\n      id,\r\n      name,\r\n      permissionsJson,\r\n      userId,\r\n    ]);\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Rol actualizado exitosamente\",\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al actualizar el rol:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al actualizar el rol\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { name, permission } = await req.json();\r\n\r\n    if (!name || !permission) {\r\n      return NextResponse.json(\r\n        { error: \"Faltan datos obligatorios\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const permissionsJson = JSON.stringify(permission);\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const result = await db.query(\"CALL create_role(?, ?, ?)\", [\r\n      name,\r\n      permissionsJson,\r\n      userId,\r\n    ]);\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Rol creado exitosamente\",\r\n      result,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al crear el rol:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al crear el rol\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar roles\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const userId = session.user.id;\r\n\r\n    const { id } = await req.json();\r\n\r\n    if (!id) {\r\n      return NextResponse.json(\r\n        { error: \"El ID del rol es obligatorio\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    await db.query(\"CALL delete_role(?, ?)\", [id, userId]);\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Rol eliminado exitosamente\",\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al eliminar el rol:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al eliminar el rol\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "s3": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { s3 } from \"@/lib/s3\";\r\nimport { PutObjectCommand, DeleteObjectCommand } from \"@aws-sdk/client-s3\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport sharp from \"sharp\";\r\n\r\nexport async function POST(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar usuarios\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const data = await req.formData();\r\n    const file = data.get(\"file\") as File;\r\n    let folderPath = data.get(\"path\") as string;\r\n\r\n    if (!file || !folderPath) {\r\n      console.error(\"Faltan el archivo o la ruta de la carpeta.\");\r\n      return NextResponse.json(\r\n        { error: \"Falta la ruta del archivo o carpeta\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (!folderPath.endsWith(\"/\")) {\r\n      folderPath += \"/\";\r\n    }\r\n\r\n    const validMimeTypes = [\"image/jpeg\", \"image/png\", \"image/webp\"];\r\n    if (!validMimeTypes.includes(file.type)) {\r\n      return NextResponse.json(\r\n        {\r\n          error:\r\n            \"Formato de archivo no permitido. Solo imágenes (JPG, PNG, WEBP).\",\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const originalBuffer = await file.arrayBuffer();\r\n\r\n    const conversionStartTime = performance.now(); // Inicia medición del tiempo de conversión de la imagen\r\n\r\n    const webpBuffer = await sharp(Buffer.from(originalBuffer))\r\n      .webp({ quality: 80 })\r\n      .toBuffer();\r\n\r\n    const conversionEndTime = performance.now(); // Finaliza medición de la conversión de la imagen\r\n\r\n    const fileKey = `${folderPath}${Date.now()}/${uuidv4()}.webp`;\r\n\r\n    const command = new PutObjectCommand({\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Key: fileKey,\r\n      Body: webpBuffer,\r\n      ContentType: \"image/webp\",\r\n    });\r\n\r\n    const uploadStartTime = performance.now(); // Inicia medición del tiempo de subida a S3\r\n\r\n    await s3.send(command);\r\n\r\n    const uploadEndTime = performance.now(); // Finaliza medición de la subida a S3\r\n\r\n    const cloudFrontUrl = `https://${process.env.CLOUDFRONT_DOMAIN}/${fileKey}`;\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const conversionDuration = conversionEndTime - conversionStartTime;\r\n    const uploadDuration = uploadEndTime - uploadStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Imagen cargada con éxito y convertida a .webp\",\r\n      url: cloudFrontUrl,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, image-conversion;dur=${conversionDuration.toFixed(2)}, s3-upload;dur=${uploadDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al cargar y convertir la imagen:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al cargar y convertir la imagen.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar usuarios\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const { key } = await req.json();\r\n\r\n    if (!key) {\r\n      return NextResponse.json(\r\n        { error: \"Falta la clave del archivo o es inválida.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const command = new DeleteObjectCommand({\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Key: key,\r\n    });\r\n\r\n    const deleteStartTime = performance.now(); // Inicia medición del tiempo de eliminación en S3\r\n\r\n    await s3.send(command);\r\n\r\n    const deleteEndTime = performance.now(); // Finaliza medición del tiempo de eliminación en S3\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const deleteDuration = deleteEndTime - deleteStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      message: \"Imagen eliminada correctamente de S3\",\r\n      deletedKey: key,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, s3-delete;dur=${deleteDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"🚨 Error al borrar la imagen de S3:\", error);\r\n    return NextResponse.json(\r\n      { error: \"No se pudo eliminar la imagen. Intenta de nuevo.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "test-email": {
        "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { sendEmail } from \"@/lib/email/sendEmail\";\r\nimport { generateEmailTemplate } from \"@/utils/emailTemplates\";\r\n\r\nexport async function GET() {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  try {\r\n    const emailContent = generateEmailTemplate(\"Prueba de Propiedad\", \"123\");\r\n\r\n    const emailStartTime = performance.now(); // Inicia medición del tiempo de envío de correo\r\n\r\n    await sendEmail(\r\n      \"sebasirra13@gmail.com\",\r\n      \"Prueba de Correo en EdifiK\",\r\n      emailContent\r\n    );\r\n\r\n    const emailEndTime = performance.now(); // Finaliza medición del tiempo de envío de correo\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const emailDuration = emailEndTime - emailStartTime;\r\n\r\n    const response = NextResponse.json(\r\n      { message: \"Correo enviado correctamente\" },\r\n      { status: 200 }\r\n    );\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, email-send;dur=${emailDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"❌ Error al enviar el correo:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al enviar el correo\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
      },
      "users": {
        "check-email": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar propiedades\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const email = searchParams.get(\"email\")?.trim();\r\n\r\n    if (!email) {\r\n      return NextResponse.json(\r\n        { error: \"Debe proporcionar un correo electrónico.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL check_user_email(?)\",\r\n      [email]\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    if (!result || result.length === 0 || result[0].length === 0) {\r\n      return NextResponse.json({ id: null }, { status: 200 });\r\n    }\r\n\r\n    const id = result[0][0];\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({ id: id });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al verificar correo:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error interno del servidor\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "emails": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar propiedades\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const searchTerm = searchParams.get(\"searchTerm\")?.trim();\r\n\r\n    if (!searchTerm) {\r\n      return NextResponse.json([], { status: 200 });\r\n    }\r\n\r\n    const safeSearchTerm = escapeSearchTerm(\r\n      searchParams.get(\"searchTerm\") || \"\"\r\n    );\r\n\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL search_user_emails(?)\",\r\n      [safeSearchTerm]\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    if (!result || result.length === 0) {\r\n      return NextResponse.json([], { status: 200 });\r\n    }\r\n\r\n    const usersRows = result[0] as { id: number; email: string }[];\r\n\r\n    const emails = usersRows.map((row) => ({\r\n      id: row.id,\r\n      email: row.email,\r\n    }));\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json(emails);\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error al obtener correos:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error interno del servidor\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "metadata": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { Role, MembershipSummary, Gender } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\r\n\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session) {\r\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n  }\r\n\r\n  const permissions = session?.user?.permissions;\r\n\r\n  const hasPermission = permissions?.some(\r\n    (perm) => perm.name === \"Gestionar usuarios\"\r\n  );\r\n\r\n  if (!hasPermission) {\r\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\r\n  }\r\n\r\n  try {\r\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\r\n\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_users_metadata()\"\r\n    );\r\n\r\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\r\n\r\n    const [rolesRows = [], gendersRows = [], membershipsRows = []] = result;\r\n\r\n    const roles: Role[] = rolesRows.map(({ id, name }) => ({ id, name }));\r\n    const memberships: MembershipSummary[] = membershipsRows.map(\r\n      ({ id, name }) => ({ id, name })\r\n    );\r\n    const genders: Gender[] = gendersRows.map(({ id, name }) => ({ id, name }));\r\n\r\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\r\n    const apiDuration = endTime - startTime;\r\n    const dbDuration = dbEndTime - dbStartTime;\r\n\r\n    const response = NextResponse.json({\r\n      roles,\r\n      memberships,\r\n      genders,\r\n    });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error retrieving users:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Error al recuperar los datos\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "projects": {
          "route.ts": "import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\nimport { RowDataPacket } from \"mysql2\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    if (!session) {\r\n      return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\r\n    }\r\n\r\n    const url = new URL(req.url);\r\n    const searchParams = url.searchParams;\r\n\r\n    const userId = parseInt(searchParams.get(\"userId\") || \"0\", 10);\r\n    const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n    const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\r\n\r\n    if (!userId || userId <= 0) {\r\n      return NextResponse.json(\r\n        { error: \"ID de usuario inválido\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const validatedPage = page > 0 ? page : 1;\r\n    const validatedPageSize = pageSize > 0 ? pageSize : 16;\r\n\r\n    // 🔹 Inicia medición de la consulta SQL\r\n    const startDBQuery = performance.now();\r\n    const [result] = await db.query<RowDataPacket[][]>(\r\n      \"CALL get_user_project_list(?, ?, ?)\",\r\n      [userId, validatedPage, validatedPageSize]\r\n    );\r\n    const endDBQuery = performance.now();\r\n\r\n    // 🔹 Procesamiento de datos\r\n    const startProcessing = performance.now();\r\n    const [projectsRows = [], projectMediaRows = [], [totalEntriesRow] = []] =\r\n      result;\r\n    const totalEntries = totalEntriesRow.totalEntries || 0;\r\n\r\n    const projectMediaMap: Record<\r\n      number,\r\n      { url: string; tag: string; projectId: number }[]\r\n    > = {};\r\n    projectMediaRows.forEach((media: any) => {\r\n      if (!projectMediaMap[media.projectId]) {\r\n        projectMediaMap[media.projectId] = [];\r\n      }\r\n      projectMediaMap[media.projectId].push({\r\n        url: media.url,\r\n        tag: media.tag,\r\n        projectId: media.projectId,\r\n      });\r\n    });\r\n\r\n    const projects: ProjectSummary[] = projectsRows.map((row: any) => ({\r\n      id: row.id,\r\n      name: row.name,\r\n      price: row.price || null,\r\n      totalArea: row.area,\r\n      bedrooms: row.bedrooms || null,\r\n      bathrooms: row.bathrooms || null,\r\n      parkingSpots: row.parkingSpots || null,\r\n      longitude: row.longitude as number,\r\n      latitude: row.latitude as number,\r\n      address: row.address,\r\n      city: {\r\n        id: row.cityId,\r\n        name: row.cityName,\r\n        departament: {\r\n          id: row.departamentId,\r\n          name: row.departamentName,\r\n        },\r\n      },\r\n      projectMedia: projectMediaMap[row.id] || [],\r\n    }));\r\n    const endProcessing = performance.now();\r\n\r\n    // 🔹 Respuesta con tiempos de ejecución\r\n    const response = NextResponse.json({ projects, totalEntries });\r\n    response.headers.set(\r\n      \"Server-Timing\",\r\n      `db_query;dur=${(endDBQuery - startDBQuery).toFixed(2)}, processing;dur=${(endProcessing - startProcessing).toFixed(2)}`\r\n    );\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error(\"Error en la búsqueda de proyectos del usuario: \", error);\r\n    return NextResponse.json(\r\n      { error: \"Fallo al buscar proyectos del usuario\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"
        },
        "route.ts": "import { NextResponse } from \"next/server\";\nimport { db } from \"@/lib/db\";\nimport { User } from \"@/lib/definitios\";\nimport { RowDataPacket } from \"mysql2\";\nimport { escapeSearchTerm } from \"@/utils/escapeSearchTerm\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) => perm.name === \"Gestionar usuarios\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  const { searchParams } = new URL(req.url);\n\n  const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\n  const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\n  const searchTerm = escapeSearchTerm(searchParams.get(\"searchTerm\") || null);\n\n  try {\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    const [result] = await db.query<RowDataPacket[][]>(\n      \"CALL get_users(?, ?, ?)\",\n      [page, pageSize, searchTerm]\n    );\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const [userRows = [], [totalEntriesRow] = []] = result;\n\n    const totalEntries = totalEntriesRow.totalEntries || 0;\n\n    const users: User[] = userRows.map((row: any) => ({\n      id: row.id,\n      username: row.username,\n      names: row.names,\n      lastnames: row.lastnames,\n      email: row.email,\n      phoneNumber: row.phoneNumber,\n      gender: {\n        id: row.genderId,\n        name: row.genderName,\n      },\n      state: row.state,\n      registrationDate: row.registrationDate,\n      lastLogin: row.lastLogin,\n      role: {\n        id: row.roleId,\n        name: row.roleName,\n      },\n      membership: {\n        id: row.membershipId,\n        name: row.membershipName,\n      },\n      totalProperties: row.totalProperties,\n      provider: row.providerName,\n    }));\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      users,\n      totalEntries,\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al recuperar los usuarios:\", error);\n    return NextResponse.json(\n      { error: \"Error al recuperar los usuarios\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) => perm.name === \"Gestionar usuarios\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const {\n      id,\n      username,\n      names,\n      lastnames,\n      email,\n      phoneNumber,\n      gender,\n      role,\n      membership,\n      state,\n    } = await req.json();\n\n    if (\n      !id ||\n      !username ||\n      !names ||\n      !lastnames ||\n      !email ||\n      !gender ||\n      !role\n    ) {\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL update_user_admin(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [\n      id,\n      username,\n      names,\n      lastnames,\n      email,\n      phoneNumber || null,\n      state || false,\n      gender.id,\n      role.id,\n      membership.id || \"1001\",\n      userId,\n    ]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      message: \"Usuario actualizado exitosamente\",\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    console.error(\"Error al actualizar el usuario:\", error);\n    return NextResponse.json(\n      { error: \"Error al actualizar el usuario\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(req: Request) {\n  const startTime = performance.now(); // Inicia medición del tiempo total de la API\n\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return NextResponse.json({ error: \"No autenticado\" }, { status: 401 });\n  }\n\n  const permissions = session?.user?.permissions;\n\n  const hasPermission = permissions?.some(\n    (perm) => perm.name === \"Gestionar usuarios\"\n  );\n\n  if (!hasPermission) {\n    return NextResponse.json({ error: \"Acceso denegado\" }, { status: 403 });\n  }\n\n  try {\n    const userId = session.user.id;\n\n    const {\n      username,\n      names,\n      lastnames,\n      email,\n      phoneNumber,\n      gender,\n      role,\n      membership,\n      state,\n    } = await req.json();\n\n    if (!username || !names || !lastnames || !email || !gender || !role) {\n      return NextResponse.json(\n        { error: \"Faltan datos obligatorios\" },\n        { status: 400 }\n      );\n    }\n\n    const dbStartTime = performance.now(); // Inicia medición del tiempo de consulta a la BD\n\n    await db.query(\"CALL insert_user(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [\n      username,\n      names,\n      lastnames,\n      email,\n      phoneNumber || null,\n      gender.id,\n      role.id,\n      membership.id || \"1001\",\n      state || false,\n      userId,\n    ]);\n\n    const dbEndTime = performance.now(); // Finaliza medición de la BD\n\n    const endTime = performance.now(); // Finaliza medición del tiempo total de la API\n    const apiDuration = endTime - startTime;\n    const dbDuration = dbEndTime - dbStartTime;\n\n    const response = NextResponse.json({\n      message: \"Usuario creado exitosamente\",\n    });\n    response.headers.set(\n      \"Server-Timing\",\n      `api-total;dur=${apiDuration.toFixed(2)}, db-query;dur=${dbDuration.toFixed(2)}`\n    );\n\n    return response;\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"Error al crear el usuario\" },\n      { status: 500 }\n    );\n  }\n}\n"
      }
    },
    "favicon.ico": "(binary)",
    "fonts": {
      "fonts.ts": "import { Poppins, Inter } from \"next/font/google\";\n\nexport const poppins = Poppins({\n  subsets: [\"latin\"],\n  weight: [\"300\", \"400\", \"500\", \"700\"],\n});\n\nexport const inter = Inter({\n  subsets: [\"latin\"],\n  weight: [\"300\", \"400\", \"500\", \"700\"],\n});\n"
    },
    "globals.css": "@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  /* Modo claro */\n  --primary: #d4af37;\n  --primary-light: #e1bf64;\n  --primary-dark: #b79522;\n\n  --secondary: #0d0d0d;\n  --secondary-light: #1c1c1c;\n  --secondary-dark: #000000;\n\n  --background: #f5f5f5;\n  --background-light: #fafafa;\n  --background-dark: #e5e5e5;\n  --background-alt: #ffffff;\n\n  --text-primary: #333333;\n  --text-secondary: #4d4d4d;\n  --text-placeholder: #9e9e9e;\n\n  --border-color: #e1bf64;\n  --border-color-hover: #d4af37;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --secondary: #1a1a1a;\n    --secondary-light: #2e2e2e;\n    --secondary-dark: #121212;\n\n    --background: #1a1a1a;\n    --background-light: #2e2e2e;\n    --background-dark: #121212;\n    --background-alt: #2b2b2b;\n\n    --text-primary: #e5e5e5;\n    --text-secondary: #bfbfbf;\n    --text-placeholder: #777777;\n\n    --border-color: #a67c00;\n    --border-color-hover: #b79522;\n  }\n}\n\n::-webkit-scrollbar {\n  width: 12px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--background);\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: var(--primary);\n  border-radius: 10px;\n  border: 3px solid var(--background);\n}\n\n* {\n  scrollbar-width: thin;\n  scrollbar-color: var(--primary) var(--background);\n}\n",
    "hooks": {
      "checkName": {
        "useCheckName.ts": "import { useState, useCallback } from \"react\";\r\n\r\nexport const useCheckName = () => {\r\n  const [isChecking, setIsChecking] = useState(false);\r\n  const [totalMatches, setTotalMatches] = useState<number | null>(null);\r\n  const [cachedResults, setCachedResults] = useState<Record<string, number>>(\r\n    {}\r\n  );\r\n\r\n  const checkName = useCallback(\r\n    async (table: string, name: string, id?: number) => {\r\n      if (!table || !name) return 0;\r\n\r\n      if (cachedResults[name]) {\r\n        return cachedResults[name];\r\n      }\r\n\r\n      setIsChecking(true);\r\n      try {\r\n        const url = new URL(`/api/check-name`, window.location.origin);\r\n        url.searchParams.append(\"table\", table);\r\n        url.searchParams.append(\"name\", name);\r\n        if (id !== undefined) url.searchParams.append(\"id\", String(id));\r\n\r\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n        const response = await fetch(url.toString());\r\n\r\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error verificando el nombre: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        const total = data.total || 0;\r\n\r\n        setCachedResults((prev) => ({ ...prev, [name]: total }));\r\n        setTotalMatches(total);\r\n\r\n        return total;\r\n      } catch (error) {\r\n        console.error(\r\n          `Error verificando el nombre en la tabla ${table}:`,\r\n          error\r\n        );\r\n        setTotalMatches(null);\r\n        return 0;\r\n      } finally {\r\n        setIsChecking(false);\r\n      }\r\n    },\r\n    [cachedResults]\r\n  );\r\n\r\n  return { isChecking, totalMatches, checkName };\r\n};\r\n"
      },
      "memberships": {
        "useMemberships.ts": "import { useState, useEffect } from \"react\";\nimport { Membership } from \"@/lib/definitios\";\n\nexport const useMemberships = (\n  currentPage: number,\n  entriesPerPage: number,\n  searchTerm: string,\n  refreshTrigger: number\n) => {\n  const [memberships, setMemberships] = useState<Membership[]>([]);\n  const [totalEntries, setTotalEntries] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchMemberships = async () => {\n      setIsLoading(true);\n      try {\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n        const response = await fetch(\n          `/api/memberships?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\n            searchTerm\n          )}`\n        );\n\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n        const serverTiming = response.headers.get(\"Server-Timing\");\n\n        console.log(\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n        );\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch memberships\");\n        }\n        const data = await response.json();\n        setMemberships(data.memberships);\n        setTotalEntries(data.totalEntries);\n      } catch (error) {\n        console.error(\"Error fetching memberships:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchMemberships();\n  }, [currentPage, entriesPerPage, searchTerm, refreshTrigger]);\n\n  return { memberships, totalEntries, isLoading };\n};\n",
        "useMembershipUpdate.ts": "import { useState } from \"react\";\nimport { Membership } from \"@/lib/definitios\";\n\nexport const useMembershipUpdate = () => {\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [updateError, setUpdateError] = useState<string | null>(null);\n\n  const updateMembership = async (membership: Membership): Promise<boolean> => {\n    setIsUpdating(true);\n    setUpdateError(null);\n\n    try {\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\"/api/memberships\", {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(membership),\n      });\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        const { error } = await response.json();\n        throw new Error(error || \"Error al actualizar la membresía\");\n      }\n\n      return true;\n    } catch (error: any) {\n      console.error(\"Error al actualizar la membresía:\", error.message);\n      setUpdateError(error.message);\n      return false;\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  return { updateMembership, isUpdating, updateError };\n};\n",
        "useMembershipValidation.ts": "import { useState } from \"react\";\nimport { useCheckName } from \"../checkName/useCheckName\";\n\nexport const useMembershipValidation = (membership: any, isEdit: boolean) => {\n  const [errors, setErrors] = useState({\n    nameError: \"\",\n    benefitsError: \"\",\n    discountThreeMonthsError: \"\",\n    discountSixMonthsError: \"\",\n    discountTwelveMonthsError: \"\",\n    maxProjectsError: \"\",\n  });\n\n  const { checkName } = useCheckName();\n\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\n    switch (fieldName) {\n      case \"nameError\":\n        return !value ? \"El nombre es obligatorio.\" : \"\";\n      case \"benefitsError\":\n        return !value ? \"La descripción de los beneficios es obligatoria.\" : \"\";\n      case \"discountThreeMonthsError\":\n        return value > 100\n          ? \"El porcentaje de descuento debe ser menor o igual a 100.\"\n          : \"\";\n      case \"discountSixMonthsError\":\n        return value > 100\n          ? \"El porcentaje de descuento debe ser menor o igual a 100.\"\n          : \"\";\n      case \"discountTwelveMonthsError\":\n        return value > 100\n          ? \"El porcentaje de descuento debe ser menor o igual a 100.\"\n          : \"\";\n      case \"maxProjectsError\":\n        return value <= 0 ? \"Debe haber al menos 1 propiedad.\" : \"\";\n      default:\n        return \"\";\n    }\n  };\n\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\n    let errorMessage = getErrorMessage(fieldName, value);\n\n    if (fieldName === \"nameError\" && value) {\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\n\n      const total = await checkName(\n        \"membership\",\n        value,\n        isEdit ? membership.id : undefined\n      );\n\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\n      console.log(\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\n      );\n\n      if (total > 0) {\n        errorMessage = \"El nombre de la membresía ya está en uso, elige otro.\";\n      }\n    }\n\n    setErrors((prevErrors) => ({\n      ...prevErrors,\n      [fieldName]: errorMessage,\n    }));\n  };\n\n  const validateFields = async () => {\n    const newErrors: typeof errors = {\n      nameError: getErrorMessage(\"nameError\", membership.name),\n      benefitsError: getErrorMessage(\"benefitsError\", membership.benefits),\n      discountThreeMonthsError: getErrorMessage(\n        \"discountThreeMonthsError\",\n        membership.discountThreeMonths\n      ),\n      discountSixMonthsError: getErrorMessage(\n        \"discountSixMonthsError\",\n        membership.discountSixMonths\n      ),\n      discountTwelveMonthsError: getErrorMessage(\n        \"discountTwelveMonthsError\",\n        membership.discountTwelveMonths\n      ),\n      maxProjectsError: getErrorMessage(\n        \"maxProjectsError\",\n        membership.maxProjects\n      ),\n    };\n\n    if (membership.name) {\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\n\n      const total = await checkName(\n        \"membership\",\n        membership.name,\n        isEdit ? membership.id : undefined\n      );\n\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\n      console.log(\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\n      );\n\n      if (total > 0) {\n        newErrors.nameError =\n          \"El nombre de la membresía ya está en uso, elige otro.\";\n      }\n    }\n\n    setErrors(newErrors);\n\n    return Object.values(newErrors).every((error) => error === \"\");\n  };\n\n  return { errors, validateFields, validateField };\n};\n"
      },
      "projects": {
        "createEditProject": {
          "useBasicProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport { useCheckName } from \"../../checkName/useCheckName\";\r\n\r\nexport const useBasicProjectValidation = (\r\n  formData: ProjectData,\r\n  isProperty: boolean,\r\n  isEdit: boolean\r\n) => {\r\n  const [errors, setErrors] = useState({\r\n    nameError: \"\",\r\n    emailError: \"\",\r\n    shortDescriptionError: \"\",\r\n    detailedDescriptionError: \"\",\r\n    propertyTypeError: \"\",\r\n    projectTypeError: \"\",\r\n  });\r\n\r\n  const { checkName } = useCheckName();\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"emailError\":\r\n        if (isProperty && value) {\r\n          if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n            return \"Ingrese un correo electrónico válido.\";\r\n          }\r\n          if (!formData.ownerId) {\r\n            return \"El correo ingresado no pertenece a un usuario registrado.\";\r\n          }\r\n        }\r\n        return \"\";\r\n      case \"emailError\":\r\n        return !value ? \"El usuario es obligatorio.\" : \"\";\r\n      case \"shortDescriptionError\":\r\n        return !value ? \"El resumen breve es obligatorio.\" : \"\";\r\n      case \"detailedDescriptionError\":\r\n        return !value ? \"La descripción completa es obligatoria.\" : \"\";\r\n      case \"propertyTypeError\":\r\n        return !value || !value.id ? \"Seleccione el tipo de propiedad.\" : \"\";\r\n      case \"projectTypeError\":\r\n        return isProperty && (!value || !value.id)\r\n          ? \"Seleccione la finalidad de la propiedad.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\r\n    let errorMessage = getErrorMessage(fieldName, value);\r\n\r\n    if (!isProperty && fieldName === \"nameError\" && value) {\r\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\r\n\r\n      const total = await checkName(\r\n        \"project\",\r\n        value,\r\n        isEdit ? formData.id : undefined\r\n      );\r\n\r\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\r\n      console.log(\r\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\r\n      );\r\n\r\n      if (total) {\r\n        errorMessage = \"El nombre del proyecto ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: errorMessage,\r\n    }));\r\n  };\r\n\r\n  const validateFields = async () => {\r\n    const newErrors: typeof errors = {\r\n      nameError: getErrorMessage(\"nameError\", formData.name),\r\n      emailError: getErrorMessage(\"emailError\", formData.email),\r\n      shortDescriptionError: getErrorMessage(\r\n        \"shortDescriptionError\",\r\n        formData.shortDescription\r\n      ),\r\n      detailedDescriptionError: getErrorMessage(\r\n        \"detailedDescriptionError\",\r\n        formData.detailedDescription\r\n      ),\r\n      propertyTypeError: getErrorMessage(\r\n        \"propertyTypeError\",\r\n        formData.propertyType\r\n      ),\r\n      projectTypeError: getErrorMessage(\r\n        \"projectTypeError\",\r\n        formData.projectType\r\n      ),\r\n    };\r\n\r\n    if (formData.email && !formData.ownerId) {\r\n      const foundUser = await checkName(\"user\", formData.email);\r\n      if (!foundUser) {\r\n        newErrors.emailError =\r\n          \"El correo ingresado no pertenece a un usuario registrado.\";\r\n      }\r\n    }\r\n\r\n    if (!isProperty && formData.name) {\r\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\r\n\r\n      const total = await checkName(\r\n        \"project\",\r\n        formData.name,\r\n        isEdit ? formData.id : undefined\r\n      );\r\n\r\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\r\n      console.log(\r\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\r\n      );\r\n\r\n      if (total) {\r\n        newErrors.nameError =\r\n          \"El nombre del proyecto ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useDetailsProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport const useDetailsProjectValidation = (formData: ProjectData) => {\r\n  const [errors, setErrors] = useState({\r\n    priceError: \"\",\r\n    housingTypeError: \"\",\r\n  });\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: any) => {\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: value ? \"\" : getErrorMessage(fieldName, value),\r\n    }));\r\n  };\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"priceError\":\r\n        return (formData.projectType?.id === 2 ||\r\n          formData.projectType?.id === 3) &&\r\n          !value\r\n          ? \"El precio es obligatorio y debe ser mayor que 0.\"\r\n          : \"\";\r\n      case \"housingTypeError\":\r\n        return (formData.propertyType?.id === 1001 ||\r\n          formData.propertyType?.id === 1002) &&\r\n          !value\r\n          ? \"Seleccione un tipo de vivienda.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateFields = () => {\r\n    const newErrors: typeof errors = {\r\n      priceError: getErrorMessage(\"priceError\", formData.price),\r\n      housingTypeError: getErrorMessage(\r\n        \"housingTypeError\",\r\n        formData.housingType\r\n      ),\r\n    };\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useFeaturesProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport const useFeaturesProjectValidation = (formData: ProjectData) => {\r\n  const [errors, setErrors] = useState({\r\n    builtAreaError: \"\",\r\n    totalAreaError: \"\",\r\n    bathroomsError: \"\",\r\n    bedroomsError: \"\",\r\n    lobbiesError: \"\",\r\n    freeHeightError: \"\",\r\n    widthError: \"\",\r\n    lengthError: \"\",\r\n    towersError: \"\",\r\n    socioeconomicLevelError: \"\",\r\n    yearBuiltError: \"\",\r\n  });\r\n\r\n  const shouldShowField = (field: string) => {\r\n    const propertyTypeId = formData.propertyType?.id;\r\n\r\n    const fieldsFor1001And1002 = [\r\n      \"socioeconomicLevel\",\r\n      \"yearBuilt\",\r\n      \"bedrooms\",\r\n      \"storageUnits\",\r\n      \"balcony\",\r\n      \"laundryArea\",\r\n      \"customizationOptions\",\r\n    ];\r\n\r\n    const fieldsFor1001 = [\"terrace\", \"garden\"];\r\n    const fieldsFor1001_1002_1004 = [\"bathrooms\", \"lobbies\"];\r\n    const fieldsFor1002_1003_1004 = [\"elevator\"];\r\n    const fieldsFor1002 = [\"towers\", \"floorNumber\"];\r\n    const fieldsFor1004_1003_1005 = [\"freeHeight\"];\r\n    const fieldsFor1005_1006_1007 = [\"width\", \"length\"];\r\n    const fieldsFor1005 = [\"heavyParking\"];\r\n\r\n    if (fieldsFor1001And1002.includes(field)) {\r\n      return propertyTypeId === 1001 || propertyTypeId === 1002;\r\n    }\r\n    if (fieldsFor1001.includes(field)) {\r\n      return propertyTypeId === 1001;\r\n    }\r\n    if (fieldsFor1001_1002_1004.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004\r\n      );\r\n    }\r\n    if (fieldsFor1002_1003_1004.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1004\r\n      );\r\n    }\r\n    if (fieldsFor1002.includes(field)) {\r\n      return propertyTypeId === 1002;\r\n    }\r\n    if (fieldsFor1004_1003_1005.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1004 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1005\r\n      );\r\n    }\r\n    if (fieldsFor1005_1006_1007.includes(field)) {\r\n      return (\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007\r\n      );\r\n    }\r\n    if (fieldsFor1005.includes(field)) {\r\n      return propertyTypeId === 1005;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"builtAreaError\":\r\n        return !value ? \"El área construida es obligatoria.\" : \"\";\r\n      case \"totalAreaError\":\r\n        return !value ? \"El área total es obligatoria.\" : \"\";\r\n      case \"bathroomsError\":\r\n        return !value ? \"El número de baños es obligatorio.\" : \"\";\r\n      case \"bedroomsError\":\r\n        return !value ? \"El número de habitaciones es obligatorio.\" : \"\";\r\n      case \"lobbiesError\":\r\n        return !value ? \"El número de salas de estar es obligatorio.\" : \"\";\r\n      case \"freeHeightError\":\r\n        return !value ? \"La altura libre es obligatoria.\" : \"\";\r\n      case \"widthError\":\r\n        return !value ? \"El ancho es obligatorio.\" : \"\";\r\n      case \"lengthError\":\r\n        return !value ? \"El largo es obligatorio.\" : \"\";\r\n      case \"towersError\":\r\n        return formData.projectType?.id === 1 && !value\r\n          ? \"El número de torres es obligatorio.\"\r\n          : \"\";\r\n      case \"socioeconomicLevelError\":\r\n        return (formData.projectType?.id === 2 ||\r\n          formData.projectType?.id === 3) &&\r\n          !value\r\n          ? \"El estrato es obligatorio.\"\r\n          : \"\";\r\n      case \"yearBuiltError\":\r\n        return (formData.projectType?.id === 2 ||\r\n          formData.projectType?.id === 3) &&\r\n          !value\r\n          ? \"El año de construcción es obligatorio.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: any) => {\r\n    const field = fieldName.replace(\"Error\", \"\");\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: shouldShowField(field)\r\n        ? getErrorMessage(fieldName, value)\r\n        : \"\",\r\n    }));\r\n  };\r\n\r\n  const validateFields = () => {\r\n    const newErrors: Partial<typeof errors> = {};\r\n\r\n    Object.keys(errors).forEach((errorKey) => {\r\n      const fieldName = errorKey.replace(\"Error\", \"\");\r\n      if (shouldShowField(fieldName)) {\r\n        newErrors[errorKey as keyof typeof errors] = getErrorMessage(\r\n          errorKey as keyof typeof errors,\r\n          formData[fieldName as keyof ProjectData]\r\n        );\r\n      } else {\r\n        newErrors[errorKey as keyof typeof errors] = \"\";\r\n      }\r\n    });\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      ...newErrors,\r\n    }));\r\n\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useImagesProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData, ImageType, Media } from \"@/lib/definitios\";\r\n\r\nexport const useImagesProjectValidation = (\r\n  formData: ProjectData,\r\n  imagesTypes: ImageType[]\r\n) => {\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const imagesByCategory: Record<string, Media[]> = {};\r\n  const imageTagsByCategory: Record<string, string[]> = {};\r\n  const imageDescriptionsByCategory: Record<string, string[]> = {};\r\n\r\n  (formData.media || []).forEach((media) => {\r\n    if (!imagesByCategory[media.type]) {\r\n      imagesByCategory[media.type] = [];\r\n      imageTagsByCategory[media.type] = [];\r\n      imageDescriptionsByCategory[media.type] = [];\r\n    }\r\n    imagesByCategory[media.type].push(media);\r\n    imageTagsByCategory[media.type].push(media.tag);\r\n    imageDescriptionsByCategory[media.type].push(media.description || \"\");\r\n  });\r\n\r\n  const getErrorMessage = (fieldName: string) => {\r\n    if (fieldName.includes(\"-tag-\"))\r\n      return \"El nombre de la imagen es obligatorio.\";\r\n    if (fieldName.includes(\"-description-\"))\r\n      return \"La descripción es obligatoria.\";\r\n    return \"Campo obligatorio.\";\r\n  };\r\n\r\n  const validateField = (fieldName: string, value: any) => {\r\n    setErrors((prevErrors) => {\r\n      const newErrors = { ...prevErrors };\r\n\r\n      if (value.trim() === \"\") {\r\n        console.warn(`⚠️ Campo vacío detectado: ${fieldName}`);\r\n        newErrors[fieldName] = getErrorMessage(fieldName);\r\n      } else {\r\n        delete newErrors[fieldName];\r\n      }\r\n\r\n      return JSON.stringify(prevErrors) !== JSON.stringify(newErrors)\r\n        ? { ...newErrors }\r\n        : prevErrors;\r\n    });\r\n  };\r\n\r\n  const validateFields = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    imagesTypes.forEach((type) => {\r\n      if (\r\n        type.isRequired &&\r\n        (!imagesByCategory[type.name] ||\r\n          imagesByCategory[type.name].length === 0)\r\n      ) {\r\n        newErrors[type.name] =\r\n          `Debe subir al menos una imagen para ${type.name}.`;\r\n      }\r\n    });\r\n\r\n    formData.commonAreas?.forEach((area) => {\r\n      if (\r\n        !imagesByCategory[area.name] ||\r\n        imagesByCategory[area.name].length === 0\r\n      ) {\r\n        newErrors[area.name] =\r\n          `Debe subir al menos una imagen para ${area.name}.`;\r\n      }\r\n    });\r\n\r\n    Object.entries(imagesByCategory).forEach(([category, files]) => {\r\n      files.forEach((_, index) => {\r\n        if (!imageTagsByCategory[category]?.[index]) {\r\n          newErrors[`${category}-tag-${index}`] =\r\n            \"El nombre de la imagen es obligatorio.\";\r\n        }\r\n\r\n        if (\r\n          imagesTypes.find((type) => type.name === category)?.id === 1005 &&\r\n          !imageDescriptionsByCategory[category]?.[index]\r\n        ) {\r\n          newErrors[`${category}-description-${index}`] =\r\n            \"La descripción es obligatoria.\";\r\n        }\r\n      });\r\n    });\r\n\r\n    setErrors({ ...newErrors });\r\n\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n",
          "useLocationProjectValidation.ts": "import { useState } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\n\r\nexport const useLocationProjectValidation = (formData: ProjectData) => {\r\n  const [errors, setErrors] = useState({\r\n    departamentError: \"\",\r\n    cityError: \"\",\r\n    addressError: \"\",\r\n    mapAddressError: \"\",\r\n  });\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: any) => {\r\n    if (fieldName === \"mapAddressError\" && typeof value === \"string\") {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        mapAddressError: value.trim()\r\n          ? \"\"\r\n          : getErrorMessage(\"mapAddressError\", value),\r\n      }));\r\n    } else {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        [fieldName]: value ? \"\" : getErrorMessage(fieldName, value),\r\n      }));\r\n    }\r\n  };\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"departamentError\":\r\n        return !value ? \"El departamento es obligatorio.\" : \"\";\r\n      case \"cityError\":\r\n        return !value ? \"La ciudad es obligatoria.\" : \"\";\r\n      case \"addressError\":\r\n        return !value?.trim() ? \"La dirección pública es obligatoria.\" : \"\";\r\n      case \"mapAddressError\":\r\n        return !value?.trim() ? \"La ubicación en el mapa es obligatoria.\" : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateFields = (mapAddress: string) => {\r\n    const newErrors: typeof errors = {\r\n      departamentError: getErrorMessage(\r\n        \"departamentError\",\r\n        formData.city?.departament?.id\r\n      ),\r\n      cityError: getErrorMessage(\"cityError\", formData.city?.id),\r\n      addressError: getErrorMessage(\"addressError\", formData.address),\r\n      mapAddressError: getErrorMessage(\"mapAddressError\", mapAddress),\r\n    };\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n"
        },
        "Metadata": {
          "imageTypes": {
            "useImageTypes.ts": "import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { ImageType } from \"@/lib/definitios\";\n\nexport default function useImageTypes() {\n  const [imagesTypes, setImagesTypes] = useState<ImageType[]>([]);\n  const [loadingImages, setLoadingImages] = useState<boolean>(true);\n  const [errorImages, setErrorImages] = useState<string | null>(null);\n\n  const fetchImages = useCallback(async () => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    try {\n      setLoadingImages(true);\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\"/api/projects/metadata/image-types\", {\n        signal,\n      });\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      const data: ImageType[] = await response.json();\n      setImagesTypes(data);\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        setErrorImages(err.message || \"Error desconocido\");\n      }\n    } finally {\n      setLoadingImages(false);\n    }\n\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    fetchImages();\n  }, [fetchImages]);\n\n  const memoizedImagesTypes = useMemo(() => imagesTypes, [imagesTypes]);\n\n  return { imagesTypes: memoizedImagesTypes, loadingImages, errorImages };\n}\n"
          },
          "location": {
            "useAddressSearch.ts": "import { useState } from \"react\";\n\ninterface SearchResult {\n  display_name: string;\n  lat: string;\n  lon: string;\n  address: { [key: string]: string };\n}\n\nexport function useAddressSearch() {\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const searchAddress = async (query: string) => {\n    if (!query) return;\n    setLoading(true);\n    setError(null);\n\n    try {\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&q=${query}`\n      );\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      console.log(\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Error en la búsqueda de dirección\");\n      }\n      const data: SearchResult[] = await response.json();\n      setResults(data);\n    } catch (err: any) {\n      setError(err.message || \"Error desconocido\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { results, loading, error, searchAddress };\n}\n",
            "useLocations.ts": "import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { City, Departament } from \"@/lib/definitios\";\n\ninterface LocationsData {\n  departaments: Departament[];\n  cities: City[];\n}\n\nexport default function useLocations() {\n  const [locations, setLocations] = useState<LocationsData | null>(null);\n  const [loadingLocations, setLoadingLocations] = useState<boolean>(true);\n  const [errorLocations, setErrorLocations] = useState<string | null>(null);\n\n  const fetchLocations = useCallback(async () => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    try {\n      setLoadingLocations(true);\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\"/api/projects/metadata/cities\", { signal });\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      const data: LocationsData = await response.json();\n      setLocations(data);\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        setErrorLocations(err.message || \"Error desconocido\");\n      }\n    } finally {\n      setLoadingLocations(false);\n    }\n\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    fetchLocations();\n  }, [fetchLocations]);\n\n  const memoizedLocations = useMemo(() => locations, [locations]);\n\n  return { locations: memoizedLocations, loadingLocations, errorLocations };\n}\n"
          },
          "projectMedia": {
            "useProjectMediaApi.ts": "import { useState, useCallback } from \"react\";\r\nimport { ProjectMedia } from \"@/lib/definitios\";\r\n\r\nexport function useProjectMediaApi() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<boolean>(false);\r\n\r\n  const insertProjectMedia = useCallback(\r\n    async (projectMedia: ProjectMedia[]) => {\r\n      if (!projectMedia || projectMedia.length === 0) {\r\n        console.warn(\"⚠️ No se proporcionaron datos para insertar.\");\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n      setSuccess(false);\r\n\r\n      try {\r\n        const formattedProjectMedia = projectMedia.map((media) => ({\r\n          url: media.url,\r\n          tag: media.tag,\r\n          description: media.description ?? null,\r\n          projectId: media.projectId,\r\n          commonAreaId: media.commonArea ?? null,\r\n          imageTypeId: media.imageType ?? null,\r\n        }));\r\n\r\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n        const response = await fetch(\"/api/projects/metadata/project-media\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ projectMedia: formattedProjectMedia }),\r\n        });\r\n\r\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        if (!response.ok) {\r\n          const data = await response.json();\r\n          throw new Error(data.error || \"Error desconocido al insertar media.\");\r\n        }\r\n\r\n        setSuccess(true);\r\n      } catch (err: any) {\r\n        console.error(\"❌ Error al insertar projectMedia:\", err);\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const updateProjectMedia = useCallback(\r\n    async (\r\n      projectMedia: { id: number; tag: string; description?: string }[]\r\n    ) => {\r\n      if (!projectMedia || projectMedia.length === 0) {\r\n        console.warn(\"⚠️ No se proporcionaron datos para actualizar.\");\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n      setSuccess(false);\r\n\r\n      try {\r\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n        const response = await fetch(\"/api/projects/metadata/project-media\", {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ projectMedia }),\r\n        });\r\n\r\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        if (!response.ok) {\r\n          const data = await response.json();\r\n          throw new Error(\r\n            data.error || \"Error desconocido al actualizar media.\"\r\n          );\r\n        }\r\n\r\n        setSuccess(true);\r\n      } catch (err: any) {\r\n        console.error(\"❌ Error al actualizar projectMedia:\", err);\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const deleteProjectMedia = useCallback(async (mediaIds: number[]) => {\r\n    if (!mediaIds || mediaIds.length === 0) {\r\n      console.warn(\"⚠️ No se proporcionaron IDs para eliminar.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(\"/api/projects/metadata/project-media\", {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ mediaIds: mediaIds }),\r\n      });\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(\r\n          data.error || \"Error desconocido al eliminar projectMedia.\"\r\n        );\r\n      }\r\n\r\n      setSuccess(true);\r\n    } catch (err: any) {\r\n      console.error(\"❌ Error al eliminar projectMedia:\", err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    insertProjectMedia,\r\n    updateProjectMedia,\r\n    deleteProjectMedia,\r\n    loading,\r\n    error,\r\n    success,\r\n  };\r\n}\r\n"
          },
          "useBasicMetadata.ts": "import { useEffect, useState, useCallback, useMemo } from \"react\";\nimport {\n  CommonArea,\n  HousingType,\n  NearbyService,\n  propertyType,\n  Category,\n} from \"@/lib/definitios\";\n\ninterface BasicMetadata {\n  commonAreas: CommonArea[];\n  housingTypes: HousingType[];\n  nearbyServices: NearbyService[];\n  propertyTypes: propertyType[];\n  categories: Category[];\n}\n\nexport default function useBasicMetadata() {\n  const [metadata, setMetadata] = useState<BasicMetadata | null>(null);\n  const [loadingMetadata, setLoadingMetadata] = useState<boolean>(true);\n  const [errorMetadata, setErrorMetadata] = useState<string | null>(null);\n\n  const fetchMetadata = useCallback(async () => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    try {\n      setLoadingMetadata(true);\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\"/api/projects/metadata/basic-metadata\", {\n        signal,\n      });\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      const data: BasicMetadata = await response.json();\n      setMetadata(data);\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        setErrorMetadata(err.message || \"Error desconocido\");\n      }\n    } finally {\n      setLoadingMetadata(false);\n    }\n\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    fetchMetadata();\n  }, [fetchMetadata]);\n\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\n\n  return { metadata: memoizedMetadata, loadingMetadata, errorMetadata };\n}\n",
          "useProjectsMetadata.ts": "import { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport {\r\n  City,\r\n  CommonArea,\r\n  HousingType,\r\n  NearbyService,\r\n  propertyType,\r\n  MembershipSummary,\r\n} from \"@/lib/definitios\";\r\n\r\ntype Metadata = {\r\n  cities: City[];\r\n  commonAreas: CommonArea[];\r\n  housingTypes: HousingType[];\r\n  nearbyServices: NearbyService[];\r\n  propertyTypes: propertyType[];\r\n  memberships: MembershipSummary[];\r\n};\r\n\r\nexport const useProjectsMetadata = () => {\r\n  const [metadata, setMetadata] = useState<Metadata>({\r\n    cities: [],\r\n    commonAreas: [],\r\n    housingTypes: [],\r\n    nearbyServices: [],\r\n    propertyTypes: [],\r\n    memberships: [],\r\n  });\r\n  const [isLoadingMetadata, setIsLoadingMetadata] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchMetadata = useCallback(async () => {\r\n    if (metadata.cities.length > 0) return;\r\n\r\n    setIsLoadingMetadata(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const startFetch = performance.now();\r\n      const response = await fetch(\"/api/projects/metadata\");\r\n\r\n      const endFetch = performance.now();\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error fetching metadata: ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMetadata(data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching metadata:\", err);\r\n      setError((err as Error).message || \"Error desconocido\");\r\n    } finally {\r\n      setIsLoadingMetadata(false);\r\n    }\r\n  }, [metadata]);\r\n\r\n  useEffect(() => {\r\n    fetchMetadata();\r\n  }, [fetchMetadata]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n\r\n  return { metadata: memoizedMetadata, isLoadingMetadata, error };\r\n};\r\n"
        },
        "owner": {
          "useOwner.ts": "import { useState, useEffect } from \"react\";\r\nimport { UserData } from \"@/lib/definitios\";\r\n\r\nexport const useOwner = (email: string) => {\r\n  const [owner, setOwner] = useState<UserData | null>(null);\r\n  const [isLoadingUser, setIsLoadingUser] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchUser = async () => {\r\n    if (!email) {\r\n      setError(\"Debe proporcionar un email de usuario.\");\r\n      setIsLoadingUser(false);\r\n      return;\r\n    }\r\n\r\n    setIsLoadingUser(true);\r\n    setError(null);\r\n    try {\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(\r\n        `/api/projects/owner?email=${encodeURIComponent(email)}`\r\n      );\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error al obtener usuario: ${response.statusText}`);\r\n      }\r\n      const data = await response.json();\r\n      setOwner(data.user);\r\n    } catch (error) {\r\n      console.error(\"Error al obtener usuario:\", error);\r\n      setError(\"No se pudo recuperar la información del usuario.\");\r\n    } finally {\r\n      setIsLoadingUser(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [email]);\r\n\r\n  return { owner, isLoadingUser, error, refetchUser: fetchUser };\r\n};\r\n"
        },
        "useColombianLocations.ts": "import { useEffect, useState } from \"react\";\n\ninterface Departament {\n  id: number;\n  name: string;\n}\n\ninterface City {\n  id: number;\n  name: string;\n  departamentId: number;\n}\n\ninterface ColombianLocations {\n  departaments: Departament[];\n  cities: Record<number, City[]>;\n}\n\nexport default function useColombianLocations() {\n  const [locations, setLocations] = useState<ColombianLocations>({\n    departaments: [],\n    cities: {},\n  });\n\n  useEffect(() => {\n    const fetchLocations = async () => {\n      try {\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n        const response = await fetch(\n          \"https://raw.githubusercontent.com/marcovega/colombia-json/master/colombia.min.json\"\n        );\n\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n\n        console.log(\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n        );\n\n        const data = await response.json();\n\n        const departaments: Departament[] = data.map(\n          (dept: any, index: number) => ({\n            id: index + 1,\n            name: dept.departamento,\n          })\n        );\n\n        const cities = data.reduce(\n          (acc: Record<number, City[]>, dept: any, index: number) => {\n            acc[index + 1] = dept.ciudades.map(\n              (cityName: string, cityIndex: number) => ({\n                id: cityIndex + 1,\n                name: cityName,\n                departamentId: index + 1,\n              })\n            );\n            return acc;\n          },\n          {}\n        );\n\n        setLocations({ departaments, cities });\n      } catch (error) {\n        console.error(\"Error al cargar los departamentos y ciudades:\", error);\n      }\n    };\n\n    fetchLocations();\n  }, []);\n\n  return locations;\n}\n",
        "useDeleteProject.ts": "import { useState, useCallback } from \"react\";\r\n\r\nconst useDeleteProject = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<boolean>(false);\r\n\r\n  const deleteProject = useCallback(async (projectId: number) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(`/api/projects/${projectId}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || \"Error al eliminar el proyecto.\");\r\n      }\r\n\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"❌ Error al eliminar el proyecto:\", err);\r\n      setError(err.message);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return { deleteProject, loading, error, success };\r\n};\r\n\r\nexport default useDeleteProject;\r\n",
        "useGetProjects.ts": "\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\ninterface UseProjectsOptions {\n  entriesPerPage: number;\n  selectedButtons: Record<string, number[]>;\n  currentProjects: ProjectSummary[];\n  projectTypeId: number | null;\n  bounds?: google.maps.LatLngBounds | null;\n  showMap: boolean;\n}\n\nexport function useGetProjects({\n  entriesPerPage,\n  selectedButtons,\n  currentProjects,\n  projectTypeId,\n  bounds = null,\n  showMap,\n}: UseProjectsOptions) {\n  const [projects, setProjects] = useState<ProjectSummary[]>(currentProjects);\n  const [totalEntries, setTotalEntries] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\n\n  const [lastFetchedFilters, setLastFetchedFilters] = useState<{\n    searchTerm: string;\n    selectedButtons: Record<string, number[]>;\n    projectTypeId: number | null;\n    showMap: boolean;\n    bounds: google.maps.LatLngBounds | undefined;\n  }>({\n    searchTerm: \"\",\n    selectedButtons: {},\n    projectTypeId: null,\n    showMap: false,\n    bounds: undefined, // Cambiado de `null` a `undefined` para coincidir con `currentFilters`\n  });\n\n  const debouncedSearch = useDebouncedCallback((term: string) => {\n    setSearchTerm(term);\n    resetProjects();\n  }, 300);\n\n  const resetProjects = useCallback(() => {\n    setProjects([]);\n    setCurrentPage(1);\n  }, []);\n\n  const fetchProjects = useCallback(\n    async (isLoadMore = false, page = 1, bounds?: google.maps.LatLngBounds) => {\n      if (isLoading) return;\n\n      const currentFilters = {\n        searchTerm,\n        selectedButtons,\n        projectTypeId,\n        showMap,\n        bounds,\n      };\n      if (JSON.stringify(currentFilters) === JSON.stringify(lastFetchedFilters))\n        return;\n\n      setLastFetchedFilters(currentFilters); // Guarda los últimos filtros usados\n      setIsLoading(true);\n\n      const controller = new AbortController();\n      const signal = controller.signal;\n\n      try {\n        const startFetch = performance.now(); // Inicia medición\n\n        const params = new URLSearchParams({\n          page: page.toString(),\n          pageSize: entriesPerPage.toString(),\n          searchTerm,\n          ...(projectTypeId ? { projectTypeId: projectTypeId.toString() } : {}),\n          ...Object.fromEntries(\n            Object.entries(selectedButtons).map(([key, value]) => [\n              key,\n              value.join(\",\"),\n            ])\n          ),\n        });\n\n        if (bounds) {\n          params.append(\"minLat\", bounds.getSouthWest().lat().toString());\n          params.append(\"maxLat\", bounds.getNorthEast().lat().toString());\n          params.append(\"minLng\", bounds.getSouthWest().lng().toString());\n          params.append(\"maxLng\", bounds.getNorthEast().lng().toString());\n        }\n\n        const response = await fetch(`/api/projects?${params.toString()}`, {\n          signal,\n        });\n\n        if (!response.ok) {\n          throw new Error(`Error fetching projects: ${response.statusText}`);\n        }\n\n        const serverTiming = response.headers.get(\"Server-Timing\");\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n        const data = await response.json();\n        const newProjects: ProjectSummary[] = data.projects;\n\n        const endFetch = performance.now(); // Finaliza medición\n\n        console.log(\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n        );\n        console.log(\n          `📦 Tamaño de respuesta: ${JSON.stringify(data).length} bytes`\n        );\n\n        setProjects((prev) =>\n          isLoadMore\n            ? [\n                ...prev,\n                ...newProjects.filter(\n                  (p) => !prev.some((prop) => prop.id === p.id)\n                ),\n              ]\n            : newProjects\n        );\n\n        setTotalEntries(data.totalEntries);\n      } catch (error: any) {\n        if (error.name !== \"AbortError\") {\n          setErrorProjects(error.message || \"Error desconocido\");\n        }\n      } finally {\n        setIsLoading(false);\n      }\n\n      return () => controller.abort();\n    },\n    [\n      entriesPerPage,\n      isLoading,\n      searchTerm,\n      selectedButtons,\n      projectTypeId,\n      showMap,\n      bounds,\n    ]\n  );\n\n  useEffect(() => {\n    console.log(\"🔄 Fetching Projects...\");\n\n    const timeoutId = setTimeout(() => {\n      fetchProjects(false, 1, showMap && bounds !== null ? bounds : undefined);\n    }, 500); // Espera 500ms antes de llamar la API (reduce llamadas innecesarias)\n    console.log(\"🔄 Fetching Projects con filtros:\", {\n      selectedButtons,\n      searchTerm,\n      projectTypeId,\n      showMap,\n      bounds,\n    });\n\n    return () => clearTimeout(timeoutId); // Cancela llamadas anteriores si hay nuevos cambios\n  }, [searchTerm, selectedButtons, projectTypeId, showMap, bounds]);\n\n  const fetchMoreProjects = useCallback(() => {\n    if (!isLoading) {\n      const nextPage = currentPage + 1;\n      setCurrentPage(nextPage);\n      fetchProjects(\n        true,\n        nextPage,\n        showMap && bounds !== null ? bounds : undefined\n      );\n    }\n  }, [currentPage, isLoading, fetchProjects]);\n\n  const refreshProjects = useCallback(() => {\n    setProjects([]);\n    setCurrentPage(1);\n    fetchProjects(false, 1, showMap && bounds !== null ? bounds : undefined);\n  }, [fetchProjects, showMap, bounds]);\n\n  return {\n    projects,\n    totalEntries,\n    fetchMoreProjects,\n    debouncedSearch,\n    resetProjects,\n    refreshProjects,\n    isLoading,\n    errorProjects,\n  };\n}\n",
        "useProjectApi.ts": "import { useState } from \"react\";\nimport { ProjectData } from \"@/lib/definitios\";\n\nexport function useProjectApi() {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const submitProject = async (\n    projectData: ProjectData | number,\n    action: \"create\" | \"edit\" | \"delete\"\n  ): Promise<number | boolean | null> => {\n    setIsProcessing(true);\n    setError(null);\n    try {\n      let method = \"POST\";\n      let body: string | undefined = JSON.stringify(projectData);\n      let url = \"/api/projects\";\n\n      if (action === \"edit\") {\n        method = \"PUT\";\n      } else if (action === \"delete\") {\n        method = \"DELETE\";\n        body = undefined;\n        url = `/api/projects?id=${projectData}`;\n      }\n\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body,\n      });\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        const { error } = await response.json();\n        throw new Error(error || \"Error al procesar el proyecto.\");\n      }\n\n      if (action === \"create\") {\n        const data = await response.json();\n        return data.projectId;\n      }\n\n      return true;\n    } catch (err: any) {\n      console.error(\"Error al procesar el proyecto:\", err.message);\n      setError(err.message || \"Error desconocido\");\n      return null;\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return { submitProject, isProcessing, error };\n}\n",
        "useProjectById.ts": "\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Project, ProjectSummary } from \"@/lib/definitios\";\n\ninterface ProjectData {\n  project: Project;\n  projectRecommended: ProjectSummary[];\n}\n\nexport function useProjectById(id?: number) {\n  const [project, setProject] = useState<Project | null>(null);\n  const [projectRecommended, setProjectRecommended] = useState<\n    ProjectSummary[]\n  >([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchProject = async () => {\n      try {\n        setLoading(true);\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n        const response = await fetch(`/api/projects/${id}`);\n\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n        const serverTiming = response.headers.get(\"Server-Timing\");\n\n        console.log(\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\n        );\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n        if (!response.ok) {\n          throw new Error(\"Propiedad no encontrada\");\n        }\n\n        const data: ProjectData = await response.json();\n        setProject(data.project);\n        setProjectRecommended(data.projectRecommended || []);\n        setError(null);\n      } catch (error) {\n        setError(error instanceof Error ? error.message : \"Error desconocido\");\n        setProject(null);\n        setProjectRecommended([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProject();\n  }, [id]);\n\n  return { project, projectRecommended, loading, error };\n}\n"
      },
      "requests": {
        "usePendingRequests.ts": "import { useState, useEffect } from \"react\";\r\nimport { Request } from \"@/lib/definitios\";\r\n\r\nexport const usePendingRequests = () => {\r\n  const [requests, setRequests] = useState<Request[]>([]);\r\n  const [isLoadingRequests, setIsLoadingRequests] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const eventSource = new EventSource(\"/api/requests/stream\");\r\n\r\n    eventSource.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      if (data.type === \"newRequests\") {\r\n        setRequests(() => {\r\n          return data.data;\r\n        });\r\n      }\r\n    };\r\n\r\n    eventSource.onerror = () => {\r\n      console.error(\"⚠️ Error en SSE\");\r\n      eventSource.close();\r\n    };\r\n\r\n    setIsLoadingRequests(false);\r\n\r\n    return () => {\r\n      eventSource.close();\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    requests,\r\n    isLoadingRequests,\r\n  };\r\n};\r\n",
        "useRequestApi.ts": "import { useState } from \"react\";\r\n\r\nexport const useRequestApi = () => {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const processRequest = async (\r\n    requestId: number,\r\n    action: \"approve\" | \"reject\" | \"revision\",\r\n    message: string\r\n  ): Promise<boolean> => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n\r\n    if (!message.trim()) {\r\n      setError(\"El mensaje de respuesta es obligatorio.\");\r\n      setIsProcessing(false);\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const statusId = action === \"approve\" ? 2 : action === \"reject\" ? 3 : 4;\r\n\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(`/api/requests`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          id: requestId,\r\n          statusId,\r\n          responseMessage: message,\r\n        }),\r\n      });\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || \"Error al procesar la solicitud\");\r\n      }\r\n\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"Error al procesar la solicitud:\", err.message);\r\n      setError(err.message || \"Error desconocido\");\r\n      return false;\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return { processRequest, isProcessing, error };\r\n};\r\n",
        "useRequests.ts": "import { useState, useEffect } from \"react\";\r\nimport { Request } from \"@/lib/definitios\";\r\n\r\nexport const useRequests = (\r\n  currentPage: number,\r\n  entriesPerPage: number,\r\n  searchTerm: string,\r\n  refreshTrigger: number\r\n) => {\r\n  const [requests, setRequests] = useState<Request[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [isLoadingRequests, setIsLoadingRequests] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      setIsLoadingRequests(true);\r\n      try {\r\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n        const response = await fetch(\r\n          `/api/requests?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\r\n            searchTerm\r\n          )}`\r\n        );\r\n\r\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\"Error fetching requests\");\r\n        }\r\n        const data = await response.json();\r\n        setRequests(data.requests);\r\n        setTotalEntries(data.totalEntries);\r\n      } catch (error) {\r\n        console.error(\"Error fetching requests:\", error);\r\n      } finally {\r\n        setIsLoadingRequests(false);\r\n      }\r\n    };\r\n    fetchRequests();\r\n  }, [currentPage, entriesPerPage, searchTerm, refreshTrigger]);\r\n\r\n  return { requests, totalEntries, isLoadingRequests };\r\n};\r\n",
        "useRequestValidation.ts": "import { useState } from \"react\";\r\n\r\nexport const useRequestValidation = () => {\r\n  const [errors, setErrors] = useState<{\r\n    messageError: string;\r\n    actionTypeError: string;\r\n  }>({\r\n    messageError: \"\",\r\n    actionTypeError: \"\",\r\n  });\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: string) => {\r\n    switch (fieldName) {\r\n      case \"messageError\":\r\n        return value.trim() ? \"\" : \"El mensaje de respuesta es obligatorio.\";\r\n      case \"actionTypeError\":\r\n        return [\"approve\", \"reject\", \"revision\"].includes(value)\r\n          ? \"\"\r\n          : \"Debe seleccionar un estado válido.\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = (fieldName: keyof typeof errors, value: string) => {\r\n    const errorMessage = getErrorMessage(fieldName, value);\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: errorMessage,\r\n    }));\r\n  };\r\n\r\n  const validateFields = (message: string, actionType: string) => {\r\n    const newErrors = {\r\n      messageError: getErrorMessage(\"messageError\", message),\r\n      actionTypeError: getErrorMessage(\"actionTypeError\", actionType),\r\n    };\r\n\r\n    setErrors(newErrors);\r\n\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n"
      },
      "roles": {
        "usePermissions.ts": "import { useState, useEffect } from \"react\";\r\nimport { Permission } from \"@/lib/definitios\";\r\n\r\nexport const usePermissions = () => {\r\n  const [permissions, setPermissions] = useState<Permission[]>([]);\r\n  const [isLoadingPermissions, setIsLoadingPermissions] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchPermissions = async () => {\r\n      setIsLoadingPermissions(true);\r\n      try {\r\n        const startFetch = performance.now(); // ⏳ Inicia medición\r\n        const response = await fetch(\"/api/roles/permissions\");\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error en la busqueda de permisos: ${response.statusText}`\r\n          );\r\n        }\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n        console.log(\"⏳ Server Timing - Permissions API:\", serverTiming);\r\n\r\n        const data = await response.json();\r\n        const endFetch = performance.now(); // ⏳ Finaliza medición\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        setPermissions(data.permission);\r\n      } catch (error) {\r\n        console.error(\"Error en la busqueda de permisos:\", error);\r\n      } finally {\r\n        setIsLoadingPermissions(false);\r\n      }\r\n    };\r\n\r\n    fetchPermissions();\r\n  }, []);\r\n\r\n  return { permissions, isLoadingPermissions };\r\n};\r\n",
        "useRoleApi.ts": "import { useState } from \"react\";\r\nimport { Role } from \"@/lib/definitios\";\r\n\r\nexport const useRoleApi = () => {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const submitRole = async (\r\n    role: Role,\r\n    action: \"register\" | \"edit\" | \"delete\"\r\n  ): Promise<boolean> => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const method =\r\n        action === \"delete\" ? \"DELETE\" : action === \"edit\" ? \"PUT\" : \"POST\";\r\n\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(\"/api/roles\", {\r\n        method,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(role),\r\n      });\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || \"Error al procesar el rol\");\r\n      }\r\n\r\n      return true;\r\n    } catch (err: any) {\r\n      console.error(\"Error al procesar el rol:\", err.message);\r\n      setError(err.message || \"Error desconocido\");\r\n      return false;\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return { submitRole, isProcessing, error };\r\n};\r\n",
        "useRoles.ts": "import { useState, useEffect } from \"react\";\r\nimport { Role } from \"@/lib/definitios\";\r\n\r\nexport const useRoles = (\r\n  currentPage: number,\r\n  entriesPerPage: number,\r\n  searchTerm: string\r\n) => {\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [isLoadingRoles, setIsLoadingRoles] = useState(true);\r\n\r\n  const fetchRoles = async () => {\r\n    setIsLoadingRoles(true);\r\n    try {\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(\r\n        `/api/roles?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\r\n          searchTerm\r\n        )}`\r\n      );\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error fetching roles: ${response.statusText}`);\r\n      }\r\n      const data = await response.json();\r\n      setRoles(data.roles);\r\n      setTotalEntries(data.totalEntries);\r\n    } catch (error) {\r\n      console.error(\"Error fetching roles:\", error);\r\n    } finally {\r\n      setIsLoadingRoles(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n  }, [currentPage, entriesPerPage, searchTerm]);\r\n\r\n  return { roles, totalEntries, isLoadingRoles, refetchRoles: fetchRoles };\r\n};\r\n",
        "useRoleValidation.ts": "import { useState } from \"react\";\r\nimport { useCheckName } from \"../checkName/useCheckName\";\r\n\r\nexport const useRoleValidation = (role: any, isEdit: boolean) => {\r\n  const [errors, setErrors] = useState({\r\n    nameError: \"\",\r\n    permissionsError: \"\",\r\n  });\r\n\r\n  const { checkName } = useCheckName();\r\n\r\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\r\n    switch (fieldName) {\r\n      case \"nameError\":\r\n        return !value ? \"El nombre del rol es obligatorio.\" : \"\";\r\n      case \"permissionsError\":\r\n        return !value || value.length === 0\r\n          ? \"El rol debe tener al menos un permiso asignado.\"\r\n          : \"\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\r\n    let errorMessage = getErrorMessage(fieldName, value);\r\n\r\n    if (fieldName === \"nameError\" && value) {\r\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\r\n\r\n      const total = await checkName(\r\n        \"role\",\r\n        value,\r\n        isEdit ? role.id : undefined\r\n      );\r\n\r\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\r\n      console.log(\r\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\r\n      );\r\n\r\n      if (total > 0) {\r\n        errorMessage = \"El nombre del rol ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors((prevErrors) => ({\r\n      ...prevErrors,\r\n      [fieldName]: errorMessage,\r\n    }));\r\n  };\r\n\r\n  const validateFields = async () => {\r\n    const newErrors: typeof errors = {\r\n      nameError: getErrorMessage(\"nameError\", role.name),\r\n      permissionsError: getErrorMessage(\"permissionsError\", role.permissions),\r\n    };\r\n\r\n    if (role.name) {\r\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\r\n\r\n      const total = await checkName(\r\n        \"role\",\r\n        role.name,\r\n        isEdit ? role.id : undefined\r\n      );\r\n\r\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\r\n      console.log(\r\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\r\n      );\r\n\r\n      if (total > 0) {\r\n        newErrors.nameError = \"El nombre del rol ya está en uso, elige otro.\";\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.values(newErrors).every((error) => error === \"\");\r\n  };\r\n\r\n  return { errors, validateFields, validateField };\r\n};\r\n"
      },
      "s3": {
        "useDeleteImagesS3.ts": "import { useState, useCallback } from \"react\";\r\nimport { extractS3KeyFromUrl } from \"@/utils/extractS3KeyFromUrl\";\r\n\r\nexport function useDeleteImagesS3() {\r\n  const [deleteStatus, setDeleteStatus] = useState<string | null>(null);\r\n  const [deleteProgress, setDeleteProgress] = useState<number>(0);\r\n\r\n  const deleteImages = useCallback(async (imageUrls: string[]) => {\r\n    if (imageUrls.length === 0) {\r\n      console.warn(\"⚠️ No se proporcionaron imágenes para eliminar.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setDeleteStatus(\"Eliminando imágenes...\");\r\n      setDeleteProgress(0);\r\n\r\n      const deleteResults = await Promise.allSettled(\r\n        imageUrls.map(async (url, index) => {\r\n          const s3Key = extractS3KeyFromUrl(url);\r\n          if (!s3Key) {\r\n            console.warn(\r\n              `❌ No se pudo extraer la clave de S3 de la URL: ${url}`\r\n            );\r\n            return null;\r\n          }\r\n\r\n          const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n          const response = await fetch(\"/api/s3/projects/images/delete\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ key: s3Key }),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          });\r\n\r\n          const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n          const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n          console.log(\r\n            `⏱️ Tiempo total de fetch para eliminar ${s3Key}: ${(endFetch - startFetch).toFixed(2)}ms`\r\n          );\r\n          console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n          if (!response.ok) {\r\n            throw new Error(`❌ Error al eliminar la imagen: ${s3Key}`);\r\n          }\r\n\r\n          setDeleteProgress(Math.round(((index + 1) / imageUrls.length) * 100));\r\n\r\n          return s3Key;\r\n        })\r\n      );\r\n\r\n      const successfulDeletes = deleteResults\r\n        .filter((result) => result.status === \"fulfilled\")\r\n        .map((result) => (result as PromiseFulfilledResult<string>).value);\r\n\r\n      const failedDeletes = deleteResults.filter(\r\n        (result) => result.status === \"rejected\"\r\n      );\r\n\r\n      if (failedDeletes.length > 0) {\r\n        console.warn(\r\n          \"❌ Algunas imágenes no se pudieron eliminar:\",\r\n          failedDeletes\r\n        );\r\n        setDeleteStatus(\"Algunas imágenes no se pudieron eliminar.\");\r\n      } else {\r\n        setDeleteStatus(\"Imágenes eliminadas satisfactoriamente.\");\r\n      }\r\n\r\n      return successfulDeletes;\r\n    } catch (error) {\r\n      console.error(\"❌ Error al eliminar imágenes:\", error);\r\n      setDeleteStatus(\"Error al eliminar imágenes.\");\r\n      throw error;\r\n    } finally {\r\n      setDeleteProgress(100);\r\n    }\r\n  }, []);\r\n\r\n  return { deleteImages, deleteStatus, deleteProgress };\r\n}\r\n",
        "useS3ImagesApi.ts": "import { useState, useCallback } from \"react\";\r\nimport { extractS3KeyFromUrl } from \"@/utils/extractS3KeyFromUrl\";\r\nimport { Media, ProjectMedia } from \"@/lib/definitios\";\r\n\r\nexport function useS3ImagesApi() {\r\n  const [status, setStatus] = useState<string | null>(null);\r\n  const [progress, setProgress] = useState<number>(0);\r\n\r\n  const processImage = async (file: File): Promise<File> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = (event) => {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n          const canvas = document.createElement(\"canvas\");\r\n          const maxWidth = 1200;\r\n          const maxHeight = 700;\r\n\r\n          let width = img.width;\r\n          let height = img.height;\r\n          if (width > maxWidth || height > maxHeight) {\r\n            if (width / height > maxWidth / maxHeight) {\r\n              width = maxWidth;\r\n              height = Math.round((maxWidth * img.height) / img.width);\r\n            } else {\r\n              height = maxHeight;\r\n              width = Math.round((maxHeight * img.width) / img.height);\r\n            }\r\n          }\r\n\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n\r\n          const ctx = canvas.getContext(\"2d\");\r\n          if (ctx) {\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n\r\n            canvas.toBlob(\r\n              (blob) => {\r\n                if (blob) {\r\n                  const webpFile = new File([blob], file.name, {\r\n                    type: \"image/webp\",\r\n                  });\r\n                  resolve(webpFile);\r\n                } else {\r\n                  reject(new Error(\"Error al procesar la imagen\"));\r\n                }\r\n              },\r\n              \"image/webp\",\r\n              0.75\r\n            );\r\n          }\r\n        };\r\n        img.onerror = () => reject(new Error(\"Error cargando la imagen\"));\r\n        img.src = event.target?.result as string;\r\n      };\r\n\r\n      reader.onerror = () => reject(new Error(\"Error leyendo el archivo\"));\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const uploadImages = useCallback(\r\n    async (\r\n      projectId: number,\r\n      media: Media[],\r\n      propertyTypeName: string\r\n    ): Promise<ProjectMedia[]> => {\r\n      const controller = new AbortController();\r\n      const signal = controller.signal;\r\n\r\n      try {\r\n        setStatus(\"Procesando y subiendo imágenes...\");\r\n        setProgress(0);\r\n\r\n        const processedMedia = await Promise.allSettled(\r\n          media.map(async (item, index) => {\r\n            const processedFile =\r\n              typeof item.file === \"string\"\r\n                ? null\r\n                : await processImage(item.file);\r\n\r\n            if (!processedFile) {\r\n              console.warn(\r\n                `🔹 Se omitió la subida de ${item.file} porque es una URL existente.`\r\n              );\r\n              return null;\r\n            }\r\n\r\n            const formData = new FormData();\r\n            formData.append(\"file\", processedFile);\r\n            formData.append(\r\n              \"path\",\r\n              `projects/images/${propertyTypeName}/${projectId}/${item.type}/`\r\n            );\r\n\r\n            const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n            const response = await fetch(\"/api/s3\", {\r\n              method: \"POST\",\r\n              body: formData,\r\n              signal,\r\n            });\r\n\r\n            const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n            const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n            console.log(\r\n              `⏱️ Tiempo total de fetch para subir ${processedFile.name}: ${(endFetch - startFetch).toFixed(2)}ms`\r\n            );\r\n            console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n            if (!response.ok) {\r\n              throw new Error(\r\n                `Error al cargar la imagen: ${processedFile.name}`\r\n              );\r\n            }\r\n\r\n            const { url } = await response.json();\r\n\r\n            setProgress(Math.round(((index + 1) / media.length) * 100));\r\n\r\n            return {\r\n              url,\r\n              tag: item.tag,\r\n              description: item.description,\r\n              projectId,\r\n              commonArea:\r\n                item.category === \"commonArea\" ? item.idType : undefined,\r\n              imageType:\r\n                item.category === \"imageType\" ? item.idType : undefined,\r\n            } as ProjectMedia;\r\n          })\r\n        );\r\n\r\n        const successfulUploads = processedMedia\r\n          .filter((result) => result.status === \"fulfilled\")\r\n          .map(\r\n            (result) => (result as PromiseFulfilledResult<ProjectMedia>).value\r\n          );\r\n\r\n        const failedUploads = processedMedia.filter(\r\n          (result) => result.status === \"rejected\"\r\n        );\r\n\r\n        if (failedUploads.length > 0) {\r\n          console.warn(\r\n            \"⚠️ Algunas imágenes no se pudieron subir:\",\r\n            failedUploads\r\n          );\r\n          setStatus(\"Algunas imágenes no se pudieron subir.\");\r\n        } else {\r\n          setStatus(\"Imágenes subidas satisfactoriamente.\");\r\n        }\r\n\r\n        return successfulUploads;\r\n      } catch (error) {\r\n        console.error(\"🚨 Error al subir imágenes:\", error);\r\n        setStatus(\"Error al subir imágenes.\");\r\n        throw error;\r\n      } finally {\r\n        setProgress(100);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const deleteImages = useCallback(async (imageUrls: string[]) => {\r\n    if (imageUrls.length === 0) {\r\n      console.warn(\"⚠️ No se proporcionaron imágenes para eliminar.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setStatus(\"Eliminando imágenes...\");\r\n      setProgress(0);\r\n\r\n      const deleteResults = await Promise.allSettled(\r\n        imageUrls.map(async (url, index) => {\r\n          const s3Key = extractS3KeyFromUrl(url);\r\n          if (!s3Key) {\r\n            console.warn(\r\n              `❌ No se pudo extraer la clave de S3 de la URL: ${url}`\r\n            );\r\n            return null;\r\n          }\r\n\r\n          const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n          const response = await fetch(\"/api/s3\", {\r\n            method: \"DELETE\",\r\n            body: JSON.stringify({ key: s3Key }),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          });\r\n\r\n          const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n          const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n          console.log(\r\n            `⏱️ Tiempo total de fetch para eliminar ${s3Key}: ${(endFetch - startFetch).toFixed(2)}ms`\r\n          );\r\n          console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n          if (!response.ok) {\r\n            throw new Error(`❌ Error al eliminar la imagen: ${s3Key}`);\r\n          }\r\n\r\n          setProgress(Math.round(((index + 1) / imageUrls.length) * 100));\r\n\r\n          return s3Key;\r\n        })\r\n      );\r\n\r\n      const successfulDeletes = deleteResults\r\n        .filter((result) => result.status === \"fulfilled\")\r\n        .map((result) => (result as PromiseFulfilledResult<string>).value);\r\n\r\n      const failedDeletes = deleteResults.filter(\r\n        (result) => result.status === \"rejected\"\r\n      );\r\n\r\n      if (failedDeletes.length > 0) {\r\n        console.warn(\r\n          \"❌ Algunas imágenes no se pudieron eliminar:\",\r\n          failedDeletes\r\n        );\r\n        setStatus(\"Algunas imágenes no se pudieron eliminar.\");\r\n      } else {\r\n        setStatus(\"Imágenes eliminadas satisfactoriamente.\");\r\n      }\r\n\r\n      return successfulDeletes;\r\n    } catch (error) {\r\n      console.error(\"❌ Error al eliminar imágenes:\", error);\r\n      setStatus(\"Error al eliminar imágenes.\");\r\n      throw error;\r\n    } finally {\r\n      setProgress(100);\r\n    }\r\n  }, []);\r\n\r\n  return { uploadImages, deleteImages, status, progress };\r\n}\r\n",
        "useUploadImagesS3.ts": "import { useState, useCallback } from \"react\";\nimport { Media, ProjectMedia } from \"@/lib/definitios\";\n\nexport function useUploadImagesS3() {\n  const [uploadStatus, setUploadStatus] = useState<string | null>(null);\n  const [uploadProgress, setUploadProgress] = useState<number>(0);\n\n  const processImage = async (file: File): Promise<File> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = document.createElement(\"canvas\");\n          const maxWidth = 1200;\n          const maxHeight = 700;\n\n          let width = img.width;\n          let height = img.height;\n          if (width > maxWidth || height > maxHeight) {\n            if (width / height > maxWidth / maxHeight) {\n              width = maxWidth;\n              height = Math.round((maxWidth * img.height) / img.width);\n            } else {\n              height = maxHeight;\n              width = Math.round((maxHeight * img.width) / img.height);\n            }\n          }\n\n          canvas.width = width;\n          canvas.height = height;\n\n          const ctx = canvas.getContext(\"2d\");\n          if (ctx) {\n            ctx.drawImage(img, 0, 0, width, height);\n\n            canvas.toBlob(\n              (blob) => {\n                if (blob) {\n                  const webpFile = new File([blob], file.name, {\n                    type: \"image/webp\",\n                  });\n                  resolve(webpFile);\n                } else {\n                  reject(new Error(\"Error al procesar la imagen\"));\n                }\n              },\n              \"image/webp\",\n              0.75\n            );\n          }\n        };\n        img.onerror = () => reject(new Error(\"Error cargando la imagen\"));\n        img.src = event.target?.result as string;\n      };\n\n      reader.onerror = () => reject(new Error(\"Error leyendo el archivo\"));\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const uploadImages = useCallback(\n    async (\n      projectId: number,\n      media: Media[],\n      propertyTypeName: string\n    ): Promise<ProjectMedia[]> => {\n      const controller = new AbortController();\n      const signal = controller.signal;\n\n      try {\n        setUploadStatus(\"Procesando y cargando imágenes...\");\n        setUploadProgress(0);\n\n        const processedMedia = await Promise.allSettled(\n          media.map(async (item, index) => {\n            const processedFile =\n              typeof item.file === \"string\"\n                ? null\n                : await processImage(item.file);\n\n            if (!processedFile) {\n              console.warn(\n                `🔹 Se omitió la subida de ${item.file} porque es una URL existente.`\n              );\n              return null;\n            }\n\n            const formData = new FormData();\n            formData.append(\"file\", processedFile);\n            formData.append(\n              \"path\",\n              `projects/images/${propertyTypeName}/${projectId}/${item.type}/`\n            );\n\n            const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n            const response = await fetch(\"/api/s3/projects/images/upload\", {\n              method: \"POST\",\n              body: formData,\n              signal,\n            });\n\n            const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n            const serverTiming = response.headers.get(\"Server-Timing\");\n\n            console.log(\n              `⏱️ Tiempo total de fetch para subir imagen: ${(endFetch - startFetch).toFixed(2)}ms`\n            );\n            console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n            if (!response.ok) {\n              throw new Error(\n                `Error al cargar la imagen: ${\n                  typeof item.file === \"string\"\n                    ? \"URL existente\"\n                    : item.file.name\n                }`\n              );\n            }\n\n            const { url } = await response.json();\n\n            setUploadProgress(Math.round(((index + 1) / media.length) * 100));\n\n            return {\n              url,\n              tag: item.tag,\n              description: item.description,\n              projectId,\n              commonArea:\n                item.category === \"commonArea\" ? item.idType : undefined,\n              imageType:\n                item.category === \"imageType\" ? item.idType : undefined,\n            } as ProjectMedia;\n          })\n        );\n\n        const successfulUploads = processedMedia\n          .filter((result) => result.status === \"fulfilled\")\n          .map(\n            (result) => (result as PromiseFulfilledResult<ProjectMedia>).value\n          );\n\n        const failedUploads = processedMedia.filter(\n          (result) => result.status === \"rejected\"\n        );\n\n        if (failedUploads.length > 0) {\n          console.warn(\"Algunas imágenes no se pudieron subir:\", failedUploads);\n          setUploadStatus(\"Algunas imágenes no se pudieron subir.\");\n        } else {\n          setUploadStatus(\"Imágenes subidas satisfactoriamente.\");\n        }\n\n        return successfulUploads;\n      } catch (error) {\n        console.error(\"Error al subir imágenes:\", error);\n        setUploadStatus(\"Error al subir imágenes.\");\n        throw error;\n      } finally {\n        setUploadProgress(100);\n      }\n    },\n    []\n  );\n\n  return { uploadImages, uploadStatus, uploadProgress };\n}\n"
      },
      "useBodyOverflow .ts": "import { useEffect } from \"react\";\n\nexport const useBodyOverflow = (isOpen: boolean) => {\n  useEffect(() => {\n    document.body.style.overflow = isOpen ? \"hidden\" : \"auto\";\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n};\n",
      "userDarkMode.ts": "import { useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\" | \"auto\";\n\nexport default function useDarkMode() {\n  const [theme, setTheme] = useState<Theme>(\"auto\");\n\n  useEffect(() => {\n    const savedTheme = (localStorage.getItem(\"theme\") as Theme) || \"auto\";\n    applyTheme(savedTheme);\n    setTheme(savedTheme);\n\n    const handleSystemChange = (e: MediaQueryListEvent) => {\n      if (theme === \"auto\") {\n        applyTheme(e.matches ? \"dark\" : \"light\");\n      }\n    };\n\n    window\n      .matchMedia(\"(prefers-color-scheme: dark)\")\n      .addEventListener(\"change\", handleSystemChange);\n\n    return () => {\n      window\n        .matchMedia(\"(prefers-color-scheme: dark)\")\n        .removeEventListener(\"change\", handleSystemChange);\n    };\n  }, [theme]);\n\n  const applyTheme = (newTheme: Theme) => {\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\",\n    ).matches;\n    const themeToApply =\n      newTheme === \"auto\" ? (prefersDark ? \"dark\" : \"light\") : newTheme;\n\n    document.documentElement.classList.remove(\"light\", \"dark\");\n    document.documentElement.classList.add(themeToApply);\n  };\n\n  const toggleTheme = (newTheme: Theme) => {\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    applyTheme(newTheme);\n  };\n\n  return { theme, toggleTheme };\n}\n",
      "users": {
        "useCheckEmail.ts": "import { useCallback, useState } from \"react\";\r\n\r\nexport function useCheckEmail() {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const checkEmailExists = useCallback(\r\n    async (email: string): Promise<number | null> => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n        const response = await fetch(\r\n          `/api/users/check-email?email=${encodeURIComponent(email)}`,\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch para verificar email: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data?.id ?? null;\r\n      } catch (err) {\r\n        console.error(\"Error al verificar email:\", err);\r\n        setError(\"Error al verificar el correo electrónico.\");\r\n        return null;\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  return { checkEmailExists, loading, error };\r\n}\r\n",
        "useGetUserProjects.ts": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { ProjectSummary } from \"@/lib/definitios\";\r\nimport { useDebouncedCallback } from \"use-debounce\";\r\n\r\ninterface UseUserProjectsOptions {\r\n  userId: number;\r\n  entriesPerPage: number;\r\n}\r\n\r\nexport function useGetUserProjects({\r\n  userId,\r\n  entriesPerPage,\r\n}: UseUserProjectsOptions) {\r\n  const [projects, setProjects] = useState<ProjectSummary[]>([]);\r\n  const [totalEntries, setTotalEntries] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorProjects, setErrorProjects] = useState<string | null>(null);\r\n\r\n  const debouncedSearch = useDebouncedCallback((term: string) => {\r\n    setSearchTerm(term);\r\n    resetProjects();\r\n  }, 300);\r\n\r\n  const resetProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n  }, []);\r\n\r\n  const fetchUserProjects = useCallback(\r\n    async (isLoadMore = false, page = 1) => {\r\n      if (isLoading || userId <= 0) return;\r\n      setIsLoading(true);\r\n      const controller = new AbortController();\r\n      const signal = controller.signal;\r\n\r\n      try {\r\n        const startFetch = performance.now(); // Inicia medición\r\n\r\n        const params = new URLSearchParams({\r\n          userId: userId.toString(),\r\n          page: page.toString(),\r\n          pageSize: entriesPerPage.toString(),\r\n          searchTerm,\r\n        });\r\n\r\n        const response = await fetch(\r\n          `/api/users/projects?${params.toString()}`,\r\n          { signal }\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error fetching user projects: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        const data = await response.json();\r\n        const newProjects: ProjectSummary[] = data.projects;\r\n\r\n        const endFetch = performance.now(); // Finaliza medición\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\r\n          `📦 Tamaño de respuesta: ${JSON.stringify(data).length} bytes`\r\n        );\r\n\r\n        setProjects((prev) =>\r\n          isLoadMore\r\n            ? [\r\n                ...prev,\r\n                ...newProjects.filter(\r\n                  (p) => !prev.some((prop) => prop.id === p.id)\r\n                ),\r\n              ]\r\n            : newProjects\r\n        );\r\n\r\n        setTotalEntries(data.totalEntries);\r\n      } catch (error: any) {\r\n        if (error.name !== \"AbortError\") {\r\n          setErrorProjects(error.message || \"Error desconocido\");\r\n        }\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n\r\n      return () => controller.abort();\r\n    },\r\n    [entriesPerPage, isLoading, searchTerm, userId]\r\n  );\r\n\r\n  useEffect(() => {\r\n    console.log(\"🔄 Fetching User Projects...\");\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      fetchUserProjects(false, 1);\r\n    }, 500); // Espera 500ms antes de llamar la API (reduce llamadas innecesarias)\r\n\r\n    return () => clearTimeout(timeoutId); // Cancela llamadas anteriores si hay nuevos cambios\r\n  }, [searchTerm, userId]);\r\n\r\n  const fetchMoreUserProjects = useCallback(() => {\r\n    if (!isLoading) {\r\n      const nextPage = currentPage + 1;\r\n      setCurrentPage(nextPage);\r\n      fetchUserProjects(true, nextPage);\r\n    }\r\n  }, [currentPage, isLoading, fetchUserProjects]);\r\n\r\n  const refreshUserProjects = useCallback(() => {\r\n    setProjects([]);\r\n    setCurrentPage(1);\r\n    fetchUserProjects(false, 1);\r\n  }, [fetchUserProjects]);\r\n\r\n  return {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreUserProjects,\r\n    debouncedSearch,\r\n    resetProjects,\r\n    refreshUserProjects,\r\n    isLoading,\r\n    errorProjects,\r\n  };\r\n}\r\n",
        "useSearchEmails.ts": "import { useState, useCallback } from \"react\";\r\n\r\ninterface EmailResult {\r\n  id: number;\r\n  email: string;\r\n}\r\n\r\nexport function useSearchEmails() {\r\n  const [emails, setEmails] = useState<EmailResult[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchEmails = useCallback(async (searchTerm: string) => {\r\n    if (!searchTerm.trim()) {\r\n      setEmails([]);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n      const response = await fetch(\r\n        `/api/users/emails?searchTerm=${encodeURIComponent(searchTerm)}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n      const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n      console.log(\r\n        `⏱️ Tiempo total de fetch para buscar emails: ${(endFetch - startFetch).toFixed(2)}ms`\r\n      );\r\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Error: ${response.statusText}`);\r\n      }\r\n\r\n      const data: EmailResult[] = await response.json();\r\n      setEmails(data);\r\n    } catch (err) {\r\n      console.error(\"Error al buscar emails:\", err);\r\n      setError(\"Error al obtener los correos electrónicos.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return { emails, loading, error, fetchEmails };\r\n}\r\n",
        "useUserApi.ts": "import { useState } from \"react\";\nimport { UserData } from \"@/lib/definitios\";\n\nexport const useUserApi = () => {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const submitUser = async (\n    user: UserData,\n    action: \"register\" | \"edit\"\n  ): Promise<boolean> => {\n    setIsProcessing(true);\n    setError(null);\n\n    try {\n      const method = action === \"edit\" ? \"PUT\" : \"POST\";\n\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\"/api/users\", {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(user),\n      });\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch para procesar usuario: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        const { error } = await response.json();\n        throw new Error(error || \"Error al procesar el usuario\");\n      }\n\n      return true;\n    } catch (err: any) {\n      console.error(\"Error al procesar el usuario:\", err.message);\n      setError(err.message || \"Error desconocido\");\n      return false;\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return { submitUser, isProcessing, error };\n};\n",
        "useUsers.ts": "import { useState, useEffect, useCallback } from \"react\";\nimport { User } from \"@/lib/definitios\";\n\nexport const useUsers = (\n  currentPage: number,\n  entriesPerPage: number,\n  searchTerm: string\n) => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [totalEntries, setTotalEntries] = useState(0);\n  const [isLoadingUsers, setIsLoadingUsers] = useState(true);\n\n  const fetchUsers = useCallback(async () => {\n    setIsLoadingUsers(true);\n    try {\n      const startFetch = performance.now(); // Inicia medición del tiempo de fetch\n\n      const response = await fetch(\n        `/api/users?page=${currentPage}&pageSize=${entriesPerPage}&searchTerm=${encodeURIComponent(\n          searchTerm\n        )}`\n      );\n\n      const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\n      const serverTiming = response.headers.get(\"Server-Timing\");\n\n      console.log(\n        `⏱️ Tiempo total de fetch para obtener usuarios: ${(endFetch - startFetch).toFixed(2)}ms`\n      );\n      console.log(\"⏳ Server Timing Metrics:\", serverTiming);\n\n      if (!response.ok) {\n        throw new Error(`Error fetching users: ${response.statusText}`);\n      }\n      const data = await response.json();\n      setUsers(data.users);\n      setTotalEntries(data.totalEntries);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    } finally {\n      setIsLoadingUsers(false);\n    }\n  }, [currentPage, entriesPerPage, searchTerm]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  return { users, totalEntries, isLoadingUsers, refetchUsers: fetchUsers };\n};\n",
        "useUsersMetadata.ts": "import { useState, useEffect } from \"react\";\r\nimport { Role, Gender, MembershipSummary } from \"@/lib/definitios\";\r\n\r\nexport const useUsersMetadata = () => {\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [genders, setGenders] = useState<Gender[]>([]);\r\n  const [memberships, setMemberships] = useState<MembershipSummary[]>([]);\r\n  const [isLoadingUsersMetadata, setIsLoadingUsersMetadata] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchUsersMetadata = async () => {\r\n      setIsLoadingUsersMetadata(true);\r\n      try {\r\n        const startFetch = performance.now(); // Inicia medición del tiempo de fetch\r\n\r\n        const response = await fetch(\"/api/users/metadata\");\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Error en la busqueda de datos de usuario: ${response.statusText}`\r\n          );\r\n        }\r\n\r\n        const endFetch = performance.now(); // Finaliza medición del tiempo de fetch\r\n        const serverTiming = response.headers.get(\"Server-Timing\");\r\n\r\n        console.log(\r\n          `⏱️ Tiempo total de fetch para obtener metadata de usuarios: ${(endFetch - startFetch).toFixed(2)}ms`\r\n        );\r\n        console.log(\"⏳ Server Timing Metrics:\", serverTiming);\r\n\r\n        const data = await response.json();\r\n        setRoles(data.roles);\r\n        setGenders(data.genders);\r\n        setMemberships(data.memberships);\r\n      } catch (error) {\r\n        console.error(\"Error en la busqueda de datos de usuario:\", error);\r\n      } finally {\r\n        setIsLoadingUsersMetadata(false);\r\n      }\r\n    };\r\n\r\n    fetchUsersMetadata();\r\n  }, []);\r\n\r\n  return { roles, genders, memberships, isLoadingUsersMetadata };\r\n};\r\n",
        "useUserValidation.ts": "import { useState } from \"react\";\nimport { useCheckName } from \"../checkName/useCheckName\";\n\nexport const useUserValidation = (user: any, isEdit: boolean) => {\n  const [errors, setErrors] = useState({\n    usernameError: \"\",\n    namesError: \"\",\n    lastnamesError: \"\",\n    emailError: \"\",\n    phoneNumberError: \"\",\n    genderError: \"\",\n    roleError: \"\",\n    membershipError: \"\",\n  });\n  const { checkName } = useCheckName();\n\n  const getErrorMessage = (fieldName: keyof typeof errors, value: any) => {\n    switch (fieldName) {\n      case \"usernameError\":\n        return !value ? \"El nombre de usuario es obligatorio.\" : \"\";\n      case \"namesError\":\n        return !value ? \"El nombre es obligatorio.\" : \"\";\n      case \"lastnamesError\":\n        return !value ? \"El apellido es obligatorio.\" : \"\";\n      case \"emailError\":\n        return !value\n          ? \"El correo electrónico es obligatorio.\"\n          : !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)\n            ? \"El correo electrónico no es válido.\"\n            : \"\";\n      case \"phoneNumberError\":\n        return !value\n          ? \"El número de teléfono es obligatorio.\"\n          : !/^\\d{10}$/.test(value)\n            ? \"El número de teléfono debe tener 10 dígitos.\"\n            : \"\";\n      case \"genderError\":\n        return !value ? \"El género es obligatorio.\" : \"\";\n      case \"roleError\":\n        return !value ? \"El rol es obligatorio.\" : \"\";\n      case \"membershipError\":\n        return !value ? \"La membresía es obligatoria.\" : \"\";\n      default:\n        return \"\";\n    }\n  };\n\n  const validateField = async (fieldName: keyof typeof errors, value: any) => {\n    let errorMessage = getErrorMessage(fieldName, value);\n\n    if (fieldName === \"usernameError\" && value) {\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\n\n      const total = await checkName(\n        \"user\",\n        value,\n        isEdit ? user.id : undefined\n      );\n\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\n      console.log(\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\n      );\n\n      if (total > 0) {\n        errorMessage = \"El nombre de usuario ya está en uso, elige otro.\";\n      }\n    }\n\n    setErrors((prevErrors) => ({\n      ...prevErrors,\n      [fieldName]: errorMessage,\n    }));\n  };\n\n  const validateFields = async () => {\n    const newErrors: typeof errors = {\n      usernameError: getErrorMessage(\"usernameError\", user.username),\n      namesError: getErrorMessage(\"namesError\", user.names),\n      lastnamesError: getErrorMessage(\"lastnamesError\", user.lastnames),\n      emailError: getErrorMessage(\"emailError\", user.email),\n      phoneNumberError: getErrorMessage(\"phoneNumberError\", user.phoneNumber),\n      genderError: getErrorMessage(\"genderError\", user.gender?.id),\n      roleError: getErrorMessage(\"roleError\", user.role?.id),\n      membershipError: getErrorMessage(\"membershipError\", user.membership?.id),\n    };\n\n    if (user.username) {\n      const startCheckName = performance.now(); // Inicia medición del tiempo de verificación de nombre\n\n      const total = await checkName(\n        \"user\",\n        user.username,\n        isEdit ? user.id : undefined\n      );\n\n      const endCheckName = performance.now(); // Finaliza medición del tiempo de verificación de nombre\n      console.log(\n        `⏱️ Tiempo de verificación de nombre: ${(endCheckName - startCheckName).toFixed(2)}ms`\n      );\n\n      if (total > 0) {\n        newErrors.usernameError =\n          \"El nombre de usuario ya está en uso, elige otro.\";\n      }\n    }\n\n    setErrors(newErrors);\n\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve(Object.values(newErrors).every((error) => error === \"\"));\n      }, 0);\n    });\n  };\n\n  return { errors, validateFields, validateField };\n};\n"
      }
    },
    "login": {
      "forgot-password": {
        "page.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport clsx from \"clsx\";\nimport Link from \"next/link\";\nimport FormErrorMessage from \"@/app/ui/modals/formErrorMessage\";\n\nexport default function Page() {\n  const router = useRouter();\n  const [email, setEmail] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [emptyFieldError, setEmptyFieldError] = useState(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    setEmailError(\"\");\n    setEmptyFieldError(\"\");\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    if (!email) {\n      setEmptyFieldError(\"El campo de correo electrónico es obligatorio.\");\n      return;\n    }\n\n    if (!emailRegex.test(email)) {\n      setEmailError(\"El correo electrónico no es válido.\");\n      return;\n    }\n  };\n\n  return (\n    <div className=\"mt-10 flex h-screen w-full items-center justify-center md:mt-0\">\n      <div className=\"grid gap-8\">\n        <section id=\"back-div\" className=\"rounded-2xl\">\n          <div className=\"m-2 rounded-xl bg-gray-50 p-8 shadow-xl\">\n            <h1 className=\"mb-6 cursor-default text-center text-2xl font-bold text-gray-900\">\n              Restablece tu contraseña\n            </h1>\n\n            <p className=\"mb-6 text-center text-gray-600\">\n              Escribe tu dirección de correo electrónico y te enviaremos las\n              <br />\n              instrucciones para restablecer la contraseña.\n            </p>\n\n            <form onSubmit={handleSubmit} className=\"mt-8 space-y-6\">\n              <div>\n                <label htmlFor=\"email\" className=\"mb-2 block text-base\">\n                  Correo electrónico\n                </label>\n\n                <input\n                  id=\"email\"\n                  className={clsx(\n                    \"w-full transform rounded-lg border p-3 shadow-md transition duration-300 hover:scale-105 focus:ring-2 focus:ring-gray-800\",\n                    emailError || emptyFieldError\n                      ? \"border-red-500 bg-red-50\"\n                      : \"border-gray-500\"\n                  )}\n                  type=\"text\"\n                  placeholder=\"tu-email@ejemplo.com\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                />\n\n                {emailError && <FormErrorMessage error={emailError} />}\n                {emptyFieldError && (\n                  <FormErrorMessage error={emptyFieldError} />\n                )}\n              </div>\n\n              <button\n                className=\"mt-4 w-full transform rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 p-3 text-white shadow-lg transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                type=\"submit\"\n              >\n                Continuar\n              </button>\n\n              <button\n                className=\"mt-4 w-full transform rounded-lg bg-gray-200 p-3 text-gray-700 shadow-lg transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n                type=\"button\"\n                onClick={() => router.push(\"/\")}\n              >\n                Volver a EdifiK\n              </button>\n            </form>\n\n            <div className=\"mt-4 text-center text-sm text-gray-500\">\n              <p>\n                Acepta nuestros{\" \"}\n                <Link\n                  href=\"#\"\n                  className=\"text-blue-400 transition hover:underline\"\n                >\n                  Términos\n                </Link>{\" \"}\n                y{\" \"}\n                <Link\n                  href=\"#\"\n                  className=\"text-blue-400 transition hover:underline\"\n                >\n                  Política de privacidad\n                </Link>\n                .\n              </p>\n            </div>\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n}\n"
      },
      "layout.tsx": "import type { Metadata } from \"next\";\nimport { poppins } from \"@/app/fonts/fonts\";\nimport { Providers } from \"../providers\";\nimport \"../globals.css\";\n\nexport const metadata: Metadata = {\n  title: \"Iniciar Sesión\",\n  description: \"Inicia sesión para acceder a EdifiK\",\n};\n\nexport default function AdminLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"es\">\n      <body\n        className={`${poppins.className} flex min-h-screen flex-col antialiased`}\n      >\n        <Providers>\n          <main className=\"flex-grow\">{children}</main>\n        </Providers>\n      </body>\n    </html>\n  );\n}\n",
      "page.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport { signIn } from \"next-auth/react\";\nimport { useRouter } from \"next/navigation\";\nimport dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\nimport Link from \"next/link\";\nimport { Eye } from \"lucide-react\";\nimport GoogleIcon from \"../ui/icons/googleIcon\";\nimport FacebookIcon from \"../ui/icons/facebookIcon\";\nimport AppleIcon from \"../ui/icons/appleIcon\";\n\nconst EyeOff = dynamic(() => import(\"lucide-react\").then((mod) => mod.EyeOff));\nconst Info = dynamic(() => import(\"lucide-react\").then((mod) => mod.Info));\n\nexport default function Page() {\n  const [showPassword, setShowPassword] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [emptyFieldError, setEmptyFieldError] = useState(\"\");\n  const router = useRouter();\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    setEmailError(\"\");\n    setPasswordError(\"\");\n    setEmptyFieldError(\"\");\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    let isValid = true;\n\n    if (!email || !password) {\n      setEmptyFieldError(\"Todos los campos son obligatorios.\");\n      isValid = false;\n    }\n\n    if (email && !emailRegex.test(email)) {\n      setEmailError(\"El correo electrónico no es válido.\");\n      isValid = false;\n    }\n\n    if (password && password.length < 8) {\n      setPasswordError(\"La contraseña debe tener al menos 8 caracteres.\");\n      isValid = false;\n    }\n\n    if (isValid) {\n      router.push(\"/\");\n    }\n  };\n\n  return (\n    <div className=\"mt-10 flex h-screen w-full items-center justify-center bg-white bg-[radial-gradient(rgba(12,12,12,0.171)_2px,transparent_0)] bg-[length:30px_30px] bg-[position:-5px_-5px] md:mt-0\">\n      <section\n        id=\"back-div\"\n        className=\"rounded-2xl border border-gray-200 bg-gray-50 p-8 shadow-lg\"\n      >\n        <h1 className=\"mb-2 cursor-default text-center text-2xl font-bold text-gray-900\">\n          Bienvenido a EdifiK\n        </h1>\n\n        <form onSubmit={handleSubmit} className=\"mt-8 space-y-6\">\n          <div>\n            <label htmlFor=\"email\" className=\"mb-2 block text-base\">\n              Correo electrónico\n            </label>\n\n            <input\n              id=\"email\"\n              className={clsx(\n                \"w-full transform rounded-lg border p-3 shadow-md transition duration-300 hover:scale-105 focus:ring-2 focus:ring-gray-800\",\n                emailError || emptyFieldError\n                  ? \"border-red-500 bg-red-50\"\n                  : \"border-gray-500\"\n              )}\n              type=\"text\"\n              placeholder=\"tu-email@ejemplo.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n\n            {emailError && (\n              <div className=\"mt-1 flex items-center gap-2 text-sm text-red-500\">\n                <Info className=\"h-5 w-5\" />\n                {emailError}\n              </div>\n            )}\n          </div>\n\n          <div className=\"transform transition duration-300 hover:scale-105\">\n            <label htmlFor=\"password\" className=\"mb-2 block text-base\">\n              Contraseña\n            </label>\n\n            <div className=\"relative\">\n              <input\n                id=\"password\"\n                className={clsx(\n                  \"w-full rounded-lg border p-3 shadow-md focus:ring-2 focus:ring-gray-800\",\n                  passwordError || emptyFieldError\n                    ? \"border-red-500 bg-red-50\"\n                    : \"border-gray-500\"\n                )}\n                type={showPassword ? \"text\" : \"password\"}\n                placeholder=\"••••••••\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <button\n                type=\"button\"\n                onClick={togglePasswordVisibility}\n                className=\"absolute inset-y-0 right-0 flex items-center text-gray-600 hover:rounded-r-lg hover:border-b hover:border-r hover:border-t hover:border-b-gray-500 hover:border-r-gray-500 hover:border-t-gray-500 hover:bg-gray-300\"\n              >\n                {showPassword ? (\n                  <EyeOff className=\"ml-2 mr-2 h-5 w-5\" />\n                ) : (\n                  <Eye className=\"ml-2 mr-2 h-5 w-5\" />\n                )}\n              </button>\n            </div>\n\n            {passwordError && (\n              <div className=\"mt-1 flex items-center gap-2 text-sm text-red-500\">\n                <Info className=\"h-5 w-5\" />\n                {passwordError}\n              </div>\n            )}\n          </div>\n\n          {emptyFieldError && (\n            <div className=\"mt-1 flex items-center gap-2 text-sm text-red-500\">\n              <Info className=\"h-5 w-5\" />\n              {emptyFieldError}\n            </div>\n          )}\n\n          <Link\n            href=\"/login/forgot-password\"\n            className=\"text-sm text-blue-500 transition hover:underline\"\n          >\n            ¿Olvidaste tu contraseña?\n          </Link>\n\n          <button\n            className=\"mt-4 w-full transform rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 p-3 text-white shadow-lg transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            type=\"submit\"\n          >\n            Continuar\n          </button>\n        </form>\n\n        <div className=\"mt-4 flex flex-col text-center text-sm\">\n          <p>\n            ¿No tienes cuenta?{\" \"}\n            <Link\n              href=\"/login/register\"\n              className=\"text-blue-500 transition hover:underline\"\n            >\n              Registrate\n            </Link>\n          </p>\n        </div>\n\n        <div id=\"third-party-auth\" className=\"mt-5 flex justify-center gap-4\">\n          <button\n            className=\"transform rounded-lg p-2 shadow-lg transition duration-300 hover:scale-125\"\n            onClick={async () => {\n              await signIn(\"google\", { callbackUrl: \"/admin\" });\n            }}\n          >\n            <GoogleIcon className=\"h-6 w-6\" />\n          </button>\n\n          <button className=\"transform rounded-lg p-2 shadow-lg transition duration-300 hover:scale-125\">\n            <FacebookIcon className=\"h-6 w-6\" />\n          </button>\n\n          <button className=\"transform rounded-lg p-2 shadow-lg transition duration-300 hover:scale-125\">\n            <AppleIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"mt-4 text-center text-sm text-gray-500\">\n          <p>\n            Al iniciar sesión, acepta nuestros{\" \"}\n            <Link href=\"#\" className=\"text-blue-400 transition hover:underline\">\n              Términos\n            </Link>{\" \"}\n            y{\" \"}\n            <Link href=\"#\" className=\"text-blue-400 transition hover:underline\">\n              Política de privacidad\n            </Link>\n            .\n          </p>\n        </div>\n      </section>\n    </div>\n  );\n}\n",
      "register": {
        "page.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport clsx from \"clsx\";\nimport Link from \"next/link\";\nimport { Eye, EyeOff } from \"lucide-react\";\nimport GoogleIcon from \"@/app/ui/icons/googleIcon\";\nimport FacebookIcon from \"@/app/ui/icons/facebookIcon\";\nimport AppleIcon from \"@/app/ui/icons/appleIcon\";\nimport FormErrorMessage from \"@/app/ui/modals/formErrorMessage\";\n\nexport default function Page() {\n  const [showPassword, setShowPassword] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [emptyFieldError, setEmptyFieldError] = useState(\"\");\n  const [showPasswordInput, setShowPasswordInput] = useState(false);\n\n  const router = useRouter();\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleEmailSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setEmailError(\"\");\n    setEmptyFieldError(\"\");\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    if (!email) {\n      setEmptyFieldError(\"El campo de correo electrónico es obligatorio.\");\n      return;\n    }\n\n    if (!emailRegex.test(email)) {\n      setEmailError(\"El correo electrónico no es válido.\");\n      return;\n    }\n\n    setShowPasswordInput(true);\n  };\n\n  const handlePasswordSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setPasswordError(\"\");\n\n    if (!password) {\n      setPasswordError(\"La contraseña es obligatoria.\");\n      return;\n    }\n\n    if (password.length < 8) {\n      setPasswordError(\"La contraseña debe tener al menos 8 caracteres.\");\n      return;\n    }\n\n    router.push(\"/login\");\n  };\n\n  return (\n    <div className=\"mt-10 flex h-screen w-full items-center justify-center md:mt-0\">\n      <div className=\"grid gap-8\">\n        <section id=\"back-div\" className=\"rounded-2xl\">\n          <div className=\"m-2 rounded-xl bg-gray-50 p-8 shadow-xl\">\n            <h1 className=\"mb-2 cursor-default text-center text-2xl font-bold text-gray-900\">\n              Crea una cuenta\n            </h1>\n\n            {!showPasswordInput ? (\n              <form onSubmit={handleEmailSubmit} className=\"mt-8 space-y-6\">\n                <div>\n                  <label htmlFor=\"email\" className=\"mb-2 block text-base\">\n                    Correo electrónico\n                  </label>\n\n                  <input\n                    id=\"email\"\n                    className={clsx(\n                      \"w-full transform rounded-lg border p-3 shadow-md transition duration-300 hover:scale-105 focus:ring-2 focus:ring-gray-800\",\n                      emailError || emptyFieldError\n                        ? \"border-red-500 bg-red-50\"\n                        : \"border-gray-500\"\n                    )}\n                    type=\"text\"\n                    placeholder=\"tu-email@ejemplo.com\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n\n                  {emailError && <FormErrorMessage error={emailError} />}\n                  {emptyFieldError && (\n                    <FormErrorMessage error={emptyFieldError} />\n                  )}\n                </div>\n\n                <button\n                  className=\"mt-4 w-full transform rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 p-3 text-white shadow-lg transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  type=\"submit\"\n                >\n                  Continuar\n                </button>\n              </form>\n            ) : (\n              <form onSubmit={handlePasswordSubmit} className=\"mt-8 space-y-6\">\n                <div className=\"transform transition duration-300 hover:scale-105\">\n                  <label htmlFor=\"password\" className=\"mb-2 block text-base\">\n                    Contraseña\n                  </label>\n\n                  <div className=\"relative\">\n                    <input\n                      id=\"password\"\n                      className={clsx(\n                        \"w-full rounded-lg border p-3 shadow-md focus:ring-2 focus:ring-gray-800\",\n                        passwordError\n                          ? \"border-red-500 bg-red-50\"\n                          : \"border-gray-500\"\n                      )}\n                      type={showPassword ? \"text\" : \"password\"}\n                      placeholder=\"••••••••\"\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={togglePasswordVisibility}\n                      className=\"absolute inset-y-0 right-0 flex items-center text-gray-600 hover:rounded-r-lg hover:border-b hover:border-r hover:border-t hover:border-b-gray-500 hover:border-r-gray-500 hover:border-t-gray-500 hover:bg-gray-300\"\n                    >\n                      {showPassword ? (\n                        <EyeOff className=\"ml-2 mr-2 h-5 w-5\" />\n                      ) : (\n                        <Eye className=\"ml-2 mr-2 h-5 w-5\" />\n                      )}\n                    </button>\n                  </div>\n\n                  {passwordError && <FormErrorMessage error={passwordError} />}\n                </div>\n\n                <button\n                  className=\"mt-4 w-full transform rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 p-3 text-white shadow-lg transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  type=\"submit\"\n                >\n                  Continuar\n                </button>\n\n                <button\n                  className=\"mt-4 w-full transform rounded-lg bg-gray-200 p-3 text-gray-700 shadow-lg transition duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n                  type=\"button\"\n                  onClick={() => setShowPasswordInput(false)}\n                >\n                  Volver\n                </button>\n              </form>\n            )}\n\n            <div className=\"mt-4 flex flex-col text-center text-sm\">\n              <p>\n                ¿Ya tienes una cuenta?{\" \"}\n                <Link\n                  href=\"/login\"\n                  className=\"text-blue-500 transition hover:underline\"\n                >\n                  Inicia sesión\n                </Link>\n              </p>\n            </div>\n\n            <div\n              id=\"third-party-auth\"\n              className=\"mt-5 flex justify-center gap-4\"\n            >\n              <button className=\"transform rounded-lg p-2 shadow-lg transition duration-300 hover:scale-125\">\n                <GoogleIcon className=\"h-6 w-6 text-red-500\" />\n              </button>\n              <button className=\"transform rounded-lg p-2 shadow-lg transition duration-300 hover:scale-125\">\n                <FacebookIcon className=\"h-6 w-6 text-blue-600\" />\n              </button>\n              <button className=\"transform rounded-lg p-2 shadow-lg transition duration-300 hover:scale-125\">\n                <AppleIcon className=\"h-6 w-6 text-black\" />\n              </button>\n            </div>\n\n            <div className=\"mt-4 text-center text-sm text-gray-500\">\n              <p>\n                Al crear una cuenta, acepta nuestros{\" \"}\n                <Link\n                  href=\"#\"\n                  className=\"text-blue-400 transition hover:underline\"\n                >\n                  Términos\n                </Link>{\" \"}\n                y{\" \"}\n                <Link\n                  href=\"#\"\n                  className=\"text-blue-400 transition hover:underline\"\n                >\n                  Política de privacidad\n                </Link>\n                .\n              </p>\n            </div>\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n}\n"
      }
    },
    "providers.tsx": "\"use client\";\nimport { SessionProvider } from \"next-auth/react\";\nimport { Session } from \"next-auth\";\n\nexport function Providers({\n  children,\n  session,\n}: {\n  children: React.ReactNode;\n  session?: Session | null;\n}) {\n  return <SessionProvider session={session}>{children}</SessionProvider>;\n}\n",
    "ui": {
      "about": {
        "certificationCard.tsx": "import Image from \"next/image\";\n\ninterface CertificationCardProps {\n  title: string;\n  description: string;\n  imageSrc: string;\n  bgColor: string;\n}\n\nexport default function CertificationCard({\n  title,\n  description,\n  imageSrc,\n  bgColor,\n}: CertificationCardProps) {\n  return (\n    <div className=\"col-span-3 mx-auto flex w-full md:col-span-1\">\n      <div\n        className={`flex w-full flex-col justify-between rounded-lg border px-6 py-8 text-center shadow ${bgColor} border-blue-700`}\n      >\n        <div className=\"px-2 py-0\">\n          <h3 className=\"mb-5 text-center text-xl font-semibold uppercase leading-6 tracking-wider md:text-3xl\">\n            {title}\n          </h3>\n          <p className=\"text-justify font-light text-gray-700\">{description}</p>\n        </div>\n        <div className=\"mt-8 justify-center text-center\">\n          <Image\n            src={imageSrc}\n            alt={`Certificado de ${title}`}\n            width={500}\n            height={150}\n            className=\"mx-auto\"\n            priority\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "socialResponsibilitySection.tsx": "import Image from \"next/image\";\n//import { FaCheck } from \"react-icons/fa\";\n\ninterface Point {\n  title: string;\n  description: string;\n}\n\ninterface SocialResponsibilitySectionProps {\n  title: string;\n  description: string;\n  points: Point[];\n  imageSrc: string;\n  imagePosition: \"left\" | \"right\";\n}\n\nexport default function SocialResponsibilitySection({\n  title,\n  description,\n  points,\n  imageSrc,\n  imagePosition,\n}: SocialResponsibilitySectionProps) {\n  const isImageLeft = imagePosition === \"left\";\n\n  return (\n    <section className=\"bg-transparent p-5\">\n      <div\n        className={`mx-auto mb-10 grid grid-cols-1 gap-2 p-5 md:grid-cols-2 lg:gap-10 lg:p-10`}\n      >\n        {/* Condicional para mostrar la imagen a la izquierda o derecha */}\n        {isImageLeft && (\n          <div className=\"mx-auto grid w-3/4 grid-cols-1 gap-5 px-0 pt-5 lg:w-full lg:px-10\">\n            <Image\n              className=\"h-auto w-full self-center object-cover xl:self-start\"\n              src={imageSrc}\n              alt={title}\n              width={768}\n              height={768}\n              priority\n            />\n          </div>\n        )}\n\n        <div className=\"mx-8 py-5 text-left\">\n          <div className=\"mb-10\">\n            <h2 className=\"mb-10 text-2xl font-semibold text-blue-600 md:text-4xl\">\n              {title}\n            </h2>\n            <p className=\"text-justify text-sm text-gray-700 md:text-base lg:text-left\">\n              {description}\n            </p>\n          </div>\n\n          <div className=\"mx-auto grid gap-8 gap-y-4\">\n            {points.map((point, index) => (\n              <div key={index} className=\"flex max-w-none flex-row\">\n                <div className=\"flex justify-center pt-1\">\n                  <FaCheck\n                    className=\"h-7 w-7 rounded-full bg-green-600 p-1 text-gray-50 dark:bg-green-700\"\n                    aria-hidden=\"true\"\n                  />\n                </div>\n\n                <div>\n                  <h3 className=\"ml-2 text-xl leading-6 text-blue-600 md:text-3xl rtl:ml-0 rtl:mr-2\">\n                    {point.title}\n                  </h3>\n                  <p className=\"ml-2 mt-3 text-gray-700 rtl:ml-0 rtl:mr-2\">\n                    {point.description}\n                  </p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {!isImageLeft && (\n          <div className=\"mx-auto grid w-3/4 grid-cols-1 gap-5 px-0 pt-5 lg:w-full lg:px-10\">\n            <Image\n              className=\"h-auto w-full self-center object-cover xl:self-start\"\n              src={imageSrc}\n              alt={title}\n              width={768}\n              height={768}\n              priority\n            />\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n",
        "statsSection.tsx": "\"use client\";\n\nimport { useEffect, useRef } from \"react\";\n\ninterface Stat {\n  label: string;\n  value: number;\n  bgColor: string;\n  textColor: string;\n}\n\nconst StatCard = ({ label, value, bgColor, textColor }: Stat) => (\n  <div\n    className={`w-full p-4 md:w-1/2 lg:w-1/4 ${bgColor} ${textColor} text-center`}\n  >\n    <h3 className=\"text-4xl font-bold\" data-target={value}>\n      0\n    </h3>\n    <p className=\"mt-2\">{label}</p>\n  </div>\n);\n\nconst stats: Stat[] = [\n  {\n    label: \"Proyectos en Desarrollo\",\n    value: 15,\n    bgColor: \"bg-blue-600\",\n    textColor: \"text-white\",\n  },\n  {\n    label: \"Proyectos Completados\",\n    value: 200,\n    bgColor: \"bg-gray-100\",\n    textColor: \"text-gray-800\",\n  },\n  {\n    label: \"Unidades de Proyectos\",\n    value: 300,\n    bgColor: \"bg-gray-800\",\n    textColor: \"text-white\",\n  },\n  {\n    label: \"Venta de Proyectos\",\n    value: 150,\n    bgColor: \"bg-blue-600\",\n    textColor: \"text-white\",\n  },\n];\n\nexport default function StatsSection() {\n  const sectionRef = useRef<HTMLElement>(null);\n\n  useEffect(() => {\n    function animateNumbers() {\n      const counters =\n        sectionRef.current?.querySelectorAll<HTMLHeadingElement>(\n          \"h3[data-target]\",\n        );\n      if (!counters) return;\n\n      counters.forEach((counter) => {\n        const updateCount = () => {\n          const target = parseInt(counter.getAttribute(\"data-target\") || \"0\");\n          const count = +counter.textContent!;\n          const increment = Math.ceil(target / 200);\n\n          if (count < target) {\n            counter.textContent = (count + increment).toString();\n            setTimeout(updateCount, 10);\n          } else {\n            counter.textContent = `${target}+`;\n          }\n        };\n        updateCount();\n      });\n    }\n\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          animateNumbers();\n          observer.disconnect();\n        }\n      });\n    });\n\n    if (sectionRef.current) {\n      observer.observe(sectionRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  return (\n    <div className=\"relative flex items-center justify-center bg-transparent\">\n      <section\n        id=\"animated-section\"\n        ref={sectionRef}\n        className=\"absolute z-10 flex w-full flex-wrap justify-center lg:w-4/5\"\n      >\n        {stats.map((stat, index) => (\n          <StatCard\n            key={index}\n            label={stat.label}\n            value={stat.value}\n            bgColor={stat.bgColor}\n            textColor={stat.textColor}\n          />\n        ))}\n      </section>\n    </div>\n  );\n}\n",
        "teamSection.tsx": "import Image from \"next/image\";\nimport Link from \"next/link\";\n//import { FaFacebook, FaTwitter, FaInstagram } from \"react-icons/fa\";\n\ninterface TeamMemberProps {\n  name: string;\n  title: string;\n  imageSrc: string;\n}\n\nconst TeamMember = ({ name, title, imageSrc }: TeamMemberProps) => (\n  <div className=\"overflow-hidden bg-white\">\n    <Image\n      className=\"w-25 object-cover\"\n      src={imageSrc}\n      alt={title}\n      width={500}\n      height={300}\n    />\n    <div className=\"p-6 text-center\">\n      <h3 className=\"text-lg font-medium text-gray-900\">{name}</h3>\n      <p className=\"text-gray-500\">{title}</p>\n      <div className=\"mt-4 flex justify-center space-x-3\">\n        <Link href=\"https://www.facebook.com\" passHref>\n          <FaFacebook className=\"h-5 w-5 text-gray-500 hover:text-gray-600\" />\n        </Link>\n        <Link href=\"https://www.x.com\" passHref>\n          <FaTwitter className=\"h-5 w-5 text-gray-500 hover:text-gray-600\" />\n        </Link>\n        <Link href=\"https://www.instagram.com\" passHref>\n          <FaInstagram className=\"h-5 w-5 text-gray-500 hover:text-gray-600\" />\n        </Link>\n      </div>\n    </div>\n  </div>\n);\n\nexport default function TeamSection() {\n  return (\n    <div className=\"bg-white\">\n      <section className=\"bg-transparent p-5 lg:p-10\">\n        <div className=\"mx-auto px-4 text-center sm:px-6 lg:px-10\">\n          <h2 className=\"text-center text-2xl font-semibold text-blue-600 lg:text-4xl\">\n            Fundadores\n          </h2>\n          <hr className=\"mx-auto my-2 w-1/4 border-t border-gray-400\" />\n        </div>\n\n        <div className=\"mx-auto mt-10 flex h-auto w-auto flex-col items-center justify-center px-6 sm:px-8 md:flex-row md:items-stretch lg:px-10\">\n          <TeamMember\n            name=\"Andrés Trujillo\"\n            title=\"Presidente\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n          <TeamMember\n            name=\"Alejandro Torres\"\n            title=\"Vice Presidente\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n        </div>\n      </section>\n\n      <hr className=\"mx-auto my-2 w-5/6 border-t border-gray-400 bg-transparent\" />\n\n      <section className=\"bg-transparent p-5 pb-96 md:pb-60 lg:pb-32\">\n        <div className=\"mx-auto px-4 text-center sm:px-6 lg:px-10\">\n          <h3 className=\"text-center text-xl font-semibold text-blue-600 lg:text-3xl\">\n            Nuestro Equipo\n          </h3>\n          <hr className=\"mx-auto my-2 w-1/4 border-t border-gray-400\" />\n        </div>\n\n        <div className=\"mx-8 mt-10 flex h-auto w-auto flex-col items-stretch justify-center px-6 sm:px-8 md:flex-row lg:mx-40 lg:px-10\">\n          <TeamMember\n            name=\"Andrés Trujillo\"\n            title=\"Arquitecto\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n          <TeamMember\n            name=\"Yecid García\"\n            title=\"Arquitecto\"\n            imageSrc=\"/images/services-11.jpg\"\n          />\n        </div>\n      </section>\n    </div>\n  );\n}\n",
        "timeline.tsx": "\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport TimelineElement from \"./timeLineElement\";\n\nexport default function Timeline() {\n  const timeLineRef = useRef<HTMLDivElement>(null);\n  const [currentTranslate, setCurrentTranslate] = useState(0);\n  const [currentIndexCircle, setCurrentIndexCircle] = useState(0);\n\n  const prevButtonRef = useRef<HTMLButtonElement>(null);\n  const nextButtonRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    const timeLineElements = document.querySelectorAll(\".timeline-element\");\n    const itemElement = document.querySelector(\".flex-none\") as HTMLElement;\n    const itemWidth = itemElement.offsetWidth;\n    const maxIndex = timeLineElements.length - 1;\n\n    function updateCircles() {\n      timeLineElements.forEach((element, index) => {\n        const circle = element.querySelector(\".circle\")!;\n        if (index === currentIndexCircle) {\n          circle.classList.add(\"bg-blue-500\");\n          circle.classList.remove(\"bg-transparent\");\n        } else {\n          circle.classList.remove(\"bg-blue-500\");\n          circle.classList.add(\"bg-transparent\");\n        }\n      });\n    }\n\n    updateCircles();\n\n    const prevButton = prevButtonRef.current;\n    const nextButton = nextButtonRef.current;\n    const timeLine = timeLineRef.current;\n\n    const handlePrevClick = () => {\n      if (currentTranslate < 0) {\n        setCurrentTranslate((prev) => prev + itemWidth);\n        timeLine!.style.transform = `translateX(${\n          currentTranslate + itemWidth\n        }px)`;\n      }\n      if (currentIndexCircle > 0) {\n        setCurrentIndexCircle((prev) => Math.max(0, prev - 1));\n        updateCircles();\n      }\n    };\n\n    const handleNextClick = () => {\n      const maxTranslate = -(\n        timeLine!.scrollWidth - timeLine!.parentElement!.offsetWidth\n      );\n      if (currentTranslate > maxTranslate) {\n        setCurrentTranslate((prev) => prev - itemWidth);\n        timeLine!.style.transform = `translateX(${\n          currentTranslate - itemWidth\n        }px)`;\n      }\n      if (currentIndexCircle < maxIndex) {\n        setCurrentIndexCircle((prev) => Math.min(maxIndex, prev + 1));\n        updateCircles();\n      }\n    };\n\n    prevButton?.addEventListener(\"click\", handlePrevClick);\n    nextButton?.addEventListener(\"click\", handleNextClick);\n\n    return () => {\n      prevButton?.removeEventListener(\"click\", handlePrevClick);\n      nextButton?.removeEventListener(\"click\", handleNextClick);\n    };\n  }, [currentTranslate, currentIndexCircle]);\n\n  useEffect(() => {\n    const timeLineElements = document.querySelectorAll(\".timeline-element\");\n\n    timeLineElements.forEach((element) => {\n      const images = element.querySelectorAll(\".image\");\n      let currentIndex = 0;\n      let interval: NodeJS.Timeout;\n\n      function showNextImage() {\n        images[currentIndex].classList.add(\"hidden\");\n        currentIndex = (currentIndex + 1) % images.length;\n        images[currentIndex].classList.remove(\"hidden\");\n      }\n\n      function startImageRotation() {\n        interval = setInterval(showNextImage, 1000);\n      }\n\n      function stopImageRotation() {\n        clearInterval(interval);\n        images.forEach((img, index) =>\n          img.classList.toggle(\"hidden\", index !== 0)\n        );\n        currentIndex = 0;\n      }\n\n      const imageContainer = element.querySelector(\".image-container\")!;\n      imageContainer.addEventListener(\"mouseenter\", startImageRotation);\n      imageContainer.addEventListener(\"mouseleave\", stopImageRotation);\n\n      return () => {\n        imageContainer.removeEventListener(\"mouseenter\", startImageRotation);\n        imageContainer.removeEventListener(\"mouseleave\", stopImageRotation);\n      };\n    });\n  }, []);\n\n  return (\n    <section className=\"bg-gray-200 p-10 lg:p-20\">\n      <div className=\"mx-auto bg-transparent xl:w-3/4\">\n        <h2 className=\"text-center text-2xl font-semibold text-blue-600 lg:text-4xl\">\n          Nuestra Historia\n        </h2>\n        <div className=\"w-full text-center\">\n          <div className=\"mx-auto my-2 w-1/3 border-t border-blue-400\" />\n        </div>\n\n        <div className=\"lg:mt-15 relative mt-10 flex h-auto w-full\">\n          <button\n            ref={prevButtonRef}\n            className=\"absolute -left-10 z-10 h-10 w-10 self-center rounded-full border-2 border-blue-500 bg-transparent text-blue-500 transition duration-300 hover:bg-gray-300\"\n          >\n            &#10094;\n          </button>\n\n          <div className=\"flex w-full overflow-hidden\">\n            <div\n              ref={timeLineRef}\n              id=\"timeLine\"\n              className=\"flex whitespace-nowrap transition-transform duration-500\"\n            >\n              <TimelineElement\n                ImageSrc1=\"/images/image2.jpg\"\n                ImageSrc2=\"/images/image3.jpg\"\n                ImageSrc3=\"/images/image4.jpg\"\n                ImageTitle=\"Project 2023\"\n                year=\"2023\"\n                title=\"Quintas del Lago\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image5.jpg\"\n                ImageSrc2=\"/images/image6.jpg\"\n                ImageSrc3=\"/images/image7.jpg\"\n                ImageTitle=\"Project 2022\"\n                year=\"2022\"\n                title=\"Quintas del Lago 2\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image8.jpg\"\n                ImageSrc2=\"/images/image9.jpg\"\n                ImageSrc3=\"/images/image10.jpg\"\n                ImageTitle=\"Project 2021\"\n                year=\"2021\"\n                title=\"Quintas del Lago 3\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image11.jpg\"\n                ImageSrc2=\"/images/image12.jpg\"\n                ImageSrc3=\"/images/image13.jpg\"\n                ImageTitle=\"Project 2020\"\n                year=\"2020\"\n                title=\"Quintas del Lago 4\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image14.jpg\"\n                ImageSrc2=\"/images/image15.jpg\"\n                ImageSrc3=\"/images/image16.jpg\"\n                ImageTitle=\"Project 2019\"\n                year=\"2019\"\n                title=\"Quintas del Lago 5\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n\n              <TimelineElement\n                ImageSrc1=\"/images/image17.jpg\"\n                ImageSrc2=\"/images/image18.jpg\"\n                ImageSrc3=\"/images/image19.jpg\"\n                ImageTitle=\"Project 2018\"\n                year=\"2018\"\n                title=\"Quintas del Lago 6\"\n                description=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo adipisci numquam similique quasi dolore tempore repellendus porro, ipsa ex nobis.\"\n                isActive={false}\n              />\n            </div>\n          </div>\n\n          <button\n            ref={nextButtonRef}\n            className=\"absolute -right-10 z-10 h-10 w-10 self-center rounded-full border-2 border-blue-500 bg-transparent text-blue-500 transition duration-300 hover:bg-gray-300\"\n          >\n            &#10095;\n          </button>\n\n          <div className=\"pointer-events-none absolute right-0 top-0 h-full w-32 bg-gradient-to-l from-gray-200 to-transparent\" />\n        </div>\n      </div>\n    </section>\n  );\n}\n",
        "timeLineElement.tsx": "import Image from \"next/image\";\n\ninterface TimelineElementProps {\n  ImageSrc1: string;\n  ImageSrc2: string;\n  ImageSrc3: string;\n  ImageTitle: string;\n  year: string;\n  title: string;\n  description: string;\n  isActive: boolean;\n}\n\nexport default function TimelineElement({\n  ImageSrc1,\n  ImageSrc2,\n  ImageSrc3,\n  ImageTitle,\n  year,\n  title,\n  description,\n  isActive,\n}: TimelineElementProps) {\n  return (\n    <div className=\"timeline-element relative flex w-64 flex-none flex-col py-4\">\n      <div className=\"image-container group relative mx-auto mb-4\">\n        <Image\n          src={ImageSrc1}\n          alt={`Imagen del proyecto ${ImageTitle} - 1`}\n          width={208}\n          height={128}\n          className=\"image object-cover\"\n          priority\n        />\n        <Image\n          src={ImageSrc2}\n          alt={`Imagen del proyecto ${ImageTitle} - 2`}\n          width={208}\n          height={128}\n          className=\"image hidden object-cover\"\n          priority\n        />\n        <Image\n          src={ImageSrc3}\n          alt={`Imagen del proyecto ${ImageTitle} - 3`}\n          width={208}\n          height={128}\n          className=\"image hidden object-cover\"\n          priority\n        />\n      </div>\n\n      <div className=\"flex items-center\">\n        <span\n          className={`circle h-5 w-5 rounded-full border-2 ${\n            isActive ? \"bg-blue-500\" : \"bg-transparent\"\n          } border-blue-500`}\n          aria-label={`Paso del timeline: ${year}`}\n        />\n        <div className=\"h-0.5 w-full bg-blue-500\" />\n      </div>\n\n      <h3 className=\"mx-5 mb-10 mt-5 text-left text-xl font-bold lg:text-3xl\">\n        {year}\n      </h3>\n\n      <h4 className=\"mx-5 mb-4 pr-4 text-left text-lg font-semibold text-blue-500 lg:text-2xl\">\n        {title}\n      </h4>\n\n      <p className=\"mx-5 w-full overflow-hidden text-ellipsis whitespace-normal pr-4 text-left text-sm text-black lg:text-base\">\n        {description}\n      </p>\n    </div>\n  );\n}\n",
        "visionMisionSection.tsx": "import Image from \"next/image\";\n\ninterface VisionMisionSectionProps {\n  title: string;\n  description: string;\n  imageSrc: string;\n  bgColor: string;\n  textColor: string;\n}\n\nexport default function VisionMisionSection({\n  title,\n  description,\n  imageSrc,\n  bgColor,\n  textColor,\n}: VisionMisionSectionProps) {\n  return (\n    <div\n      className={`col-span-3 mx-auto flex w-full overflow-hidden md:col-span-1`}\n    >\n      <div\n        className={`flex flex-col justify-between rounded-lg border px-6 py-8 text-center shadow ${bgColor} border-blue-700`}\n      >\n        <h3\n          className={`mb-5 text-xl font-semibold uppercase tracking-wider ${textColor}`}\n        >\n          {title}\n        </h3>\n        <p className=\"text-justify text-sm font-light text-gray-700\">\n          {description}\n        </p>\n        <div className=\"mt-5 justify-center text-center\">\n          <Image\n            className=\"self-center object-cover\"\n            src={imageSrc}\n            alt={`Imagen representativa de ${title}`}\n            width={500}\n            height={300}\n            priority\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"
      },
      "admin": {
        "adminCard.tsx": "import Link from \"next/link\";\r\nimport React from \"react\";\r\n\r\ninterface AdminCardProps {\r\n  href: string;\r\n  Icon: React.ElementType;\r\n  title: string;\r\n  description: string;\r\n}\r\n\r\nconst AdminCard: React.FC<AdminCardProps> = React.memo(\r\n  ({ href, Icon, title, description }) => {\r\n    return (\r\n      <Link href={href}>\r\n        <div className=\"h-full rounded-lg bg-premium-backgroundAlt p-6 text-center shadow-md transition-shadow duration-300 hover:bg-premium-backgroundDark hover:shadow-lg dark:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark\">\r\n          <Icon className=\"mx-auto mb-4 h-10 w-10 text-premium-primary dark:text-premium-primaryLight\" />\r\n          <h2 className=\"text-2xl font-semibold text-premium-textPrimary dark:text-premium-textPrimary\">\r\n            {title}\r\n          </h2>\r\n          <p className=\"mt-2 text-premium-textSecondary dark:text-premium-textSecondary\">\r\n            {description}\r\n          </p>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n);\r\n\r\nexport default AdminCard;\r\n",
        "adminFooter.tsx": "\"use client\";\n\nimport Link from \"next/link\";\nimport dynamic from \"next/dynamic\";\n\nconst BookText = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.BookText)\n);\n\nexport default function AdminFooter() {\n  return (\n    <footer className=\"w-full border-t border-premium-borderColor bg-premium-background py-6 text-premium-textSecondary dark:border-premium-borderColorHover dark:bg-premium-secondaryDark dark:text-premium-textPlaceholder\">\n      <div className=\"container mx-auto flex flex-col items-center justify-between px-4 text-sm md:flex-row\">\n        <span className=\"text-center text-premium-textPrimary md:text-left dark:text-premium-textSecondary\">\n          &copy; 2025 EdifiK - Administración. Todos los derechos reservados.\n        </span>\n\n        <Link\n          href=\"/admin/documentacion\"\n          className=\"flex items-center space-x-1 text-premium-primaryDark transition-colors duration-300 hover:text-premium-primary dark:text-premium-primaryLight dark:hover:text-premium-primaryDark\"\n          aria-label=\"Documentación\"\n        >\n          <BookText className=\"h-5 w-5\" />\n          <span className=\"text-sm font-medium\">Documentación</span>\n        </Link>\n      </div>\n    </footer>\n  );\n}\n",
        "adminHeader.tsx": "\"use client\";\n\nimport { usePathname } from \"next/navigation\";\nimport { useSession } from \"next-auth/react\";\nimport clsx from \"clsx\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport {\n  Building2,\n  House,\n  Users,\n  ShieldCheck,\n  Tag,\n  ClipboardList,\n} from \"lucide-react\";\nimport AdminMenuButton from \"./adminMenuButton\";\n\nexport default function AdminHeader() {\n  const { data: session } = useSession();\n  const pathname = usePathname();\n\n  const menuItems = [\n    {\n      path: \"/admin/proyectos\",\n      label: \"Proyectos\",\n      icon: Building2,\n      permission: \"Gestionar proyectos\",\n    },\n    {\n      path: \"/admin/propiedades\",\n      label: \"Propiedades\",\n      icon: House,\n      permission: \"Gestionar propiedades\",\n    },\n    {\n      path: \"/admin/usuarios\",\n      label: \"Usuarios\",\n      icon: Users,\n      permission: \"Gestionar usuarios\",\n    },\n    {\n      path: \"/admin/roles\",\n      label: \"Roles\",\n      icon: ShieldCheck,\n      permission: \"Gestionar roles\",\n    },\n    {\n      path: \"/admin/membresias\",\n      label: \"Membresías\",\n      icon: Tag,\n      permission: \"Gestionar membresias\",\n    },\n    {\n      path: \"/admin/solicitudes\",\n      label: \"Solicitudes\",\n      icon: ClipboardList,\n      permission: \"Gestionar solicitudes\",\n    },\n  ];\n\n  const userPermissions = session?.user?.permissions || [];\n  const filteredMenuItems = menuItems.filter(({ permission }) =>\n    userPermissions.some((perm) => perm.name === permission)\n  );\n\n  const canManageRequests = userPermissions.some(\n    (perm) => perm.name === \"Gestionar solicitudes\"\n  );\n\n  const getLinkClasses = (path: string) =>\n    pathname.startsWith(path)\n      ? \"text-premium-primary dark:text-premium-primaryLight font-semibold\"\n      : \"text-premium-textPrimary dark:text-premium-textSecondary hover:text-premium-primary dark:hover:text-premium-primaryLight\";\n\n  return (\n    <header className=\"fixed space-x-3 left-0 top-0 z-30 min-h-16 w-full bg-premium-background bg-opacity-90 text-premium-textPrimary shadow-md dark:bg-premium-secondaryDark dark:text-premium-textPrimary flex items-center justify-between py-1 px-4\">\n      <Link\n        href=\"/admin\"\n        className={clsx(\n          \"flex flex-col items-center text-center transition-colors duration-300\",\n          getLinkClasses(\"/admin\")\n        )}\n      >\n        <div className=\"flex items-center justify-start w-[100px] h-[40px]\">\n          <Image\n            src=\"/images/logo.webp\"\n            alt=\"Logo de EdifiK\"\n            width={100}\n            height={40}\n            loading=\"lazy\"\n            className={clsx(\n              \"w-auto h-auto max-w-[100px] max-h-[40px] transition duration-300\",\n              \"dark:bg-transparent\",\n              \"bg-gray-800 p-1 rounded-md shadow-md\"\n            )}\n          />\n        </div>\n        <span>Admin Panel</span>\n      </Link>\n\n      <nav\n        className=\"flex-1 justify-center space-x-6 items-center min-h-9 hidden md:flex\"\n        aria-label=\"Navegación de administrador\"\n      >\n        {filteredMenuItems.length > 0 ? (\n          filteredMenuItems.map(({ path, label }) => (\n            <Link\n              key={path}\n              href={path}\n              className={clsx(\n                \"group relative transition-colors duration-300\",\n                getLinkClasses(path)\n              )}\n            >\n              {label}\n              <span\n                className={clsx(\n                  \"absolute bottom-0 left-0 h-[2px] bg-premium-primary transition-all duration-300 dark:bg-premium-primaryLight\",\n                  pathname.startsWith(path)\n                    ? \"w-full\"\n                    : \"w-0 group-hover:w-full\"\n                )}\n              />\n            </Link>\n          ))\n        ) : (\n          <div className=\"flex items-center justify-center w-full text-premium-textSecondary\">\n            <p>Cargando menú...</p>\n          </div>\n        )}\n      </nav>\n\n      <div className=\"flex items-center justify-end space-x-4\">\n        <AdminMenuButton\n          menuItems={filteredMenuItems}\n          canManageRequests={canManageRequests}\n        />\n      </div>\n    </header>\n  );\n}\n",
        "adminMenuButton.tsx": "\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { signOut } from \"next-auth/react\";\nimport Link from \"next/link\";\nimport clsx from \"clsx\";\nimport { Menu, LucideIcon } from \"lucide-react\";\n//import NotificationBell from \"./notificationBell\";\n\nexport default function AdminMenuButton({\n  menuItems,\n  canManageRequests,\n}: {\n  menuItems: { path: string; label: string; icon: LucideIcon }[];\n  canManageRequests: boolean;\n}) {\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const toggleDropdown = () => setIsDropdownOpen((prev) => !prev);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node)\n      ) {\n        setIsDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div ref={dropdownRef} className=\"relative inline-block text-left\">\n      <div className=\"flex items-center space-x-4\">\n        {/* canManageRequests && <NotificationBell /> */}\n\n        <button\n          onClick={toggleDropdown}\n          className=\"flex items-center justify-center p-2 rounded-md text-premium-secondary transition-all hover:text-premium-primary focus:outline-none dark:text-premium-textPrimary dark:hover:text-premium-primaryLight\"\n          type=\"button\"\n          aria-expanded={isDropdownOpen}\n          aria-haspopup=\"menu\"\n        >\n          <Menu className=\"h-6 w-6 transition-transform duration-300 hover:scale-110\" />\n        </button>\n      </div>\n\n      {isDropdownOpen && (\n        <div\n          onClick={() => setIsDropdownOpen(false)}\n          className=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 sm:hidden\"\n        />\n      )}\n\n      {isDropdownOpen && (\n        <>\n          <div\n            className={clsx(\n              \"fixed inset-0 bg-black  bg-opacity-50 transition-opacity duration-300 sm:hidden\",\n              isDropdownOpen ? \"block\" : \"hidden\"\n            )}\n            onClick={() => setIsDropdownOpen(false)}\n          />\n\n          <div\n            className={clsx(\n              \"sm:absolute sm:top-full sm:right-0 sm:w-56 sm:rounded-md bg-premium-background dark:bg-premium-secondary shadow-lg z-50 mt-2\",\n              \"fixed top-0 right-0 h-full w-64 transform transition-transform duration-300 ease-in-out\",\n              isDropdownOpen ? \"translate-x-0\" : \"translate-x-full\",\n              \"sm:translate-x-0 sm:absolute sm:h-auto sm:shadow-lg\"\n            )}\n            role=\"menu\"\n          >\n            <div className=\"flex items-center justify-between p-4 border-b border-premium-borderColor dark:border-premium-borderColorHover sm:hidden\">\n              <span className=\"text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\n                Menú\n              </span>\n              <button\n                onClick={() => setIsDropdownOpen(false)}\n                className=\"text-premium-textPrimary dark:text-premium-textSecondary hover:text-red-500\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <ul className=\"py-2 space-y-2\">\n              {menuItems?.map(({ path, label, icon: Icon }) => (\n                <li key={path}>\n                  <Link\n                    href={path}\n                    onClick={() => setIsDropdownOpen(false)}\n                    className=\"flex items-center gap-3 px-6 py-3 text-premium-textPrimary dark:text-premium-textSecondary hover:bg-premium-backgroundDark dark:hover:bg-premium-secondaryLight transition-all\"\n                  >\n                    <Icon className=\"w-5 h-5 text-premium-primary dark:text-premium-primaryLight\" />\n                    {label}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n\n            <div className=\"border-t border-premium-borderColor dark:border-premium-borderColorHover py-2\">\n              <button\n                onClick={() => {\n                  setIsDropdownOpen(false);\n                  signOut({ callbackUrl: \"/\" });\n                }}\n                className=\"block w-full text-left px-6 py-3 text-red-500 hover:bg-red-600 hover:text-white transition-all\"\n              >\n                Cerrar Sesión\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n",
        "notificationBell.tsx": "\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport clsx from \"clsx\";\r\nimport { Bell, ArrowRight } from \"lucide-react\";\r\nimport { usePendingRequests } from \"@/app/hooks/requests/usePendingRequests\";\r\nimport NotificationSkeleton from \"../skeletons/notificationSkeleton\";\r\n\r\nexport default function NotificationBell() {\r\n  const router = useRouter();\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const { requests: notifications, isLoadingRequests } = usePendingRequests();\r\n  const [unreadNotifications, setUnreadNotifications] = useState(\r\n    notifications.length\r\n  );\r\n\r\n  const notificationRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const eventSource = new EventSource(\"/api/requests/stream\");\r\n\r\n    eventSource.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n\r\n      if (!data.data || !Array.isArray(data.data)) {\r\n        console.warn(\"⚠️ Respuesta inválida en SSE:\", data);\r\n        return;\r\n      }\r\n\r\n      setUnreadNotifications(() => data.data.length);\r\n    };\r\n\r\n    eventSource.onerror = () => {\r\n      console.error(\"⚠️ Error en SSE\");\r\n      eventSource.close();\r\n    };\r\n\r\n    return () => {\r\n      eventSource.close();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        notificationRef.current &&\r\n        !notificationRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowNotifications(false);\r\n      }\r\n    };\r\n\r\n    if (showNotifications) {\r\n      document.addEventListener(\"click\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClickOutside);\r\n    };\r\n  }, [showNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      !showNotifications &&\r\n      unreadNotifications === 0 &&\r\n      notifications.length > 0\r\n    ) {\r\n      setUnreadNotifications(notifications.length);\r\n    }\r\n  }, [notifications]);\r\n\r\n  const handleToggleNotifications = () => {\r\n    if (!showNotifications && unreadNotifications > 0) {\r\n      setUnreadNotifications(0);\r\n    }\r\n    setShowNotifications((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"relative flex items-center justify-center\"\r\n      ref={notificationRef}\r\n    >\r\n      <button\r\n        className={clsx(\r\n          \"p-2 rounded-md cursor-pointer transition-all\",\r\n          \"text-premium-secondary dark:text-premium-textPrimary\",\r\n          \"hover:text-premium-primary dark:hover:text-premium-primaryLight\"\r\n        )}\r\n        onClick={handleToggleNotifications}\r\n      >\r\n        <Bell className=\"h-6 w-6\" />\r\n      </button>\r\n\r\n      {unreadNotifications > 0 && (\r\n        <div className=\"absolute -top-1 -right-1 flex items-center justify-center\">\r\n          <span className=\"absolute w-5 h-5 rounded-full bg-red-500 opacity-75 animate-ping\" />\r\n          <span className=\"relative w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-md transition-all duration-500\">\r\n            {unreadNotifications}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {showNotifications && (\r\n        <div\r\n          className={clsx(\r\n            \"fixed top-14 right-4 md:right-4 h-auto max-h-[80vh] w-[90vw] max-w-[400px] bg-premium-background dark:bg-premium-secondary\",\r\n            \"shadow-lg border border-premium-borderColor dark:border-premium-borderColorHover rounded-md\",\r\n            \"overflow-y-auto transition-transform duration-300 ease-in-out\",\r\n            showNotifications ? \"translate-x-0\" : \"translate-x-full\"\r\n          )}\r\n        >\r\n          <div className=\"p-4 border-b border-premium-borderColor dark:border-premium-borderColorHover flex justify-between items-center\">\r\n            <span className=\"text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\r\n              Notificaciones\r\n            </span>\r\n            <button\r\n              className=\"text-premium-textPrimary dark:text-premium-textSecondary hover:text-premium-primary dark:hover:text-premium-primaryLight\"\r\n              onClick={() => setShowNotifications(false)}\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n\r\n          {isLoadingRequests ? (\r\n            <NotificationSkeleton />\r\n          ) : notifications.length > 0 ? (\r\n            <ul className=\"divide-y divide-premium-borderColor dark:divide-premium-borderColorHover\">\r\n              {notifications.map((notif) => (\r\n                <li\r\n                  key={notif.id}\r\n                  className=\"px-3 py-2 flex items-center justify-between hover:bg-premium-backgroundDark dark:hover:bg-premium-secondaryLight transition-all cursor-pointer\"\r\n                  onClick={() => {\r\n                    setShowNotifications(false);\r\n                    router.push(\"/admin/solicitudes\");\r\n                  }}\r\n                >\r\n                  <div className=\"flex flex-col gap-1 flex-1\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span\r\n                        className={clsx(\r\n                          \"px-2 py-1 text-xs font-semibold text-white rounded-full\",\r\n                          notif.operation === \"agregar\"\r\n                            ? \"bg-green-600\"\r\n                            : \"bg-blue-600\"\r\n                        )}\r\n                      >\r\n                        {notif.operation}\r\n                      </span>\r\n                      <p className=\"text-sm text-premium-primary dark:text-premium-primaryLight font-semibold\">\r\n                        {notif.projectName}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <p className=\"text-xs text-premium-textSecondary\">\r\n                      {notif.userEmail}\r\n                    </p>\r\n                    <p className=\"text-xs text-premium-textSecondary\">\r\n                      {new Date(notif.date).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                  <ArrowRight className=\"h-4 w-4 text-premium-primary dark:text-premium-primaryLight ml-2\" />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p className=\"p-4 text-center text-premium-textSecondary\">\r\n              No hay solicitudes pendientes.\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
        "stepNavigationButtons.tsx": "\"use client\";\n\ninterface StepNavigationButtonsProps {\n  currentStep: number;\n  totalSteps: number;\n  onPrevious: (e?: React.FormEvent) => void;\n  onNext: (e?: React.FormEvent) => void;\n  hideConfirmation?: boolean;\n}\n\nexport default function StepNavigationButtons({\n  currentStep,\n  totalSteps,\n  onPrevious,\n  onNext,\n  hideConfirmation = false,\n}: StepNavigationButtonsProps) {\n  return (\n    <div className=\"mt-6 flex justify-between\">\n      {currentStep > 0 && (\n        <button\n          className=\"rounded-md bg-premium-secondary px-4 py-2 text-sm text-white hover:bg-premium-secondaryLight dark:bg-premium-secondary dark:hover:bg-premium-secondaryLight\"\n          onClick={(e) => onPrevious(e)}\n        >\n          Anterior\n        </button>\n      )}\n      <div className=\"flex-grow\" />\n      {currentStep < totalSteps && !hideConfirmation && (\n        <button\n          className=\"rounded-md bg-premium-primary px-4 py-2 text-sm text-white hover:bg-premium-primaryLight dark:bg-premium-primaryDark dark:hover:bg-premium-primaryLight\"\n          onClick={(e) => onNext(e)}\n        >\n          {currentStep !== totalSteps - 1 ? \"Siguiente\" : \"Confirmar\"}\n        </button>\n      )}\n    </div>\n  );\n}\n"
      },
      "alert.tsx": "import { useEffect, useState } from \"react\";\r\nimport { CircleCheck, TriangleAlert, CircleX, Info, X } from \"lucide-react\";\r\n\r\ninterface AlertProps {\r\n  type: \"success\" | \"warning\" | \"error\" | \"info\";\r\n  message: string;\r\n  duration?: number; // Duration in milliseconds\r\n  onClose?: () => void;\r\n}\r\n\r\nconst Alert: React.FC<AlertProps> = ({\r\n  type,\r\n  message,\r\n  duration = 3000,\r\n  onClose,\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsVisible(false);\r\n      if (onClose) onClose();\r\n    }, duration);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [duration, onClose]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const getStyles = () => {\r\n    switch (type) {\r\n      case \"success\":\r\n        return {\r\n          bg: \"bg-green-100\",\r\n          text: \"text-green-800\",\r\n          icon: <CircleCheck className=\"h-5 w-5 text-green-600\" />,\r\n        };\r\n      case \"warning\":\r\n        return {\r\n          bg: \"bg-yellow-100\",\r\n          text: \"text-yellow-800\",\r\n          icon: <TriangleAlert className=\"h-5 w-5 text-yellow-600\" />,\r\n        };\r\n      case \"error\":\r\n        return {\r\n          bg: \"bg-red-100\",\r\n          text: \"text-red-800\",\r\n          icon: <CircleX className=\"h-5 w-5 text-red-600\" />,\r\n        };\r\n      case \"info\":\r\n        return {\r\n          bg: \"bg-blue-100\",\r\n          text: \"text-blue-800\",\r\n          icon: <Info className=\"h-5 w-5 text-blue-600\" />,\r\n        };\r\n      default:\r\n        return {\r\n          bg: \"bg-gray-100\",\r\n          text: \"text-gray-800\",\r\n          icon: null,\r\n        };\r\n    }\r\n  };\r\n\r\n  const styles = getStyles();\r\n\r\n  return (\r\n    <div\r\n      className={`fixed top-5 left-1/2 transform -translate-x-1/2 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3 ${styles.bg} ${styles.text}`}\r\n    >\r\n      {styles.icon}\r\n      <span className=\"text-sm font-medium\">{message}</span>\r\n      <button\r\n        onClick={() => setIsVisible(false)}\r\n        className=\"focus:outline-none\"\r\n      >\r\n        <X className=\"h-5 w-5\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Alert;\r\n",
      "contact": {
        "contactSection.tsx": "import Image from \"next/image\";\n\nexport default function ContactSection() {\n  return (\n    <section className=\"bg-transparent p-5\">\n      <div className=\"mx-auto mb-10 grid grid-cols-1 gap-10 p-5 md:grid-cols-2 lg:p-10\">\n        {/* Imagen del constructor */}\n        <div className=\"mx-auto grid w-3/4 grid-cols-1 gap-5 pt-5 lg:w-full lg:px-10\">\n          <Image\n            className=\"h-auto w-full self-center object-cover xl:self-start\"\n            src=\"/images/constructor.jpg\"\n            alt=\"Imagen de arquitecto en obra\"\n            width={768}\n            height={512}\n            priority\n          />\n        </div>\n\n        {/* Sección de contacto */}\n        <div className=\"flex flex-col gap-10 px-2 pt-5 text-left\">\n          <div>\n            <h3 className=\"mb-2 text-3xl font-semibold text-blue-600\">\n              Ponte en contacto\n            </h3>\n            <h2 className=\"mb-5 text-4xl font-semibold\">\n              ¿Tienes Preguntas? <br /> Escríbenos y te llamamos\n            </h2>\n          </div>\n\n          <form className=\"space-y-4\" aria-label=\"Formulario de contacto\">\n            <label htmlFor=\"name\" className=\"sr-only\">\n              Nombre completo\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              placeholder=\"Nombre completo\"\n              required\n              className=\"w-full rounded-md border border-gray-500 p-3 focus:ring-2 focus:ring-blue-600\"\n            />\n\n            <label htmlFor=\"phone\" className=\"sr-only\">\n              Número de teléfono\n            </label>\n            <input\n              type=\"tel\"\n              id=\"phone\"\n              placeholder=\"Número de teléfono\"\n              required\n              className=\"w-full rounded-md border border-gray-500 p-3 focus:ring-2 focus:ring-blue-600\"\n            />\n\n            <label htmlFor=\"email\" className=\"sr-only\">\n              Correo electrónico\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              placeholder=\"Correo electrónico\"\n              required\n              className=\"w-full rounded-md border border-gray-500 p-3 focus:ring-2 focus:ring-blue-600\"\n            />\n\n            <label htmlFor=\"message\" className=\"sr-only\">\n              Mensaje\n            </label>\n            <textarea\n              id=\"message\"\n              placeholder=\"Mensaje\"\n              required\n              className=\"h-32 w-full rounded-md border border-gray-500 p-3 focus:ring-2 focus:ring-blue-600\"\n            />\n\n            <button\n              type=\"submit\"\n              className=\"w-1/3 rounded-full bg-blue-600 p-3 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600\"\n            >\n              Enviar\n            </button>\n          </form>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "footer.tsx": "import Link from \"next/link\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-gray-800 pb-1 pt-5 text-gray-300\">\n      <div className=\"container mx-auto grid grid-cols-1 gap-8 px-7 sm:grid-cols-2 md:grid-cols-4\">\n        {/* Ubicación */}\n        <div className=\"text-center md:text-left\">\n          <h3 className=\"mb-4 text-lg font-semibold text-blue-500\">Ubícanos</h3>\n          <address>\n            <p>Fusagasugá - Cundinamarca, Calle 14 #3-59</p>\n            <p>Conjunto Parque la colina</p>\n            <p>Bloque E - 801</p>\n            <Link\n              href=\"mailto:EdifiK_arquitectos23@gmail.com\"\n              className=\"text-blue-500 hover:underline\"\n              aria-label=\"Enviar correo a EdifiK\"\n            >\n              EdifiK_arquitectos23@gmail.com\n            </Link>\n          </address>\n        </div>\n\n        {/* Sobre Nosotros */}\n        <div className=\"text-center md:text-left\">\n          <h3 className=\"mb-4 text-lg font-semibold text-blue-500\">\n            Sobre Nosotros\n          </h3>\n          <ul>\n            {[\"Quienes Somos\", \"Blog\", \"Trabaja en EdifiK\"].map(\n              (text, index) => (\n                <li key={index}>\n                  <Link href=\"#\" className=\"hover:underline\">\n                    {text}\n                  </Link>\n                </li>\n              ),\n            )}\n          </ul>\n        </div>\n\n        {/* Enlaces útiles */}\n        <div className=\"text-center md:text-left\">\n          <h3 className=\"mb-4 text-lg font-semibold text-blue-500\">\n            Enlaces útiles\n          </h3>\n          <ul>\n            <li>\n              <Link href=\"#\" className=\"hover:underline\">\n                Centro de ayuda\n              </Link>\n            </li>\n          </ul>\n        </div>\n\n        {/* Contacto */}\n        <div className=\"text-center md:text-left\">\n          <h3 className=\"mb-4 text-lg font-semibold text-blue-500\">Contacto</h3>\n          <p>+57 123 456 7890</p>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto mb-4 mt-10 border-t border-gray-600 px-7 pt-4\">\n        <div className=\"flex flex-col items-center justify-between md:flex-row\">\n          {/* Términos y Política */}\n          <div className=\"text-center text-sm md:mb-0 md:text-left\">\n            {[\n              \"Términos y condiciones\",\n              \"Cookies\",\n              \"Política de privacidad\",\n              \"Mapa del sitio\",\n            ].map((text, index) => (\n              <span key={index}>\n                {index > 0 && \" • \"}\n                <Link href=\"#\" className=\"mx-2 hover:underline\">\n                  {text}\n                </Link>\n              </span>\n            ))}\n          </div>\n\n          {/* Redes Sociales \n          \n          <div className=\"flex space-x-4\">\n            {[\n              {\n                href: \"https://www.facebook.com\",\n                icon: FaFacebook,\n                label: \"Facebook\",\n              },\n              {\n                href: \"https://www.instagram.com\",\n                icon: FaInstagram,\n                label: \"Instagram\",\n              },\n              { href: \"https://www.x.com\", icon: FaTwitter, label: \"Twitter\" },\n              {\n                href: \"https://www.tiktok.com\",\n                icon: FaTiktok,\n                label: \"TikTok\",\n              },\n              {\n                href: \"https://www.youtube.com\",\n                icon: FaYoutube,\n                label: \"YouTube\",\n              },\n              {\n                href: \"https://www.whatsapp.com\",\n                icon: FaWhatsapp,\n                label: \"WhatsApp\",\n              },\n            ].map(({ href, icon: Icon, label }) => (\n              <Link\n                key={href}\n                href={href}\n                target=\"_blank\"\n                className=\"hover:text-blue-700\"\n                aria-label={`EdifiK en ${label}`}\n                passHref\n              >\n                <Icon size={24} />\n              </Link>\n            ))}\n          </div>\n          */}\n        </div>\n      </div>\n    </footer>\n  );\n}\n",
      "header.tsx": "\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport UserMenu from \"./userMenu\";\n\nexport default function Header() {\n  const pathname = usePathname();\n\n  return (\n    <header className=\"fixed left-0 top-0 z-50 w-full bg-gray-100 bg-opacity-70 text-black shadow-md backdrop-blur-md\">\n      <div className=\"container mx-auto flex items-center justify-between px-4 py-4\">\n        <Link\n          href=\"/\"\n          className=\"flex items-center space-x-2\"\n          aria-label=\"Inicio\"\n        >\n          <Image\n            src=\"/images/logo.webp\"\n            alt=\"Logo de EdifiK\"\n            width={100}\n            height={40}\n            priority\n            style={{ width: \"auto\", height: \"auto\" }}\n          />\n        </Link>\n\n        <nav\n          className=\"hidden space-x-6 md:flex\"\n          aria-label=\"Navegación principal\"\n        >\n          {[\n            \"/\",\n            \"/nosotros\",\n            \"/proyectos\",\n            \"/bim\",\n            \"/inmobiliaria\",\n            \"/contactanos\",\n          ].map((path, index) => {\n            const labels = [\n              \"Inicio\",\n              \"Nosotros\",\n              \"Proyectos\",\n              \"BIM\",\n              \"Inmobiliaria\",\n              \"Contactanos\",\n            ];\n            return (\n              <Link\n                key={path}\n                href={path}\n                className={\n                  pathname === path\n                    ? \"font-semibold text-blue-600\"\n                    : \"hover:text-blue-700\"\n                }\n                aria-current={pathname === path ? \"page\" : undefined}\n              >\n                {labels[index]}\n              </Link>\n            );\n          })}\n        </nav>\n\n        <div className=\"flex items-center justify-end space-x-4\">\n          <UserMenu />\n        </div>\n      </div>\n    </header>\n  );\n}\n",
      "icons": {
        "appleIcon.tsx": "import React from \"react\";\n\nconst AppleIcon = React.memo(({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 384 512\"\n    className={className}\n  >\n    <path\n      fill=\"#000000\"\n      d=\"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z\"\n    />\n  </svg>\n));\n\nexport default AppleIcon;\n",
        "facebookIcon.tsx": "import React from \"react\";\n\nconst FacebookIcon = React.memo(({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 512 512\"\n    className={className}\n  >\n    <path\n      fill=\"#2563eb\"\n      d=\"M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z\"\n    />\n  </svg>\n));\n\nexport default FacebookIcon;\n",
        "googleIcon.tsx": "import React from \"react\";\n\nconst GoogleIcon = React.memo(({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 488 512\"\n    className={className}\n  >\n    <path\n      fill=\"#ef4444\"\n      d=\"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z\"\n    />\n  </svg>\n));\n\nexport default GoogleIcon;\n"
      },
      "loader.tsx": "interface LoaderProps {\n  size?: number;\n}\n\nexport default function Loader({ size = 12 }: LoaderProps) {\n  return (\n    <div\n      className=\"border-3 border-blue-500 border-t-transparent rounded-full animate-spin\"\n      style={{\n        width: `${size}px`,\n        height: `${size}px`,\n        borderWidth: `${size / 6}px`,\n      }}\n    />\n  );\n}\n",
      "login": {
        "AuthButton.tsx": "\"use client\";\n\nimport { useSession, signIn, signOut } from \"next-auth/react\";\n\nexport default function AuthButton() {\n  const { data: session } = useSession();\n\n  return session ? (\n    <button onClick={() => signOut()}>Cerrar sesión</button>\n  ) : (\n    <button onClick={() => signIn(\"google\")}>Iniciar sesión</button>\n  );\n}\n",
        "themeSelector.tsx": "import { FaSun, FaMoon, FaAdjust } from \"react-icons/fa\";\n//import { useEffect, useState } from \"react\";\n\nexport default function ThemeSelector({\n  closeMenu,\n}: {\n  closeMenu: () => void;\n}) {\n  const [theme, setTheme] = useState<\"light\" | \"dark\" | \"auto\">(\"auto\");\n\n  useEffect(() => {\n    const savedTheme =\n      (localStorage.getItem(\"theme\") as \"light\" | \"dark\" | \"auto\") || \"auto\";\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    const initialTheme =\n      savedTheme === \"auto\" ? (prefersDark ? \"dark\" : \"light\") : savedTheme;\n    setTheme(initialTheme);\n    document.documentElement.setAttribute(\"data-theme\", initialTheme);\n  }, []);\n\n  const handleThemeChange = (newTheme: \"light\" | \"dark\" | \"auto\") => {\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    const prefersDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    const appliedTheme =\n      newTheme === \"auto\" ? (prefersDark ? \"dark\" : \"light\") : newTheme;\n    document.documentElement.setAttribute(\"data-theme\", appliedTheme);\n    closeMenu();\n  };\n\n  return (\n    <div className=\"flex flex-col\">\n      <button\n        onClick={() => handleThemeChange(\"light\")}\n        className={`hover:bg-backgroundLight dark:hover:bg-darkBackgroundLight flex items-center rounded px-4 py-2 ${\n          theme === \"light\"\n            ? \"text-primary font-bold\"\n            : \"text-textPrimary dark:text-textSecondary\"\n        }`}\n      >\n        <FaSun className=\"mr-2 text-yellow-400\" />\n        Modo Claro\n      </button>\n\n      <button\n        onClick={() => handleThemeChange(\"dark\")}\n        className={`hover:bg-backgroundLight dark:hover:bg-darkBackgroundLight flex items-center rounded px-4 py-2 ${\n          theme === \"dark\"\n            ? \"text-primary font-bold\"\n            : \"text-textPrimary dark:text-textSecondary\"\n        }`}\n      >\n        <FaMoon className=\"dark:text-textPrimary mr-2\" />\n        Modo Oscuro\n      </button>\n\n      <button\n        onClick={() => handleThemeChange(\"auto\")}\n        className={`hover:bg-backgroundLight dark:hover:bg-darkBackgroundLight flex items-center rounded px-4 py-2 ${\n          theme === \"auto\"\n            ? \"text-primary font-bold\"\n            : \"text-textPrimary dark:text-textSecondary\"\n        }`}\n      >\n        <FaAdjust className=\"mr-2 text-blue-500\" />\n        Automático\n      </button>\n    </div>\n  );\n}\n"
      },
      "memberships": {
        "membershipModal.tsx": "import dynamic from \"next/dynamic\";\nimport { Membership } from \"@/lib/definitios\";\nimport { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\nimport ModalHeader from \"../modals/modalHeader\";\nimport ModalFooter from \"../modals/modalFooter\";\n\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/formInput\"), {\n  ssr: false,\n});\nconst FormTextArea = dynamic(() => import(\"@/app/ui/modals/formTextArea\"), {\n  ssr: false,\n});\n\ninterface MembershipModalProps {\n  show: boolean;\n  onClose: () => void;\n  onSubmit: (e: React.FormEvent) => void;\n  handleChange: (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => void;\n  membership: Membership;\n  errors: {\n    nameError: string;\n    benefitsError: string;\n    discountThreeMonthsError: string;\n    discountSixMonthsError: string;\n    discountTwelveMonthsError: string;\n    maxProjectsError: string;\n  };\n}\n\nexport default function MembershipModal({\n  show,\n  onClose,\n  onSubmit,\n  handleChange,\n  membership,\n  errors,\n}: MembershipModalProps) {\n  useBodyOverflow(show);\n\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\n        {/* Header */}\n        <ModalHeader title={\"Editar Membersía\"} onClose={onClose} />\n\n        {/* body */}\n        <form\n          id=\"membershipForm\"\n          onSubmit={onSubmit}\n          noValidate\n          className=\"h-[60vh] space-y-4 overflow-y-auto px-6 py-4\"\n        >\n          <FormInput\n            label=\"Nombre\"\n            type=\"text\"\n            name=\"name\"\n            value={membership.name || \"\"}\n            placeholder=\"Nombre de la membresía\"\n            maxLength={50}\n            onChange={handleChange}\n            error={errors.nameError}\n          />\n\n          <FormTextArea\n            label=\"Descripción\"\n            name=\"benefits\"\n            value={membership.benefits || \"\"}\n            placeholder=\"Descripción de la membresía\"\n            onChange={handleChange}\n            error={errors.benefitsError}\n            rows={3}\n            maxLength={950}\n          />\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Precio\"\n              type=\"text\"\n              name=\"price\"\n              value={membership.price || \"\"}\n              placeholder=\"Precio\"\n              onChange={handleChange}\n              min={0}\n            />\n\n            <FormInput\n              label=\"Propiedades destacados\"\n              type=\"number\"\n              name=\"projectsFeatured\"\n              value={membership.projectsFeatured || \"\"}\n              placeholder=\"Cantidad de propiedades destacadas\"\n              onChange={handleChange}\n              min={0}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Cantidad máxima de propiedades\"\n              type=\"number\"\n              name=\"maxProjects\"\n              value={membership.maxProjects || \"\"}\n              placeholder=\"Máximo de propiedades permitidas\"\n              onChange={handleChange}\n              min={0}\n            />\n\n            <FormInput\n              label=\"Descuento 3 meses (%)\"\n              type=\"number\"\n              name=\"discountThreeMonths\"\n              value={membership.discountThreeMonths || \"\"}\n              placeholder=\"Descuento en %\"\n              onChange={handleChange}\n              min={0}\n              max={100}\n            />\n\n            <FormInput\n              label=\"Descuento 6 meses (%)\"\n              type=\"number\"\n              name=\"discountSixMonths\"\n              value={membership.discountSixMonths || \"\"}\n              placeholder=\"Descuento en %\"\n              onChange={handleChange}\n              min={0}\n              max={100}\n            />\n\n            <FormInput\n              label=\"Descuento 12 meses (%)\"\n              type=\"number\"\n              name=\"discountTwelveMonths\"\n              value={membership.discountTwelveMonths || \"\"}\n              placeholder=\"Descuento en %\"\n              onChange={handleChange}\n              min={0}\n              max={100}\n            />\n          </div>\n        </form>\n\n        {/* Footer */}\n        <ModalFooter onClose={onClose} formId=\"membershipForm\" />\n      </div>\n    </div>\n  );\n}\n"
      },
      "modals": {
        "formCheckbox.tsx": "interface FormCheckboxProps {\n  label: string;\n  name: string;\n  checked: boolean;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  className?: string; // Optional to customize additional styles\n}\n\nexport default function FormCheckbox({\n  label,\n  name,\n  checked,\n  onChange,\n  className = \"rounded\",\n}: FormCheckboxProps) {\n  return (\n    <div>\n      <label\n        htmlFor={name}\n        className=\"flex items-center gap-2 text-sm font-medium text-premium-textPrimary dark:text-premium-textPrimary\"\n      >\n        <input\n          id={name}\n          type=\"checkbox\"\n          name={name}\n          checked={checked}\n          onChange={onChange}\n          className={className}\n        />\n        {label}\n      </label>\n    </div>\n  );\n}\n",
        "formCheckboxToggle.tsx": "interface FormCheckboxToggleProps {\r\n  label: string;\r\n  name: string;\r\n  checked: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}\r\n\r\nexport default function FormCheckboxToggle({\r\n  label,\r\n  name,\r\n  checked,\r\n  onChange,\r\n}: FormCheckboxToggleProps) {\r\n  return (\r\n    <>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"flex items-center justify-between w-full cursor-pointer rounded-md border border-premium-borderColor bg-premium-secondaryLight px-3 py-2 text-premium-textPrimary dark:border-premium-borderColorHover dark:bg-premium-secondaryDark dark:text-premium-textPrimary\"\r\n      >\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textSecondary\">\r\n          {label}\r\n        </span>\r\n        <input\r\n          id={name}\r\n          type=\"checkbox\"\r\n          name={name}\r\n          checked={checked}\r\n          onChange={(e) => onChange(e.target.checked)}\r\n          className=\"relative h-6 w-12 cursor-pointer appearance-none rounded-full bg-premium-textPlaceholder transition duration-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-transform after:content-[''] checked:bg-premium-primary checked:after:translate-x-6 dark:bg-premium-backgroundLight\"\r\n        />\r\n      </label>\r\n    </>\r\n  );\r\n}\r\n",
        "formDatePicker.tsx": "import \"react-datepicker/dist/react-datepicker.css\";\r\nimport clsx from \"clsx\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"./formErrorMessage\";\r\n\r\ninterface FormDatePickerProps {\r\n  label: string;\r\n  name: string;\r\n  value: Date | null;\r\n  onChange: (date: Date | null) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormDatePicker({\r\n  label,\r\n  name,\r\n  value,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n}: FormDatePickerProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <DatePicker\r\n        id={name}\r\n        name={name}\r\n        selected={value}\r\n        onChange={onChange}\r\n        showMonthYearPicker\r\n        minDate={new Date()}\r\n        dateFormat=\"MM/yyyy\"\r\n        placeholderText=\"mm/yyyy\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\r\n          error && !flag\r\n            ? \"border-red-500 bg-red-50\"\r\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n        wrapperClassName=\"w-full\"\r\n      />\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
        "formDisplay.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\n\r\ninterface FormDisplayProps {\r\n  label: string;\r\n  value: string | number;\r\n  tooltipText?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport default function FormDisplay({\r\n  label,\r\n  value,\r\n  tooltipText,\r\n  rows = 1,\r\n}: FormDisplayProps) {\r\n  return (\r\n    <div>\r\n      <label className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\">\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n      <div\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary border-premium-borderColor dark:border-premium-borderColorHover\",\r\n          rows > 1 ? `h-${rows * 8} overflow-y-auto` : \"h-auto\"\r\n        )}\r\n        style={{ minHeight: `${rows * 1.5}rem` }}\r\n      >\r\n        {value || \"No especificado\"}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "formErrorMessage.tsx": "import { CircleAlert } from \"lucide-react\";\r\n\r\ninterface FormErrorMessageProps {\r\n  error?: string;\r\n}\r\n\r\nexport default function FormErrorMessage({ error }: FormErrorMessageProps) {\r\n  if (!error) return null;\r\n\r\n  return (\r\n    <div className=\"mt-1 flex items-center gap-2 text-xs text-red-500\">\r\n      <CircleAlert className=\"h-4 w-4\" />\r\n      {error}\r\n    </div>\r\n  );\r\n}\r\n",
        "formInput.tsx": "import clsx from \"clsx\";\nimport { formatNumber } from \"@/utils/formatters\";\nimport TooltipIcon from \"./tooltipIcon\";\nimport FormErrorMessage from \"./formErrorMessage\";\n\ninterface FormInputProps {\n  id?: string;\n  label: string;\n  type: string;\n  name: string;\n  value: string | number;\n  placeholder: string;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  maxLength?: number;\n  min?: number;\n  max?: number;\n  error?: string;\n  flag?: boolean;\n  tooltipText?: string;\n  isEdit?: boolean;\n}\n\nexport default function FormInput({\n  id,\n  label,\n  type,\n  value,\n  placeholder,\n  onChange,\n  name,\n  maxLength,\n  min,\n  max,\n  error,\n  flag,\n  tooltipText,\n  isEdit = true,\n}: FormInputProps) {\n  const formattedValue =\n    type === \"number\" && typeof value === \"number\"\n      ? formatNumber(value)\n      : value;\n\n  return (\n    <div>\n      <label\n        htmlFor={id ? id : name}\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\n      >\n        {label}\n        {error !== undefined && \" *\"}\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\n      </label>\n      <input\n        id={id ? id : name}\n        type={type}\n        name={name}\n        value={formattedValue}\n        onChange={onChange}\n        placeholder={placeholder}\n        maxLength={type === \"text\" ? maxLength : undefined}\n        min={type === \"number\" ? min : undefined}\n        max={type === \"number\" ? max : undefined}\n        disabled={!isEdit}\n        autoComplete={\n          type === \"email\"\n            ? \"email\"\n            : type === \"password\"\n              ? \"current-password\"\n              : \"off\"\n        }\n        className={clsx(\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\n          error && !flag\n            ? \"border-red-500 bg-red-50\"\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\n        )}\n      />\n      {error && !flag && <FormErrorMessage error={error} />}\n    </div>\n  );\n}\n",
        "formMultiSelect.tsx": "import { X } from \"lucide-react\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\n\r\ninterface FormMultiSelectProps {\r\n  label: string;\r\n  name: \"commonAreas\" | \"nearbyServices\";\r\n  selectedItems: { id: number; name: string }[];\r\n  options: { id: number; name: string }[];\r\n  onSelect: (\r\n    e: React.ChangeEvent<HTMLSelectElement>,\r\n    name: \"commonAreas\" | \"nearbyServices\"\r\n  ) => void;\r\n  onRemove: (id: number, name: \"commonAreas\" | \"nearbyServices\") => void;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormMultiSelect({\r\n  label,\r\n  name,\r\n  selectedItems,\r\n  options,\r\n  onSelect,\r\n  onRemove,\r\n  tooltipText,\r\n}: FormMultiSelectProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n      <select\r\n        id={name}\r\n        name={name}\r\n        onChange={(e) => onSelect(e, name)}\r\n        className=\"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary border-premium-borderColor dark:border-premium-borderColorHover\"\r\n      >\r\n        <option value=\"\">Seleccione {label.toLowerCase()}</option>\r\n        {options.map((option) => (\r\n          <option key={option.id} value={option.id}>\r\n            {option.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <div className=\"mt-2 flex flex-wrap\">\r\n        {selectedItems.map((item) => (\r\n          <div\r\n            key={item.id}\r\n            className=\"m-1 flex items-center rounded-full bg-premium-primary px-3 py-1 text-white dark:bg-premium-primaryLight\"\r\n          >\r\n            {item.name}\r\n            <button\r\n              className=\"ml-2 text-white hover:text-premium-textPrimary\"\r\n              onClick={() => onRemove(item.id, name)}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "formSearchAddress.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { MapPin } from \"lucide-react\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"./formErrorMessage\";\r\n\r\ninterface FormSearchAddressProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSelect: (placeId: string, description: string) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  isLoaded: boolean;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormSearchAddress({\r\n  label,\r\n  value,\r\n  onChange,\r\n  onSelect,\r\n  error,\r\n  isLoaded,\r\n  tooltipText,\r\n}: FormSearchAddressProps) {\r\n  const [suggestions, setSuggestions] = useState<\r\n    { place_id: string; description: string }[]\r\n  >([]);\r\n  const [isListVisible, setIsListVisible] = useState(false);\r\n  const autocompleteServiceRef =\r\n    useRef<google.maps.places.AutocompleteService | null>(null);\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        listRef.current &&\r\n        !listRef.current.contains(event.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsListVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isLoaded &&\r\n      typeof google !== \"undefined\" &&\r\n      !autocompleteServiceRef.current\r\n    ) {\r\n      autocompleteServiceRef.current =\r\n        new google.maps.places.AutocompleteService();\r\n    }\r\n  }, [isLoaded]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.value;\r\n    onChange(newValue);\r\n\r\n    if (newValue.trim() && autocompleteServiceRef.current) {\r\n      autocompleteServiceRef.current.getPlacePredictions(\r\n        {\r\n          input: newValue,\r\n          componentRestrictions: { country: \"CO\" },\r\n        },\r\n        (predictions) => {\r\n          if (predictions) {\r\n            setSuggestions(\r\n              predictions.map((prediction) => ({\r\n                place_id: prediction.place_id,\r\n                description: prediction.description,\r\n              }))\r\n            );\r\n            setIsListVisible(true);\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      setSuggestions([]);\r\n    }\r\n  };\r\n\r\n  const handleSelect = (placeId: string, description: string) => {\r\n    onSelect(placeId, description);\r\n    setIsListVisible(false);\r\n    setSuggestions([]);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor=\"searchAddress\"\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n      <input\r\n        ref={inputRef}\r\n        id=\"searchAddress\"\r\n        type=\"text\"\r\n        name=\"address\"\r\n        value={value}\r\n        onChange={handleInputChange}\r\n        placeholder=\"Ingrese la dirección\"\r\n        autoComplete=\"street-address\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary focus:outline-none focus:ring-2 focus:ring-premium-primary\",\r\n          error\r\n            ? \"border-red-500 bg-red-50\"\r\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n      />\r\n\r\n      {isListVisible && suggestions.length > 0 && (\r\n        <ul\r\n          ref={listRef}\r\n          className=\"absolute z-10 w-full border border-premium-borderColor dark:border-premium-borderColorHover \r\n          bg-premium-background dark:bg-premium-backgroundLight rounded-md shadow-lg\"\r\n        >\r\n          {suggestions.map((suggestion) => (\r\n            <li\r\n              key={suggestion.place_id}\r\n              onClick={() =>\r\n                handleSelect(suggestion.place_id, suggestion.description)\r\n              }\r\n              className=\"cursor-pointer flex items-center gap-2 p-2 text-premium-textPrimary dark:text-premium-textPrimary hover:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark \r\n              transition-colors rounded-md\"\r\n            >\r\n              <MapPin className=\"h-4 w-4 text-premium-primary\" />\r\n              {suggestion.description}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {error && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
        "formSearchEmail.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Mail } from \"lucide-react\";\r\nimport { useSearchEmails } from \"@/app/hooks/users/useSearchEmails\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"./formErrorMessage\";\r\n\r\ninterface FormSearchEmailProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSelect: (email: string, ownerId: number | undefined) => void;\r\n  error?: string;\r\n  tooltipText?: string;\r\n}\r\n\r\nexport default function FormSearchEmail({\r\n  label,\r\n  value,\r\n  onChange,\r\n  onSelect,\r\n  error,\r\n  tooltipText,\r\n}: FormSearchEmailProps) {\r\n  const [isListVisible, setIsListVisible] = useState(false);\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const { emails, loading, fetchEmails } = useSearchEmails();\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        listRef.current &&\r\n        !listRef.current.contains(event.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsListVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleInputChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const newValue = e.target.value;\r\n      onChange(newValue);\r\n\r\n      if (newValue !== value) {\r\n        onSelect(newValue, undefined);\r\n      }\r\n\r\n      if (newValue.trim()) {\r\n        fetchEmails(newValue);\r\n        setIsListVisible(true);\r\n      } else {\r\n        setIsListVisible(false);\r\n      }\r\n    },\r\n    [onChange, fetchEmails, value]\r\n  );\r\n\r\n  const handleSelect = (email: string, ownerId: number) => {\r\n    onSelect(email, ownerId);\r\n    setIsListVisible(false);\r\n  };\r\n\r\n  const filteredEmails = useMemo(() => emails, [emails]);\r\n\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor=\"ownerEmail\"\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n\r\n      <input\r\n        id=\"ownerEmail\"\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        name=\"ownerEmail\"\r\n        value={value}\r\n        onChange={handleInputChange}\r\n        placeholder=\"Ingrese el correo del propietario\"\r\n        autoComplete=\"email\"\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary focus:outline-none focus:ring-2 focus:ring-premium-primary\",\r\n          error\r\n            ? \"border-red-500 bg-red-50\"\r\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n      />\r\n\r\n      {isListVisible && filteredEmails.length > 0 && (\r\n        <div className=\"relative\">\r\n          <ul\r\n            ref={listRef}\r\n            className=\"absolute z-10 w-full border border-premium-borderColor dark:border-premium-borderColorHover \r\n       bg-premium-background dark:bg-premium-backgroundLight rounded-md shadow-lg\"\r\n          >\r\n            {loading ? (\r\n              <li className=\"p-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\">\r\n                Cargando...\r\n              </li>\r\n            ) : (\r\n              filteredEmails.map((user) => (\r\n                <li\r\n                  key={user.id}\r\n                  onClick={() => handleSelect(user.email, user.id)}\r\n                  className=\"cursor-pointer flex items-center gap-2 p-2 text-premium-textPrimary dark:text-premium-textPrimary hover:bg-premium-secondaryLight dark:hover:bg-premium-secondaryDark \r\n                transition-colors rounded-md\"\r\n                >\r\n                  <Mail className=\"h-4 w-4 text-premium-primary\" />\r\n                  {user.email}\r\n                </li>\r\n              ))\r\n            )}\r\n          </ul>\r\n        </div>\r\n      )}\r\n      {error && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
        "formSelect.tsx": "import clsx from \"clsx\";\nimport TooltipIcon from \"./tooltipIcon\";\nimport FormErrorMessage from \"./formErrorMessage\";\n\ninterface FormSelectProps {\n  label: string;\n  name: string;\n  value: string | number;\n  options: { id: number | string; name: string }[];\n  onChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\n  error?: string;\n  flag?: boolean;\n  tooltipText?: string;\n}\n\nexport default function FormSelect({\n  label,\n  name,\n  value,\n  options,\n  onChange,\n  error,\n  flag,\n  tooltipText,\n}: FormSelectProps) {\n  return (\n    <div>\n      <label\n        htmlFor={name}\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\n      >\n        {label}\n        {error !== undefined && \" *\"}\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\n      </label>\n      <select\n        id={name}\n        name={name}\n        value={value}\n        onChange={onChange}\n        className={clsx(\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\n          error && !flag\n            ? \"border-red-500 bg-red-50\"\n            : \"border-premium-borderColor dark:border-premium-borderColorHover\"\n        )}\n      >\n        <option value=\"\">Seleccione {label.toLowerCase()}</option>\n        {options.map((option) => (\n          <option key={option.id} value={option.id.toString()}>\n            {option.name}\n          </option>\n        ))}\n      </select>\n      {error && !flag && <FormErrorMessage error={error} />}\n    </div>\n  );\n}\n",
        "formTextArea.tsx": "import clsx from \"clsx\";\r\nimport TooltipIcon from \"./tooltipIcon\";\r\nimport FormErrorMessage from \"./formErrorMessage\";\r\n\r\ninterface FormTextareaProps {\r\n  label: string;\r\n  name: string;\r\n  value: string;\r\n  placeholder: string;\r\n  onChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\r\n  error?: string;\r\n  flag?: boolean;\r\n  tooltipText?: string;\r\n  rows?: number;\r\n  maxLength?: number;\r\n  isEdit?: boolean;\r\n}\r\n\r\nexport default function FormTextarea({\r\n  label,\r\n  name,\r\n  value,\r\n  placeholder,\r\n  onChange,\r\n  error,\r\n  flag,\r\n  tooltipText,\r\n  rows = 4,\r\n  maxLength,\r\n  isEdit,\r\n}: FormTextareaProps) {\r\n  return (\r\n    <div>\r\n      <label\r\n        htmlFor={name}\r\n        className=\"mb-2 flex items-center gap-2 text-premium-textPrimary dark:text-premium-textPrimary\"\r\n      >\r\n        {label}\r\n        {error !== undefined && \" *\"}\r\n        {tooltipText && <TooltipIcon tooltipText={tooltipText} />}\r\n      </label>\r\n      <textarea\r\n        id={name}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        placeholder={placeholder}\r\n        rows={rows}\r\n        maxLength={maxLength}\r\n        disabled={isEdit}\r\n        className={clsx(\r\n          \"w-full rounded-md border bg-premium-background px-3 py-2 text-premium-textPrimary dark:bg-premium-backgroundLight dark:text-premium-textPrimary\",\r\n          error && !flag && \"border-red-500 bg-red-50\",\r\n          !error &&\r\n            \"border-premium-borderColor dark:border-premium-borderColorHover\"\r\n        )}\r\n      />\r\n      {error && !flag && <FormErrorMessage error={error} />}\r\n    </div>\r\n  );\r\n}\r\n",
        "modalAlert.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { Info } from \"lucide-react\";\n\ninterface ModalAlertProps {\n  title: string;\n  message: string;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function ModalAlert({\n  title,\n  message,\n  isOpen,\n  onClose,\n}: ModalAlertProps) {\n  const [isVisible, setIsVisible] = useState(isOpen);\n\n  useEffect(() => {\n    setIsVisible(isOpen);\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n\n  const handleClose = () => {\n    setIsVisible(false);\n    setTimeout(onClose, 300);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div\n        className={clsx(\n          \"transform transition-transform duration-300 w-96 rounded-lg bg-premium-backgroundAlt p-6 shadow-lg dark:bg-premium-backgroundDark\",\n          isOpen ? \"scale-100 opacity-100\" : \"scale-95 opacity-0\"\n        )}\n      >\n        <div className=\"flex flex-col items-center text-center\">\n          <Info className=\"h-10 w-10 text-premium-primary dark:text-premium-primaryLight\" />\n\n          <h2 className=\"mb-2 mt-4 text-lg font-semibold text-premium-textPrimary dark:text-premium-textSecondary\">\n            {title}\n          </h2>\n\n          <p className=\"mb-6 text-sm text-premium-textSecondary dark:text-premium-textPlaceholder\">\n            {message}\n          </p>\n        </div>\n\n        <button\n          onClick={handleClose}\n          className=\"w-full rounded-md bg-premium-primary py-2 text-white transition hover:bg-premium-primaryDark dark:bg-premium-primary dark:hover:bg-premium-primaryDark\"\n        >\n          Aceptar\n        </button>\n      </div>\n    </div>\n  );\n}\n",
        "modalConfirmation.tsx": "import { useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { CircleCheck, X } from \"lucide-react\";\n\ninterface ModalConfirmationProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  confirmClassName?: string;\n}\n\nexport default function ModalConfirmation({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmLabel = \"Confirmar\",\n  cancelLabel = \"Cancelar\",\n  confirmClassName,\n}: ModalConfirmationProps) {\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"dark:bg-premium-backgroundDarkAlt relative w-full max-w-sm rounded-lg bg-premium-backgroundAlt p-6 shadow-lg\">\n        <button\n          className=\"absolute right-3 top-3 text-premium-textPrimary hover:text-premium-primary dark:text-premium-textSecondary dark:hover:text-premium-primaryLight\"\n          onClick={onClose}\n          aria-label=\"Close modal\"\n        >\n          <X className=\"h-5 w-5\" />\n        </button>\n\n        <div className=\"mb-4 flex justify-center text-premium-primary dark:text-premium-primaryLight\">\n          <CircleCheck className=\"h-10 w-10 text-premium-primary\" />\n        </div>\n\n        <h3 className=\"mb-2 text-center text-lg font-semibold text-premium-textPrimary dark:text-premium-textSecondary\">\n          {title}\n        </h3>\n\n        <p className=\"mb-6 text-center text-sm text-premium-textSecondary dark:text-gray-400\">\n          {message}\n        </p>\n\n        <div className=\"flex justify-center gap-4\">\n          <button\n            className=\"rounded-md bg-premium-secondary px-4 py-2 text-white transition hover:bg-premium-secondaryLight hover:opacity-90 dark:bg-premium-secondaryDark dark:hover:bg-premium-secondary\"\n            onClick={onClose}\n          >\n            {cancelLabel}\n          </button>\n\n          <button\n            className={clsx(\n              \"rounded-md px-4 py-2 text-white transition\",\n              confirmClassName ||\n                \"bg-premium-primary hover:bg-premium-primaryDark dark:bg-premium-primary dark:hover:bg-premium-primaryDark\"\n            )}\n            onClick={onConfirm}\n          >\n            {confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "modalFooter.tsx": "import clsx from \"clsx\";\n\ninterface ModalFooterProps {\n  onClose: () => void;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  formId?: string;\n  confirmClassName?: string;\n}\n\nexport default function ModalFooter({\n  onClose,\n  confirmLabel = \"Confirmar\",\n  cancelLabel = \"Cancelar\",\n  formId,\n  confirmClassName,\n}: ModalFooterProps) {\n  return (\n    <div className=\"flex justify-end border-t border-premium-borderColor p-4 dark:border-premium-borderColorHover\">\n      <button\n        type=\"button\"\n        onClick={onClose}\n        className=\"mr-2 transform rounded-lg bg-premium-textPlaceholder px-4 py-2 text-white transition duration-300 hover:scale-105 hover:bg-premium-borderColor dark:bg-premium-secondary dark:hover:bg-premium-secondaryDark\"\n      >\n        {cancelLabel}\n      </button>\n      <button\n        type=\"submit\"\n        form={formId}\n        className={clsx(\n          \"transform rounded-lg px-4 py-2 text-white transition duration-300 hover:scale-105\",\n          confirmClassName ??\n            \"bg-premium-primary hover:bg-premium-primaryDark dark:bg-premium-primaryLight dark:hover:bg-premium-primaryDark\"\n        )}\n      >\n        {confirmLabel}\n      </button>\n    </div>\n  );\n}\n",
        "modalHeader.tsx": "interface ModalHeaderProps {\n  title: string;\n  onClose: () => void;\n}\n\nexport default function ModalHeader({ title, onClose }: ModalHeaderProps) {\n  return (\n    <div className=\"flex items-center justify-between border-b border-premium-borderColor px-6 py-3 dark:border-premium-borderColorHover\">\n      <h5 className=\"text-xl font-semibold text-premium-primary dark:text-premium-primaryLight\">\n        {title}\n      </h5>\n      <button\n        type=\"button\"\n        onClick={onClose}\n        className=\"text-3xl text-premium-secondary hover:text-premium-primary dark:text-premium-textPrimary\"\n      >\n        &times;\n      </button>\n    </div>\n  );\n}\n",
        "tooltipIcon.tsx": "import { Info } from \"lucide-react\";\r\n\r\ninterface TooltipIconProps {\r\n  tooltipText: string;\r\n}\r\n\r\nexport default function TooltipIcon({ tooltipText }: TooltipIconProps) {\r\n  return (\r\n    <span className=\"group relative\">\r\n      <Info className=\"h-4 w-4 cursor-pointer text-gray-500 dark:text-gray-400\" />\r\n      <div className=\"absolute z-10 mt-2 hidden w-64 flex-col items-center rounded-md border border-premium-borderColor bg-premium-backgroundLight p-2 text-premium-textPrimary shadow-md group-hover:flex dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary\">\r\n        <p className=\"text-xs\">{tooltipText}</p>\r\n      </div>\r\n    </span>\r\n  );\r\n}\r\n"
      },
      "projects": {
        "contactForm.tsx": "\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\n\nexport default function ContactForm() {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [checked, setChecked] = useState(false);\n  const [formState, setFormState] = useState<\"fixed\" | \"bottom\" | \"default\">(\n    \"default\"\n  );\n  const [formOffset, setFormOffset] = useState<number | null>(null);\n  const formRef = useRef<HTMLDivElement>(null);\n  const [isLargeScreen, setIsLargeScreen] = useState<boolean>(false);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n  };\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsLargeScreen(window.innerWidth >= 1024);\n    };\n\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!isLargeScreen) {\n      setFormState(\"default\");\n      return;\n    }\n\n    const handleScroll = () => {\n      const formElement = formRef.current;\n      const footerElement = document.querySelector(\"footer\");\n      const windowHeight = window.innerHeight;\n\n      if (!formElement || !footerElement) return;\n\n      const formHeight = formElement.offsetHeight;\n      const formRect = formElement.getBoundingClientRect();\n      const footerRect = footerElement.getBoundingClientRect();\n      const pageHeight = document.documentElement.scrollHeight;\n\n      const stopPosition = pageHeight - (800 + formHeight);\n\n      if (footerRect.top <= windowHeight) {\n        if (formState !== \"bottom\") {\n          setFormOffset(stopPosition);\n          setFormState(\"bottom\");\n        }\n        return;\n      }\n\n      if (window.scrollY > 400 && formRect.top <= 32) {\n        if (formState !== \"fixed\") {\n          setFormOffset(null);\n          setFormState(\"fixed\");\n        }\n        return;\n      }\n\n      if (window.scrollY <= 400) {\n        if (formState !== \"default\") {\n          setFormOffset(null);\n          setFormState(\"default\");\n        }\n        return;\n      }\n\n      if (formState === \"bottom\" && window.scrollY > 400 && formRect.top > 32) {\n        setFormOffset(null);\n        setFormState(\"fixed\");\n      }\n    };\n\n    const onScroll = () => window.requestAnimationFrame(handleScroll);\n    window.addEventListener(\"scroll\", onScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [formState, isLargeScreen]);\n\n  const formStyles = {\n    fixed: \"fixed top-32 right-11 w-96 z-10\",\n    bottom: \"absolute right-11 w-96\",\n    default: \"relative w-full max-w-md mx-auto\",\n    smallScreen: \"relative w-full max-w-md mx-auto\",\n  };\n\n  const dynamicStyle =\n    isLargeScreen && formState === \"bottom\" && formOffset !== null\n      ? { top: `${formOffset}px` }\n      : isLargeScreen && formState === \"fixed\"\n        ? { top: \"8rem\", right: \"2.75rem\" }\n        : {};\n\n  return (\n    <div\n      ref={formRef}\n      className={`${\n        isLargeScreen ? formStyles[formState] : formStyles.smallScreen\n      } max-h-[80vh] overflow-y-auto rounded-lg border border-[#DAA520] bg-[#F4F1ED] p-6 text-[#5D4037]`}\n      style={dynamicStyle}\n    >\n      <h2 className=\"mb-2 text-center text-2xl font-bold text-[#8B4513]\">\n        Te llamamos\n      </h2>\n      <p className=\"mb-4 text-center text-sm\">\n        Déjanos tus datos y pronto estaremos en contacto.\n      </p>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"flex flex-col\">\n          <label className=\"mb-1 font-medium\">Nombre *</label>\n          <input\n            type=\"text\"\n            placeholder=\"Nombre completo\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            className=\"w-full rounded-md border border-[#DAA520] bg-white px-3 py-2 text-[#5D4037] outline-none\"\n            required\n          />\n        </div>\n        <div className=\"flex flex-col\">\n          <label className=\"mb-1 font-medium\">Correo electrónico *</label>\n          <input\n            type=\"email\"\n            placeholder=\"Correo electrónico\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"w-full rounded-md border border-[#DAA520] bg-white px-3 py-2 text-[#5D4037] outline-none\"\n            required\n          />\n        </div>\n        <div className=\"flex flex-col\">\n          <label className=\"mb-1 font-medium\">Celular o Teléfono *</label>\n          <input\n            type=\"tel\"\n            placeholder=\"Número de contacto\"\n            value={phone}\n            onChange={(e) => setPhone(e.target.value)}\n            className=\"w-full rounded-md border border-[#DAA520] bg-white px-3 py-2 text-[#5D4037] outline-none\"\n            required\n          />\n        </div>\n        <div className=\"flex items-start\">\n          <input\n            type=\"checkbox\"\n            checked={checked}\n            onChange={() => setChecked(!checked)}\n            className=\"form-checkbox mt-1 border-[#DAA520] text-[#DAA520] focus:ring-[#DAA520]\"\n            required\n          />\n          <label className=\"ml-2 text-xs\">\n            Acepto los{\" \"}\n            <a href=\"#\" className=\"text-[#DAA520] underline\">\n              términos y condiciones\n            </a>\n            .\n          </label>\n        </div>\n        <button\n          type=\"submit\"\n          className=\"w-full rounded-md border border-[#DAA520] bg-[#DAA520] py-2 font-semibold text-[#8B4513]\"\n        >\n          Contáctame\n        </button>\n      </form>\n    </div>\n  );\n}\n",
        "createEditProject": {
          "basicProjectForm.tsx": "import { useState, useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { propertyType, ProjectData } from \"@/lib/definitios\";\nimport { useBasicProjectValidation } from \"@/app/hooks/projects/createEditProject/useBasicProjectValidation\";\nimport { useCheckEmail } from \"@/app/hooks/users/useCheckEmail\";\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\nimport FormInput from \"@/app/ui/modals/formInput\";\nimport FormSelect from \"@/app/ui/modals/formSelect\";\nimport FormCheckbox from \"@/app/ui/modals/formCheckbox\";\nimport FormTextarea from \"@/app/ui/modals/formTextArea\";\nimport FormSearchEmail from \"../../modals/formSearchEmail\";\n\ninterface BasicProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  propertyTypes: propertyType[];\n  currentStep: number;\n  totalSteps: number;\n  isProperty: boolean;\n  isEdit: boolean;\n  hasPermission?: boolean;\n}\n\nexport default function BasicProjectForm({\n  formData,\n  onChange,\n  propertyTypes,\n  onPrevious,\n  currentStep,\n  totalSteps,\n  isProperty,\n  isEdit,\n  onNext,\n  hasPermission,\n}: BasicProjectFormProps) {\n  const { errors, validateFields, validateField } = useBasicProjectValidation(\n    formData,\n    isProperty,\n    isEdit\n  );\n  const { checkEmailExists } = useCheckEmail();\n  const [ownerEmail, setOwnerEmail] = useState(formData.email || \"\");\n\n  const handleEmailChange = (email: string, ownerId: number | undefined) => {\n    setOwnerEmail(email);\n    onChange({ email, ownerId });\n  };\n\n  const propertyOptions = useMemo(\n    () => propertyTypes.map((type) => ({ id: type.id, name: type.name })),\n    [propertyTypes]\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      const { name, value } = e.target;\n      if (formData[name as keyof ProjectData] !== value) {\n        onChange({ [name]: value });\n        validateField(`${name}Error` as keyof typeof errors, value);\n      }\n    },\n    [onChange, validateField, formData]\n  );\n\n  const handleCheckboxChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      onChange({ membership: e.target.checked ? 1004 : 1001 });\n    },\n    [onChange]\n  );\n\n  const handleSelectChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const { name, value } = e.target;\n      const selectedId = parseInt(value, 10);\n\n      if (name === \"propertyType\") {\n        const selectedPropertyType = propertyTypes.find(\n          (type) => type.id === selectedId\n        );\n        if (selectedPropertyType) {\n          onChange({ propertyType: selectedPropertyType });\n          validateField(\"propertyTypeError\", selectedPropertyType);\n        }\n      }\n\n      if (name === \"projectType\") {\n        if (selectedId === 2 || selectedId === 3) {\n          onChange({\n            projectType: {\n              id: selectedId,\n              name: selectedId === 2 ? \"Venta\" : \"Arriendo\",\n            },\n          });\n          validateField(\"projectTypeError\", { id: selectedId });\n        }\n      }\n    },\n    [onChange, propertyTypes, validateField]\n  );\n\n  const handleNext = useCallback(\n    async (e?: React.FormEvent) => {\n      e?.preventDefault();\n\n      if (formData.email && !formData.ownerId) {\n        const ownerId = await checkEmailExists(formData.email);\n\n        if (!ownerId) {\n          await validateField(\"emailError\", formData.email);\n          return;\n        }\n\n        await new Promise((resolve) => {\n          onChange({ ownerId });\n          setTimeout(resolve, 0);\n        });\n      }\n\n      const isValid = await validateFields();\n      if (!isValid) return;\n\n      onNext();\n    },\n    [\n      validateFields,\n      onNext,\n      checkEmailExists,\n      formData,\n      onChange,\n      validateField,\n    ]\n  );\n\n  const tooltipTexts = useMemo(\n    () => ({\n      name: \"Nombre del proyecto que se mostrará al público.\",\n      propertyType: isProperty\n        ? \"Seleccione el tipo de propiedad que más se ajuste.\"\n        : \"Seleccione el tipo de propiedad que más se ajuste a su proyecto.\",\n      projectType:\n        \"Seleccione si la propiedad va a estar en venta o en arriendo.\",\n      shortDescription: isProperty\n        ? \"Escriba un resumen breve que describa las principales características de la propiedad.\"\n        : \"Escriba un resumen breve que describa las principales características del proyecto.\",\n      detailedDescription: isProperty\n        ? \"Incluya una descripción detallada que explique las características principales de la propiedad.\"\n        : \"Incluya una descripción detallada que explique las características principales del proyecto.\",\n    }),\n    [isProperty]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        Datos Básicos\n      </h2>\n      <form onSubmit={handleNext} className=\"space-y-6\">\n        {!isProperty && (\n          <FormInput\n            label={\n              isProperty ? \"Nombre de la propiedad\" : \"Nombre del proyecto\"\n            }\n            type=\"text\"\n            name=\"name\"\n            value={formData.name || \"\"}\n            placeholder={\n              isProperty\n                ? \"Ingrese el nombre de la propiedad\"\n                : \"Ingrese el nombre del proyecto\"\n            }\n            maxLength={100}\n            onChange={handleChange}\n            error={errors.nameError}\n            tooltipText={tooltipTexts.name}\n          />\n        )}\n\n        <div\n          className={clsx(\n            \"grid grid-cols-1 gap-4\",\n            isProperty && \"sm:grid-cols-2\"\n          )}\n        >\n          <FormSelect\n            label=\"Tipo de propiedad\"\n            name=\"propertyType\"\n            value={formData.propertyType?.id || \"\"}\n            options={propertyOptions}\n            onChange={handleSelectChange}\n            error={errors.propertyTypeError}\n            tooltipText={tooltipTexts.propertyType}\n          />\n\n          {isProperty && (\n            <FormSelect\n              label=\"Finalidad de la propiedad\"\n              name=\"projectType\"\n              value={formData.projectType?.id || \"\"}\n              options={[\n                { id: 2, name: \"Venta\" },\n                { id: 3, name: \"Arriendo\" },\n              ]}\n              onChange={handleSelectChange}\n              error={errors.projectTypeError}\n              tooltipText={tooltipTexts.projectType}\n            />\n          )}\n        </div>\n\n        {isProperty && hasPermission && (\n          <FormSearchEmail\n            label=\"Correo del Propietario\"\n            value={ownerEmail}\n            onChange={setOwnerEmail}\n            onSelect={(email, ownerId) => handleEmailChange(email, ownerId)}\n            error={errors.emailError}\n            tooltipText=\"Seleccione el propietario de la propiedad (si es un proyecto propio de la empresa puedes omitir este campo).\"\n          />\n        )}\n\n        <FormTextarea\n          label=\"Resumen breve\"\n          name=\"shortDescription\"\n          value={formData.shortDescription || \"\"}\n          placeholder=\"Agregue un resumen breve\"\n          tooltipText={tooltipTexts.shortDescription}\n          onChange={handleChange}\n          error={errors.shortDescriptionError}\n          rows={3}\n          maxLength={150}\n        />\n\n        <FormTextarea\n          label=\"Descripción completa\"\n          name=\"detailedDescription\"\n          value={formData.detailedDescription || \"\"}\n          placeholder=\"Agregue una descripción completa y detallada\"\n          tooltipText={tooltipTexts.detailedDescription}\n          onChange={handleChange}\n          error={errors.detailedDescriptionError}\n          rows={6}\n          maxLength={1500}\n        />\n\n        <FormCheckbox\n          label=\"Propio de la empresa\"\n          name=\"membership\"\n          checked={formData.membership === 1004}\n          onChange={handleCheckboxChange}\n          className=\"h-4 w-4 rounded border-gray-300 text-premium-primary focus:ring-premium-primary\"\n        />\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
          "detailsProjectForm.tsx": "import { useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport {\n  CommonArea,\n  NearbyService,\n  HousingType,\n  ProjectData,\n} from \"@/lib/definitios\";\nimport { formatNumber } from \"@/utils/formatters\";\nimport { useDetailsProjectValidation } from \"@/app/hooks/projects/createEditProject/useDetailsProjectValidation\";\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\nimport FormInput from \"@/app/ui/modals/formInput\";\nimport FormSelect from \"@/app/ui/modals/formSelect\";\nimport FormMultiSelect from \"@/app/ui/modals/formMultiSelect\";\nimport FormDatePicker from \"@/app/ui/modals/formDatePicker\";\n\ninterface DetailsProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n  commonAreas: CommonArea[];\n  nearbyServices: NearbyService[];\n  housingTypes: HousingType[];\n}\n\nexport default function DetailsProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n  commonAreas,\n  nearbyServices,\n  housingTypes,\n}: DetailsProjectFormProps) {\n  const { errors, validateFields, validateField } =\n    useDetailsProjectValidation(formData);\n\n  const handlePriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/[^0-9]/g, \"\");\n    const numericValue = value ? parseInt(value, 10) : 0;\n\n    onChange({ price: numericValue });\n    validateField(\"priceError\", numericValue);\n  };\n\n  const handleChangeText = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { name, value } = e.target;\n      if (formData[name as keyof ProjectData] !== value) {\n        onChange({ [name]: value });\n        validateField(`${name}Error` as keyof typeof errors, value);\n      }\n    },\n    [onChange, validateField, formData]\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { name, value, type } = e.target;\n      const updatedValue =\n        type === \"number\" ? (value === \"\" ? \"\" : parseFloat(value)) : value;\n\n      if (formData[name as keyof ProjectData] !== updatedValue) {\n        onChange({ [name]: updatedValue });\n        validateField(`${name}Error` as keyof typeof errors, updatedValue);\n      }\n    },\n    [onChange, validateField, formData]\n  );\n\n  const handleDateChange = (date: Date | null) => {\n    onChange({ availableDate: date ?? undefined });\n    validateField(\"dateError\" as keyof typeof errors, date);\n  };\n\n  const handleSelectChange = useCallback(\n    (\n      e: React.ChangeEvent<HTMLSelectElement>,\n      name: \"commonAreas\" | \"nearbyServices\" | \"housingType\"\n    ) => {\n      const id = parseInt(e.target.value, 10);\n      if (!id) return;\n\n      if (name === \"housingType\") {\n        const selectedHousingType = housingTypes.find((type) => type.id === id);\n        if (selectedHousingType && formData.housingType?.id !== id) {\n          onChange({ housingType: selectedHousingType });\n        }\n        return;\n      }\n\n      const selectedItem =\n        name === \"commonAreas\"\n          ? commonAreas.find((area) => area.id === id)\n          : nearbyServices.find((service) => service.id === id);\n\n      if (\n        selectedItem &&\n        !formData[name]?.some((item) => item.id === selectedItem.id)\n      ) {\n        onChange({ [name]: [...(formData[name] || []), selectedItem] });\n      }\n    },\n    [onChange, formData, housingTypes, commonAreas, nearbyServices]\n  );\n\n  const handleRemoveTag = useCallback(\n    (id: number, name: \"commonAreas\" | \"nearbyServices\") => {\n      const updatedItems =\n        formData[name]?.filter((item) => item.id !== id) || [];\n      onChange({ [name]: updatedItems });\n    },\n    [onChange, formData]\n  );\n\n  const handleNext = (e?: React.FormEvent) => {\n    e?.preventDefault();\n    const isValid = validateFields();\n    if (isValid) {\n      onNext();\n    }\n  };\n\n  const isProject = formData.projectType?.id === 1;\n  const isProperty =\n    formData.projectType?.id === 2 || formData.projectType?.id === 3;\n  const isApartmentOrHouse =\n    formData.propertyType?.id === 1001 || formData.propertyType?.id === 1002;\n\n  const tooltipTexts = useMemo(\n    () => ({\n      price: isProperty\n        ? \"Indique el precio de la propiedad.\"\n        : \"Indique el precio por unidad del proyecto.\",\n      availableUnits:\n        \"Especifique el número de unidades disponibles para este proyecto.\",\n      housingType: \"Seleccione el tipo de vivienda.\",\n      availableDate:\n        \"Seleccione la fecha estimada para la entrega del proyecto (mes/año).\",\n      complexName: \"Nombre del conjunto residencial (si aplica).\",\n      commonAreas: isProperty\n        ? \"Seleccione las áreas comunes disponibles en la propiedad.\"\n        : \"Seleccione las áreas comunes disponibles en el proyecto.\",\n      nearbyServices: isProperty\n        ? \"Seleccione los servicios cercanos a la propiedad.\"\n        : \"Seleccione los servicios cercanos al proyecto.\",\n    }),\n    [formData.projectType?.id]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {isProject ? \"Detalles del Proyecto\" : \"Detalles de la Propiedad\"}\n      </h2>\n\n      <form onSubmit={handleNext} className=\"space-y-6\">\n        <div\n          className={clsx(\n            \"grid gap-4\",\n            isProperty ? \"grid-cols-1\" : \"grid-cols-1 sm:grid-cols-2\"\n          )}\n        >\n          <FormInput\n            label=\"Precio\"\n            type=\"text\"\n            name=\"price\"\n            value={formData.price ? formatNumber(formData.price) : \"\"}\n            onChange={handlePriceChange}\n            placeholder=\"Ingrese el precio\"\n            error={errors.priceError}\n            tooltipText={tooltipTexts.price}\n          />\n\n          {isProject && (\n            <FormInput\n              label=\"Unidades Disponibles\"\n              type=\"number\"\n              name=\"availableUnits\"\n              value={formData.availableUnits || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de unidades disponibles\"\n              min={0}\n              tooltipText={tooltipTexts.availableUnits}\n            />\n          )}\n        </div>\n\n        {(isApartmentOrHouse || isProject) && (\n          <div\n            className={clsx(\n              \"grid grid-cols-1 gap-4\",\n              isApartmentOrHouse && isProject && \"sm:grid-cols-2\"\n            )}\n          >\n            {isApartmentOrHouse && (\n              <FormSelect\n                label=\"Tipo de Vivienda\"\n                name=\"housingType\"\n                value={formData.housingType?.id || \"\"}\n                options={housingTypes}\n                onChange={(e) => handleSelectChange(e, \"housingType\")}\n                error={errors.housingTypeError}\n                tooltipText={tooltipTexts.housingType}\n              />\n            )}\n\n            {isProject && (\n              <FormDatePicker\n                label=\"Fecha Estimada de Entrega\"\n                name=\"availableDate\"\n                value={formData.availableDate ?? null}\n                onChange={handleDateChange}\n                tooltipText={tooltipTexts.availableDate}\n              />\n            )}\n          </div>\n        )}\n\n        {formData.propertyType?.id === 1002 && isProperty && (\n          <FormInput\n            label=\"Nombre del conjunto\"\n            type=\"text\"\n            name=\"complexName\"\n            value={formData.complexName || \"\"}\n            onChange={handleChangeText}\n            maxLength={100}\n            placeholder=\"Ingrese el nombre del proyecto\"\n            tooltipText={tooltipTexts.complexName}\n          />\n        )}\n\n        <FormMultiSelect\n          label=\"Áreas Comunes\"\n          name=\"commonAreas\"\n          selectedItems={formData.commonAreas || []}\n          options={commonAreas}\n          onSelect={handleSelectChange}\n          onRemove={handleRemoveTag}\n          tooltipText={tooltipTexts.commonAreas}\n        />\n\n        <FormMultiSelect\n          label=\"Servicios Cercanos\"\n          name=\"nearbyServices\"\n          selectedItems={formData.nearbyServices || []}\n          options={nearbyServices}\n          onSelect={handleSelectChange}\n          onRemove={handleRemoveTag}\n          tooltipText={tooltipTexts.nearbyServices}\n        />\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
          "featuresProjectForm.tsx": "import { useCallback, useMemo } from \"react\";\nimport { ProjectData } from \"@/lib/definitios\";\nimport { useFeaturesProjectValidation } from \"@/app/hooks/projects/createEditProject/useFeaturesProjectValidation\";\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\nimport FormInput from \"@/app/ui/modals/formInput\";\nimport FormSelect from \"@/app/ui/modals/formSelect\";\nimport FormCheckboxToggle from \"@/app/ui/modals/formCheckboxToggle\";\n\ninterface FeaturesProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n}\n\nexport default function FeaturesProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n}: FeaturesProjectFormProps) {\n  const { errors, validateFields, validateField } =\n    useFeaturesProjectValidation(formData);\n\n  const shouldShowField = useCallback(\n    (field: string) => {\n      const propertyTypeId = formData.propertyType?.id;\n\n      const conditions: Record<string, boolean> = {\n        socioeconomicLevel: propertyTypeId === 1001 || propertyTypeId === 1002,\n        yearBuilt: propertyTypeId === 1001 || propertyTypeId === 1002,\n        bedrooms: propertyTypeId === 1001 || propertyTypeId === 1002,\n        storageUnits: propertyTypeId === 1001 || propertyTypeId === 1002,\n        balcony: propertyTypeId === 1001 || propertyTypeId === 1002,\n        laundryArea: propertyTypeId === 1001 || propertyTypeId === 1002,\n        customizationOptions:\n          propertyTypeId === 1001 || propertyTypeId === 1002,\n        terrace: propertyTypeId === 1001,\n        garden: propertyTypeId === 1001,\n        bathrooms:\n          propertyTypeId === 1001 ||\n          propertyTypeId === 1002 ||\n          propertyTypeId === 1004,\n        lobbies:\n          propertyTypeId === 1001 ||\n          propertyTypeId === 1002 ||\n          propertyTypeId === 1004,\n        elevator: propertyTypeId === 1001 || propertyTypeId === 1002,\n        towers: propertyTypeId === 1002,\n        floorNumber: propertyTypeId === 1002,\n        freeHeight:\n          propertyTypeId === 1004 ||\n          propertyTypeId === 1003 ||\n          propertyTypeId === 1005,\n        width:\n          propertyTypeId === 1005 ||\n          propertyTypeId === 1006 ||\n          propertyTypeId === 1007,\n        length:\n          propertyTypeId === 1005 ||\n          propertyTypeId === 1006 ||\n          propertyTypeId === 1007,\n        heavyParking: propertyTypeId === 1005,\n      };\n\n      return conditions[field] ?? false;\n    },\n    [formData.propertyType?.id]\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { name, value, type } = e.target;\n      const updatedValue =\n        type === \"number\" ? (value === \"\" ? \"\" : parseFloat(value)) : value;\n\n      onChange({ [name]: updatedValue });\n      validateField(`${name}Error` as keyof typeof errors, updatedValue);\n    },\n    [onChange, validateField, errors]\n  );\n\n  const handleSelectChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const { name, value } = e.target;\n      const selectedValue = parseInt(value, 10);\n\n      onChange({ [name]: selectedValue });\n      validateField(`${name}Error` as keyof typeof errors, selectedValue);\n    },\n    [onChange, validateField, errors]\n  );\n\n  const handleNext = useCallback(\n    (e?: React.FormEvent) => {\n      e?.preventDefault();\n      if (validateFields()) {\n        onNext();\n      }\n    },\n    [validateFields, onNext]\n  );\n\n  const tooltipTexts = useMemo(\n    () => ({\n      totalArea:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese el área total de la propiedad en metros cuadrados.\"\n          : \"Ingrese el área total del proyecto en metros cuadrados.\",\n      builtArea:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese el área construida de la propiedad en metros cuadrados, considerando únicamente las áreas cubiertas.\"\n          : \"Ingrese el área construida del proyecto en metros cuadrados, considerando únicamente las áreas cubiertas.\",\n      socioeconomicLevel:\n        \"Seleccione el nivel socioeconómico asignado a la propiedad según la clasificación oficial del sector.\",\n      yearBuilt:\n        \"Seleccione el año en que la propiedad fue construida o su estructura original terminada.\",\n      bedrooms:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Especifique cuántas habitaciones tiene la propiedad.\"\n          : \"Especifique cuántas habitaciones tendrá el proyecto.\",\n      bathrooms:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Indique la cantidad total de baños que tiene la propiedad.\"\n          : \"Indique la cantidad total de baños que estarán incluidos en el proyecto.\",\n      lobbies:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese el número de salas de estar (salones o lobbies) que tiene la propiedad.\"\n          : \"Ingrese el número de salas de estar (salones o lobbies) que tendrá el proyecto.\",\n      freeHeight:\n        \"Especifique la altura libre del proyecto en metros, considerando el espacio disponible entre el suelo y el techo.\",\n      width:\n        \"Indique el frente total del proyecto en metros. Este valor corresponde a la dimensión horizontal.\",\n      length:\n        \"Especifique el fondo total del proyecto en metros. Este valor corresponde a la dimensión vertical.\",\n      heavyParking:\n        \"Indique cuántos espacios de parqueo estarán disponibles para vehículos pesados.\",\n      towers:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Indique la torre en la que se encuentra la propiedad (si aplica).\"\n          : \"Ingrese la cantidad de torres que tendrá el proyecto, si corresponde.\",\n      floorNumber:\n        \"Ingrese el número de piso donde se encuentra el apartamento. Por ejemplo, '3' para el tercer piso.\",\n      storageUnits:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Especifique el número total de depósitos (bodegas o cuartos de almacenamiento) disponibles para la propiedad.\"\n          : \"Especifique el número total de depósitos (bodegas o cuartos de almacenamiento) disponibles en el proyecto.\",\n      parkingSpots:\n        \"Especifique el número total de espacios de parqueo que estarán disponibles.\",\n    }),\n    [formData.projectType?.id]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {formData.projectType?.id === 1\n          ? \"Características del Proyecto\"\n          : \"Características de la Propiedad\"}\n      </h2>\n\n      <form onSubmit={handleNext} className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n          <FormInput\n            label=\"Área Total (m²)\"\n            type=\"number\"\n            name=\"totalArea\"\n            min={0}\n            value={formData.totalArea || \"\"}\n            onChange={handleChange}\n            placeholder=\"Área total\"\n            error={errors.totalAreaError}\n            tooltipText={tooltipTexts.totalArea}\n          />\n\n          <FormInput\n            label=\"Área Construida (m²)\"\n            type=\"number\"\n            name=\"builtArea\"\n            min={0}\n            value={formData.builtArea || \"\"}\n            onChange={handleChange}\n            placeholder=\"Área construida\"\n            error={errors.builtAreaError}\n            tooltipText={tooltipTexts.builtArea}\n          />\n\n          {shouldShowField(\"socioeconomicLevel\") &&\n            (formData.projectType?.id === 2 ||\n              formData.projectType?.id === 3) && (\n              <FormSelect\n                label=\"Nivel Socioeconómico\"\n                name=\"socioeconomicLevel\"\n                value={formData.socioeconomicLevel || \"\"}\n                onChange={handleSelectChange}\n                options={[1, 2, 3, 4, 5, 6].map((level) => ({\n                  id: level,\n                  name: `Estrato ${level}`,\n                }))}\n                error={errors.socioeconomicLevelError}\n                tooltipText={tooltipTexts.socioeconomicLevel}\n              />\n            )}\n\n          {shouldShowField(\"yearBuilt\") &&\n            (formData.projectType?.id === 2 ||\n              formData.projectType?.id === 3) && (\n              <FormSelect\n                label=\"Año de Construcción\"\n                name=\"yearBuilt\"\n                value={formData.yearBuilt || \"\"}\n                onChange={handleSelectChange}\n                options={Array.from(\n                  { length: new Date().getFullYear() - 1950 + 1 },\n                  (_, i) => ({\n                    id: 1950 + i,\n                    name: (1950 + i).toString(),\n                  })\n                )}\n                error={errors.yearBuiltError}\n                tooltipText={tooltipTexts.yearBuilt}\n              />\n            )}\n\n          {shouldShowField(\"bedrooms\") && (\n            <FormInput\n              label=\"Número de Habitaciones\"\n              type=\"number\"\n              name=\"bedrooms\"\n              min={0}\n              value={formData.bedrooms || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de habitaciones\"\n              error={errors.bedroomsError}\n              tooltipText={tooltipTexts.bedrooms}\n            />\n          )}\n\n          {shouldShowField(\"bathrooms\") && (\n            <FormInput\n              label=\"Número de Baños\"\n              type=\"number\"\n              name=\"bathrooms\"\n              min={0}\n              value={formData.bathrooms || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de baños\"\n              error={errors.bathroomsError}\n              tooltipText={tooltipTexts.bathrooms}\n            />\n          )}\n\n          {shouldShowField(\"lobbies\") && (\n            <FormInput\n              label=\"Número de Salas de Estar\"\n              type=\"number\"\n              name=\"lobbies\"\n              min={0}\n              value={formData.lobbies || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de salas de estar\"\n              error={errors.lobbiesError}\n              tooltipText={tooltipTexts.lobbies}\n            />\n          )}\n\n          {shouldShowField(\"freeHeight\") && (\n            <FormInput\n              label=\"Altura Libre (m)\"\n              type=\"number\"\n              name=\"freeHeight\"\n              min={0}\n              value={formData.freeHeight || \"\"}\n              onChange={handleChange}\n              placeholder=\"Altura libre\"\n              error={errors.freeHeightError}\n              tooltipText={tooltipTexts.freeHeight}\n            />\n          )}\n\n          {shouldShowField(\"width\") && (\n            <FormInput\n              label=\"Frente (m)\"\n              type=\"number\"\n              name=\"width\"\n              min={0}\n              value={formData.width || \"\"}\n              onChange={handleChange}\n              placeholder=\"Medida del frente\"\n              error={errors.widthError}\n              tooltipText={tooltipTexts.width}\n            />\n          )}\n\n          {shouldShowField(\"length\") && (\n            <FormInput\n              label=\"Fondo (m)\"\n              type=\"number\"\n              name=\"length\"\n              min={0}\n              value={formData.length || \"\"}\n              onChange={handleChange}\n              placeholder=\"Medida del fondo\"\n              error={errors.lengthError}\n              tooltipText={tooltipTexts.length}\n            />\n          )}\n\n          {shouldShowField(\"heavyParking\") && (\n            <FormInput\n              label={\n                formData.propertyType?.id === 1005\n                  ? \"Espacios de Parqueo Privado\"\n                  : \"Espacios de Parqueo Pesado\"\n              }\n              type=\"number\"\n              name=\"heavyParking\"\n              min={0}\n              value={formData.heavyParking || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de parqueos para vehículos pesados\"\n              tooltipText={tooltipTexts.heavyParking}\n            />\n          )}\n\n          {shouldShowField(\"towers\") && (\n            <FormInput\n              label={\n                formData.projectType?.id === 2 || formData.projectType?.id === 3\n                  ? \"Número de Torre\"\n                  : \"Número de Torres\"\n              }\n              type=\"number\"\n              name=\"towers\"\n              min={0}\n              value={formData.towers || \"\"}\n              onChange={handleChange}\n              placeholder={\n                formData.projectType?.id === 1\n                  ? \"Número de torres\"\n                  : \"Número de torre\"\n              }\n              error={\n                formData.projectType?.id === 1 ? errors.towersError : undefined\n              }\n              tooltipText={tooltipTexts.towers}\n            />\n          )}\n\n          {shouldShowField(\"floorNumber\") &&\n            (formData.projectType?.id === 2 ||\n              formData.projectType?.id === 3) && (\n              <FormInput\n                label=\"Número de Piso\"\n                type=\"number\"\n                name=\"floorNumber\"\n                min={0}\n                value={formData.floorNumber || \"\"}\n                onChange={handleChange}\n                placeholder=\"Número de piso\"\n                tooltipText={tooltipTexts.floorNumber}\n              />\n            )}\n\n          {shouldShowField(\"storageUnits\") && (\n            <FormInput\n              label=\"Depósitos\"\n              type=\"number\"\n              name=\"storageUnits\"\n              min={0}\n              value={formData.storageUnits || \"\"}\n              onChange={handleChange}\n              placeholder=\"Número de depósitos\"\n              tooltipText={tooltipTexts.storageUnits}\n            />\n          )}\n\n          <FormInput\n            label={\n              formData.propertyType?.id === 1005\n                ? \"Espacios de Parqueo Sociales\"\n                : \"Espacios de Parqueo\"\n            }\n            type=\"number\"\n            name=\"parkingSpots\"\n            min={0}\n            value={formData.parkingSpots || \"\"}\n            onChange={handleChange}\n            placeholder=\"Número de espacios de parqueo\"\n            tooltipText={tooltipTexts.parkingSpots}\n          />\n        </div>\n\n        {(formData.propertyType?.id === 1001 ||\n          formData.propertyType?.id === 1002) && (\n          <div>\n            <h3 className=\"mb-4 text-center text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\n              Características Adicionales\n            </h3>\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n              {shouldShowField(\"elevator\") && (\n                <FormCheckboxToggle\n                  label=\"Elevador\"\n                  name=\"elevator\"\n                  checked={formData.elevator || false}\n                  onChange={(checked) => onChange({ elevator: checked })}\n                />\n              )}\n\n              {shouldShowField(\"terrace\") && (\n                <FormCheckboxToggle\n                  label=\"Terraza\"\n                  name=\"terrace\"\n                  checked={formData.terrace || false}\n                  onChange={(checked) => onChange({ terrace: checked })}\n                />\n              )}\n\n              {shouldShowField(\"balcony\") && (\n                <FormCheckboxToggle\n                  label=\"Balcón\"\n                  name=\"balcony\"\n                  checked={formData.balcony || false}\n                  onChange={(checked) => onChange({ balcony: checked })}\n                />\n              )}\n\n              {shouldShowField(\"garden\") && (\n                <FormCheckboxToggle\n                  label=\"Jardín\"\n                  name=\"garden\"\n                  checked={formData.garden || false}\n                  onChange={(checked) => onChange({ garden: checked })}\n                />\n              )}\n\n              {shouldShowField(\"laundryArea\") && (\n                <FormCheckboxToggle\n                  label=\"Área de Lavado\"\n                  name=\"laundryArea\"\n                  checked={formData.laundryArea || false}\n                  onChange={(checked) => onChange({ laundryArea: checked })}\n                />\n              )}\n\n              {shouldShowField(\"customizationOptions\") &&\n                (formData.projectType?.id === 2 ||\n                  formData.projectType?.id === 3) && (\n                  <FormCheckboxToggle\n                    label=\"Opciones de Personalización\"\n                    name=\"customizationOptions\"\n                    checked={formData.customizationOptions || false}\n                    onChange={(checked) =>\n                      onChange({ customizationOptions: checked })\n                    }\n                  />\n                )}\n            </div>\n          </div>\n        )}\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
          "imagesProjectForm.tsx": "\"use client\";\n\nimport { useState, ChangeEvent, useEffect, useCallback, useMemo } from \"react\";\nimport { ProjectData, ImageType, Media } from \"@/lib/definitios\";\nimport { useImagesProjectValidation } from \"@/app/hooks/projects/createEditProject/useImagesProjectValidation\";\nimport ImageUploadSection from \"./imageUploadSection\";\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\nimport ModalAlert from \"../../modals/modalAlert\";\n\ninterface UploadImagesFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n  imagesTypes: ImageType[];\n  onSubmit: (media: Media[], validateFields: () => boolean) => void;\n}\n\nexport default function ImagesProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n  imagesTypes,\n  onSubmit,\n}: UploadImagesFormProps) {\n  const [initialized, setInitialized] = useState(false);\n  const [expandedSections, setExpandedSections] = useState<\n    Record<string, boolean>\n  >({});\n  const [showAlert, setShowAlert] = useState(false);\n  const [alertMessage, setAlertMessage] = useState(\"\");\n\n  const { errors, validateFields, validateField } = useImagesProjectValidation(\n    formData,\n    imagesTypes\n  );\n\n  const imagesByCategory = useMemo(() => {\n    const grouped: Record<string, Media[]> = {};\n    (formData.media || []).forEach((media) => {\n      if (!grouped[media.type]) {\n        grouped[media.type] = [];\n      }\n      grouped[media.type].push(media);\n    });\n\n    return grouped;\n  }, [formData.media]);\n\n  useEffect(() => {\n    if (!formData.projectMedia || initialized) return;\n\n    const transformedMedia: Media[] = formData.projectMedia.map((media) => ({\n      id: media.id?.toString() || \"\",\n      tag: media.tag || \"\",\n      file: media.url.startsWith(\"http\") ? media.url : new File([], media.url),\n      description: media.description || \"\",\n      idType: media.imageType || media.commonArea || 0,\n      type: media.type || \"\",\n      category: media.imageType ? \"imageType\" : \"commonArea\",\n    }));\n\n    onChange({ media: transformedMedia });\n    setInitialized(true);\n  }, [formData.projectMedia]);\n\n  useEffect(() => {\n    setExpandedSections(\n      imagesTypes.reduce((acc, item) => ({ ...acc, [item.name]: false }), {})\n    );\n  }, [imagesTypes]);\n\n  useEffect(() => {\n    if (!formData.media || formData.media.length === 0) return;\n    setTimeout(() => {\n      validateFields();\n    }, 100);\n  }, [formData.media]);\n\n  const toggleSection = useCallback((category: string) => {\n    setExpandedSections((prev) => ({ ...prev, [category]: !prev[category] }));\n  }, []);\n\n  const handleImageChange = useCallback(\n    (\n      category: string,\n      event: ChangeEvent<HTMLInputElement>,\n      maxImages: number\n    ) => {\n      if (!event.target.files || event.target.files.length === 0) return;\n\n      const selectedFiles = Array.from(event.target.files);\n\n      const existingMediaCount =\n        formData.media?.filter((m) => m.type === category).length || 0;\n\n      if (existingMediaCount + selectedFiles.length > maxImages) {\n        console.warn(\n          `⚠️ No puedes subir más de ${maxImages} imágenes para ${category}`\n        );\n        return;\n      }\n\n      const newMedia = selectedFiles.map((file) => ({\n        file,\n        tag: \"\",\n        description: \"\",\n        idType: imagesTypes.find((type) => type.name === category)?.id ?? 0,\n        type: category,\n        category: \"imageType\",\n      }));\n\n      const updatedMedia = [...(formData.media || []), ...newMedia];\n\n      onChange({ media: updatedMedia });\n    },\n    [onChange, formData.media, imagesTypes]\n  );\n\n  const handleRemoveImage = useCallback(\n    (category: string, index: number) => {\n      const imageToRemove = imagesByCategory[category]?.[index];\n      if (!imageToRemove) {\n        console.error(\n          `❌ No se encontró la imagen en la categoría ${category}`\n        );\n        return;\n      }\n\n      const updatedMedia = (formData.media || []).filter(\n        (media) => media.file !== imageToRemove.file\n      );\n\n      onChange({ media: updatedMedia });\n    },\n    [onChange, formData.media, imagesByCategory]\n  );\n\n  const handleTagChange = useCallback(\n    (category: string, index: number, tag: string) => {\n      if (!formData.media) return;\n\n      const imageToUpdate = imagesByCategory[category]?.[index];\n      if (!imageToUpdate) {\n        console.error(\n          `❌ No se encontró la imagen en ${category} con índice ${index}`\n        );\n        return;\n      }\n\n      const updatedMedia = formData.media.map((mediaItem) =>\n        mediaItem.file === imageToUpdate.file\n          ? { ...mediaItem, tag }\n          : mediaItem\n      );\n      onChange({ media: updatedMedia });\n\n      setTimeout(() => {\n        validateField(`${category}-tag-${index}`, tag);\n      }, 100);\n    },\n    [formData.media, imagesByCategory, onChange, validateField]\n  );\n\n  const handleDescriptionChange = useCallback(\n    (category: string, index: number, description: string) => {\n      if (!formData.media) return;\n\n      const imageToUpdate = imagesByCategory[category]?.[index];\n      if (!imageToUpdate) {\n        console.error(\n          `❌ No se encontró la imagen en ${category} con índice ${index}`\n        );\n        return;\n      }\n\n      const updatedMedia = formData.media.map((mediaItem) =>\n        mediaItem.file === imageToUpdate.file\n          ? { ...mediaItem, description }\n          : mediaItem\n      );\n\n      onChange({ media: updatedMedia });\n\n      setTimeout(() => {\n        validateField(`${category}-description-${index}`, description);\n      }, 100);\n    },\n    [formData.media, imagesByCategory, onChange, validateField]\n  );\n\n  const handleSubmit = useCallback(() => {\n    if (validateFields()) {\n      const mediaData: Media[] =\n        formData.media?.map((mediaItem) => ({\n          tag: mediaItem.tag || \"\",\n          file: mediaItem.file,\n          description: mediaItem.description || \"\",\n          idType: mediaItem.idType || 0,\n          type: mediaItem.type,\n          category: mediaItem.category,\n        })) || [];\n\n      onSubmit(mediaData, validateFields);\n      onNext();\n    }\n  }, [validateFields, formData.media, onSubmit, onNext]);\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark space-y-3\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {formData.projectType?.id === 1\n          ? \"Subir Imágenes del Proyecto\"\n          : \"Subir Imágenes de la Propiedad\"}\n      </h2>\n\n      {imagesTypes.map((type) => (\n        <ImageUploadSection\n          key={type.name}\n          imageType={type}\n          category=\"imageType\"\n          expanded={expandedSections[type.name]}\n          images={\n            imagesByCategory[type.name]?.map((media) =>\n              typeof media.file === \"string\"\n                ? media.file\n                : URL.createObjectURL(media.file)\n            ) || []\n          }\n          tags={imagesByCategory[type.name]?.map((img) => img.tag) || []}\n          descriptions={\n            imagesByCategory[type.name]?.map((img) => img.description || \"\") ||\n            []\n          }\n          error={errors[type.name] || null}\n          errors={{ ...errors }}\n          onToggleExpand={() => toggleSection(type.name)}\n          onImageChange={(e) =>\n            handleImageChange(type.name, e, type.maxImagesAllowed)\n          }\n          onRemoveImage={(index) => handleRemoveImage(type.name, index)}\n          onTagChange={(index, newTag) =>\n            handleTagChange(type.name, index, newTag)\n          }\n          onDescriptionChange={(index, newDescription) =>\n            handleDescriptionChange(type.name, index, newDescription)\n          }\n        />\n      ))}\n\n      {formData.commonAreas && formData.commonAreas.length > 0 && (\n        <h3 className=\"my-6 text-center text-xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n          Subir imágenes de las áreas comunes\n        </h3>\n      )}\n\n      {formData.commonAreas?.map((area) => (\n        <ImageUploadSection\n          key={area.name}\n          imageType={{\n            id: area.id,\n            name: area.name,\n            maxImagesAllowed: 5,\n            isRequired: true,\n          }}\n          category=\"commonArea\"\n          expanded={expandedSections[area.name] || false}\n          images={imagesByCategory[area.name]?.map((media) => media.file) || []}\n          tags={imagesByCategory[area.name]?.map((media) => media.tag) || []}\n          descriptions={\n            imagesByCategory[area.name]?.map(\n              (media) => media.description || \"\"\n            ) || []\n          }\n          error={errors[area.name] || null}\n          errors={{ ...errors }}\n          onToggleExpand={() => toggleSection(area.name)}\n          onImageChange={(e) => handleImageChange(area.name, e, 5)}\n          onRemoveImage={(index) => handleRemoveImage(area.name, index)}\n          onTagChange={(index, newTag) =>\n            handleTagChange(area.name, index, newTag)\n          }\n          onDescriptionChange={(index, newDescription) =>\n            handleDescriptionChange(area.name, index, newDescription)\n          }\n        />\n      ))}\n\n      <StepNavigationButtons\n        currentStep={currentStep}\n        totalSteps={totalSteps}\n        onPrevious={onPrevious}\n        onNext={handleSubmit}\n      />\n\n      <ModalAlert\n        title=\"Advertencia\"\n        message={alertMessage}\n        isOpen={showAlert}\n        onClose={() => setShowAlert(false)}\n      />\n    </div>\n  );\n}\n",
          "imageUploadSection.tsx": "import { useMemo, useCallback } from \"react\";\nimport clsx from \"clsx\";\nimport { ChevronDown } from \"lucide-react\";\nimport { ImageType } from \"@/lib/definitios\";\nimport ImageWithTag from \"./imageWithTag\";\nimport FormErrorMessage from \"../../modals/formErrorMessage\";\n\ninterface ImageUploadSectionProps {\n  imageType: ImageType;\n  category: string;\n  expanded: boolean;\n  images: (File | string)[];\n  tags: string[];\n  descriptions: string[];\n  error: string | null;\n  errors: Record<string, string>;\n  onToggleExpand: () => void;\n  onImageChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onRemoveImage: (index: number) => void;\n  onTagChange: (index: number, tag: string) => void;\n  onDescriptionChange: (index: number, description: string) => void;\n}\n\nexport default function ImageUploadSection({\n  imageType,\n  category,\n  expanded,\n  images,\n  tags,\n  descriptions,\n  error,\n  errors,\n  onToggleExpand,\n  onImageChange,\n  onRemoveImage,\n  onTagChange,\n  onDescriptionChange,\n}: ImageUploadSectionProps) {\n  const handleRemoveImage = useCallback(\n    (index: number) => onRemoveImage(index),\n    [onRemoveImage]\n  );\n\n  const handleTagChange = useCallback(\n    (index: number, newTag: string) => {\n      onTagChange(index, newTag);\n    },\n    [onTagChange]\n  );\n\n  const handleDescriptionChange = useCallback(\n    (index: number, newDescription: string) => {\n      onDescriptionChange(index, newDescription);\n    },\n    [onDescriptionChange]\n  );\n\n  const imageList = useMemo(() => {\n    return images.map((file, index) => (\n      <ImageWithTag\n        key={`${imageType.name}-${index}`}\n        id={`${imageType.name}-${index}`}\n        file={typeof file === \"string\" ? file : URL.createObjectURL(file)}\n        tag={tags[index] || \"\"}\n        description={descriptions[index] || \"\"}\n        imageTypeId={imageType.id}\n        category={category}\n        onRemove={() => handleRemoveImage(index)}\n        onTagChange={(newTag) => handleTagChange(index, newTag)}\n        onDescriptionChange={(newDescription) =>\n          handleDescriptionChange(index, newDescription)\n        }\n        error={errors[`${imageType.name}-tag-${index}`]}\n        descriptionError={errors[`${imageType.name}-description-${index}`]}\n      />\n    ));\n  }, [\n    images,\n    tags,\n    descriptions,\n    errors,\n    handleRemoveImage,\n    handleTagChange,\n    handleDescriptionChange,\n  ]);\n\n  return (\n    <div\n      className={clsx(\n        \"rounded-md pb-1 transition bg-premium-backgroundDark hover:bg-premium-background dark:bg-premium-background dark:hover:bg-premium-backgroundLight\",\n        error ? \"border border-red-500\" : \"border-none\"\n      )}\n    >\n      <div\n        className=\"flex flex-col cursor-pointer p-4 space-y-3\"\n        onClick={onToggleExpand}\n      >\n        <div className=\"flex items-center justify-between\">\n          <h4 className=\"text-lg font-semibold text-premium-textPrimary\">\n            {imageType.name}\n          </h4>\n          <ChevronDown\n            className={clsx(\n              \"transition-transform duration-300 text-premium-textPrimary dark:text-premium-textSecondary\",\n              expanded && \"rotate-180\"\n            )}\n          />\n        </div>\n\n        {imageType.description && (\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            {imageType.description}\n          </p>\n        )}\n      </div>\n\n      {expanded && (\n        <div className=\"px-4 pb-4\">\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            multiple\n            onChange={onImageChange}\n            className={clsx(\n              \"mt-2 w-full rounded-lg px-3 py-2 text-premium-textPrimary\",\n              error ? \"border-red-500\" : \"border-none\"\n            )}\n          />\n          <p className=\"ml-2 mt-1 text-sm text-gray-600 dark:text-gray-400\">\n            {images.length} archivo(s) subido(s)\n          </p>\n\n          {error && <FormErrorMessage error={error} />}\n\n          <div className=\"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3\">\n            {imageList}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n",
          "imageWithTag.tsx": "import { useEffect, useState, useCallback } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { X } from \"lucide-react\";\n\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/formInput\"), {\n  ssr: false,\n});\nconst FormTextArea = dynamic(() => import(\"@/app/ui/modals/formTextArea\"), {\n  ssr: false,\n});\n\ninterface ImageWithTagProps {\n  id?: string;\n  file: File | string;\n  tag: string;\n  description: string;\n  imageTypeId: number;\n  category: string;\n  onRemove: () => void;\n  onTagChange: (newTag: string) => void;\n  onDescriptionChange: (newDescription: string) => void;\n  error?: string;\n  descriptionError?: string;\n}\n\nexport default function ImageWithTag({\n  id,\n  file,\n  tag,\n  description,\n  imageTypeId,\n  category,\n  onRemove,\n  onTagChange,\n  onDescriptionChange,\n  error,\n  descriptionError,\n}: ImageWithTagProps) {\n  const [imageUrl, setImageUrl] = useState<string | null>(null);\n  const [localTag, setLocalTag] = useState(tag);\n  const [localDescription, setLocalDescription] = useState(description);\n\n  useEffect(() => {\n    if (!file) {\n      console.error(\"❌ No se recibió archivo en ImageWithTag.\");\n      return;\n    }\n\n    if (typeof file === \"string\") {\n      setImageUrl(encodeURI(file));\n    } else {\n      const url = URL.createObjectURL(file);\n      setImageUrl(url);\n\n      return () => URL.revokeObjectURL(url);\n    }\n  }, [file]);\n\n  useEffect(() => {\n    setLocalTag(tag);\n  }, [tag]);\n\n  useEffect(() => {\n    setLocalDescription(description);\n  }, [description]);\n\n  const handleTagChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setLocalTag(e.target.value);\n    onTagChange(e.target.value);\n  };\n\n  const handleDescriptionChange = useCallback(\n    (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n      setLocalDescription(e.target.value);\n      onDescriptionChange(e.target.value);\n    },\n    [onDescriptionChange]\n  );\n\n  return (\n    <div className=\"relative w-full rounded-md border border-gray-300 bg-premium-backgroundLight p-3 dark:border-gray-700 dark:bg-premium-backgroundDark space-y-4\">\n      {imageUrl && (\n        <div\n          className=\"relative h-32 w-full rounded-md bg-cover bg-center\"\n          style={{ backgroundImage: `url(${imageUrl})` }}\n        >\n          <button\n            type=\"button\"\n            className=\"absolute right-2 top-2 rounded-full bg-gray-400 p-1 text-white transition hover:bg-gray-600\"\n            onClick={onRemove}\n            aria-label=\"Eliminar imagen\"\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n        </div>\n      )}\n\n      <FormInput\n        id={id}\n        label=\"Nombre\"\n        type=\"text\"\n        name=\"tag\"\n        value={localTag}\n        onChange={handleTagChange}\n        placeholder=\"Nombre\"\n        maxLength={100}\n        error={error}\n        tooltipText=\"Ingrese un nombre para la imagen.\"\n      />\n\n      {imageTypeId === 1005 && category === \"imageType\" && (\n        <FormTextArea\n          label=\"Descripción\"\n          name=\"description\"\n          value={localDescription}\n          onChange={handleDescriptionChange}\n          placeholder=\"Descripción\"\n          maxLength={100}\n          error={descriptionError}\n          tooltipText=\"Ingrese una breve descripción del plano.\"\n          rows={4}\n        />\n      )}\n    </div>\n  );\n}\n",
          "locationProjectForm.tsx": "import { useCallback, useMemo, useEffect } from \"react\";\nimport { useLoadScript } from \"@react-google-maps/api\";\nimport { ProjectData, City, Departament } from \"@/lib/definitios\";\nimport { useLocationProjectValidation } from \"@/app/hooks/projects/createEditProject/useLocationProjectValidation\";\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\nimport LocationMap from \"../locationMap\";\nimport FormSearchAddress from \"../../modals/formSearchAddress\";\nimport FormSelect from \"../../modals/formSelect\";\nimport FormInput from \"../../modals/formInput\";\n\nconst GOOGLE_MAPS_LIBRARIES: (\"places\" | \"marker\")[] = [\"places\", \"marker\"];\n\ninterface LocationProjectFormProps {\n  formData: ProjectData;\n  onChange: (updatedData: Partial<ProjectData>) => void;\n  onSubmit: (data: Partial<ProjectData>) => void;\n  onPrevious: () => void;\n  onNext: () => void;\n  currentStep: number;\n  totalSteps: number;\n  departaments: Departament[];\n  cities: City[];\n  mapAddress: string;\n  setMapAddress: (value: string) => void;\n}\n\nexport default function LocationProjectForm({\n  formData,\n  onChange,\n  onPrevious,\n  onNext,\n  currentStep,\n  totalSteps,\n  departaments,\n  cities,\n  mapAddress,\n  setMapAddress,\n}: LocationProjectFormProps) {\n  const { errors, validateFields, validateField } =\n    useLocationProjectValidation(formData);\n\n  const propertyOptions = useMemo(\n    () => departaments.map((dep) => ({ id: dep.id, name: dep.name })),\n    [departaments]\n  );\n\n  const cityOptions = useMemo(\n    () =>\n      cities\n        .filter(\n          (city) => city.departament.id === formData.city?.departament?.id\n        )\n        .map((city) => ({ id: city.id, name: city.name })),\n    [cities, formData.city?.departament?.id]\n  );\n\n  const mapsApiKey = useMemo(\n    () => process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || \"\",\n    []\n  );\n\n  const { isLoaded } = useLoadScript({\n    googleMapsApiKey: mapsApiKey,\n    libraries: GOOGLE_MAPS_LIBRARIES,\n  });\n\n  const handleDepartamentChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const departamentId = parseInt(e.target.value);\n      const selectedDepartament = departaments.find(\n        (dep) => dep.id === departamentId\n      );\n\n      if (\n        selectedDepartament &&\n        selectedDepartament.id !== formData.city?.departament?.id\n      ) {\n        onChange({\n          city: { id: 0, name: \"\", departament: selectedDepartament },\n          address: \"\",\n          latitude: undefined,\n          longitude: undefined,\n        });\n        validateField(\"departamentError\", departamentId);\n      }\n    },\n    [onChange, validateField, formData.city?.departament?.id, departaments]\n  );\n\n  const handleCityChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const cityId = parseInt(e.target.value);\n      const selectedCity = cities.find((city) => city.id === cityId);\n\n      if (selectedCity && selectedCity.id !== formData.city?.id) {\n        onChange({\n          city: selectedCity,\n          address: \"\",\n          latitude: undefined,\n          longitude: undefined,\n        });\n        validateField(\"cityError\", cityId);\n      }\n    },\n    [onChange, validateField, formData.city?.id, cities]\n  );\n\n  const handleAddressSelect = useCallback(\n    async (placeId: string, description: string) => {\n      const placesService = new google.maps.places.PlacesService(\n        document.createElement(\"div\")\n      );\n\n      placesService.getDetails({ placeId }, (place, status) => {\n        if (\n          status === google.maps.places.PlacesServiceStatus.OK &&\n          place?.geometry?.location\n        ) {\n          const lat = place.geometry.location.lat();\n          const lng = place.geometry.location.lng();\n\n          const geocoder = new google.maps.Geocoder();\n          geocoder.geocode({ location: { lat, lng } }, (results, status) => {\n            if (status === google.maps.GeocoderStatus.OK && results?.length) {\n              const formattedAddress = results[0].formatted_address;\n              const foundCity = results.find((result) =>\n                result.types.includes(\"locality\")\n              );\n              const foundDepartment = results.find((result) =>\n                result.types.includes(\"administrative_area_level_1\")\n              );\n\n              const cityName =\n                foundCity?.formatted_address.split(\",\")[0].trim() || \"\";\n              const departmentName =\n                foundDepartment?.formatted_address.split(\",\")[0].trim() || \"\";\n\n              const selectedCity = cities.find(\n                (c) => c.name.toLowerCase() === cityName.toLowerCase()\n              );\n              const selectedDepartment = departaments.find(\n                (d) => d.name.toLowerCase() === departmentName.toLowerCase()\n              );\n\n              if (\n                selectedCity?.id !== formData.city?.id ||\n                selectedDepartment?.id !== formData.city?.departament?.id\n              ) {\n                onChange({\n                  address: formattedAddress,\n                  latitude: lat,\n                  longitude: lng,\n                  city: selectedCity || {\n                    id: 0,\n                    name: \"Ciudad desconocida\",\n                    departament: selectedDepartment || {\n                      id: 0,\n                      name: \"Departamento desconocido\",\n                    },\n                  },\n                });\n              } else {\n                onChange({ address: formattedAddress });\n              }\n\n              validateField(\"addressError\", formattedAddress);\n            }\n          });\n        }\n      });\n    },\n    [\n      onChange,\n      validateField,\n      formData.city?.id,\n      formData.city?.departament?.id,\n      cities,\n      departaments,\n    ]\n  );\n\n  const handleNext = (e?: React.FormEvent) => {\n    e?.preventDefault();\n\n    if (formData.projectType?.id !== 1) {\n      const propertyTypeName = formData.propertyType?.name || \"Propiedad\";\n      const projectTypeName = formData.projectType?.name || \"\";\n      const cityName = formData.city?.name || \"\";\n      const departamentName = formData.city?.departament?.name || \"\";\n      const generatedName =\n        `${propertyTypeName} en ${projectTypeName} en ${cityName}, ${departamentName}`.trim();\n\n      onChange({ name: generatedName });\n    }\n\n    if (validateFields(mapAddress)) {\n      onNext();\n    }\n  };\n\n  const tooltipTexts = useMemo(\n    () => ({\n      departament:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Seleccione el departamento donde se encuentra la propiedad.\"\n          : \"Seleccione el departamento donde se encuentra el proyecto.\",\n      city:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Seleccione la ciudad correspondiente la propiedad.\"\n          : \"Seleccione la ciudad correspondiente al proyecto.\",\n      address:\n        formData.projectType?.id === 2 || formData.projectType?.id === 3\n          ? \"Ingrese la dirección de la propiedad.\"\n          : \"Ingrese la dirección del proyecto.\",\n    }),\n    [formData.projectType?.id]\n  );\n\n  return (\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\n        {formData.projectType?.id\n          ? \"Ubicación del Proyecto\"\n          : \"Ubicación de la Propiedad\"}\n      </h2>\n\n      <form className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n          <FormSelect\n            label=\"Departamento\"\n            name=\"departament\"\n            value={formData.city?.departament?.id || \"\"}\n            options={propertyOptions}\n            onChange={handleDepartamentChange}\n            error={errors.departamentError}\n            tooltipText={tooltipTexts.departament}\n          />\n\n          <FormSelect\n            label=\"Ciudad\"\n            name=\"city\"\n            value={formData.city?.id || \"\"}\n            options={cityOptions}\n            onChange={handleCityChange}\n            error={errors.cityError}\n            tooltipText={tooltipTexts.city}\n          />\n        </div>\n\n        <div className=\"relative z-20 space-y-4\">\n          <FormInput\n            label=\"Dirección Pública\"\n            name=\"address\"\n            type=\"text\"\n            placeholder=\"Ej: Calle 123 #45-67, Barrio XYZ\"\n            value={formData.address || \"\"}\n            onChange={(e) => onChange({ address: e.target.value })}\n            error={errors.addressError}\n            tooltipText=\"Ingresa la dirección que se mostrará públicamente.\"\n          />\n\n          <FormSearchAddress\n            label=\"Ubicación en el Mapa\"\n            value={mapAddress || \"\"}\n            onChange={(value) => setMapAddress(value)}\n            onSelect={handleAddressSelect}\n            error={errors.mapAddressError}\n            isLoaded={isLoaded}\n            tooltipText=\"Busca la dirección en el mapa para obtener la ubicación exacta.\"\n          />\n        </div>\n\n        <div className=\"relative h-64 w-full\">\n          <LocationMap\n            isLoaded={isLoaded}\n            coordinates={{\n              lat:\n                typeof formData.latitude === \"number\"\n                  ? formData.latitude\n                  : 4.5709,\n              lng:\n                typeof formData.longitude === \"number\"\n                  ? formData.longitude\n                  : -74.2973,\n            }}\n            onLocationSelect={(coords) => {\n              setMapAddress(coords.address ?? \"\");\n\n              const selectedCity = cities.find((c) => c.name === coords.city);\n              const selectedDepartment = departaments.find(\n                (d) => d.name === coords.department\n              );\n\n              const currentCityId = formData.city?.id || 0;\n              const currentDepartmentId = formData.city?.departament?.id || 0;\n\n              if (\n                selectedCity?.id !== currentCityId ||\n                selectedDepartment?.id !== currentDepartmentId\n              ) {\n                onChange({\n                  latitude: coords.lat,\n                  longitude: coords.lng,\n                  city: selectedCity || {\n                    id: 0,\n                    name: \"Ciudad desconocida\",\n                    departament: selectedDepartment || {\n                      id: 0,\n                      name: \"Departamento desconocido\",\n                    },\n                  },\n                });\n              } else {\n                onChange({\n                  latitude: coords.lat,\n                  longitude: coords.lng,\n                });\n              }\n            }}\n            showUserLocationButton={true}\n          />\n        </div>\n\n        <StepNavigationButtons\n          currentStep={currentStep}\n          totalSteps={totalSteps}\n          onPrevious={onPrevious}\n          onNext={handleNext}\n        />\n      </form>\n    </div>\n  );\n}\n",
          "progressBar.tsx": "import dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ClipboardList = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ClipboardList)\n);\nconst MapPin = dynamic(() => import(\"lucide-react\").then((mod) => mod.MapPin));\nconst Building2 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building2)\n);\nconst List = dynamic(() => import(\"lucide-react\").then((mod) => mod.List));\nconst Images = dynamic(() => import(\"lucide-react\").then((mod) => mod.Images));\n\ntype ProgressBarProps = {\n  currentStep: number;\n};\n\nconst steps = [\n  { icon: ClipboardList, title: \"Datos básicos\" },\n  { icon: MapPin, title: \"Ubicación\" },\n  { icon: Building2, title: \"Características\" },\n  { icon: List, title: \"Resumen\" },\n  { icon: Images, title: \"Imágenes\" },\n];\n\nexport default function ProgressBar({ currentStep }: ProgressBarProps) {\n  return (\n    <div className=\"mx-auto flex w-full max-w-xl items-center justify-center\">\n      {steps.map((step, index) => {\n        const Icon = step.icon;\n        const isLastStep = index === steps.length - 1;\n        const isActive = currentStep >= index;\n\n        return (\n          <div\n            key={index}\n            className={clsx(\"flex items-center\", !isLastStep && \"flex-1\")}\n          >\n            <div\n              className={clsx(\n                \"z-10 flex h-12 w-12 items-center justify-center rounded-full transition-colors duration-300\",\n                isActive\n                  ? \"bg-premium-primary text-white dark:bg-premium-primaryLight\"\n                  : \"bg-premium-backgroundDark text-premium-textSecondary dark:bg-premium-backgroundLight dark:text-premium-textPlaceholder\"\n              )}\n            >\n              <div title={step.title}>\n                <Icon size={25} />\n              </div>\n            </div>\n\n            {!isLastStep && (\n              <div\n                className={clsx(\n                  \"h-1 transition-colors duration-300\",\n                  currentStep > index\n                    ? \"bg-premium-borderColor dark:bg-premium-borderColorHover\"\n                    : \"bg-premium-backgroundDark dark:bg-premium-backgroundLight\"\n                )}\n                style={{\n                  width: \"calc(100% - 2.25rem)\",\n                  marginLeft: \"-4px\",\n                }}\n              />\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n",
          "projectForm.tsx": "\"use client\";\r\n\r\nimport { useEffect, useCallback, useMemo, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ProjectData, Media } from \"@/lib/definitios\";\r\nimport useLocations from \"@/app/hooks/projects/Metadata/location/useLocations\";\r\nimport useBasicMetadata from \"@/app/hooks/projects/Metadata/useBasicMetadata\";\r\nimport useImageTypes from \"@/app/hooks/projects/Metadata/imageTypes/useImageTypes\";\r\nimport useDeleteProject from \"@/app/hooks/projects/useDeleteProject\";\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport { useS3ImagesApi } from \"@/app/hooks/s3/useS3ImagesApi\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport { useProjectMediaApi } from \"@/app/hooks/projects/Metadata/projectMedia/useProjectMediaApi\";\r\nimport ProgressBar from \"@/app/ui/projects/createEditProject/progressBar\";\r\nimport BasicProjectForm from \"@/app/ui/projects/createEditProject/basicProjectForm\";\r\nimport LocationProjectForm from \"@/app/ui/projects/createEditProject/locationProjectForm\";\r\nimport FeaturesProjectForm from \"@/app/ui/projects/createEditProject/featuresProjectForm\";\r\nimport DetailsProjectForm from \"@/app/ui/projects/createEditProject/detailsProjectForm\";\r\nimport ImagesProjectForm from \"@/app/ui/projects/createEditProject/imagesProjectForm\";\r\nimport ModalConfirmation from \"@/app/ui/modals/modalConfirmation\";\r\nimport CreateProjectSkeleton from \"@/app/ui/skeletons/createProjectSkeleton\";\r\nimport Loader from \"@/app/ui/loader\";\r\n\r\ninterface ProjectFormProps {\r\n  isEdit: boolean;\r\n  isProperty: boolean;\r\n  projectId?: number;\r\n  hasPermission?: boolean;\r\n}\r\n\r\nexport default function ProjectForm({\r\n  isEdit,\r\n  isProperty,\r\n  projectId,\r\n  hasPermission,\r\n}: ProjectFormProps) {\r\n  const projectQuery = isEdit\r\n    ? useProjectById(projectId)\r\n    : { project: null, loading: false };\r\n  const { project, loading: loadingProject } = projectQuery;\r\n\r\n  const [projectData, setProjectData] = useState<Partial<ProjectData>>(\r\n    isEdit ? {} : { projectType: { id: 1, name: \"Sobre Planos\" }, media: [] }\r\n  );\r\n\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const totalSteps = 5;\r\n  const router = useRouter();\r\n\r\n  const { locations } = useLocations();\r\n  const { metadata } = useBasicMetadata();\r\n  const { imagesTypes } = useImageTypes();\r\n  const { submitProject } = useProjectApi();\r\n  const { deleteProject } = useDeleteProject();\r\n  const { uploadImages, deleteImages } = useS3ImagesApi();\r\n  const { insertProjectMedia, updateProjectMedia, deleteProjectMedia } =\r\n    useProjectMediaApi();\r\n  const [loading, setLoading] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [mediaToSubmit, setMediaToSubmit] = useState<Media[] | null>(null);\r\n  const [mapAddress, setMapAddress] = useState(isEdit ? \"Ubicación\" : \"\");\r\n\r\n  useEffect(() => {\r\n    if (isEdit && project && Object.keys(project).length > 0) {\r\n      setProjectData((prev) => ({\r\n        ...prev,\r\n        ...project,\r\n      }));\r\n    }\r\n  }, [isEdit, project]);\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"\";\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [loading]);\r\n\r\n  const handleUpdateProject = useCallback(\r\n    (updatedData: Partial<ProjectData>) => {\r\n      setProjectData((prevData) => {\r\n        const newData = structuredClone({ ...prevData, ...updatedData });\r\n        return newData;\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleNextStep = useCallback(() => {\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep((prevStep) => prevStep + 1);\r\n    }\r\n  }, [currentStep, totalSteps]);\r\n\r\n  const handlePreviousStep = useCallback(() => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep((prevStep) => prevStep - 1);\r\n    }\r\n  }, [currentStep]);\r\n\r\n  const handleSubmit = useCallback(\r\n    (data: Partial<ProjectData>) => {\r\n      handleUpdateProject(data);\r\n      handleNextStep();\r\n    },\r\n    [handleUpdateProject, handleNextStep]\r\n  );\r\n\r\n  const handleFinalSubmit = async (media: Media[]) => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const finalProjectData = { ...projectData, media };\r\n\r\n      const projectId = await createOrUpdateProject(finalProjectData);\r\n      if (!projectId) {\r\n        console.error(\"❌ No se pudo obtener un ID de proyecto válido.\");\r\n        return;\r\n      }\r\n\r\n      if (isEdit) {\r\n        await handleEditMedia(projectId, media);\r\n      } else {\r\n        await handleNewMedia(projectId, media);\r\n      }\r\n\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"success\",\r\n          message: isEdit\r\n            ? \"Proyecto editado exitosamente.\"\r\n            : \"Proyecto creado exitosamente.\",\r\n        })\r\n      );\r\n    } catch (err) {\r\n      console.error(\"❌ Error durante el proceso:\", err);\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"error\",\r\n          message: \"Hubo un problema al procesar el proyecto.\",\r\n        })\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n      router.push(isProperty ? \"/admin/propiedades\" : \"/admin/proyectos\");\r\n    }\r\n  };\r\n\r\n  const createOrUpdateProject = async (projectData: Partial<ProjectData>) => {\r\n    const result = await submitProject(projectData, isEdit ? \"edit\" : \"create\");\r\n\r\n    if (isEdit) {\r\n      if (!result) {\r\n        console.error(\"❌ Error al editar el proyecto.\");\r\n        sessionStorage.setItem(\r\n          \"projectMessage\",\r\n          JSON.stringify({\r\n            type: \"error\",\r\n            message: \"Error al editar el proyecto.\",\r\n          })\r\n        );\r\n        return null;\r\n      }\r\n      return projectData.id ?? null;\r\n    } else {\r\n      if (typeof result === \"number\") return result;\r\n\r\n      console.error(\"❌ Error al crear el proyecto.\");\r\n      sessionStorage.setItem(\r\n        \"projectMessage\",\r\n        JSON.stringify({\r\n          type: \"error\",\r\n          message: \"Error al crear el proyecto.\",\r\n        })\r\n      );\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleEditMedia = async (projectId: number, media: Media[]) => {\r\n    const existingMedia = media.filter((m) => typeof m.file === \"string\");\r\n    const newMedia = media.filter((m) => m.file instanceof File);\r\n\r\n    const mediaUrls = existingMedia.map((m) => m.file as string);\r\n    const previousMediaUrls = projectData.projectMedia?.map((m) => m.url) || [];\r\n\r\n    await deleteUnusedImages(previousMediaUrls, mediaUrls);\r\n\r\n    if (newMedia.length > 0) {\r\n      await uploadAndInsertMedia(projectId, newMedia);\r\n    }\r\n\r\n    await updateExistingMedia(media);\r\n  };\r\n\r\n  const handleNewMedia = async (projectId: number, media: Media[]) => {\r\n    await uploadAndInsertMedia(projectId, media);\r\n  };\r\n\r\n  const deleteUnusedImages = async (\r\n    previousUrls: string[],\r\n    currentUrls: string[]\r\n  ) => {\r\n    const imagesToDelete = previousUrls.filter(\r\n      (url) => !currentUrls.includes(url)\r\n    );\r\n\r\n    if (imagesToDelete.length > 0) {\r\n      await deleteImages(imagesToDelete);\r\n\r\n      const mediaIdsToDelete =\r\n        projectData.projectMedia\r\n          ?.filter((m) => imagesToDelete.includes(m.url))\r\n          .map((m) => m.id)\r\n          .filter((id): id is number => id !== undefined) || [];\r\n\r\n      if (mediaIdsToDelete.length > 0) {\r\n        await deleteProjectMedia(mediaIdsToDelete);\r\n      }\r\n    }\r\n  };\r\n\r\n  const uploadAndInsertMedia = async (projectId: number, media: Media[]) => {\r\n    const uploadResult = await uploadImages(\r\n      projectId,\r\n      media,\r\n      projectData.propertyType?.name ?? \"default\"\r\n    );\r\n\r\n    if (!uploadResult || uploadResult.length === 0) {\r\n      console.error(\r\n        \"❌ No se pudieron subir imágenes. Eliminando el proyecto...\"\r\n      );\r\n      await deleteProject(projectId);\r\n      throw new Error(\"Error al subir las imágenes. Proyecto eliminado.\");\r\n    }\r\n\r\n    try {\r\n      await insertProjectMedia(uploadResult);\r\n    } catch (error) {\r\n      console.error(\r\n        \"❌ Error al insertar imágenes en la base de datos. Eliminando el proyecto...\"\r\n      );\r\n      await deleteProject(projectId);\r\n      throw new Error(\r\n        \"Error al insertar imágenes en la BD. Proyecto eliminado.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const updateExistingMedia = async (media: Media[]): Promise<void> => {\r\n    const mediaToUpdate =\r\n      projectData.projectMedia\r\n        ?.map((original) => {\r\n          const updated = media.find(\r\n            (m) => typeof m.file === \"string\" && m.file === original.url\r\n          );\r\n\r\n          if (\r\n            updated &&\r\n            (updated.tag.trim() !== original.tag.trim() ||\r\n              (updated.description?.trim() || \"\") !==\r\n                (original.description?.trim() || \"\"))\r\n          ) {\r\n            return {\r\n              id: original.id!,\r\n              tag: updated.tag,\r\n              description: updated.description ?? \"\",\r\n            };\r\n          }\r\n          return null;\r\n        })\r\n        .filter(\r\n          (item): item is { id: number; tag: string; description: string } =>\r\n            item !== null\r\n        ) || [];\r\n\r\n    if (mediaToUpdate.length > 0) {\r\n      await updateProjectMedia(mediaToUpdate);\r\n    }\r\n  };\r\n\r\n  const handleOpenModal = (media: Media[], validateFields: () => boolean) => {\r\n    setProjectData((prevData) => ({\r\n      ...prevData,\r\n      media,\r\n    }));\r\n\r\n    setTimeout(() => {\r\n      if (!validateFields()) {\r\n        console.error(\"🚨 Validación fallida antes de abrir el modal.\");\r\n        return;\r\n      }\r\n      setMediaToSubmit(media);\r\n      setIsModalOpen(true);\r\n    }, 100);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setMediaToSubmit(null);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleConfirmSubmit = async () => {\r\n    if (!mediaToSubmit) return;\r\n\r\n    handleCloseModal();\r\n\r\n    setTimeout(() => {\r\n      setLoading(true);\r\n    }, 100);\r\n\r\n    try {\r\n      await handleFinalSubmit(mediaToSubmit);\r\n    } catch (error) {\r\n      console.error(\"Error en la confirmación de envío:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n      handleCloseModal();\r\n    }\r\n  };\r\n\r\n  const currentForm = useMemo(() => {\r\n    if (!metadata || !locations || (loadingProject && isEdit)) {\r\n      return <CreateProjectSkeleton />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {currentStep === 0 && (\r\n          <BasicProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            propertyTypes={metadata.propertyTypes}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            isProperty={isProperty}\r\n            isEdit={isEdit}\r\n            hasPermission={hasPermission}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 1 && (\r\n          <LocationProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            departaments={locations.departaments}\r\n            cities={locations.cities}\r\n            mapAddress={mapAddress}\r\n            setMapAddress={setMapAddress}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 2 && (\r\n          <FeaturesProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 3 && (\r\n          <DetailsProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleSubmit}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            commonAreas={metadata.commonAreas}\r\n            nearbyServices={metadata.nearbyServices}\r\n            housingTypes={metadata.housingTypes}\r\n          />\r\n        )}\r\n\r\n        {currentStep === 4 && (\r\n          <ImagesProjectForm\r\n            formData={projectData}\r\n            onChange={handleUpdateProject}\r\n            onSubmit={handleOpenModal}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            imagesTypes={imagesTypes}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }, [currentStep, metadata, locations, projectData]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      {loading && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n          <Loader size={50} />\r\n        </div>\r\n      )}\r\n\r\n      <h1 className=\"mb-10 mt-24 text-center text-3xl font-semibold text-premium-primary lg:mt-20 dark:text-premium-primaryLight\">\r\n        {isEdit ? \"Editar \" : \"Agregar \"}\r\n        {isProperty ? \"Propiedad\" : \"Proyecto\"}\r\n      </h1>\r\n\r\n      <div className=\"mx-auto mb-10 text-center\">\r\n        <ProgressBar currentStep={currentStep} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 mx-auto max-w-3xl\">{currentForm}</div>\r\n\r\n      <ModalConfirmation\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        onConfirm={handleConfirmSubmit}\r\n        title=\"Confirmar Acción\"\r\n        message={\r\n          isEdit\r\n            ? \"¿Deseas guardar los cambios?\"\r\n            : \"¿Estás seguro de que quieres subir este proyecto?\"\r\n        }\r\n        confirmLabel=\"Confirmar\"\r\n        cancelLabel=\"Cancelar\"\r\n      />\r\n\r\n      <div className=\"mt-4 text-center\">\r\n        <button\r\n          className=\"rounded-md bg-premium-secondary px-4 py-2 text-white transition-colors hover:bg-premium-secondaryLight dark:bg-premium-secondaryDark dark:hover:bg-premium-secondaryLight\"\r\n          onClick={() =>\r\n            router.push(isProperty ? \"/admin/propiedades\" : \"/admin/proyectos\")\r\n          }\r\n        >\r\n          Volver\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "filter": {
          "filterMapControls.tsx": "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { ChevronDown, SlidersHorizontal, House, Map } from \"lucide-react\";\nimport clsx from \"clsx\";\n\ntype FilterMapControlsProps = {\n  isProperty: boolean;\n  filterOpen: boolean;\n  setFilterOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  showMap: boolean;\n  setShowMap: React.Dispatch<React.SetStateAction<boolean>>;\n  totalEntries: number;\n};\n\nexport default function FilterMapControls({\n  isProperty,\n  filterOpen,\n  setFilterOpen,\n  showMap,\n  setShowMap,\n  totalEntries = 0,\n}: FilterMapControlsProps) {\n  const toggleFilterVisibility = useCallback(() => {\n    setFilterOpen((prev) => !prev);\n  }, [setFilterOpen]);\n\n  const handleToggleMap = useCallback(() => {\n    setShowMap((prev) => !prev);\n    setFilterOpen(false);\n  }, [setShowMap]);\n\n  return (\n    <>\n      <div className=\"flex items-center gap-x-2 sm:gap-x-4 mt-4 justify-between\">\n        <button\n          onClick={toggleFilterVisibility}\n          className=\"flex items-center space-x-2 whitespace-nowrap rounded-full border border-premium-borderColor bg-transparent px-6 py-2 transition-colors hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\"\n        >\n          <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\n            Filtro\n          </span>\n          <SlidersHorizontal className=\"w-4 h-4 text-premium-textPrimary dark:text-premium-textPrimary\" />\n          <ChevronDown\n            className={clsx(\n              \"text-premium-textPrimary transition-transform duration-300 dark:text-premium-textPrimary\",\n              filterOpen && \"rotate-180\"\n            )}\n          />\n        </button>\n\n        <label className=\"text-premium-textPrimary dark:text-premium-textPrimary flex flex-col sm:flex-row items-center\">\n          <span>{totalEntries}</span>\n          <span className=\"sm:ml-1\">resultados</span>\n        </label>\n\n        {isProperty && (\n          <button\n            onClick={handleToggleMap}\n            className=\"flex items-center space-x-2 whitespace-nowrap rounded-full border border-premium-borderColor bg-transparent px-6 py-2 transition-colors hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\"\n          >\n            <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\n              {showMap ? \"Propiedades\" : \"Mapa\"}\n            </span>\n            {showMap ? (\n              <House\n                size={18}\n                className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\n              />\n            ) : (\n              <Map\n                size={18}\n                className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\n              />\n            )}\n          </button>\n        )}\n      </div>\n    </>\n  );\n}\n",
          "filterNumericCounter.tsx": "import dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ntype NumericCounterProps = {\n  label: string;\n  icon: React.ReactNode;\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n  value: number;\n  increment: () => void;\n  decrement: () => void;\n};\n\nexport default function FilterNumericCounter({\n  label,\n  icon,\n  isOpen,\n  setIsOpen,\n  value,\n  increment,\n  decrement,\n}: NumericCounterProps) {\n  return (\n    <>\n      <div\n        className=\"flex transform cursor-pointer items-center justify-between transition-transform duration-200 hover:scale-105 hover:font-semibold\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <div\n          className={clsx(\n            \"flex items-center space-x-2 text-lg font-medium\",\n            value > 0\n              ? \"text-premium-primary dark:text-premium-primaryLight\"\n              : \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        >\n          {icon}\n          <span>{label}</span>\n        </div>\n        <ChevronDown\n          className={clsx(\n            \"transform transition-transform duration-300\",\n            isOpen && \"rotate-180\",\n            \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        />\n      </div>\n\n      {isOpen && (\n        <div className=\"mt-2 flex items-center justify-center space-x-1 px-10\">\n          <button\n            onClick={() => value > 0 && decrement()}\n            className=\"flex h-8 w-8 items-center justify-center rounded-l-md bg-premium-background text-premium-textSecondary transition-colors hover:bg-premium-primary hover:text-white dark:bg-premium-backgroundDark dark:text-premium-textPrimary\"\n          >\n            -\n          </button>\n          <input\n            readOnly\n            type=\"text\"\n            value={value}\n            className=\"w-12 border border-premium-borderColor bg-premium-background text-center text-premium-textPrimary dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary\"\n          />\n          <button\n            onClick={increment}\n            className=\"flex h-8 w-8 items-center justify-center rounded-r-md bg-premium-background text-premium-textSecondary transition-colors hover:bg-premium-primary hover:text-white dark:bg-premium-backgroundDark dark:text-premium-textPrimary\"\n          >\n            +\n          </button>\n        </div>\n      )}\n    </>\n  );\n}\n",
          "filterOption.tsx": "import dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ntype FilterOptionProps = {\n  label: string;\n  icon: React.ReactNode;\n  items: { id: number; name: string }[];\n  selectedItems: number[];\n  onToggleItem: (id: number) => void;\n  isOpen: boolean;\n  onToggleOpen: () => void;\n};\n\nexport default function FilterOption({\n  label,\n  icon,\n  items,\n  selectedItems,\n  onToggleItem,\n  isOpen,\n  onToggleOpen,\n}: FilterOptionProps) {\n  return (\n    <>\n      <div\n        role=\"button\"\n        aria-expanded={isOpen}\n        tabIndex={0}\n        className=\"mb-4 flex transform cursor-pointer items-center justify-between transition-transform duration-200 hover:scale-105 hover:font-semibold\"\n        onClick={onToggleOpen}\n        onKeyDown={(e) => e.key === \"Enter\" && onToggleOpen()}\n      >\n        <div\n          className={clsx(\n            \"flex items-center space-x-2 text-lg font-medium\",\n            selectedItems.length\n              ? \"text-premium-primary dark:text-premium-primaryLight\"\n              : \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        >\n          {icon}\n          <span>{label}</span>\n        </div>\n\n        <ChevronDown\n          className={clsx(\n            \"transform transition-transform duration-300\",\n            isOpen && \"rotate-180\",\n            \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        />\n      </div>\n\n      {isOpen && (\n        <div className=\"mb-7 space-y-1 pr-4\">\n          {items.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => onToggleItem(item.id)}\n              className={clsx(\n                \"relative overflow-hidden rounded-full border px-3 py-2 text-xs transition-colors duration-300\",\n                \"border-premium-borderColor dark:border-premium-borderColorHover\",\n                selectedItems.includes(item.id)\n                  ? \"bg-premium-primary text-white dark:bg-premium-primaryLight\"\n                  : \"bg-transparent hover:bg-premium-backgroundLight dark:hover:bg-premium-backgroundDark\"\n              )}\n            >\n              <span className=\"relative z-10 text-premium-textPrimary dark:text-premium-textPrimary\">\n                {item.name}\n              </span>\n            </button>\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n",
          "filterOptionWithSlider.tsx": "import { useState, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\n\nconst ChevronDown = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ChevronDown)\n);\n\ntype FilterOptionWithSliderProps = {\n  label: string;\n  icon: React.ReactNode;\n  value: number;\n  min: number;\n  max: number;\n  step: number;\n  onChange: (value: number) => void;\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n  category: string;\n  prefixText: string;\n  suffixText: string;\n};\n\nexport default function FilterOptionWithSlider({\n  label,\n  icon,\n  value,\n  min,\n  max,\n  step,\n  onChange,\n  isOpen,\n  setIsOpen,\n  category,\n  prefixText,\n  suffixText,\n}: FilterOptionWithSliderProps) {\n  const [sliderValue, setSliderValue] = useState(value);\n\n  const handleSliderChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = parseInt(event.target.value, 10);\n    setSliderValue(newValue);\n  };\n\n  const handleSliderComplete = () => {\n    onChange(sliderValue);\n  };\n\n  useEffect(() => {\n    setSliderValue(value);\n  }, [value]);\n\n  const formatDisplayValue = (value: number) => {\n    if (value >= 1000000000) {\n      const newValue = value / 1000000000;\n      return `${newValue.toFixed(3)}M`;\n    } else if (value >= 1000000) {\n      const newValue = value / 1000000;\n      return Number.isInteger(newValue)\n        ? `${newValue}M`\n        : `${newValue.toFixed(1)}M`;\n    } else if (value >= 100000) {\n      const newValue = value / 1000;\n      return Number.isInteger(newValue)\n        ? `${newValue}K`\n        : `${newValue.toFixed(1)}K`;\n    } else if (value >= 1000) {\n      const newValue = value / 1000;\n      return newValue.toFixed(3);\n    } else {\n      return value.toString();\n    }\n  };\n\n  return (\n    <>\n      <div\n        className=\"mb-4 flex transform cursor-pointer items-center justify-between text-premium-textPrimary transition-transform duration-200 hover:scale-105 hover:font-semibold dark:text-premium-textPrimary\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <div\n          className={clsx(\n            \"flex items-center space-x-2 text-lg font-medium\",\n            sliderValue > 1\n              ? \"text-premium-primary dark:text-premium-primaryLight\"\n              : \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        >\n          {icon}\n          <span>{label}</span>\n        </div>\n        <ChevronDown\n          className={clsx(\n            \"transform transition-transform duration-300\",\n            isOpen && \"rotate-180\",\n            \"text-premium-textPrimary dark:text-premium-textPrimary\"\n          )}\n        />\n      </div>\n\n      {isOpen && (\n        <div className=\"mb-6 flex flex-col items-center space-y-2 px-4\">\n          <input\n            type=\"range\"\n            min={min}\n            max={max}\n            step={sliderValue > 10000000 ? 10000000 : step}\n            value={sliderValue}\n            onChange={handleSliderChange}\n            onMouseUp={handleSliderComplete}\n            onTouchEnd={handleSliderComplete}\n            className=\"h-1 w-full cursor-pointer appearance-none rounded-full bg-premium-primary dark:bg-premium-primaryLight\"\n          />\n          <style jsx>{`\n            input[type=\"range\"]::-webkit-slider-thumb {\n              appearance: none;\n              height: 20px;\n              width: 20px;\n              background-color: var(--primary);\n              border-radius: 50%;\n              cursor: pointer;\n              border: 2px solid var(--backgroundAlt);\n            }\n\n            input[type=\"range\"]::-moz-range-thumb {\n              height: 20px;\n              width: 20px;\n              background-color: var(--primary);\n              border-radius: 50%;\n              cursor: pointer;\n              border: 2px solid var(--backgroundAlt);\n            }\n\n            input[type=\"range\"]::-ms-thumb {\n              height: 20px;\n              width: 20px;\n              background-color: var(--primary);\n              border-radius: 50%;\n              cursor: pointer;\n              border: 2px solid var(--backgroundAlt);\n            }\n          `}</style>\n          {sliderValue > 1 && (\n            <div className=\"text-center text-base text-premium-textPrimary dark:text-premium-textPrimary\">\n              <span>{prefixText} </span>\n              <span className=\"text-2xl font-bold\">\n                {category === \"price\" ? \"$\" : \"+\"}\n                {formatDisplayValue(sliderValue)}\n              </span>\n              <span> {suffixText}</span>\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n}\n",
          "mapToggleButton.tsx": "\"use client\";\r\n\r\nimport { House, Map } from \"lucide-react\";\r\n\r\ntype MapToggleButtonProps = {\r\n  showMap: boolean;\r\n  setShowMap: React.Dispatch<React.SetStateAction<boolean>>;\r\n};\r\n\r\nexport default function MapToggleButton({\r\n  showMap,\r\n  setShowMap,\r\n}: MapToggleButtonProps) {\r\n  const handleClick = () => {\r\n    setShowMap((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    showMap && (\r\n      <button\r\n        className=\"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 flex items-center space-x-2 rounded-full border border-premium-borderColor bg-premium-background px-4 py-3 text-sm shadow-lg transition-colors hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:bg-premium-backgroundLigth dark:hover:bg-premium-backgroundDark\"\r\n        onClick={handleClick}\r\n      >\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          {showMap ? \"Propiedades\" : \"Mapa\"}\r\n        </span>\r\n        {showMap ? (\r\n          <House\r\n            size={18}\r\n            className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\r\n          />\r\n        ) : (\r\n          <Map\r\n            size={18}\r\n            className=\"text-premium-textPrimary dark:text-premium-textPrimary\"\r\n          />\r\n        )}\r\n      </button>\r\n    )\r\n  );\r\n}\r\n",
          "projectFilter.tsx": "\"use client\";\n\nimport { memo, useState, useEffect, useRef } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport FilterOption from \"./filterOption\";\nimport FilterNumericCounter from \"./filterNumericCounter\";\nimport FilterOptionWithSlider from \"./filterOptionWithSlider\";\nimport FilterSkeleton from \"../../skeletons/filterSkeleton\";\n\nconst Building2 = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building2)\n);\nconst Building = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Building)\n);\nconst House = dynamic(() => import(\"lucide-react\").then((mod) => mod.House));\nconst DollarSign = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.DollarSign)\n);\nconst Bed = dynamic(() => import(\"lucide-react\").then((mod) => mod.Bed));\nconst Toilet = dynamic(() => import(\"lucide-react\").then((mod) => mod.Toilet));\nconst Sofa = dynamic(() => import(\"lucide-react\").then((mod) => mod.Sofa));\nconst Warehouse = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.Warehouse)\n);\nconst ConciergeBell = dynamic(() =>\n  import(\"lucide-react\").then((mod) => mod.ConciergeBell)\n);\nconst X = dynamic(() => import(\"lucide-react\").then((mod) => mod.X));\nconst Crown = dynamic(() => import(\"lucide-react\").then((mod) => mod.Crown));\nconst Ruler = dynamic(() => import(\"lucide-react\").then((mod) => mod.Ruler));\n\ntype Category =\n  | \"cities\"\n  | \"propertyTypes\"\n  | \"housingTypes\"\n  | \"commonAreas\"\n  | \"nearbyServices\"\n  | \"memberships\"\n  | \"bedrooms\"\n  | \"bathrooms\"\n  | \"lobbies\"\n  | \"price\"\n  | \"area\";\n\ninterface ProjectFilterProps {\n  isProperty: boolean;\n  selectedButtons: Record<Category, number[]>;\n  setSelectedButtons: React.Dispatch<\n    React.SetStateAction<Record<Category, number[]>>\n  >;\n  setFilterOpen: (open: boolean) => void;\n  priceRange: { min: number; max: number };\n  areaRange: { min: number; max: number };\n  metadata: any;\n  isLoading: boolean;\n}\n\nconst ProjectFilter = ({\n  isProperty,\n  selectedButtons,\n  setSelectedButtons,\n  setFilterOpen,\n  priceRange,\n  areaRange,\n  metadata,\n  isLoading,\n}: ProjectFilterProps) => {\n  const [isOpen, setIsOpen] = useState<Record<Category, boolean>>({\n    cities: false,\n    propertyTypes: false,\n    housingTypes: false,\n    commonAreas: false,\n    nearbyServices: false,\n    memberships: false,\n    bedrooms: false,\n    bathrooms: false,\n    lobbies: false,\n    price: false,\n    area: false,\n  });\n\n  const [isFixed, setIsFixed] = useState(false);\n  const filterRef = useRef<HTMLDivElement>(null);\n\n  const toggleOpen = (category: Category) => {\n    setIsOpen((prevState) => ({\n      ...prevState,\n      [category]: !prevState[category],\n    }));\n  };\n\n  const [bottomReached, setBottomReached] = useState(false);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const filterTop = filterRef.current?.getBoundingClientRect().top ?? 0;\n      const filterBottom =\n        filterRef.current?.getBoundingClientRect().bottom ?? 0;\n      const scrollY = window.scrollY;\n      const bottomOffset = 30;\n\n      if (scrollY >= filterTop + bottomOffset && !bottomReached) {\n        setIsFixed(true);\n      } else {\n        setIsFixed(false);\n      }\n\n      const pageHeight = document.documentElement.scrollHeight;\n      const windowHeight = window.innerHeight;\n      if (windowHeight + scrollY >= pageHeight - 200) {\n        setBottomReached(true);\n        setIsFixed(false);\n      } else {\n        setBottomReached(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [bottomReached]);\n\n  const updateFilterValue = (\n    category: Category,\n    newValue: number | number[]\n  ) => {\n    setSelectedButtons((prevSelected) => ({\n      ...prevSelected,\n      [category]: Array.isArray(newValue) ? newValue : [newValue],\n    }));\n  };\n\n  const changeCount = (\n    category: \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n    increment: boolean\n  ) => {\n    setSelectedButtons((prevSelected) => ({\n      ...prevSelected,\n      [category]: [\n        Math.max(\n          0,\n          Math.min(prevSelected[category][0] + (increment ? 1 : -1), 3)\n        ),\n      ],\n    }));\n  };\n\n  const handleToggleItem = (category: Category, id: number) => {\n    setSelectedButtons((prevSelected) => {\n      const selectedItems = prevSelected[category];\n      return {\n        ...prevSelected,\n        [category]: selectedItems.includes(id)\n          ? selectedItems.filter((itemId) => itemId !== id)\n          : [...selectedItems, id],\n      };\n    });\n  };\n\n  const resetFilters = () => {\n    setSelectedButtons({\n      cities: [],\n      propertyTypes: [],\n      housingTypes: [],\n      commonAreas: [],\n      nearbyServices: [],\n      memberships: [],\n      bedrooms: [0],\n      bathrooms: [0],\n      lobbies: [0],\n      price: [0],\n      area: [1],\n    });\n  };\n\n  if (isLoading) return <FilterSkeleton />;\n\n  return (\n    <div\n      ref={filterRef}\n      className={`w-full rounded-lg bg-premium-background py-4 shadow-md transition-all duration-300 ease-in-out sm:w-72 md:w-80 dark:bg-premium-backgroundDark ${\n        isFixed ? \"sticky top-32 z-10 lg:top-20\" : \"\"\n      }`}\n    >\n      <div className=\"mt-1 space-y-6\">\n        <div className=\"flex items-center justify-between rounded-md pl-2 pr-6\">\n          <button\n            onClick={resetFilters}\n            className=\"transform px-4 py-1 text-lg font-medium text-premium-textPrimary transition-transform duration-200 hover:scale-110 hover:font-semibold dark:text-premium-textPrimary\"\n          >\n            Borrar filtros\n          </button>\n          <div\n            className=\"flex cursor-pointer items-center text-premium-textPrimary dark:text-premium-textPrimary\"\n            onClick={() => setFilterOpen(false)}\n          >\n            <X className=\"transform transition-transform duration-200 hover:scale-125\" />\n          </div>\n        </div>\n\n        <hr className=\"border-premium-borderColor dark:border-premium-borderColorHover\" />\n\n        <div className=\"space-y-4 overflow-x-hidden px-3 py-1 sm:max-h-[65vh] sm:overflow-y-auto\">\n          {/* Main filters */}\n          {[\n            {\n              label: \"Ciudades\",\n              icon: <Building2 />,\n              items: metadata.cities,\n              category: \"cities\" as Category,\n            },\n            {\n              label: \"Tipos de Inmueble\",\n              icon: <Building />,\n              items: metadata.propertyTypes,\n              category: \"propertyTypes\" as Category,\n            },\n            {\n              label: \"Tipos de Vivienda\",\n              icon: <House />,\n              items: metadata.housingTypes,\n              category: \"housingTypes\" as Category,\n            },\n            {\n              label: \"Áreas Comunes\",\n              icon: <Warehouse />,\n              items: metadata.commonAreas,\n              category: \"commonAreas\" as Category,\n            },\n            {\n              label: \"Servicios Cercanos\",\n              icon: <ConciergeBell />,\n              items: metadata.nearbyServices,\n              category: \"nearbyServices\" as Category,\n            },\n            {\n              label: \"Membresía\",\n              icon: <Crown />,\n              items: metadata.memberships,\n              category: \"memberships\" as Category,\n            },\n          ].map(({ label, icon, items, category }) => (\n            <FilterOption\n              key={category}\n              label={label}\n              icon={icon}\n              items={items}\n              selectedItems={selectedButtons[category]}\n              onToggleItem={(id) => handleToggleItem(category, id)}\n              isOpen={isOpen[category]}\n              onToggleOpen={() => toggleOpen(category)}\n            />\n          ))}\n\n          {/* Filters with sliders */}\n          {[\n            ...(isProperty\n              ? [\n                  {\n                    label: \"Precio\",\n                    icon: <DollarSign />,\n                    value: selectedButtons.price[0] || 0,\n                    min: priceRange.min || 0,\n                    max: priceRange.max || 0,\n                    step: 100000,\n                    category: \"price\" as Category,\n                    prefixText: \"Desde\",\n                    suffixText: \"COP\",\n                  },\n                ]\n              : []),\n            {\n              label: \"Área\",\n              icon: <Ruler />,\n              value: selectedButtons.area[0] || 0,\n              min: areaRange.min || 0,\n              max: areaRange.max || 0,\n              step: 100,\n              category: \"area\" as Category,\n              prefixText: \"Desde\",\n              suffixText: \"m²\",\n            },\n          ].map(\n            ({\n              label,\n              icon,\n              value,\n              min,\n              max,\n              step,\n              category,\n              prefixText,\n              suffixText,\n            }) => (\n              <FilterOptionWithSlider\n                key={category}\n                label={label}\n                icon={icon}\n                value={value}\n                min={min}\n                max={max}\n                step={step}\n                onChange={(newValue) => updateFilterValue(category, newValue)}\n                isOpen={isOpen[category]}\n                setIsOpen={() => toggleOpen(category)}\n                category={category}\n                prefixText={prefixText}\n                suffixText={suffixText}\n              />\n            )\n          )}\n\n          {/* Filters with counters */}\n          {[\n            {\n              label: \"Nº de habitaciones\",\n              icon: <Bed />,\n              category: \"bedrooms\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n            },\n            {\n              label: \"Nº de baños\",\n              icon: <Toilet />,\n              category: \"bathrooms\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n            },\n            {\n              label: \"Nº de salas de estar\",\n              icon: <Sofa />,\n              category: \"lobbies\" as \"bedrooms\" | \"bathrooms\" | \"lobbies\",\n            },\n          ].map(({ label, icon, category }) => (\n            <FilterNumericCounter\n              key={category}\n              label={label}\n              icon={icon}\n              isOpen={isOpen[category]}\n              setIsOpen={() => toggleOpen(category)}\n              value={selectedButtons[category][0]}\n              increment={() => changeCount(category, true)}\n              decrement={() => changeCount(category, false)}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(ProjectFilter);\n"
        },
        "locationMap.tsx": "\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { GoogleMap, Marker } from \"@react-google-maps/api\";\nimport { Plus, Minus, LocateFixed } from \"lucide-react\";\nimport Loader from \"../loader\";\n\nconst mapContainerStyle = {\n  width: \"100%\",\n  height: \"100%\",\n};\n\nconst DEFAULT_CENTER = { lat: 4.5709, lng: -74.2973 };\n\nexport default function LocationMap({\n  coordinates,\n  onLocationSelect,\n  isLoaded,\n  onUpdateAddress,\n  showUserLocationButton,\n}: {\n  showUserLocationButton?: boolean;\n  coordinates: { lat: number; lng: number };\n  onLocationSelect: (location: {\n    lat: number;\n    lng: number;\n    address?: string;\n    city?: string;\n    department?: string;\n  }) => void;\n\n  isLoaded: boolean;\n  onUpdateAddress?: (address: string) => void;\n}) {\n  const [mapCenter, setMapCenter] = useState(coordinates || DEFAULT_CENTER);\n\n  const [userLocation, setUserLocation] = useState<{\n    lat: number;\n    lng: number;\n  } | null>(null);\n\n  const mapRef = useRef<google.maps.Map | null>(null);\n\n  const markerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(\n    null\n  );\n  const userMarkerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(\n    null\n  );\n\n  useEffect(() => {\n    async function updateMarkers() {\n      if (isLoaded && mapRef.current) {\n        const { AdvancedMarkerElement } = (await google.maps.importLibrary(\n          \"marker\"\n        )) as any;\n\n        if (markerRef.current) {\n          markerRef.current.map = null;\n          markerRef.current = null;\n        }\n\n        if (coordinates.lat && coordinates.lng) {\n          markerRef.current = new AdvancedMarkerElement({\n            position: coordinates,\n            map: mapRef.current,\n            title: \"Ubicación seleccionada\",\n          });\n\n          mapRef.current.panTo(coordinates);\n        }\n      }\n    }\n\n    updateMarkers();\n  }, [isLoaded, coordinates]);\n\n  const handleMapLoad = (map: google.maps.Map) => {\n    mapRef.current = map;\n\n    if (coordinates.lat && coordinates.lng) {\n      map.panTo(coordinates);\n      map.setZoom(15);\n\n      if (!markerRef.current) {\n        google.maps\n          .importLibrary(\"marker\")\n          .then(({ AdvancedMarkerElement }: any) => {\n            markerRef.current = new AdvancedMarkerElement({\n              position: coordinates,\n              map,\n              title: \"Ubicación seleccionada\",\n            });\n          });\n      }\n    }\n  };\n\n  const handleMapClick = (event: google.maps.MapMouseEvent) => {\n    if (event.latLng) {\n      const newCoordinates = {\n        lat: event.latLng.lat(),\n        lng: event.latLng.lng(),\n      };\n\n      if (userMarkerRef.current) {\n        userMarkerRef.current.map = null;\n        userMarkerRef.current = null;\n      }\n\n      setMapCenter(newCoordinates);\n      setUserLocation(null);\n\n      const geocoder = new google.maps.Geocoder();\n      geocoder.geocode({ location: newCoordinates }, (results, status) => {\n        if (\n          status === google.maps.GeocoderStatus.OK &&\n          results !== null &&\n          results.length > 0\n        ) {\n          const formattedAddress = results[0].formatted_address;\n          const foundCity = results.find((result) =>\n            result.types.includes(\"locality\")\n          );\n          const foundDepartment = results.find((result) =>\n            result.types.includes(\"administrative_area_level_1\")\n          );\n\n          const cityName =\n            foundCity?.formatted_address.split(\",\")[0].trim() || \"\";\n          const departmentName =\n            foundDepartment?.formatted_address.split(\",\")[0].trim() || \"\";\n\n          onLocationSelect({\n            lat: newCoordinates.lat,\n            lng: newCoordinates.lng,\n            address: formattedAddress,\n            city: cityName,\n            department: departmentName,\n          });\n\n          if (onUpdateAddress) {\n            onUpdateAddress(formattedAddress);\n          }\n        }\n      });\n    }\n  };\n\n  const handleZoomIn = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! + 1);\n    }\n  };\n\n  const handleZoomOut = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! - 1);\n    }\n  };\n\n  const handleGoToUserLocation = () => {\n    const map = mapRef.current;\n    if (navigator.geolocation && map) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const userCoords = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n\n          setUserLocation(userCoords);\n          setMapCenter(userCoords);\n          map.panTo(userCoords);\n          map.setZoom(16);\n\n          const { AdvancedMarkerElement } = (await google.maps.importLibrary(\n            \"marker\"\n          )) as any;\n\n          if (userMarkerRef.current) {\n            userMarkerRef.current.map = null;\n          }\n\n          userMarkerRef.current = new AdvancedMarkerElement({\n            position: userCoords,\n            map: map,\n          });\n\n          const geocoder = new google.maps.Geocoder();\n          geocoder.geocode({ location: userCoords }, (results, status) => {\n            if (\n              status === google.maps.GeocoderStatus.OK &&\n              results !== null &&\n              results.length > 0\n            ) {\n              const formattedAddress = results[0].formatted_address;\n              let cityName = \"\";\n              let departmentName = \"\";\n\n              results.forEach((result) => {\n                result.address_components.forEach((component) => {\n                  if (component.types.includes(\"locality\")) {\n                    cityName = component.long_name;\n                  }\n                  if (component.types.includes(\"administrative_area_level_1\")) {\n                    departmentName = component.long_name;\n                  }\n                });\n              });\n\n              if (!cityName) {\n                results.forEach((result) => {\n                  result.address_components.forEach((component) => {\n                    if (component.types.includes(\"sublocality\")) {\n                      cityName = component.long_name;\n                    }\n                    if (\n                      component.types.includes(\"political\") &&\n                      !departmentName\n                    ) {\n                      departmentName = component.long_name;\n                    }\n                  });\n                });\n              }\n\n              onLocationSelect({\n                lat: userCoords.lat,\n                lng: userCoords.lng,\n                address: formattedAddress,\n                city: cityName,\n                department: departmentName,\n              });\n\n              if (onUpdateAddress) {\n                onUpdateAddress(formattedAddress);\n              }\n            }\n          });\n        },\n        (error) => {\n          console.warn(\"No se pudo obtener la ubicación del usuario.\", error);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0,\n        }\n      );\n    }\n  };\n\n  if (!isLoaded) {\n    return (\n      <div className=\"flex justify-center items-center w-full h-full\">\n        <Loader size={48} />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <GoogleMap\n        mapContainerStyle={mapContainerStyle}\n        center={mapCenter}\n        zoom={15}\n        onLoad={handleMapLoad}\n        onClick={handleMapClick}\n        options={{\n          zoomControl: false,\n          streetViewControl: false,\n          mapTypeControl: false,\n          fullscreenControl: false,\n          mapTypeId: \"roadmap\",\n          mapId: \"78a223abe416be2b\",\n        }}\n      />\n\n      <div className=\"absolute top-4 left-4 z-10 flex flex-col bg-white shadow-lg rounded-md\">\n        <button\n          type=\"button\"\n          className=\"flex items-center justify-center w-10 h-10 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomIn}\n        >\n          <Plus size={24} />\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"flex items-center justify-center w-10 h-10 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomOut}\n        >\n          <Minus size={24} />\n        </button>\n\n        {showUserLocationButton && (\n          <button\n            type=\"button\"\n            className=\"flex items-center justify-center w-10 h-10 bg-white text-gray-700 hover:bg-gray-100\"\n            onClick={handleGoToUserLocation}\n          >\n            <LocateFixed size={24} />\n          </button>\n        )}\n      </div>\n    </>\n  );\n}\n",
        "priceMarker.tsx": "\"use client\";\n\nimport { useEffect } from \"react\";\n//import L from \"leaflet\";\n//import { useMap } from \"react-leaflet\";\n\ntype PriceMarkerProps = {\n  position: [number, number];\n  price: number;\n  onClick: () => void;\n  isSelected: boolean;\n};\n\nexport default function PriceMarker({\n  position,\n  price,\n  onClick,\n  isSelected,\n}: PriceMarkerProps) {\n  const map = useMap();\n\n  useEffect(() => {\n    const marker = L.marker(position, {\n      icon: L.divIcon({\n        html: `<button class=\"text-white font-semibold py-2 px-3 rounded-full shadow-md ${\n          isSelected\n            ? \"bg-premium-primaryDark dark:bg-premium-primaryDark\"\n            : \"bg-premium-primary dark:bg-premium-primary hover:bg-premium-primaryLight focus:outline-none focus:bg-premium-primaryDark dark:focus:bg-premium-primaryDark\"\n        }\">$${price.toLocaleString()}</button>`,\n        iconAnchor: [12, 41],\n        popupAnchor: [0, -41],\n        className: \"\",\n      }),\n    }).addTo(map);\n\n    marker.on(\"click\", onClick);\n\n    return () => {\n      map.removeLayer(marker);\n    };\n  }, [map, position, price, onClick, isSelected]);\n\n  return null;\n}\n",
        "project": {
          "carouselRecommendedProjects.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport ProjectCard from \"../projectCard\";\nimport { ProjectSummary } from \"@/lib/definitios\";\n//import { FaChevronLeft, FaChevronRight } from \"react-icons/fa\";\n\ntype CarouselRecommendedProjectsProps = {\n  projects: ProjectSummary[];\n};\n\nexport default function CarouselRecommendedProjects({\n  projects,\n}: CarouselRecommendedProjectsProps) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const visibleCardsMap = { base: 2, sm: 3, lg: 4, xl: 5 };\n\n  const [visibleCards, setVisibleCards] = useState(visibleCardsMap.xl);\n\n  useEffect(() => {\n    const updateVisibleCards = () => {\n      if (window.innerWidth >= 1280) setVisibleCards(visibleCardsMap.xl);\n      else if (window.innerWidth >= 1024) setVisibleCards(visibleCardsMap.lg);\n      else if (window.innerWidth >= 640) setVisibleCards(visibleCardsMap.sm);\n      else setVisibleCards(visibleCardsMap.base);\n    };\n\n    updateVisibleCards();\n    window.addEventListener(\"resize\", updateVisibleCards);\n\n    return () => window.removeEventListener(\"resize\", updateVisibleCards);\n  }, []);\n\n  const totalProjects = projects.length;\n\n  const handleNext = () => {\n    if (currentIndex + visibleCards < totalProjects) {\n      setCurrentIndex((prev) => prev + 1);\n    }\n  };\n\n  const handlePrev = () => {\n    if (currentIndex > 0) {\n      setCurrentIndex((prev) => prev - 1);\n    }\n  };\n\n  return (\n    <div className=\"w-full bg-transparent py-8\">\n      <div className=\"relative flex items-center overflow-hidden\">\n        {/* Botón Prev */}\n        <button\n          className={`absolute left-2 z-10 rounded-full p-3 shadow-md transition md:left-4 ${\n            currentIndex === 0\n              ? \"bg-gray-300 text-gray-500\"\n              : \"bg-primary hover:bg-primary-dark text-white\"\n          }`}\n          onClick={handlePrev}\n          aria-label=\"Previous\"\n          disabled={currentIndex === 0}\n        >\n          <FaChevronLeft />\n        </button>\n\n        {/* Carrusel */}\n        <div className=\"w-full overflow-hidden\">\n          <div\n            className=\"flex py-4 transition-transform duration-500 ease-in-out\"\n            style={{\n              transform: `translateX(-${(currentIndex * 100) / visibleCards}%)`,\n              width: `${(projects.length * 100) / visibleCards}%`,\n            }}\n          >\n            {projects.map((project, index) => (\n              <div\n                key={index}\n                className=\"flex-shrink-0 px-2\"\n                style={{\n                  width: `${100 / visibleCards}%`,\n                }}\n              >\n                <ProjectCard\n                  name={project.name}\n                  location={project.city.name}\n                  price={project.price}\n                  area={project.totalArea}\n                  images={project.projectMedia || []}\n                  url={`admin/projects/${project.name\n                    .toLowerCase()\n                    .replace(/\\s+/g, \"-\")}`}\n                  isFromMap={false}\n                  showActions={false}\n                  onClose={null}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Botón Next */}\n        <button\n          className={`absolute right-2 z-10 rounded-full p-3 shadow-md transition md:right-4 ${\n            currentIndex + visibleCards >= totalProjects\n              ? \"bg-gray-300 text-gray-500\"\n              : \"bg-primary hover:bg-primary-dark text-white\"\n          }`}\n          onClick={handleNext}\n          aria-label=\"Next\"\n          disabled={currentIndex + visibleCards >= totalProjects}\n        >\n          <FaChevronRight />\n        </button>\n      </div>\n    </div>\n  );\n}\n",
          "detailCard.tsx": "type DetailCardProps = {\n  icon: JSX.Element;\n  label: string;\n  value?: string;\n};\n\nexport default function DetailCard({ icon, label, value }: DetailCardProps) {\n  return (\n    <div\n      className=\"flex items-center rounded-lg bg-white p-2 py-3 shadow-md\"\n      style={{ boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\" }}\n    >\n      <div className=\"mr-2 rounded-full bg-gray-200 p-3\">{icon}</div>\n      <div>\n        <p className=\"text-brown-700 text-sm font-semibold\">{label}</p>\n        {value && <p className=\"text-brown-600 text-lg font-bold\">{value}</p>}\n      </div>\n    </div>\n  );\n}\n",
          "imageModal.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Image from \"next/image\";\nimport { X } from \"lucide-react\";\nimport { ProjectMedia } from \"@/lib/definitios\";\n\ninterface ImageModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  media: ProjectMedia[];\n  initialIndex: number;\n}\n\nexport default function ImageModal({\n  isOpen,\n  onClose,\n  media,\n  initialIndex,\n}: ImageModalProps) {\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setCurrentIndex(initialIndex);\n    }\n  }, [initialIndex, isOpen]);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n    return () => {\n      document.body.style.overflow = \"auto\";\n    };\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const nextImage = () => {\n    if (isTransitioning) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentIndex((prevIndex) => (prevIndex + 1) % media.length);\n      setIsTransitioning(false);\n    }, 300);\n  };\n\n  const prevImage = () => {\n    if (isTransitioning) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentIndex(\n        (prevIndex) => (prevIndex - 1 + media.length) % media.length\n      );\n      setIsTransitioning(false);\n    }, 300);\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80\"\n      onClick={onClose}\n    >\n      <div\n        className=\"relative flex aspect-video w-full max-w-full items-center justify-center p-4 md:w-[80%] lg:w-[70%]\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Close Button */}\n        <button\n          onClick={onClose}\n          className=\"absolute right-6 top-6 z-50 flex h-10 w-10 items-center justify-center rounded-full bg-yellow-500 text-2xl text-black hover:bg-yellow-600\"\n          aria-label=\"Close Modal\"\n        >\n          <X size={20} />\n        </button>\n\n        {/* Image */}\n        <div className=\"relative flex h-full w-full items-center justify-center overflow-hidden rounded-lg bg-black bg-opacity-50\">\n          <div\n            className={`absolute inset-0 transition-opacity duration-500 ${\n              isTransitioning ? \"opacity-0\" : \"opacity-100\"\n            }`}\n          >\n            <Image\n              src={media[currentIndex]?.url}\n              alt={`Project Image ${currentIndex + 1}`}\n              fill\n              className=\"object-cover\"\n              priority\n            />\n          </div>\n        </div>\n\n        {/* Tag */}\n        {media[currentIndex]?.tag && (\n          <div className=\"absolute left-8 top-8 rounded bg-black bg-opacity-70 px-3 py-1 text-lg text-white\">\n            {media[currentIndex].tag}\n          </div>\n        )}\n\n        {/* Counter */}\n        <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 transform rounded bg-black bg-opacity-70 px-3 py-1 text-lg text-white\">\n          {currentIndex + 1}/{media.length}\n        </div>\n\n        {/* Navigation Buttons */}\n        <div className=\"absolute inset-0 flex items-center justify-between px-4\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              prevImage();\n            }}\n            disabled={media.length === 1}\n            className={`flex h-10 w-10 items-center justify-center rounded-full text-black ${\n              media.length === 1\n                ? \"bg-gray-400\"\n                : \"bg-yellow-500 hover:bg-yellow-600\"\n            } translate-x-4`}\n            aria-label=\"Previous Image in Modal\"\n          >\n            &#10094;\n          </button>\n\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              nextImage();\n            }}\n            disabled={media.length === 1}\n            className={`flex h-10 w-10 items-center justify-center rounded-full text-black ${\n              media.length === 1\n                ? \"bg-gray-400\"\n                : \"bg-yellow-500 hover:bg-yellow-600\"\n            } -translate-x-4`}\n            aria-label=\"Next Image in Modal\"\n          >\n            &#10095;\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
          "map.tsx": "//import { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\n//import \"leaflet/dist/leaflet.css\";\n//import L from \"leaflet\";\n\nconst customIcon = new L.Icon({\n  iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\n  iconRetinaUrl:\n    \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\n  shadowUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41],\n});\n\ntype ProjectMapProps = {\n  latitude: number;\n  longitude: number;\n  address: string;\n};\n\nexport default function ProjectMap({\n  latitude,\n  longitude,\n  address,\n}: ProjectMapProps) {\n  return (\n    <div className=\"my-10\">\n      {/* Título del Mapa */}\n      <h2 className=\"mb-4 text-2xl font-semibold\" style={{ color: \"#8B4513\" }}>\n        Ubicación del Proyecto\n      </h2>\n      <p className=\"mb-6 text-lg\" style={{ color: \"#5D4037\" }}>\n        Explora la ubicación exacta de tu próximo hogar en el mapa interactivo a\n        continuación.\n      </p>\n\n      {/* Mapa */}\n      <MapContainer\n        center={[latitude, longitude]}\n        zoom={15}\n        className=\"z-10 h-[300px] w-full overflow-hidden rounded-lg\"\n        style={{\n          borderColor: \"#DAA520\",\n          border: \"1px solid #5D4037\",\n        }}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a> contributors'\n        />\n        <Marker position={[latitude, longitude]} icon={customIcon}>\n          <Popup>\n            <span style={{ color: \"#8B4513\", fontWeight: \"bold\" }}>\n              {address}\n            </span>\n          </Popup>\n        </Marker>\n      </MapContainer>\n    </div>\n  );\n}\n",
          "ownerModal.tsx": "import { useRouter } from \"next/navigation\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport { UserData } from \"@/lib/definitios\";\r\nimport ModalHeader from \"../../modals/modalHeader\";\r\n\r\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/formInput\"), {\r\n  ssr: false,\r\n});\r\n\r\ninterface OwnerModalProps {\r\n  show: boolean;\r\n  flag: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  handleChange: (\r\n    e: React.ChangeEvent<\r\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\r\n    >\r\n  ) => void;\r\n  user: UserData;\r\n}\r\n\r\nexport default function OwnerModal({\r\n  show,\r\n  flag,\r\n  onClose,\r\n  onSubmit,\r\n  handleChange,\r\n  user,\r\n}: OwnerModalProps) {\r\n  const router = useRouter();\r\n  useBodyOverflow(show);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader title=\"Datos del Propietario\" onClose={onClose} />\r\n\r\n        {/* Body */}\r\n        <form\r\n          id=\"userProjectForm\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          className=\"h-[60vh] space-y-4 overflow-y-auto px-6 py-4\"\r\n        >\r\n          <FormInput\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={user.email || \"\"}\r\n            placeholder=\"Correo electrónico\"\r\n            maxLength={190}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Nombre de usuario\"\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={user.username || \"\"}\r\n            placeholder=\"Nombre de usuario\"\r\n            maxLength={150}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Nombres\"\r\n            type=\"text\"\r\n            name=\"names\"\r\n            value={user.names || \"\"}\r\n            placeholder=\"Nombres del usuario\"\r\n            maxLength={150}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Apellidos\"\r\n            type=\"text\"\r\n            name=\"lastnames\"\r\n            value={user.lastnames || \"\"}\r\n            placeholder=\"Apellidos del usuario\"\r\n            maxLength={150}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n\r\n          <FormInput\r\n            label=\"Teléfono\"\r\n            type=\"text\"\r\n            name=\"phoneNumber\"\r\n            value={user.phoneNumber || \"\"}\r\n            placeholder=\"Número de teléfono\"\r\n            maxLength={45}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n            isEdit={false}\r\n          />\r\n        </form>\r\n\r\n        <div className=\"flex justify-end border-t border-premium-borderColor p-4 dark:border-premium-borderColorHover\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"transform rounded-lg bg-premium-textPlaceholder px-4 py-2 text-white transition duration-300 hover:scale-105 hover:bg-premium-borderColor dark:bg-premium-secondary dark:hover:bg-premium-secondaryDark\"\r\n          >\r\n            Cerrar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
          "projectCarousel.tsx": "import { useState, useMemo } from \"react\";\nimport Image from \"next/image\";\nimport ImageModal from \"./imageModal\";\nimport { ProjectMedia } from \"@/lib/definitios\";\n\ntype ProjectCarouselProps = {\n  projectMedia: ProjectMedia[];\n};\n\nexport default function ProjectCarousel({\n  projectMedia,\n}: ProjectCarouselProps) {\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const nextSlide = () => {\n    setCurrentImage((prev) => (prev + 1) % projectMedia.length);\n  };\n\n  const prevSlide = () => {\n    setCurrentImage(\n      (prev) => (prev - 1 + projectMedia.length) % projectMedia.length\n    );\n  };\n\n  const handleImageClick = (index: number) => {\n    setCurrentImage(index);\n    setIsModalOpen(true);\n  };\n\n  const getImageStyle = useMemo(\n    () => (index: number) => {\n      const position =\n        (index - currentImage + projectMedia.length) % projectMedia.length;\n\n      let transform = \"\";\n      let zIndex = 0;\n\n      switch (position) {\n        case 0:\n          transform = \"translateX(0) scale(1)\";\n          zIndex = 3;\n          break;\n        case 1:\n        case projectMedia.length - 1:\n          transform = `translateX(${\n            position === 1 ? \"50%\" : \"-50%\"\n          }) scale(0.75)`;\n          zIndex = 2;\n          break;\n        case 2:\n        case projectMedia.length - 2:\n          transform = `translateX(${\n            position === 2 ? \"90%\" : \"-90%\"\n          }) scale(0.55)`;\n          zIndex = 1;\n          break;\n        default:\n          transform = \"scale(0.6)\";\n          zIndex = 0;\n      }\n\n      return {\n        transform,\n        zIndex,\n        transition: \"transform 0.5s ease\",\n      };\n    },\n    [currentImage, projectMedia.length]\n  );\n\n  const getVisibleDots = () => {\n    const maxDots = 5;\n    const half = Math.floor(maxDots / 2);\n\n    if (projectMedia.length <= maxDots) {\n      return projectMedia.map((_, index) => index);\n    }\n\n    let start = currentImage - half;\n    let end = currentImage + half + 1;\n\n    if (start < 0) {\n      start = 0;\n      end = maxDots;\n    } else if (end > projectMedia.length) {\n      start = projectMedia.length - maxDots;\n      end = projectMedia.length;\n    }\n\n    return Array.from({ length: end - start }, (_, i) => start + i);\n  };\n\n  return (\n    <div className=\"relative mx-auto w-full sm:my-5\">\n      <div className=\"relative flex h-96 items-center justify-center overflow-hidden\">\n        {projectMedia.map((media, index) => (\n          <div\n            key={index}\n            className=\"group absolute cursor-pointer transition-transform duration-300\"\n            style={getImageStyle(index)}\n            onClick={() => handleImageClick(index)}\n          >\n            <div className=\"relative h-[320px] w-[500px] transform overflow-hidden transition-transform duration-300 group-hover:scale-105\">\n              <Image\n                src={media.url}\n                alt={`Project Image ${index + 1}`}\n                fill\n                sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 500px\"\n                className=\"rounded-lg object-cover\"\n                priority={index === currentImage}\n              />\n            </div>\n\n            {index === currentImage && (\n              <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 transform rounded bg-black bg-opacity-60 px-3 py-1 text-sm font-semibold text-white\">\n                {media.tag || \"Sin etiqueta\"}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      <button\n        onClick={prevSlide}\n        className=\"absolute left-2 top-1/2 z-10 mx-5 flex h-8 w-8 -translate-y-1/2 transform items-center justify-center rounded-full bg-white bg-opacity-80 text-xl font-bold text-black hover:bg-opacity-100 sm:left-3 lg:left-4\"\n        style={{ color: \"#8B4513\", backgroundColor: \"#DAA520\" }}\n        aria-label=\"Previous Slide\"\n      >\n        &#10094;\n      </button>\n\n      <button\n        onClick={nextSlide}\n        className=\"absolute right-2 top-1/2 z-10 mx-5 flex h-8 w-8 -translate-y-1/2 transform items-center justify-center rounded-full bg-white bg-opacity-80 text-xl font-bold text-black hover:bg-opacity-100 sm:right-3 lg:right-4\"\n        style={{ color: \"#8B4513\", backgroundColor: \"#DAA520\" }}\n        aria-label=\"Next Slide\"\n      >\n        &#10095;\n      </button>\n\n      <div className=\"flex justify-center space-x-2\">\n        {getVisibleDots().map((index) => (\n          <button\n            key={index}\n            onClick={() => setCurrentImage(index)}\n            className={`h-2 w-2 rounded-full transition-transform duration-300 ${\n              currentImage === index\n                ? \"scale-125 bg-[#8B4513]\"\n                : \"scale-100 bg-[#DAA520] opacity-75\"\n            }`}\n          />\n        ))}\n      </div>\n\n      <ImageModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        media={projectMedia}\n        initialIndex={currentImage}\n      />\n    </div>\n  );\n}\n",
          "projectCommonAreas.tsx": "\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\nimport ImageModal from \"./imageModal\";\nimport { CommonArea, ProjectMedia } from \"@/lib/definitios\";\n//import { AiOutlineDown } from \"react-icons/ai\";\n//import { motion } from \"framer-motion\";\n\ntype ProjectCommonAreasProps = {\n  areas: CommonArea[];\n  projectMedia: ProjectMedia[];\n};\n\nexport default function ProjectCommonAreas({\n  areas,\n  projectMedia,\n}: ProjectCommonAreasProps) {\n  const [openAccordions, setOpenAccordions] = useState<number[]>([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [modalImageIndex, setModalImageIndex] = useState(0);\n\n  const toggleAccordion = (index: number) => {\n    setOpenAccordions((prev) =>\n      prev.includes(index) ? prev.filter((i) => i !== index) : [...prev, index]\n    );\n  };\n\n  const handleImageClick = (index: number) => {\n    setModalImageIndex(index);\n    setIsModalOpen(true);\n  };\n\n  return (\n    <div className=\"my-8 w-full lg:w-2/3\">\n      <h2 style={{ color: \"#8B4513\" }} className=\"mb-4 text-2xl font-semibold\">\n        Áreas Comunes\n      </h2>\n      {areas.map((area, index) => {\n        const areaImages = projectMedia.filter(\n          (media) => media.commonArea === area.id\n        );\n\n        const isOpen = openAccordions.includes(index);\n\n        return (\n          <div\n            key={area.id}\n            className=\"mb-4 rounded-lg p-4 shadow\"\n            style={{\n              backgroundColor: \"#ffffff\",\n              boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n            }}\n          >\n            <button\n              onClick={() => toggleAccordion(index)}\n              className=\"flex w-full items-center justify-between text-lg font-semibold\"\n              style={{ color: \"#5D4037\" }}\n            >\n              <span>{area.name}</span>\n              <AiOutlineDown\n                className={`transition-transform ${\n                  isOpen ? \"rotate-180\" : \"rotate-0\"\n                }`}\n                style={{ color: \"#DAA520\" }}\n              />\n            </button>\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{\n                opacity: isOpen ? 1 : 0,\n                height: isOpen ? \"auto\" : 0,\n              }}\n              transition={{ duration: 0.3 }}\n              className=\"mt-2 overflow-hidden\"\n            >\n              {isOpen && areaImages.length > 0 && (\n                <div className=\"flex space-x-2 overflow-x-auto\">\n                  {areaImages.map((media, imgIndex) => (\n                    <div\n                      key={imgIndex}\n                      className=\"flex-shrink-0 cursor-pointer\"\n                      onClick={() => handleImageClick(imgIndex)}\n                      style={{\n                        width: \"150px\",\n                        height: \"100px\",\n                      }}\n                    >\n                      <Image\n                        src={media.url}\n                        alt={`Imagen de ${area.name}`}\n                        width={150}\n                        height={100}\n                        className=\"rounded-lg object-cover\"\n                        style={{\n                          objectFit: \"cover\",\n                          border: \"2px solid #EDEDED\",\n                          width: \"100%\",\n                          height: \"100%\",\n                        }}\n                      />\n                    </div>\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          </div>\n        );\n      })}\n\n      <ImageModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        media={projectMedia}\n        initialIndex={modalImageIndex}\n      />\n    </div>\n  );\n}\n",
          "projectDetails.tsx": "\"use client\";\n\nimport { useState } from \"react\";\n//import { motion } from \"framer-motion\";\nimport DetailCard from \"./detailCard\";\nimport { Project } from \"@/lib/definitios\";\n/*import {\n  FaRulerCombined,\n  FaBed,\n  FaBath,\n  FaCouch,\n  FaHome,\n  FaBuilding,\n  FaWarehouse,\n  FaCar,\n  FaTruck,\n  FaSeedling,\n  FaTools,\n  FaArrowsAltV,\n  FaTshirt,\n  FaRulerHorizontal,\n  FaRulerVertical,\n  FaCalendarAlt,\n  FaSortNumericUp,\n  FaMoneyBillWave,\n} from \"react-icons/fa\";\nimport { PiElevatorFill } from \"react-icons/pi\";\nimport {\n  MdOutlineBalcony,\n  MdOutlineDeck,\n  MdOutlineHomeWork,\n} from \"react-icons/md\";\nimport { RiRuler2Fill } from \"react-icons/ri\";*/\n\ntype ProjectDetailsProps = {\n  project: Project;\n};\n\nexport default function ProjectDetails({ project }: ProjectDetailsProps) {\n  const details = [\n    {\n      group: \"Características generales\",\n      items: [\n        {\n          label: \"Conjunto\",\n          value: project.housingType?.name || \"\",\n          icon: <FaBuilding />,\n        },\n        {\n          label: \"Área total\",\n          value:\n            project.totalArea && project.totalArea > 0\n              ? `${project.totalArea} m²`\n              : null,\n          icon: <FaRulerCombined />,\n        },\n        {\n          label: \"Área construida\",\n          value:\n            project.builtArea && project.builtArea > 0\n              ? `${project.builtArea} m²`\n              : null,\n          icon: <RiRuler2Fill />,\n        },\n        {\n          label: \"Altura libre\",\n          value:\n            project.freeHeight && project.freeHeight > 0\n              ? `${project.freeHeight} m`\n              : null,\n          icon: <FaArrowsAltV />,\n        },\n        {\n          label: \"Ancho\",\n          value:\n            project.width && project.width > 0 ? `${project.width} m` : null,\n          icon: <FaRulerHorizontal />,\n        },\n        {\n          label: \"Largo\",\n          value:\n            project.length && project.length > 0 ? `${project.length} m` : null,\n          icon: <FaRulerVertical />,\n        },\n        {\n          label: \"Tipo de Vivienda\",\n          value: project.housingType?.name || \"\",\n          icon: <FaHome />,\n        },\n        {\n          label: \"Unds. Disponibles\",\n          value:\n            project.availableUnits && project.availableUnits > 0\n              ? project.availableUnits.toString()\n              : null,\n          icon: <MdOutlineHomeWork />,\n        },\n        {\n          label: \"Año de Construcción\",\n          value:\n            project.yearBuilt && project.yearBuilt > 0\n              ? project.yearBuilt.toString()\n              : null,\n          icon: <FaCalendarAlt />,\n        },\n      ],\n    },\n\n    {\n      group: \"Espacios y comodidades\",\n      items: [\n        {\n          label: \"Habitaciones\",\n          value:\n            project.bedrooms && project.bedrooms > 0\n              ? project.bedrooms.toString()\n              : null,\n          icon: <FaBed />,\n        },\n        {\n          label: \"Baños\",\n          value:\n            project.bathrooms && project.bathrooms > 0\n              ? project.bathrooms.toString()\n              : null,\n          icon: <FaBath />,\n        },\n        {\n          label: \"Salas de estar\",\n          value:\n            project.lobbies && project.lobbies > 0\n              ? project.lobbies.toString()\n              : null,\n          icon: <FaCouch />,\n        },\n        {\n          label: \"Parqueaderos\",\n          value:\n            project.parkingSpots && project.parkingSpots > 0\n              ? project.parkingSpots.toString()\n              : null,\n          icon: <FaCar />,\n        },\n        {\n          label: \"Ascensores\",\n          value:\n            project.elevator && project.elevator > 0\n              ? project.elevator.toString()\n              : null,\n          icon: <PiElevatorFill />,\n        },\n        {\n          label: \"Est. vehículos pesados\",\n          value:\n            project.heavyParking && project.heavyParking > 0\n              ? project.heavyParking.toString()\n              : null,\n          icon: <FaTruck />,\n        },\n        {\n          label: \"Torres\",\n          value:\n            project.towers && project.towers > 0\n              ? project.towers.toString()\n              : null,\n          icon: <FaBuilding />,\n        },\n        {\n          label: \"Bodegas\",\n          value:\n            project.storageUnits && project.storageUnits > 0\n              ? project.storageUnits.toString()\n              : null,\n          icon: <FaWarehouse />,\n        },\n        {\n          label: \"Nivel Socioeconómico\",\n          value:\n            project.socioeconomicLevel && project.socioeconomicLevel > 0\n              ? project.socioeconomicLevel.toString()\n              : null,\n          icon: <FaMoneyBillWave />,\n        },\n        {\n          label: \"Número de Piso\",\n          value:\n            project.floorNumber && project.floorNumber > 0\n              ? project.floorNumber.toString()\n              : null,\n          icon: <FaSortNumericUp />,\n        },\n      ],\n    },\n\n    ...(project.propertyType.id === 1001 || project.propertyType.id === 1002\n      ? [\n          {\n            group: \"Opciones adicionales\",\n            items: [\n              {\n                label: \"Personalizable\",\n                value: project.customizationOptions ? \"Sí\" : \"NO\",\n                icon: <FaTools />,\n              },\n              {\n                label: \"Balcón\",\n                value: project.balcony ? \"Sí\" : \"No\",\n                icon: <MdOutlineBalcony />,\n              },\n              {\n                label: \"Jardín\",\n                value: project.garden ? \"Sí\" : \"No\",\n                icon: <FaSeedling />,\n              },\n              {\n                label: \"Cuarto de ropas\",\n                value: project.laundryArea ? \"Sí\" : \"No\",\n                icon: <FaTshirt />,\n              },\n              {\n                label: \"Terraza\",\n                value: project.terrace ? \"Sí\" : \"No\",\n                icon: <MdOutlineDeck />,\n              },\n            ],\n          },\n        ]\n      : []),\n  ];\n\n  const [openGroups, setOpenGroups] = useState<boolean[]>(\n    new Array(details.length).fill(true)\n  );\n\n  const toggleGroup = (index: number) => {\n    setOpenGroups((prev) =>\n      prev.map((isOpen, i) => (i === index ? !isOpen : isOpen))\n    );\n  };\n\n  return (\n    <div className=\"my-8\">\n      <h2 className=\"mb-6 text-2xl font-semibold text-[#8B4513]\">\n        Detalles del Proyecto\n      </h2>\n      <div className=\"space-y-6\">\n        {details.map((group, index) => (\n          <div key={index} className=\"mb-4\">\n            <div\n              className=\"flex cursor-pointer items-center justify-between rounded-lg p-4 shadow\"\n              style={{\n                backgroundColor: \"#ffffff\",\n                boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n              }}\n              onClick={() => toggleGroup(index)}\n            >\n              <span\n                className=\"text-lg font-semibold\"\n                style={{ color: \"#5D4037\" }}\n              >\n                {group.group}\n              </span>\n              <motion.div\n                className={`transition-transform ${\n                  openGroups[index] ? \"rotate-180\" : \"rotate-0\"\n                }`}\n                style={{ color: \"#DAA520\" }}\n              >\n                ▼\n              </motion.div>\n            </div>\n\n            {openGroups[index] && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: \"auto\" }}\n                transition={{ duration: 0.3 }}\n                className=\"mt-2\"\n              >\n                <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4\">\n                  {group.items.map(\n                    (item, index) =>\n                      item.value && (\n                        <DetailCard\n                          key={index}\n                          icon={\n                            <motion.div\n                              className=\"text-yellow-600\"\n                              whileHover={{ scale: 1.1 }}\n                            >\n                              {item.icon}\n                            </motion.div>\n                          }\n                          label={item.label}\n                          value={item.value}\n                        />\n                      )\n                  )}\n                </div>\n              </motion.div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
          "projectHeader.tsx": "import { Project } from \"@/lib/definitios\";\n//import { FaMapMarkerAlt, FaCalendarAlt } from \"react-icons/fa\";\nimport ShareButton from \"@/app/ui/projects/shareButton\";\n\ntype ProjectHeaderProps = {\n  project: Project;\n};\n\nexport default function ProjectHeader({ project }: ProjectHeaderProps) {\n  const formattedPrice = new Intl.NumberFormat(\"es-CO\", {\n    style: \"currency\",\n    currency: \"COP\",\n    minimumFractionDigits: 0,\n  }).format(project.price);\n\n  return (\n    <div className=\"w-full px-4 pt-28 sm:px-6 lg:px-12 lg:pt-24\">\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <h1 className=\"text-4xl font-bold\" style={{ color: \"#8B4513\" }}>\n              {project.name}\n            </h1>\n            <ShareButton message=\"¡Mira este increíble proyecto en nuestra página web!\" />\n          </div>\n          <div className=\"flex flex-col lg:items-end lg:justify-start\">\n            <p\n              className=\"mt-2 text-3xl font-semibold sm:mt-0\"\n              style={{ color: \"#5D4037\" }}\n            >\n              {formattedPrice}\n            </p>\n          </div>\n        </div>\n\n        <div\n          className=\"lg:mt-2 lg:grid lg:grid-cols-2 lg:items-start lg:gap-2\"\n          style={{ color: \"#5D4037\" }}\n        >\n          <div className=\"flex flex-col text-lg lg:flex-row lg:items-center lg:space-x-2\">\n            <div className=\"flex items-center\">\n              <FaMapMarkerAlt className=\"mr-1\" style={{ color: \"#DAA520\" }} />\n              <span>{project.address}</span>\n            </div>\n            <span className=\"hidden lg:inline\">|</span>\n            <span className=\"pl-4 font-semibold lg:pl-0\">\n              {project.city.name}, {project.city.departament.name}\n            </span>\n          </div>\n\n          {project.availableDate && (\n            <div\n              className=\"hidden items-center text-sm lg:ml-auto lg:mt-0 lg:flex\"\n              style={{ color: \"#5D4037\" }}\n            >\n              <FaCalendarAlt className=\"mr-2\" style={{ color: \"#DAA520\" }} />\n              <span>\n                Fecha estimada de entrega:{\" \"}\n                <span className=\"font-semibold\" style={{ color: \"#8B4513\" }}>\n                  {new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\n                    year: \"numeric\",\n                    month: \"long\",\n                  })}\n                </span>\n              </span>\n            </div>\n          )}\n        </div>\n\n        <div\n          className=\"flex items-center text-sm lg:hidden\"\n          style={{ color: \"#5D4037\" }}\n        >\n          <FaCalendarAlt className=\"mr-2\" style={{ color: \"#DAA520\" }} />\n          <span>\n            Fecha estimada de entrega:{\" \"}\n            {project.availableDate ? (\n              <span className=\"font-semibold\" style={{ color: \"#8B4513\" }}>\n                {new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\n                  year: \"numeric\",\n                  month: \"long\",\n                })}\n              </span>\n            ) : (\n              <span className=\"font-semibold text-gray-500\">No disponible</span>\n            )}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
          "projectNearbyServices.tsx": "import { NearbyService } from \"@/lib/definitios\";\n//import { FaSchool, FaStore, FaHospital, FaChild } from \"react-icons/fa\";\nimport DetailCard from \"./detailCard\";\n//import { motion } from \"framer-motion\";\n\ntype ProjectNearbyServicesProps = {\n  services: NearbyService[];\n};\n\nconst serviceIcons: { [key: string]: JSX.Element } = {\n  Colegios: <FaSchool className=\"text-yellow-600\" />,\n  Comercio: <FaStore className=\"text-yellow-600\" />,\n  \"Centros de Salud\": <FaHospital className=\"text-yellow-600\" />,\n  \"Parque de Juegos\": <FaChild className=\"text-yellow-600\" />,\n};\n\nexport default function ProjectNearbyServices({\n  services,\n}: ProjectNearbyServicesProps) {\n  return (\n    <div className=\"my-8\">\n      <h2 className=\"mb-6 text-2xl font-semibold text-[#8B4513]\">\n        Servicios Cercanos\n      </h2>\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n        {services.map((service, index) => (\n          <motion.div\n            key={service.id}\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true, amount: 0.2 }}\n            transition={{ duration: 0.5, delay: index * 0.2 }}\n          >\n            <DetailCard\n              icon={serviceIcons[service.name] || <FaStore />}\n              label={service.name}\n            />\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
          "projectPlans.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport Image from \"next/image\";\nimport ImageModal from \"./imageModal\";\nimport { ProjectMedia } from \"@/lib/definitios\";\n\ntype ProjectPlansProps = {\n  projectMedia: ProjectMedia[];\n};\n\nexport default function ProjectPlans({ projectMedia }: ProjectPlansProps) {\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const [activeTab, setActiveTab] = useState(0);\n\n  if (projectMedia.length === 0) {\n    return (\n      <div\n        className=\"rounded-lg p-6\"\n        style={{\n          backgroundColor: \"#EDEDED\",\n          color: \"#5D4037\",\n          border: \"1px solid #5D4037\",\n        }}\n      >\n        <p>No hay planos disponibles para este proyecto.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"mt-4 rounded-lg p-3\"\n      style={{\n        backgroundColor: \"transparent\",\n        border: \"1px solid #5D4037\",\n      }}\n    >\n      <div\n        className=\"mb-4 flex space-x-4 border-b-2\"\n        style={{\n          borderColor: \"#5D4037\",\n        }}\n      >\n        {projectMedia.map((plan, index) => (\n          <button\n            key={index}\n            onClick={() => setActiveTab(index)}\n            className={`transform px-4 py-2 text-xl font-semibold transition duration-300 ${\n              activeTab === index\n                ? \"text-[#8B4513] hover:scale-105\"\n                : \"text-[#5D4037] hover:scale-105 hover:text-[#8b45137a]\"\n            }`}\n          >\n            {plan.tag}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"flex flex-col items-center space-y-4 lg:flex-row lg:items-start lg:space-x-4 lg:space-y-0\">\n        <div className=\"w-full lg:w-2/3\">\n          <div\n            className=\"relative h-96 w-full\"\n            style={{\n              border: \"1px solid #8B4513\",\n            }}\n          >\n            <Image\n              src={projectMedia[activeTab].url}\n              alt={projectMedia[activeTab].tag}\n              fill\n              sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 500px\"\n              className=\"cursor-pointer rounded-lg object-cover\"\n              onClick={() => {\n                setIsModalOpen(true);\n                setCurrentImage(activeTab);\n              }}\n            />\n          </div>\n        </div>\n\n        <div className=\"w-full lg:w-1/3\">\n          <h3\n            className=\"mb-2 text-xl font-bold\"\n            style={{\n              color: \"#5D4037\",\n            }}\n          >\n            {projectMedia[activeTab].tag}\n          </h3>\n          <p\n            style={{\n              color: \"#5D4037\",\n            }}\n          >\n            {projectMedia[activeTab].description}\n          </p>\n        </div>\n      </div>\n\n      <ImageModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        media={projectMedia}\n        initialIndex={currentImage}\n      />\n    </div>\n  );\n}\n",
          "recommendedProjects.tsx": "import ProjectCard from \"../projectCard\";\n\ntype Project = {\n  id: number;\n  images: string[];\n  name: string;\n  location: string;\n  price: number;\n  area: number;\n  deliveryTime: string;\n  rooms: string;\n};\n\ntype RecommendedProjectsProps = {\n  projects: Project[];\n};\n\nexport default function RecommendedProjects({\n  projects,\n}: RecommendedProjectsProps) {\n  return (\n    <div className=\"my-12 px-8\">\n      <h2 className=\"mb-6 text-3xl font-semibold\" style={{ color: \"#5D4037\" }}>\n        Otras propiedades que podrían interesarte\n      </h2>\n      <div className=\"flex space-x-6 overflow-x-auto\">\n        {projects.map((project) => (\n          <div\n            key={project.id}\n            className=\"relative min-w-[250px] max-w-[300px] flex-shrink-0 overflow-hidden rounded-lg bg-white shadow-md\"\n            style={{\n              border: \"2px solid #DAA520\",\n              boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.15)\",\n            }}\n          >\n            <div className=\"absolute left-2 top-2 flex flex-col space-y-1\">\n              <span className=\"rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800\">\n                {project.deliveryTime}\n              </span>\n              <span className=\"rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800\">\n                {project.rooms}\n              </span>\n            </div>\n\n            <img\n              src={project.images[0]}\n              alt={project.name}\n              className=\"h-40 w-full rounded-t-lg object-cover\"\n            />\n\n            <div className=\"p-4\">\n              <h3\n                className=\"line-clamp-1 text-lg font-semibold text-gray-800\"\n                style={{ color: \"#5D4037\" }}\n              >\n                {project.name}\n              </h3>\n              <p className=\"line-clamp-1 text-sm text-gray-600\">\n                {project.location}\n              </p>\n              <p className=\"mt-2 text-sm font-semibold text-gray-800\">\n                Precio desde\n              </p>\n              <p className=\"text-base font-bold\" style={{ color: \"#8B4513\" }}>\n                ${project.price.toLocaleString()} COP\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"
        },
        "projectCard.tsx": "import { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport dynamic from \"next/dynamic\";\nimport clsx from \"clsx\";\nimport { X } from \"lucide-react\";\nimport { ProjectMedia } from \"@/lib/definitios\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\n\nconst Edit = dynamic(() => import(\"lucide-react\").then((mod) => mod.Edit));\nconst Trash2 = dynamic(() => import(\"lucide-react\").then((mod) => mod.Trash2));\nconst User = dynamic(() => import(\"lucide-react\").then((mod) => mod.User));\n\ninterface ProjectCardProps {\n  id: number;\n  images: ProjectMedia[];\n  name: string;\n  location: string;\n  price?: number;\n  area: number;\n  bedrooms?: number;\n  bathrooms?: number;\n  parkingSpots?: number;\n  email?: string;\n  isFromMap: boolean;\n  showActions: boolean;\n  onClose?: (() => void) | null;\n  url: string;\n  urlEdit: string;\n  onDelete: (id: number, name: string) => void;\n  permission?: boolean;\n  onShowUser?: (username: string) => void;\n}\n\nexport default function ProjectCard({\n  id,\n  images,\n  name,\n  location,\n  price,\n  area,\n  bedrooms,\n  bathrooms,\n  parkingSpots,\n  email,\n  isFromMap,\n  showActions,\n  onClose,\n  url,\n  urlEdit,\n  onDelete,\n  permission,\n  onShowUser,\n}: ProjectCardProps) {\n  const router = useRouter();\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isHovered, setIsHovered] = useState(false);\n\n  useEffect(() => {\n    if (isHovered) {\n      const interval = setInterval(\n        () => setCurrentImage((prev) => (prev + 1) % images.length),\n        1000\n      );\n      return () => clearInterval(interval);\n    }\n  }, [isHovered, images.length]);\n\n  return (\n    <div className=\"transform rounded-lg bg-transparent transition-transform duration-300 hover:scale-105 dark:bg-transparent\">\n      <Link href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <div\n          className={clsx(\n            \"relative max-w-xs cursor-pointer overflow-hidden rounded-lg bg-premium-secondary shadow-md shadow-premium-secondary dark:bg-premium-secondaryDark dark:shadow-md dark:shadow-white\",\n            isFromMap ? \"z-20\" : \"z-0 h-[370px]\"\n          )}\n          onMouseEnter={() => setIsHovered(true)}\n          onMouseLeave={() => {\n            setIsHovered(false);\n            setCurrentImage(0);\n          }}\n        >\n          <div className=\"relative flex h-full flex-col rounded-lg bg-premium-background dark:bg-premium-secondaryDark\">\n            {onClose && (\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  onClose();\n                }}\n                className=\"absolute right-2 top-2 z-20 rounded-full bg-black bg-opacity-50 p-2 text-white transition-all hover:bg-opacity-75\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            )}\n\n            <div\n              className={clsx(\n                \"relative z-0 w-full overflow-hidden\",\n                !isFromMap ? \"h-full flex-shrink-0\" : \"h-72\"\n              )}\n            >\n              {images.map((img, index) => (\n                <Image\n                  key={index}\n                  src={img.url}\n                  alt={img.tag}\n                  fill\n                  priority={index === 0}\n                  loading={index === 0 ? \"eager\" : \"lazy\"}\n                  sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                  className={clsx(\n                    \"absolute left-0 top-0 h-full w-full object-cover transition-opacity duration-1000 ease-in-out\",\n                    index === currentImage ? \"opacity-100\" : \"opacity-0\"\n                  )}\n                />\n              ))}\n            </div>\n\n            {price && (\n              <div className=\"absolute left-2 top-2 z-50 rounded-full bg-black bg-opacity-75 px-2 py-1 text-sm text-white\">\n                ${price.toLocaleString()}\n              </div>\n            )}\n\n            <div className=\"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-premium-secondaryDark via-premium-secondaryDark to-transparent px-2 pb-2 pt-16 dark:from-black dark:via-gray-800\">\n              <h3 className=\"line-clamp-1 break-words text-lg font-semibold leading-tight text-white\">\n                {location}\n              </h3>\n\n              <p className=\"truncate break-all leading-tight w-full overflow-hidden text-sm text-gray-300\">\n                {name}\n              </p>\n\n              {id && permission && (\n                <p className=\"text-xs text-gray-300\">id: {id}</p>\n              )}\n              {email && permission && (\n                <p className=\"truncate break-all leading-tight text-xs text-gray-300 w-full overflow-hidden\">\n                  Usuario: {email}\n                </p>\n              )}\n\n              <div className=\"flex items-center text-xs text-gray-300 divide-x divide-gray-400 dark:divide-gray-600\">\n                {area > 0 && <p className=\"pr-2\">{area}m²</p>}\n                {bedrooms && <p className=\"pl-2 pr-2\">{bedrooms} Hab.</p>}\n                {bathrooms && <p className=\"pl-2 pr-2\">{bathrooms} Baños.</p>}\n                {parkingSpots && <p className=\"pl-2\">{parkingSpots} Parq.</p>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Link>\n\n      {showActions && (\n        <div className=\"absolute right-2 top-2 z-50 flex space-x-1\">\n          {email && (\n            <button\n              title=\"Propietario\"\n              onClick={(e) => {\n                e.preventDefault();\n                if (email && onShowUser) {\n                  onShowUser(email);\n                }\n              }}\n              className=\"rounded-full bg-green-500 p-2 text-white transition-colors hover:bg-green-600\"\n            >\n              <User className=\"h-4 w-4\" />\n            </button>\n          )}\n\n          <button\n            title=\"Editar\"\n            onClick={(e) => {\n              e.preventDefault();\n              router.push(urlEdit);\n            }}\n            className=\"rounded-full bg-blue-500 p-2 text-white transition-colors hover:bg-blue-600\"\n          >\n            <Edit className=\"h-4 w-4\" />\n          </button>\n\n          <button\n            title=\"Eliminar\"\n            onClick={(e) => {\n              e.preventDefault();\n              onDelete(id, name);\n            }}\n            className=\"rounded-full bg-red-500 p-2 text-white transition-colors hover:bg-red-600\"\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n",
        "projectManager.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport clsx from \"clsx\";\r\nimport Link from \"next/link\";\r\nimport { Plus, Search, ShoppingCart, KeySquare } from \"lucide-react\";\r\nimport { useGetProjects } from \"@/app/hooks/projects/useGetProjects\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport { useOwner } from \"@/app/hooks/projects/owner/useOwner\";\r\nimport ProjectsContainer from \"@/app/ui/projects/projectsContainer\";\r\nimport FilterMapControls from \"@/app/ui/projects/filter/filterMapControls\";\r\nimport OwnerModal from \"./project/ownerModal\";\r\nimport ModalConfirmation from \"@/app/ui/modals/modalConfirmation\";\r\nimport Alert from \"@/app/ui/alert\";\r\n\r\nconst MapToggleButton = dynamic(\r\n  () => import(\"../../ui/projects/filter/mapToggleButton\"),\r\n  {\r\n    ssr: false,\r\n  }\r\n);\r\n\r\nexport default function ProjectManager({\r\n  isProperty,\r\n  projectTypeId,\r\n  setProjectTypeId,\r\n}: {\r\n  isProperty: boolean;\r\n  projectTypeId: number;\r\n  setProjectTypeId?: (id: number) => void;\r\n}) {\r\n  const { data: session } = useSession();\r\n  const userPermissions = session?.user?.permissions || [];\r\n  const permission = userPermissions.some(\r\n    (perm) =>\r\n      perm.name ===\r\n      (isProperty ? \"Gestionar propiedades\" : \"Gestionar proyectos\")\r\n  );\r\n\r\n  const [selectedButtons, setSelectedButtons] = useState<\r\n    Record<string, number[]>\r\n  >({\r\n    cities: [],\r\n    propertyTypes: [],\r\n    housingTypes: [],\r\n    commonAreas: [],\r\n    nearbyServices: [],\r\n    memberships: [],\r\n    bedrooms: [0],\r\n    bathrooms: [0],\r\n    lobbies: [0],\r\n    area: [1],\r\n  });\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState<{\r\n    id: number;\r\n    name: string;\r\n  } | null>(null);\r\n  const { submitProject, isProcessing } = useProjectApi();\r\n  const [selectedOwner, setSelectedOwner] = useState<string | null>(null);\r\n  const [isOwnerModalOpen, setIsOwnerModalOpen] = useState(false);\r\n\r\n  const startOwnerFetch = performance.now(); // Inicia medición del tiempo de fetch de propietario\r\n\r\n  const { owner, refetchUser } = useOwner(selectedOwner ?? \"\");\r\n\r\n  const endOwnerFetch = performance.now(); // Finaliza medición del tiempo de fetch de propietario\r\n  console.log(\r\n    `⏱️ Tiempo total de fetch de propietario en ProjectManager: ${(endOwnerFetch - startOwnerFetch).toFixed(2)}ms`\r\n  );\r\n\r\n  const [priceRange, setPriceRange] = useState({ min: 0, max: 0 });\r\n  const [areaRange, setAreaRange] = useState({ min: 0, max: 0 });\r\n\r\n  const [entriesPerPage] = useState(16);\r\n  const [filterOpen, setFilterOpen] = useState(false);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [bounds, setBounds] = useState<google.maps.LatLngBounds | null>(null);\r\n  const [alertMessage, setAlertMessage] = useState<{\r\n    type: string;\r\n    message: string;\r\n  } | null>(null);\r\n\r\n  const startProjectsFetch = performance.now(); // Inicia medición del tiempo de fetch de proyectos\r\n\r\n  const {\r\n    projects,\r\n    totalEntries,\r\n    fetchMoreProjects,\r\n    debouncedSearch,\r\n    isLoading,\r\n    refreshProjects,\r\n  } = useGetProjects({\r\n    entriesPerPage,\r\n    selectedButtons,\r\n    currentProjects: [],\r\n    projectTypeId: projectTypeId,\r\n    bounds: showMap ? bounds : null,\r\n    showMap: showMap,\r\n  });\r\n\r\n  const endProjectsFetch = performance.now(); // Finaliza medición del tiempo de fetch de proyectos\r\n  console.log(\r\n    `⏱️ Tiempo total de fetch de proyectos en ProjectManager: ${(endProjectsFetch - startProjectsFetch).toFixed(2)}ms`\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (selectedOwner) {\r\n      refetchUser();\r\n    }\r\n  }, [selectedOwner]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"🔄 selectedButtons actualizado:\", selectedButtons);\r\n  }, [selectedButtons]);\r\n\r\n  useEffect(() => {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      const startRender = performance.now();\r\n      return () => {\r\n        const endRender = performance.now();\r\n        console.log(\r\n          `⏱️ Tiempo de renderizado en UI: ${(endRender - startRender).toFixed(2)}ms`\r\n        );\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const message = sessionStorage.getItem(\"projectMessage\");\r\n    if (message) {\r\n      setAlertMessage(JSON.parse(message));\r\n      sessionStorage.removeItem(\"projectMessage\");\r\n    }\r\n\r\n    setPriceRange({ min: 0, max: 2500000000 });\r\n    setAreaRange({ min: 0, max: 5000 });\r\n    setSelectedButtons((prev) => ({ ...prev, price: [], area: [] }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!showMap) {\r\n      setBounds(null);\r\n    }\r\n  }, [showMap]);\r\n\r\n  const handleOpenModal = useCallback((id: number, name: string) => {\r\n    setSelectedProject({ id, name });\r\n    setIsModalOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteProject = useCallback(async () => {\r\n    if (!selectedProject) return;\r\n\r\n    const success = await submitProject(selectedProject.id, \"delete\");\r\n\r\n    if (success) {\r\n      setAlertMessage({\r\n        type: \"success\",\r\n        message: `${isProperty ? \"Propiedad\" : \"Proyecto\"} \"${selectedProject.name}\" eliminado exitosamente.`,\r\n      });\r\n\r\n      refreshProjects();\r\n    } else {\r\n      setAlertMessage({\r\n        type: \"error\",\r\n        message: `Error al eliminar ${isProperty ? \"la propiedad\" : \"el proyecto\"} \"${selectedProject.name}\".`,\r\n      });\r\n    }\r\n\r\n    setIsModalOpen(false);\r\n    setSelectedProject(null);\r\n  }, [selectedProject, submitProject, refreshProjects, isProperty]);\r\n\r\n  const handleShowUserDetails = (email: string) => {\r\n    setSelectedOwner(email);\r\n    refetchUser();\r\n    setIsOwnerModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {alertMessage && (\r\n        <Alert\r\n          type={alertMessage.type as \"success\" | \"warning\" | \"error\" | \"info\"}\r\n          message={alertMessage.message}\r\n        />\r\n      )}\r\n\r\n      {isModalOpen && (\r\n        <ModalConfirmation\r\n          isOpen={isModalOpen}\r\n          onClose={() => setIsModalOpen(false)}\r\n          onConfirm={handleDeleteProject}\r\n          title={isProperty ? \"Eliminar Propiedad\" : \"Eliminar Proyecto\"}\r\n          message={`¿Estás seguro de que deseas eliminar ${isProperty ? \"la propiedad\" : \"el proyecto\"} \"${selectedProject?.name}\"?`}\r\n          confirmLabel={isProcessing ? \"Eliminando...\" : \"Eliminar\"}\r\n          cancelLabel=\"Cancelar\"\r\n          confirmClassName=\"bg-red-600 hover:bg-red-700 disabled:opacity-50\"\r\n        />\r\n      )}\r\n\r\n      <div className=\"bg-premium-backgroundDark px-6 pb-2 pt-6 dark:bg-premium-backgroundLight\">\r\n        <h1\r\n          className={clsx(\r\n            \"mt-24 text-center text-3xl font-semibold text-premium-primary dark:text-premium-primaryLight\",\r\n            { \"mb-10\": isProperty, \"mb-16\": !isProperty }\r\n          )}\r\n        >\r\n          Gestión de {isProperty ? \"Propiedades\" : \"Proyectos\"}\r\n        </h1>\r\n\r\n        {projectTypeId != 1 && (\r\n          <div className=\"mb-6 flex items-center justify-center gap-4\">\r\n            {[\r\n              { id: 2, label: \"Venta\", icon: <ShoppingCart /> },\r\n              { id: 3, label: \"Arriendo\", icon: <KeySquare /> },\r\n            ].map(({ id, label, icon }) => (\r\n              <button\r\n                key={id}\r\n                onClick={() => setProjectTypeId && setProjectTypeId(id)}\r\n                className={`flex items-center gap-2 rounded-lg px-6 py-2 shadow-md transition-colors ${\r\n                  projectTypeId === id\r\n                    ? \"bg-premium-primary text-white hover:bg-premium-primaryDark dark:bg-premium-primaryLight\"\r\n                    : \"bg-premium-backgroundLight text-premium-primary hover:bg-premium-backgroundDark dark:bg-premium-background dark:text-premium-primaryLight dark:hover:bg-premium-backgroundLight\"\r\n                }`}\r\n              >\r\n                {icon}\r\n                <span>{label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mb-10 flex flex-col items-center gap-8 sm:px-6 md:flex-row md:justify-between\">\r\n          <div className=\"relative w-full\">\r\n            <input\r\n              name=\"searchProject\"\r\n              type=\"text\"\r\n              placeholder={\r\n                isProperty ? \"Buscar propiedades...\" : \"Buscar proyectos...\"\r\n              }\r\n              onChange={(e) => debouncedSearch(e.target.value)}\r\n              className=\"w-full rounded-md border border-premium-borderColor bg-premium-backgroundLight p-2 pl-10 text-premium-textPrimary dark:border-premium-borderColorHover dark:bg-premium-background dark:text-premium-textPrimary\"\r\n            />\r\n            <Search className=\"absolute left-3 top-2 text-premium-textPlaceholder dark:text-premium-textSecondary\" />\r\n          </div>\r\n\r\n          <Link\r\n            href={\r\n              isProperty\r\n                ? \"/admin/propiedades/crear-propiedad\"\r\n                : \"/admin/proyectos/crear-proyecto\"\r\n            }\r\n            className=\"flex items-center space-x-2 whitespace-nowrap rounded-lg bg-green-600 px-6 py-2 text-white shadow-md transition-colors hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800\"\r\n          >\r\n            <Plus />\r\n            <span>{isProperty ? \"Nueva Propiedad\" : \"Nuevo Proyecto\"}</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <hr className=\"w-full border-premium-borderColor dark:border-premium-borderColorHover\" />\r\n\r\n      <div\r\n        className={clsx(\r\n          \"bg-premium-backgroundDark px-2 sm:px-6 md:px-20 pt-2 dark:bg-premium-backgroundLight pb-14\",\r\n          showMap && \"pb-7\"\r\n        )}\r\n      >\r\n        <FilterMapControls\r\n          isProperty={isProperty}\r\n          filterOpen={filterOpen}\r\n          setFilterOpen={setFilterOpen}\r\n          showMap={showMap}\r\n          setShowMap={setShowMap}\r\n          totalEntries={totalEntries}\r\n        />\r\n      </div>\r\n\r\n      <ProjectsContainer\r\n        projects={projects}\r\n        totalEntries={totalEntries}\r\n        isLoading={isLoading}\r\n        fetchMoreProjects={fetchMoreProjects}\r\n        filterOpen={filterOpen}\r\n        showMap={showMap}\r\n        setFilterOpen={setFilterOpen}\r\n        priceRange={priceRange}\r\n        areaRange={areaRange}\r\n        selectedButtons={selectedButtons}\r\n        setSelectedButtons={setSelectedButtons}\r\n        isProperty={isProperty}\r\n        setBounds={setBounds}\r\n        onDelete={handleOpenModal}\r\n        permission={permission}\r\n        onShowUser={handleShowUserDetails}\r\n      />\r\n\r\n      <MapToggleButton showMap={showMap} setShowMap={setShowMap} />\r\n\r\n      <OwnerModal\r\n        show={isOwnerModalOpen}\r\n        flag={!!owner}\r\n        onClose={() => {\r\n          setIsOwnerModalOpen(false);\r\n          setSelectedOwner(null);\r\n        }}\r\n        onSubmit={(e) => e.preventDefault()}\r\n        handleChange={() => {}}\r\n        user={\r\n          owner || {\r\n            id: 0,\r\n            username: \"\",\r\n            names: \"\",\r\n            lastnames: \"\",\r\n            email: \"\",\r\n            phoneNumber: \"\",\r\n          }\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
        "projectsContainer.tsx": "\"use client\";\n\nimport React, { useEffect, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport { useProjectsMetadata } from \"@/app/hooks/projects/Metadata/useProjectsMetadata\";\nimport ProjectFilter from \"@/app/ui/projects/filter/projectFilter\";\nimport ProjectCard from \"@/app/ui/projects/projectCard\";\nimport ProjectCardSkeleton from \"../skeletons/projectCardSkeleton\";\nimport ProjectsMap from \"@/app/ui/projects/projectsMap\";\n\ninterface ProjectsContainerProps {\n  projects: ProjectSummary[];\n  totalEntries: number;\n  isLoading: boolean;\n  fetchMoreProjects: () => void;\n  filterOpen: boolean;\n  showMap: boolean;\n  setFilterOpen: (open: boolean) => void;\n  priceRange: { min: number; max: number };\n  areaRange: { min: number; max: number };\n  selectedButtons: Record<string, number[]>;\n  setSelectedButtons: React.Dispatch<\n    React.SetStateAction<Record<string, number[]>>\n  >;\n  isProperty: boolean;\n  setBounds: (bounds: google.maps.LatLngBounds | null) => void;\n  onDelete: (id: number, name: string) => void;\n  permission?: boolean;\n  onShowUser?: (username: string) => void;\n}\n\nconst ProjectsContainer = ({\n  projects,\n  totalEntries,\n  isLoading,\n  fetchMoreProjects,\n  filterOpen,\n  showMap,\n  setFilterOpen,\n  priceRange,\n  areaRange,\n  selectedButtons,\n  setSelectedButtons,\n  isProperty,\n  setBounds,\n  onDelete,\n  permission,\n  onShowUser,\n}: ProjectsContainerProps) => {\n  const skeletonCount = 8;\n\n  // 🔄 Medición del tiempo de fetch de metadata solo cuando cambia `metadata`\n  const { metadata, isLoadingMetadata } = useProjectsMetadata();\n\n  useEffect(() => {\n    const startMetadataFetch = performance.now();\n\n    return () => {\n      const endMetadataFetch = performance.now();\n      console.log(\n        `⏱️ Tiempo total de fetch de metadata en ProjectsContainer: ${(endMetadataFetch - startMetadataFetch).toFixed(2)}ms`\n      );\n    };\n  }, [metadata]);\n\n  // 📌 Optimización de lista de proyectos con useMemo\n  const projectCards = useMemo(\n    () =>\n      projects.map((project) => (\n        <div\n          key={project.id}\n          className=\"relative flex items-center justify-center\"\n        >\n          <div className=\"w-full max-w-xs\">\n            <ProjectCard\n              id={project.id}\n              images={project.projectMedia}\n              name={project.name}\n              location={project.city.name}\n              price={project.price || 0}\n              area={project.totalArea}\n              bedrooms={project.bedrooms || undefined}\n              bathrooms={project.bathrooms || undefined}\n              parkingSpots={project.parkingSpots || undefined}\n              email={project.email}\n              isFromMap={false}\n              showActions={true}\n              onClose={null}\n              url={\n                isProperty\n                  ? `/inmobiliaria/${project.id}`\n                  : `/proyectos/${project.id}`\n              }\n              urlEdit={\n                isProperty\n                  ? `/admin/propiedades/${project.id}`\n                  : `/admin/proyectos/${project.id}`\n              }\n              onDelete={onDelete}\n              permission={permission}\n              onShowUser={onShowUser}\n            />\n          </div>\n        </div>\n      )),\n    [projects, isProperty, onDelete, permission, onShowUser]\n  );\n\n  // 📌 Optimización de skeletons con useMemo\n  const skeletons = useMemo(\n    () =>\n      Array.from({ length: skeletonCount }).map((_, index) => (\n        <div\n          key={`skeleton-${index}`}\n          className=\"relative flex items-center justify-center\"\n        >\n          <div className=\"w-full max-w-xs\">\n            <ProjectCardSkeleton />\n          </div>\n        </div>\n      )),\n    []\n  );\n\n  return (\n    <div\n      className={clsx(\n        \"flex flex-col sm:flex-row sm:justify-between\",\n        filterOpen && \"gap-4 sm:space-x-6\"\n      )}\n    >\n      {filterOpen && (\n        <div\n          className={clsx(\n            \"sm:ml-6 lg:ml-8 xl:ml-20 w-full flex flex-col items-center sm:w-72 sm:px-10\",\n            !showMap ? \"-mt-10 mb-10 py-4\" : \"\"\n          )}\n        >\n          <ProjectFilter\n            isProperty={isProperty}\n            selectedButtons={selectedButtons}\n            setSelectedButtons={setSelectedButtons}\n            setFilterOpen={setFilterOpen}\n            priceRange={priceRange}\n            areaRange={areaRange}\n            metadata={metadata}\n            isLoading={isLoadingMetadata}\n          />\n        </div>\n      )}\n\n      {showMap ? (\n        <div className=\"relative h-screen w-full transition-transform duration-300\">\n          <ProjectsMap\n            projects={projects}\n            setBounds={setBounds}\n            showMap={showMap}\n            onDelete={onDelete}\n          />\n        </div>\n      ) : (\n        <div\n          className={clsx(\n            \"-mt-10 mb-10 flex w-full flex-col\",\n            !filterOpen\n              ? \" px-6 py-4 lg:px-8 xl:px-20\"\n              : \" pr-6 p-4 lg:pr-8 xl:pr-20\"\n          )}\n        >\n          <div\n            className={clsx(\n              \"mb-8 grid gap-x-4 gap-y-6\",\n              filterOpen\n                ? \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4\"\n                : \"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5\"\n            )}\n          >\n            {isLoading ? skeletons : projectCards}\n          </div>\n\n          {projects.length < totalEntries && (\n            <button\n              onClick={fetchMoreProjects}\n              disabled={isLoading}\n              className={clsx(\n                \"mt-6 self-center rounded-lg px-6 py-2 text-white shadow-lg transition-colors\",\n                isLoading\n                  ? \"bg-premium-primaryDark cursor-not-allowed\"\n                  : \"bg-premium-primary hover:bg-premium-primaryDark dark:bg-premium-primaryLight dark:hover:bg-premium-primaryDark\"\n              )}\n            >\n              {isLoading ? \"Cargando...\" : \"Mostrar más\"}\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// 🚀 Evitar renders innecesarios con React.memo\nexport default React.memo(ProjectsContainer, (prevProps, nextProps) => {\n  return (\n    prevProps.projects.length === nextProps.projects.length &&\n    prevProps.isLoading === nextProps.isLoading &&\n    prevProps.totalEntries === nextProps.totalEntries &&\n    JSON.stringify(prevProps.selectedButtons) ===\n      JSON.stringify(nextProps.selectedButtons) &&\n    prevProps.filterOpen === nextProps.filterOpen &&\n    prevProps.showMap === nextProps.showMap\n  );\n});\n",
        "projectsMap.tsx": "\"use client\";\n\nimport { memo, useMemo, useState, useEffect, useRef } from \"react\";\nimport { GoogleMap, useLoadScript } from \"@react-google-maps/api\";\nimport { Plus, Minus, LocateFixed } from \"lucide-react\";\nimport { ProjectSummary } from \"@/lib/definitios\";\nimport ProjectCard from \"./projectCard\";\nimport Loader from \"../loader\";\n\nconst GOOGLE_MAPS_LIBRARIES: (\"places\" | \"marker\")[] = [\"places\", \"marker\"];\n\nconst containerStyle = {\n  width: \"100%\",\n  height: \"100vh\",\n};\n\nconst DEFAULT_CENTER = { lat: 4.5709, lng: -74.2973 };\n\nconst ProjectsMap = ({\n  projects,\n  setBounds,\n  showMap,\n  onDelete,\n}: {\n  projects: ProjectSummary[];\n  setBounds: (bounds: google.maps.LatLngBounds | null) => void;\n  showMap: boolean;\n  onDelete: (id: number, name: string) => void;\n}) => {\n  const [selectedProject, setSelectedProject] = useState<ProjectSummary | null>(\n    null\n  );\n  const [currentCenter, setCurrentCenter] = useState(DEFAULT_CENTER);\n  const [userLocation, setUserLocation] = useState<{\n    lat: number;\n    lng: number;\n  } | null>(null);\n  const mapRef = useRef<google.maps.Map | null>(null);\n  let [markers, setMarkers] = useState<\n    google.maps.marker.AdvancedMarkerElement[]\n  >([]);\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n\n  const { isLoaded } = useLoadScript({\n    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || \"\",\n    libraries: GOOGLE_MAPS_LIBRARIES,\n  });\n\n  const handleBoundsChanged = () => {\n    if (!showMap) {\n      return;\n    }\n\n    if (mapRef.current) {\n      const newBounds = mapRef.current.getBounds();\n      if (newBounds) {\n        setBounds(newBounds);\n      }\n    }\n  };\n\n  const handleCloseCard = () => {\n    setSelectedProject(null);\n  };\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        const location = { lat: latitude, lng: longitude };\n        setCurrentCenter(location);\n        setUserLocation(location);\n      },\n      (error) => {\n        console.error(\n          \"Error obteniendo la ubicación del usuario:\",\n          error.message\n        );\n        setCurrentCenter(DEFAULT_CENTER);\n      }\n    );\n  }, []);\n\n  const validProjects = useMemo(() => {\n    return projects.map((project) => ({\n      ...project,\n      latitude: parseFloat(project.latitude as unknown as string),\n      longitude: parseFloat(project.longitude as unknown as string),\n    }));\n  }, [projects]);\n\n  useEffect(() => {\n    if (mapRef.current && isLoaded) {\n      clearMarkers();\n      addMarkers(mapRef.current);\n    }\n  }, [validProjects, userLocation, isLoaded, isMapLoaded]);\n\n  const clearMarkers = () => {\n    markers.forEach((marker) => {\n      marker.map = null;\n      marker.element?.remove();\n    });\n    setMarkers([]);\n  };\n\n  const addMarkers = (map: google.maps.Map) => {\n    clearMarkers();\n    const newMarkers: google.maps.marker.AdvancedMarkerElement[] = [];\n\n    validProjects.forEach((project) => {\n      const contentDiv = document.createElement(\"div\");\n      contentDiv.innerHTML = `\n      <div class=\"bg-premium-primary hover:bg-premium-primaryDark hover:scale-105 focus:scale-105 focus:bg-premium-primaryDark text-white font-semibold py-1 px-3 rounded-full text-sm transition-all duration-300 ease-in-out\">\n        $${project.price?.toLocaleString()}\n      </div>\n    `;\n\n      const marker = new google.maps.marker.AdvancedMarkerElement({\n        position: { lat: project.latitude, lng: project.longitude },\n        map,\n        content: contentDiv,\n      });\n\n      marker.addListener(\"click\", () => {\n        setSelectedProject(project);\n      });\n\n      newMarkers.push(marker);\n    });\n\n    if (userLocation) {\n      const { AdvancedMarkerElement } = google.maps.marker;\n\n      markers.forEach((marker) => {\n        const markerLat =\n          typeof marker.position?.lat === \"function\"\n            ? marker.position.lat()\n            : marker.position?.lat;\n        const markerLng =\n          typeof marker.position?.lng === \"function\"\n            ? marker.position.lng()\n            : marker.position?.lng;\n\n        if (markerLat === userLocation.lat && markerLng === userLocation.lng) {\n          marker.map = null;\n        }\n      });\n\n      const userMarker = new AdvancedMarkerElement({\n        position: userLocation,\n        map,\n      });\n\n      newMarkers.push(userMarker);\n    }\n\n    setMarkers((prev) => [...prev, ...newMarkers]);\n  };\n\n  const handleZoomIn = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! + 1);\n    }\n  };\n\n  const handleZoomOut = () => {\n    const map = mapRef.current;\n    if (map) {\n      map.setZoom(map.getZoom()! - 1);\n    }\n  };\n\n  const handleGoToUserLocation = () => {\n    const map = mapRef.current;\n    if (userLocation && map) {\n      map.panTo(userLocation);\n      map.setZoom(14);\n    } else {\n      console.warn(\"No se pudo obtener la ubicación del usuario.\");\n    }\n  };\n\n  if (!isLoaded) {\n    return (\n      <div className=\"flex justify-center items-center w-full h-full\">\n        <Loader size={48} />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        center={currentCenter}\n        zoom={12}\n        onLoad={(map) => {\n          mapRef.current = map;\n          setIsMapLoaded(true);\n          setTimeout(() => handleBoundsChanged(), 500);\n        }}\n        onBoundsChanged={handleBoundsChanged}\n        options={{\n          zoomControl: false,\n          streetViewControl: false,\n          mapTypeControl: false,\n          fullscreenControl: false,\n          mapTypeId: \"roadmap\",\n          mapId: \"78a223abe416be2b\",\n        }}\n      />\n\n      <div className=\"absolute top-4 left-4 z-10 flex flex-col space-y-2\">\n        <button\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomIn}\n        >\n          <Plus size={24} />\n        </button>\n\n        <button\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-black border-b border-gray-200 hover:bg-gray-100\"\n          onClick={handleZoomOut}\n        >\n          <Minus size={24} />\n        </button>\n\n        <button\n          className=\"flex items-center justify-center w-12 h-12 bg-white text-gray-700 hover:bg-gray-100\"\n          onClick={handleGoToUserLocation}\n        >\n          <LocateFixed size={24} />\n        </button>\n      </div>\n\n      {selectedProject && (\n        <div className=\"absolute left-1/2 top-1/3 sm:top-4 z-20 w-72 -translate-x-1/2 transform rounded-lg bg-premium-backgroundLight shadow-lg sm:left-auto sm:right-4 sm:translate-x-0 dark:bg-premium-backgroundDark\">\n          <ProjectCard\n            id={selectedProject.id}\n            images={selectedProject.projectMedia}\n            name={selectedProject.name}\n            location={selectedProject.city.name}\n            price={selectedProject.price || undefined}\n            area={selectedProject.totalArea || 0}\n            isFromMap={true}\n            showActions={false}\n            onClose={handleCloseCard}\n            url={`/inmobiliaria/${selectedProject.id}`}\n            urlEdit={`/admin/propiedades/${selectedProject.id}`}\n            onDelete={onDelete}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default memo(ProjectsMap);\n",
        "projectView": {
          "basicProjectView.tsx": "import clsx from \"clsx\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport FormDisplay from \"@/app/ui/modals/formDisplay\";\r\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\r\n\r\ninterface BasicProjectViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function BasicProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: BasicProjectViewProps) {\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        Datos Básicos\r\n      </h2>\r\n\r\n      <div className=\"space-y-6\">\r\n        <FormDisplay\r\n          label={`Nombre del ${project.propertyType?.id ? \"Proyecto\" : \"Propiedad\"}`}\r\n          value={project.name || \"No especificado\"}\r\n        />\r\n\r\n        <div\r\n          className={clsx(\r\n            \"grid grid-cols-1 gap-4\",\r\n            project.propertyType?.id && \"sm:grid-cols-2\"\r\n          )}\r\n        >\r\n          <FormDisplay\r\n            label=\"Tipo de Propiedad\"\r\n            value={project.propertyType?.name || \"No especificado\"}\r\n          />\r\n\r\n          {project.projectType?.id && (\r\n            <FormDisplay\r\n              label=\"Finalidad\"\r\n              value={project.projectType?.name || \"No especificado\"}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <FormDisplay\r\n          label=\"Correo del Propietario\"\r\n          value={project?.email || \"No especificado\"}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Resumen breve\"\r\n          value={project.shortDescription || \"No especificado\"}\r\n          rows={3}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Descripción Completa\"\r\n          value={project.detailedDescription || \"No especificado\"}\r\n          rows={6}\r\n        />\r\n\r\n        <FormDisplay\r\n          label=\"Propio de la empresa\"\r\n          value={project.membership === 1004 ? \"Sí\" : \"No\"}\r\n        />\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "detailsProjectView.tsx": "import { useMemo } from \"react\";\r\nimport {\r\n  ProjectData,\r\n  CommonArea,\r\n  NearbyService,\r\n  HousingType,\r\n} from \"@/lib/definitios\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport FormDisplay from \"@/app/ui/modals/formDisplay\";\r\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\r\n\r\ninterface DetailsProjectViewProps {\r\n  project: Partial<ProjectData>;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function DetailsProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: DetailsProjectViewProps) {\r\n  const shouldShowField = useMemo(() => {\r\n    const propertyTypeId = project.propertyType?.id;\r\n\r\n    return {\r\n      price: project.projectType?.id === 2 || project.projectType?.id === 3,\r\n      availableUnits:\r\n        project.projectType?.id === 2 || project.projectType?.id === 3,\r\n      housingType: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      complexName:\r\n        propertyTypeId === 1002 &&\r\n        (project.projectType?.id === 2 || project.projectType?.id === 3),\r\n      availableDate: true,\r\n      commonAreas: project.commonAreas && project.commonAreas.length > 0,\r\n      nearbyServices:\r\n        project.nearbyServices && project.nearbyServices.length > 0,\r\n    };\r\n  }, [project]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Detalles del Proyecto\"\r\n          : \"Detalles de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        {shouldShowField.price && (\r\n          <FormDisplay\r\n            label=\"Precio\"\r\n            value={formatNumber(project.price ?? 0)}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.availableUnits && (\r\n          <FormDisplay\r\n            label=\"Unidades Disponibles\"\r\n            value={String(project.availableUnits ?? \"No especificado\")}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.housingType && (\r\n          <FormDisplay\r\n            label=\"Tipo de Vivienda\"\r\n            value={project.housingType?.name ?? \"No especificado\"}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.availableDate && (\r\n          <FormDisplay\r\n            label=\"Fecha Estimada de Entrega\"\r\n            value={\r\n              project.availableDate\r\n                ? new Date(project.availableDate).toLocaleDateString(\"es-ES\", {\r\n                    year: \"numeric\",\r\n                    month: \"long\",\r\n                  })\r\n                : \"No especificado\"\r\n            }\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.complexName && (\r\n          <FormDisplay\r\n            label=\"Nombre del Conjunto\"\r\n            value={project.complexName ?? \"No especificado\"}\r\n          />\r\n        )}\r\n\r\n        {shouldShowField.commonAreas && (\r\n          <DetailList label=\"Áreas Comunes\" items={project.commonAreas} />\r\n        )}\r\n\r\n        {shouldShowField.nearbyServices && (\r\n          <DetailList\r\n            label=\"Servicios Cercanos\"\r\n            items={project.nearbyServices}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DetailList = ({\r\n  label,\r\n  items,\r\n}: {\r\n  label: string;\r\n  items?: (CommonArea | NearbyService | HousingType)[];\r\n}) =>\r\n  items && items.length > 0 ? (\r\n    <div>\r\n      <h3 className=\"mb-2 text-lg font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {label}\r\n      </h3>\r\n\r\n      <ul className=\"grid grid-cols-1 gap-2 text-premium-textPrimary dark:text-premium-textSecondary\">\r\n        {items.map((item) => (\r\n          <li key={item.id} className=\"pl-4 before:content-['•'] before:mr-2\">\r\n            {item.name}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  ) : null;\r\n",
          "featuresProjectView.tsx": "import { useMemo } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport FormDisplay from \"@/app/ui/modals/formDisplay\";\r\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\r\n\r\ninterface FeaturesProjectViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function FeaturesProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: FeaturesProjectViewProps) {\r\n  const shouldShowField = useMemo(() => {\r\n    const propertyTypeId = project.propertyType?.id;\r\n\r\n    return {\r\n      socioeconomicLevel: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      yearBuilt: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      bedrooms: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      storageUnits: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      balcony: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      laundryArea: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      customizationOptions: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      terrace: propertyTypeId === 1001,\r\n      garden: propertyTypeId === 1001,\r\n      bathrooms:\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004,\r\n      lobbies:\r\n        propertyTypeId === 1001 ||\r\n        propertyTypeId === 1002 ||\r\n        propertyTypeId === 1004,\r\n      elevator: propertyTypeId === 1001 || propertyTypeId === 1002,\r\n      towers: propertyTypeId === 1002,\r\n      floorNumber: propertyTypeId === 1002,\r\n      freeHeight:\r\n        propertyTypeId === 1004 ||\r\n        propertyTypeId === 1003 ||\r\n        propertyTypeId === 1005,\r\n      width:\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007,\r\n      length:\r\n        propertyTypeId === 1005 ||\r\n        propertyTypeId === 1006 ||\r\n        propertyTypeId === 1007,\r\n      heavyParking: propertyTypeId === 1005,\r\n    };\r\n  }, [project.propertyType?.id]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Características del Proyecto\"\r\n          : \"Características de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        <FormDisplay\r\n          label=\"Área Total (m²)\"\r\n          value={String(project.totalArea ?? \"No especificado\")}\r\n        />\r\n        <FormDisplay\r\n          label=\"Área Construida (m²)\"\r\n          value={String(project.builtArea ?? \"No especificado\")}\r\n        />\r\n        {shouldShowField.socioeconomicLevel && (\r\n          <FormDisplay\r\n            label=\"Nivel Socioeconómico\"\r\n            value={String(project.socioeconomicLevel ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.yearBuilt && (\r\n          <FormDisplay\r\n            label=\"Año de Construcción\"\r\n            value={String(project.yearBuilt ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.bedrooms && (\r\n          <FormDisplay\r\n            label=\"Número de Habitaciones\"\r\n            value={String(project.bedrooms ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.bathrooms && (\r\n          <FormDisplay\r\n            label=\"Número de Baños\"\r\n            value={String(project.bathrooms ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.lobbies && (\r\n          <FormDisplay\r\n            label=\"Número de Salas de Estar\"\r\n            value={String(project.lobbies ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.freeHeight && (\r\n          <FormDisplay\r\n            label=\"Altura Libre (m)\"\r\n            value={String(project.freeHeight ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.width && (\r\n          <FormDisplay\r\n            label=\"Frente (m)\"\r\n            value={String(project.width ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.length && (\r\n          <FormDisplay\r\n            label=\"Fondo (m)\"\r\n            value={String(project.length ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.heavyParking && (\r\n          <FormDisplay\r\n            label=\"Espacios de Parqueo Pesado\"\r\n            value={String(project.heavyParking ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.towers && (\r\n          <FormDisplay\r\n            label=\"Número de Torres\"\r\n            value={String(project.towers ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.floorNumber && (\r\n          <FormDisplay\r\n            label=\"Número de Piso\"\r\n            value={String(project.floorNumber ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        {shouldShowField.storageUnits && (\r\n          <FormDisplay\r\n            label=\"Número de Depósitos\"\r\n            value={String(project.storageUnits ?? \"No especificado\")}\r\n          />\r\n        )}\r\n        <FormDisplay\r\n          label=\"Espacios de Parqueo\"\r\n          value={String(project.parkingSpots ?? \"No especificado\")}\r\n        />\r\n      </div>\r\n\r\n      {(project.propertyType?.id === 1001 ||\r\n        project.propertyType?.id === 1002) && (\r\n        <div>\r\n          <h3 className=\"my-4 text-center text-lg font-semibold text-premium-primary dark:text-premium-primaryLight\">\r\n            Características Adicionales\r\n          </h3>\r\n\r\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n            {shouldShowField.elevator && (\r\n              <FormDisplay\r\n                label=\"Elevador\"\r\n                value={project.elevator ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.terrace && (\r\n              <FormDisplay\r\n                label=\"Terraza\"\r\n                value={project.terrace ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.balcony && (\r\n              <FormDisplay\r\n                label=\"Balcón\"\r\n                value={project.balcony ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.garden && (\r\n              <FormDisplay\r\n                label=\"Jardín\"\r\n                value={project.garden ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.laundryArea && (\r\n              <FormDisplay\r\n                label=\"Área de Lavado\"\r\n                value={project.laundryArea ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n            {shouldShowField.customizationOptions && (\r\n              <FormDisplay\r\n                label=\"Opciones de Personalización\"\r\n                value={project.customizationOptions ? \"Sí\" : \"No\"}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "imagesProjectView.tsx": "import { ProjectData, ImageType } from \"@/lib/definitios\";\r\nimport ProjectMediaGallery from \"./projectMediaGallery\";\r\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\r\n\r\ninterface ImagesProjectViewProps {\r\n  project: ProjectData;\r\n  imagesTypes: ImageType[];\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function ImagesProjectView({\r\n  project,\r\n  imagesTypes,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: ImagesProjectViewProps) {\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id === 1\r\n          ? \"Imágenes del Proyecto\"\r\n          : \"Imágenes de la Propiedad\"}\r\n      </h2>\r\n\r\n      <ProjectMediaGallery\r\n        images={project.projectMedia || []}\r\n        imageTypes={imagesTypes}\r\n        commonAreas={project.commonAreas || []}\r\n      />\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n        hideConfirmation={true}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "locationProjectView.tsx": "import { useMemo } from \"react\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport { useLoadScript } from \"@react-google-maps/api\";\r\nimport LocationMap from \"../locationMap\";\r\nimport StepNavigationButtons from \"../../admin/stepNavigationButtons\";\r\nimport FormDisplay from \"@/app/ui/modals/formDisplay\";\r\n\r\nconst GOOGLE_MAPS_LIBRARIES: (\"places\" | \"marker\")[] = [\"places\", \"marker\"];\r\n\r\ninterface LocationProjectViewProps {\r\n  project: ProjectData;\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onPrevious: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nexport default function LocationProjectView({\r\n  project,\r\n  currentStep,\r\n  totalSteps,\r\n  onPrevious,\r\n  onNext,\r\n}: LocationProjectViewProps) {\r\n  const mapsApiKey = useMemo(\r\n    () => process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || \"\",\r\n    []\r\n  );\r\n\r\n  const { isLoaded } = useLoadScript({\r\n    googleMapsApiKey: mapsApiKey,\r\n    libraries: GOOGLE_MAPS_LIBRARIES,\r\n  });\r\n\r\n  return (\r\n    <div className=\"container mx-auto w-full rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\r\n      <h2 className=\"mb-6 text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight\">\r\n        {project.projectType?.id\r\n          ? \"Ubicación del Proyecto\"\r\n          : \"Ubicación de la Propiedad\"}\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n        <FormDisplay\r\n          label=\"Departamento\"\r\n          value={project.city?.departament?.name || \"No especificado\"}\r\n        />\r\n        <FormDisplay\r\n          label=\"Ciudad\"\r\n          value={project.city?.name || \"No especificado\"}\r\n        />\r\n      </div>\r\n\r\n      <FormDisplay\r\n        label=\"Dirección\"\r\n        value={project.address || \"No especificado\"}\r\n      />\r\n\r\n      <div className=\"relative mt-6 h-64 w-full\">\r\n        <LocationMap\r\n          isLoaded={isLoaded}\r\n          coordinates={{\r\n            lat: project.latitude || 4.5709,\r\n            lng: project.longitude || -74.2973,\r\n          }}\r\n          onLocationSelect={() => {}}\r\n          onUpdateAddress={undefined}\r\n        />\r\n      </div>\r\n\r\n      <StepNavigationButtons\r\n        currentStep={currentStep}\r\n        totalSteps={totalSteps}\r\n        onPrevious={onPrevious}\r\n        onNext={onNext}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
          "projectMediaGallery.tsx": "import { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { ProjectMedia, ImageType, CommonArea } from \"@/lib/definitios\";\r\nimport ImageModal from \"../project/imageModal\";\r\n\r\ninterface ProjectMediaGalleryProps {\r\n  images: ProjectMedia[];\r\n  imageTypes: ImageType[];\r\n  commonAreas: CommonArea[];\r\n}\r\n\r\nexport default function ProjectMediaGallery({\r\n  images,\r\n  imageTypes,\r\n  commonAreas,\r\n}: ProjectMediaGalleryProps) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const handleImageClick = (clickedImage: ProjectMedia) => {\r\n    const realIndex = images.findIndex((img) => img.url === clickedImage.url);\r\n    if (realIndex !== -1) {\r\n      setSelectedIndex(realIndex);\r\n      setIsModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const imagesByType = imageTypes.map((type) => ({\r\n    typeName: type.name,\r\n    images: images.filter((img) => img.imageType === type.id),\r\n  }));\r\n\r\n  const imagesByCommonArea = commonAreas.map((area) => ({\r\n    areaName: area.name,\r\n    images: images.filter((img) => img.commonArea === area.id),\r\n  }));\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {imagesByType.map(({ typeName, images }) => (\r\n        <ImageSection\r\n          key={typeName}\r\n          category={typeName}\r\n          images={images}\r\n          onImageClick={handleImageClick}\r\n        />\r\n      ))}\r\n\r\n      <h2 className=\"text-center text-2xl font-bold text-premium-primary dark:text-premium-primaryLight mt-6\">\r\n        Imágenes de Áreas Comunes\r\n      </h2>\r\n\r\n      {imagesByCommonArea.map(({ areaName, images }) => (\r\n        <ImageSection\r\n          key={areaName}\r\n          category={areaName}\r\n          images={images}\r\n          onImageClick={handleImageClick}\r\n        />\r\n      ))}\r\n\r\n      <ImageModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        media={images}\r\n        initialIndex={selectedIndex}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ImageSection = ({\r\n  category,\r\n  images,\r\n  onImageClick,\r\n}: {\r\n  category: string;\r\n  images: ProjectMedia[];\r\n  onImageClick: (image: ProjectMedia) => void;\r\n}) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"text-lg font-semibold text-premium-textPrimary dark:text-premium-textPrimary\">\r\n      {category}\r\n    </h3>\r\n    {images.length > 0 ? (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {images.map((image, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"flex flex-col bg-premium-backgroundLight dark:bg-premium-backgroundDark rounded-lg shadow-md overflow-hidden\"\r\n          >\r\n            <div\r\n              onClick={() => onImageClick(image)}\r\n              className=\"relative cursor-pointer\"\r\n            >\r\n              <div\r\n                className=\"relative h-48 w-full rounded-t-lg bg-cover bg-center\"\r\n                style={{ backgroundImage: `url(${encodeURI(image.url)})` }}\r\n              >\r\n                {image.tag && (\r\n                  <p className=\"absolute bottom-0 w-full bg-black bg-opacity-50 p-2 text-center text-xs text-white\">\r\n                    {image.tag}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {image.tag && (\r\n                <p className=\"absolute bottom-0 w-full bg-black bg-opacity-50 p-2 text-center text-xs text-white\">\r\n                  {image.tag}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {image.description && (\r\n              <div className=\"py-2 px-4\">\r\n                <label className=\"text-md font-semibold text-premium-textPrimary dark:text-premium-textSecondary\">\r\n                  Descripción\r\n                </label>\r\n                <p className=\"text-sm text-premium-textPrimary dark:text-premium-textSecondary\">\r\n                  {image.description}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    ) : (\r\n      <p className=\"text-premium-textSecondary dark:text-premium-textSecondary\">\r\n        No hay imágenes disponibles.\r\n      </p>\r\n    )}\r\n  </div>\r\n);\r\n",
          "projectView.tsx": "\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ProjectData } from \"@/lib/definitios\";\r\nimport useLocations from \"@/app/hooks/projects/Metadata/location/useLocations\";\r\nimport useBasicMetadata from \"@/app/hooks/projects/Metadata/useBasicMetadata\";\r\nimport useImageTypes from \"@/app/hooks/projects/Metadata/imageTypes/useImageTypes\";\r\nimport { useProjectById } from \"@/app/hooks/projects/useProjectById\";\r\nimport ProgressBar from \"@/app/ui/projects/createEditProject/progressBar\";\r\nimport BasicProjectView from \"./basicProjectView\";\r\nimport LocationProjectView from \"./locationProjectView\";\r\nimport FeaturesProjectView from \"./featuresProjectView\";\r\nimport DetailsProjectView from \"./detailsProjectView\";\r\nimport ImagesProjectView from \"./imagesProjectView\";\r\nimport CreateProjectSkeleton from \"@/app/ui/skeletons/createProjectSkeleton\";\r\n\r\ninterface ProjectViewProps {\r\n  projectId: number;\r\n  isProperty: boolean;\r\n}\r\n\r\nexport default function ProjectView({\r\n  projectId,\r\n  isProperty,\r\n}: ProjectViewProps) {\r\n  const { project, loading: loadingProject } = useProjectById(projectId);\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const totalSteps = 5;\r\n  const router = useRouter();\r\n\r\n  const { locations } = useLocations();\r\n  const { metadata } = useBasicMetadata();\r\n  const { imagesTypes, loadingImages } = useImageTypes();\r\n\r\n  const handleNextStep = () => {\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep((prevStep) => prevStep + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousStep = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep((prevStep) => prevStep - 1);\r\n    }\r\n  };\r\n\r\n  const projectData: Partial<ProjectData> = project ?? {};\r\n\r\n  const currentView = useMemo(() => {\r\n    if (!metadata || !locations || loadingProject || loadingImages) {\r\n      return <CreateProjectSkeleton />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {currentStep === 0 && (\r\n          <BasicProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 1 && (\r\n          <LocationProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 2 && (\r\n          <FeaturesProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 3 && (\r\n          <DetailsProjectView\r\n            project={projectData}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n        {currentStep === 4 && (\r\n          <ImagesProjectView\r\n            project={projectData}\r\n            imagesTypes={imagesTypes}\r\n            currentStep={currentStep}\r\n            totalSteps={totalSteps}\r\n            onPrevious={handlePreviousStep}\r\n            onNext={handleNextStep}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }, [currentStep, metadata, locations, project, imagesTypes, loadingImages]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <h1 className=\"mb-10 mt-24 text-center text-3xl font-semibold text-premium-primary lg:mt-20 dark:text-premium-primaryLight\">\r\n        Visualizar {isProperty ? \"Propiedad\" : \"Proyecto\"}\r\n      </h1>\r\n\r\n      <div className=\"mx-auto mb-10 text-center\">\r\n        <ProgressBar currentStep={currentStep} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 mx-auto max-w-3xl\">{currentView}</div>\r\n\r\n      <div className=\"mt-4 text-center\">\r\n        <button\r\n          className=\"rounded-md bg-premium-secondary px-4 py-2 text-white transition-colors hover:bg-premium-secondaryLight dark:bg-premium-secondaryDark dark:hover:bg-premium-secondaryLight\"\r\n          onClick={() => router.push(\"/admin/solicitudes\")}\r\n        >\r\n          Volver\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        },
        "shareButton.tsx": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\n/*import {\n  FaShareAlt,\n  FaWhatsapp,\n  FaFacebook,\n  FaTwitter,\n  FaTelegram,\n  FaTimes,\n} from \"react-icons/fa\";*/\n\ntype ShareButtonProps = {\n  message: string;\n};\n\nexport default function ShareButton({ message }: ShareButtonProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [url, setUrl] = useState(\"\");\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      setUrl(window.location.href);\n    }\n  }, []);\n\n  const handleShare = (platform: string) => {\n    let shareUrl = \"\";\n    const encodedMessage = encodeURIComponent(`${message} ${url}`);\n\n    switch (platform) {\n      case \"whatsapp\":\n        shareUrl = `https://api.whatsapp.com/send?text=${encodedMessage}`;\n        break;\n      case \"facebook\":\n        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(\n          url\n        )}`;\n        break;\n      case \"twitter\":\n        shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(\n          url\n        )}&text=${encodeURIComponent(message)}`;\n        break;\n      case \"telegram\":\n        shareUrl = `https://t.me/share/url?url=${encodeURIComponent(\n          url\n        )}&text=${encodedMessage}`;\n        break;\n      default:\n        return;\n    }\n\n    window.open(\n      shareUrl,\n      \"_blank\",\n      \"width=600,height=400,scrollbars=no,toolbar=no,location=no,status=no,menubar=no\"\n    );\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"rounded-full p-2 text-[#8B4513] transition duration-300 hover:text-[#DAA520]\"\n        aria-label=\"Compartir\"\n      >\n        <FaShareAlt size={20} />\n      </button>\n      {isOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n          <div className=\"relative w-64 rounded-lg bg-white px-4 pb-4 pt-2\">\n            <button\n              onClick={() => setIsOpen(false)}\n              className=\"absolute right-3 top-3 text-gray-500 transition duration-200 hover:text-gray-700\"\n              aria-label=\"Cerrar modal\"\n            >\n              <FaTimes size={20} />\n            </button>\n            <h2\n              className=\"mb-4 text-center text-lg font-semibold\"\n              style={{ color: \"#8B4513\" }}\n            >\n              Compartir en:\n            </h2>\n            <div className=\"flex items-center justify-around\">\n              <button\n                onClick={() => handleShare(\"whatsapp\")}\n                className=\"text-green-500 transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en WhatsApp\"\n              >\n                <FaWhatsapp size={30} />\n              </button>\n              <button\n                onClick={() => handleShare(\"facebook\")}\n                className=\"text-blue-500 transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en Facebook\"\n              >\n                <FaFacebook size={30} />\n              </button>\n              <button\n                onClick={() => handleShare(\"twitter\")}\n                className=\"text-blue-400 transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en Twitter\"\n              >\n                <FaTwitter size={30} />\n              </button>\n              <button\n                onClick={() => handleShare(\"telegram\")}\n                className=\"text-blue-300 transition duration-200 hover:scale-110\"\n                aria-label=\"Compartir en Telegram\"\n              >\n                <FaTelegram size={30} />\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "realEstate": {
        "cardProperty.tsx": "import { useState, useEffect } from \"react\";\n//import { FaTimes } from \"react-icons/fa\";\nimport Link from \"next/link\";\n\ntype ProjectCardProps = {\n  images: string[];\n  name: string;\n  location: string;\n  price: number;\n  area: number;\n  address: string;\n  idMembership: number;\n  showDetails: boolean;\n  isFromMap: boolean;\n  onClose?: (() => void) | null;\n  url: string;\n};\n\nexport default function ProjectCard({\n  images,\n  name,\n  location,\n  price,\n  area,\n  address,\n  idMembership,\n  isFromMap,\n  showDetails,\n  onClose,\n  url,\n}: ProjectCardProps) {\n  const [currentImage, setCurrentImage] = useState(0);\n  const [isHovered, setIsHovered] = useState(false);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isHovered) {\n      interval = setInterval(() => {\n        setCurrentImage((prevImage) => (prevImage + 1) % images.length);\n      }, 1000);\n    }\n\n    return () => clearInterval(interval);\n  }, [isHovered, images.length]);\n\n  return (\n    <Link href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n      <div\n        className={`dark:bg-secondary from-primaryLight to-primaryDark hover:from-primaryLight hover:to-primary animate-borderFlow relative z-50 transform cursor-pointer overflow-hidden rounded-lg border-transparent bg-white bg-gradient-to-r bg-clip-border p-1 shadow-lg shadow-slate-400 transition-transform duration-300 hover:scale-105 dark:shadow-black ${\n          isFromMap ? \"max-w-xs\" : \"min-h-52 max-w-sm\"\n        }`}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => {\n          setIsHovered(false);\n          setCurrentImage(0);\n        }}\n      >\n        <div className=\"bg-background dark:bg-secondary relative rounded-lg\">\n          {/* Botón de cierre solo si onClose no es null */}\n          {onClose && (\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                onClose();\n              }}\n              className=\"absolute right-2 top-2 z-50 rounded-full bg-black bg-opacity-50 p-2 text-white transition-all hover:bg-opacity-75 dark:bg-black dark:hover:bg-opacity-75\"\n            >\n              <FaTimes />\n            </button>\n          )}\n\n          {/* Imagen principal con efecto de desvanecido */}\n          <div className=\"relative h-64 w-full overflow-hidden\">\n            {images.map((img, index) => (\n              <img\n                key={index}\n                src={img}\n                alt=\"Project\"\n                className={`absolute left-0 top-0 h-full w-full object-cover transition-opacity duration-1000 ease-in-out ${\n                  index === currentImage ? \"opacity-100\" : \"opacity-0\"\n                }`}\n              />\n            ))}\n\n            {/* Degradado en la parte inferior de la imagen solo si isFromMap es false */}\n            {!isFromMap && (\n              <div className=\"dark:from-darkBackground dark:via-darkBackgroundLight absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-900 via-gray-800 to-transparent\" />\n            )}\n          </div>\n\n          {/* Espacio adicional debajo de la imagen solo si isFromMap es false */}\n          {!isFromMap && (\n            <div className=\"bg-background dark:bg-secondary p-4\">\n              {/* Información de la propiedad */}\n              <h3 className=\"text-lg font-bold text-white\">{name}</h3>\n              <p className=\"text-base text-gray-300\">{location}</p>\n\n              {showDetails && (\n                <>\n                  <p className=\"text-sm text-gray-300\">{address}</p>\n                  <p className=\"text-sm text-gray-300\">Área: {area} m²</p>\n                </>\n              )}\n\n              <p className=\"text-lg font-bold text-white\">\n                ${price.toLocaleString()} COP\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </Link>\n  );\n}\n"
      },
      "requests": {
        "requestModal.tsx": "import { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport ModalHeader from \"../modals/modalHeader\";\r\nimport ModalFooter from \"../modals/modalFooter\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst FormTextArea = dynamic(() => import(\"@/app/ui/modals/formTextArea\"), {\r\n  ssr: false,\r\n});\r\nconst FormSelect = dynamic(() => import(\"@/app/ui/modals/formSelect\"), {\r\n  ssr: false,\r\n});\r\n\r\ninterface RequestModalProps {\r\n  show: boolean;\r\n  flag: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  handleChange: (\r\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLSelectElement>\r\n  ) => void;\r\n  message: string;\r\n  actionType: \"approve\" | \"reject\" | \"revision\";\r\n  setRequestAction: (action: \"approve\" | \"reject\" | \"revision\") => void;\r\n  errors: {\r\n    messageError: string;\r\n    actionTypeError: string;\r\n  };\r\n}\r\n\r\nexport default function RequestModal({\r\n  show,\r\n  flag,\r\n  onClose,\r\n  onSubmit,\r\n  handleChange,\r\n  message,\r\n  actionType,\r\n  setRequestAction,\r\n  errors,\r\n}: RequestModalProps) {\r\n  useBodyOverflow(show);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-md overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader title=\"Responder Solicitud\" onClose={onClose} />\r\n\r\n        {/* Body */}\r\n        <form\r\n          id=\"requestForm\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          className=\"h-[50vh] space-y-4 overflow-y-auto px-6 py-4\"\r\n        >\r\n          <FormSelect\r\n            label=\"Estado de la Solicitud\"\r\n            name=\"requestStatus\"\r\n            value={actionType}\r\n            onChange={(e) =>\r\n              setRequestAction(\r\n                e.target.value as \"approve\" | \"reject\" | \"revision\"\r\n              )\r\n            }\r\n            options={[\r\n              { id: \"approve\", name: \"Aprobar\" },\r\n              { id: \"reject\", name: \"Rechazar\" },\r\n              { id: \"revision\", name: \"Enviar a Revisión\" },\r\n            ]}\r\n            error={errors?.actionTypeError || \"\"}\r\n            flag={flag}\r\n          />\r\n\r\n          <FormTextArea\r\n            label=\"Mensaje de respuesta\"\r\n            name=\"responseMessage\"\r\n            value={message}\r\n            placeholder=\"Escribe un mensaje\"\r\n            onChange={handleChange}\r\n            rows={7}\r\n            maxLength={500}\r\n            error={errors.messageError}\r\n          />\r\n        </form>\r\n\r\n        {/* Footer */}\r\n        <ModalFooter onClose={onClose} formId=\"requestForm\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "roles": {
        "roleModal.tsx": "import { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport { Role, Permission } from \"@/lib/definitios\";\r\nimport ModalHeader from \"../modals/modalHeader\";\r\nimport ModalFooter from \"../modals/modalFooter\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/formInput\"), {\r\n  ssr: false,\r\n});\r\nconst FormSelect = dynamic(() => import(\"@/app/ui/modals/formSelect\"), {\r\n  ssr: false,\r\n});\r\n\r\ninterface RoleModalProps {\r\n  show: boolean;\r\n  flag: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  handleChange: (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => void;\r\n  role: Role;\r\n  permissions: Permission[];\r\n  errors: {\r\n    nameError: string;\r\n    permissionsError: string;\r\n  };\r\n}\r\n\r\nexport default function RoleModal({\r\n  show,\r\n  flag,\r\n  onClose,\r\n  onSubmit,\r\n  handleChange,\r\n  role,\r\n  permissions,\r\n  errors,\r\n}: RoleModalProps) {\r\n  useBodyOverflow(show);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader\r\n          title={role.id ? \"Editar Rol\" : \"Registrar Rol\"}\r\n          onClose={onClose}\r\n        />\r\n\r\n        {/* Body */}\r\n        <form\r\n          id=\"roleForm\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          className=\"h-[50vh] space-y-4 overflow-y-auto px-6 py-4\"\r\n        >\r\n          <FormInput\r\n            label=\"Nombre del rol\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={role.name || \"\"}\r\n            placeholder=\"Nombre del rol\"\r\n            maxLength={50}\r\n            onChange={handleChange}\r\n            error={errors.nameError}\r\n            flag={flag}\r\n          />\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-premium-textPrimary dark:text-premium-textPrimary mb-2\">\r\n              Permisos actuales\r\n            </label>\r\n            <ul className=\"list-disc pl-5 text-premium-textSecondary dark:text-premium-textSecondary\">\r\n              {role.permissions && role.permissions.length > 0 ? (\r\n                role.permissions.map((perm) => (\r\n                  <li key={perm.id} className=\"mb-1\">\r\n                    {perm.name}\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <li className=\"italic text-gray-500\">\r\n                  No hay permisos asignados\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n\r\n          <FormSelect\r\n            label=\"Asignar permiso\"\r\n            name=\"addPermission\"\r\n            value={\"\"}\r\n            options={(permissions ?? [])\r\n              .filter(\r\n                (perm) =>\r\n                  !role.permissions?.some(\r\n                    (assignedPerm) => assignedPerm.id === perm.id\r\n                  )\r\n              )\r\n              .map((perm) => ({ id: perm.id, name: perm.name }))}\r\n            onChange={handleChange}\r\n            error={errors.permissionsError}\r\n            flag={flag}\r\n          />\r\n\r\n          <FormSelect\r\n            label=\"Eliminar permiso\"\r\n            name=\"deletePermission\"\r\n            value={\"\"}\r\n            options={role.permissions || []}\r\n            onChange={handleChange}\r\n            flag={flag}\r\n          />\r\n        </form>\r\n\r\n        {/* Footer */}\r\n        <ModalFooter onClose={onClose} formId=\"roleForm\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "skeletons": {
        "AdminCardSkeleton.tsx": "export default function AdminCardSkeleton() {\r\n  return (\r\n    <div className=\"h-full animate-pulse rounded-lg bg-premium-backgroundAlt p-6 text-center shadow-md dark:bg-premium-secondaryLight\">\r\n      <div className=\"mx-auto mb-4 h-10 w-10 rounded-full bg-premium-backgroundDark dark:bg-premium-secondaryDark\" />\r\n      <div className=\"h-6 w-3/4 mx-auto rounded-md bg-premium-backgroundDark dark:bg-premium-secondaryDark\" />\r\n      <div className=\"mt-4 h-4 w-5/6 mx-auto rounded-md bg-premium-backgroundDark dark:bg-premium-secondaryDark\" />\r\n    </div>\r\n  );\r\n}\r\n",
        "createProjectSkeleton.tsx": "export default function CreateProjectSkeleton() {\n  return (\n    <div className=\"container mx-auto max-w-3xl w-full animate-pulse rounded-lg bg-premium-backgroundLight p-6 shadow-lg dark:bg-premium-backgroundDark\">\n      <div className=\"mb-10 text-center\">\n        <div className=\"mx-auto h-8 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-10 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-10 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-24 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"mb-4 h-6 w-48 rounded bg-gray-300 dark:bg-gray-700\" />\n        <div className=\"h-32 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n\n      <div className=\"mt-6 flex justify-end\">\n        <div className=\"h-10 w-24 rounded bg-gray-300 dark:bg-gray-700\" />\n      </div>\n    </div>\n  );\n}\n",
        "filterSkeleton.tsx": "export default function FilterSkeleton() {\r\n  return (\r\n    <div className=\"w-full rounded-lg bg-premium-background py-4 shadow-md transition-all duration-300 ease-in-out sm:w-72 md:w-80 dark:bg-premium-backgroundDark animate-pulse\">\r\n      <div className=\"mt-1 space-y-6\">\r\n        <div className=\"flex items-center justify-between rounded-md pl-2 pr-6\">\r\n          <div className=\"w-24 h-6 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n          <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n        </div>\r\n\r\n        <hr className=\"border-premium-borderColor dark:border-premium-borderColorHover\" />\r\n\r\n        <div className=\"space-y-4 overflow-x-hidden px-3 py-1 sm:max-h-[65vh] sm:overflow-y-auto\">\r\n          {Array.from({ length: 6 }).map((_, index) => (\r\n            <div key={index} className=\"flex items-center space-x-3\">\r\n              <div className=\"w-6 h-6 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n              <div className=\"w-32 h-5 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n            </div>\r\n          ))}\r\n\r\n          {Array.from({ length: 2 }).map((_, index) => (\r\n            <div key={index} className=\"space-y-2\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-6 h-6 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n                <div className=\"w-32 h-5 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n              </div>\r\n              <div className=\"w-full h-3 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n            </div>\r\n          ))}\r\n\r\n          {Array.from({ length: 3 }).map((_, index) => (\r\n            <div key={index} className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-6 h-6 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n                <div className=\"w-32 h-5 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n                <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
        "notificationSkeleton.tsx": "export default function NotificationSkeleton() {\r\n  return (\r\n    <ul className=\"p-4 space-y-3\">\r\n      {Array.from({ length: 5 }).map((_, index) => (\r\n        <li\r\n          key={index}\r\n          className=\"flex items-center space-x-4 animate-pulse bg-transparent px-3 py-2 rounded-md dark:bg-transparent\"\r\n        >\r\n          <div className=\"w-12 h-4 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n\r\n          <div className=\"flex-1 space-y-1\">\r\n            <div className=\"h-4 bg-gray-300 dark:bg-gray-700 rounded w-3/4\" />\r\n            <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/2\" />\r\n          </div>\r\n\r\n          <div className=\"w-4 h-4 bg-gray-300 dark:bg-gray-700 rounded-full\" />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n",
        "projectCardSkeleton.tsx": "export default function ProjectCardSkeleton() {\n  return (\n    <div className=\"transform rounded-lg bg-transparent transition-transform duration-300 hover:scale-105 dark:bg-transparent\">\n      <div className=\"relative h-[370px] max-w-xs cursor-pointer overflow-hidden rounded-lg bg-gray-300 shadow-md dark:bg-gray-700\">\n        <div className=\"relative h-[80%] w-full animate-pulse bg-gray-200 dark:bg-gray-600\" />\n\n        <div className=\"absolute left-2 top-2 h-6 w-20 animate-pulse rounded-full bg-gray-300 dark:bg-gray-700\" />\n\n        <div className=\"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-gray-800 via-gray-700 to-transparent px-2 pb-2 pt-16\">\n          <div className=\"mb-2 h-4 w-3/4 animate-pulse rounded bg-gray-200 dark:bg-gray-600\" />\n          <div className=\"mb-1 h-3 w-1/2 animate-pulse rounded bg-gray-200 dark:bg-gray-600\" />\n          <div className=\"h-3 w-1/4 animate-pulse rounded bg-gray-200 dark:bg-gray-600\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "projectCarouselSkeleton.tsx": "import clsx from \"clsx\";\n\nexport function ProjectCarouselSkeleton() {\n  return (\n    <div className=\"relative mx-auto w-full px-8 sm:my-5\">\n      <div className=\"relative flex h-80 items-center justify-center overflow-hidden\">\n        {[...Array(5)].map((_, index) => {\n          const positions = [\n            {\n              translateX: \"-120%\",\n              scale: \"scale-50\",\n              zIndex: \"z-0\",\n              width: \"300px\",\n              height: \"200px\",\n            },\n            {\n              translateX: \"-60%\",\n              scale: \"scale-75\",\n              zIndex: \"z-5\",\n              width: \"400px\",\n              height: \"250px\",\n            },\n            {\n              translateX: \"0%\",\n              scale: \"scale-100\",\n              zIndex: \"z-10\",\n              width: \"500px\",\n              height: \"300px\",\n            },\n            {\n              translateX: \"60%\",\n              scale: \"scale-75\",\n              zIndex: \"z-5\",\n              width: \"400px\",\n              height: \"250px\",\n            },\n            {\n              translateX: \"120%\",\n              scale: \"scale-50\",\n              zIndex: \"z-0\",\n              width: \"300px\",\n              height: \"200px\",\n            },\n          ];\n\n          return (\n            <div\n              key={index}\n              className={clsx(\n                \"absolute animate-pulse rounded-lg bg-gray-300\",\n                positions[index].scale,\n                positions[index].zIndex\n              )}\n              style={{\n                width: positions[index].width,\n                height: positions[index].height,\n                transform: `translateX(${positions[index].translateX})`,\n                transition: \"transform 0.5s ease, scale 0.5s ease\",\n              }}\n            />\n          );\n        })}\n      </div>\n\n      <button className=\"absolute left-2 top-1/2 h-8 w-8 -translate-y-1/2 transform animate-pulse rounded-full bg-gray-300 sm:left-3 lg:left-4\" />\n      <button className=\"absolute right-2 top-1/2 h-8 w-8 -translate-y-1/2 transform animate-pulse rounded-full bg-gray-300 sm:right-3 lg:right-4\" />\n\n      <div className=\"mt-4 flex justify-center space-x-2\">\n        {[...Array(5)].map((_, index) => (\n          <div\n            key={index}\n            className={clsx(\n              \"h-2 w-2 animate-pulse rounded-full\",\n              index === 2 ? \"scale-125 bg-gray-400\" : \"bg-gray-300\"\n            )}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n",
        "projectCommonAreasSkeleton.tsx": "export function ProjectCommonAreasSkeleton() {\n  return (\n    <div className=\"my-8 w-full lg:w-2/3\">\n      <div className=\"mb-4 h-8 w-48 animate-pulse rounded bg-gray-300\" />\n\n      {Array(3)\n        .fill(0)\n        .map((_, index) => (\n          <div\n            key={index}\n            className=\"mb-4 animate-pulse rounded-lg bg-white p-4 shadow\"\n            style={{\n              boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n            }}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div className=\"h-6 w-32 rounded bg-gray-300\" />\n              <div className=\"h-4 w-6 rounded bg-gray-300\" />\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n",
        "projectDetailedDescriptionSkeleton.tsx": "export function ProjectDetailedDescriptionSkeleton() {\n  return (\n    <div className=\"my-8 animate-pulse\">\n      <div className=\"mb-4 h-6 w-1/4 rounded bg-gray-400\" />\n      <div className=\"space-y-2\">\n        <div className=\"h-4 w-full rounded bg-gray-300\" />\n        <div className=\"h-4 w-5/6 rounded bg-gray-300\" />\n        <div className=\"h-4 w-3/4 rounded bg-gray-300\" />\n        <div className=\"h-4 w-4/5 rounded bg-gray-300\" />\n      </div>\n    </div>\n  );\n}\n",
        "projectDetailsSkeleton.tsx": "export default function ProjectDetailsSkeleton() {\n  const skeletonGroups = Array(3).fill(0);\n\n  return (\n    <div className=\"my-8\">\n      <h2 className=\"mb-6 text-2xl font-semibold text-[#8B4513]\">\n        Detalles del Proyecto\n      </h2>\n      <div className=\"space-y-6\">\n        {skeletonGroups.map((_, index) => (\n          <div key={index} className=\"mb-4\">\n            <div\n              className=\"flex items-center justify-between rounded-lg p-4 shadow\"\n              style={{\n                backgroundColor: \"#ffffff\",\n                boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n              }}\n            >\n              <span className=\"h-4 w-1/3 animate-pulse rounded bg-gray-300\" />\n              <div className=\"h-4 w-5 animate-pulse rounded-full bg-gray-300\" />\n            </div>\n\n            <div className=\"mt-2 grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4\">\n              {Array(6)\n                .fill(0)\n                .map((_, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex animate-pulse flex-col space-y-2 rounded-lg p-4 shadow\"\n                    style={{\n                      backgroundColor: \"#ffffff\",\n                      boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.1)\",\n                    }}\n                  >\n                    <div className=\"h-10 w-10 rounded-full bg-gray-300\" />\n                    <div className=\"h-4 w-3/4 rounded bg-gray-300\" />\n                    <div className=\"h-4 w-1/2 rounded bg-gray-300\" />\n                  </div>\n                ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
        "projectHeaderSkeleton.tsx": "export default function ProjectHeaderSkeleton() {\n  return (\n    <div className=\"w-full animate-pulse px-4 pt-28 sm:px-6 lg:px-12 lg:pt-24\">\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"h-8 w-56 rounded-md bg-gray-300\" />\n            <div className=\"h-8 w-8 rounded-full bg-gray-300\" />\n          </div>\n          <div className=\"mt-2 flex flex-col sm:mt-0 lg:items-end lg:justify-start\">\n            <div className=\"h-8 w-32 rounded-md bg-gray-300\" />\n          </div>\n        </div>\n\n        <div className=\"lg:mt-2 lg:grid lg:grid-cols-2 lg:items-start lg:gap-2\">\n          <div className=\"flex flex-col text-lg lg:flex-row lg:items-center lg:space-x-2\">\n            <div className=\"flex items-center\">\n              <div className=\"h-6 w-48 rounded-md bg-gray-300\" />\n            </div>\n            <div className=\"hidden h-6 w-2 rounded-md bg-gray-300 lg:inline\" />\n            <div className=\"mt-2 h-6 w-48 rounded-md bg-gray-300 pl-4 font-semibold lg:pl-0\" />\n          </div>\n\n          <div className=\"hidden items-center text-sm lg:ml-auto lg:mt-0 lg:flex\">\n            <div className=\"h-6 w-6 rounded-full bg-gray-300\" />\n            <div className=\"ml-2 h-6 w-48 rounded-md bg-gray-300\" />\n          </div>\n        </div>\n\n        <div className=\"flex items-center text-sm lg:hidden\">\n          <div className=\"h-6 w-6 rounded-full bg-gray-300\" />\n          <div className=\"ml-2 h-6 w-48 rounded-md bg-gray-300\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "projectNearbyServicesSkeleton.tsx": "export function ProjectNearbyServicesSkeleton() {\n  return (\n    <div className=\"my-8\">\n      <div className=\"mb-6 h-8 w-64 animate-pulse rounded bg-gray-300\" />\n\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n        {Array(4)\n          .fill(0)\n          .map((_, index) => (\n            <div\n              key={index}\n              className=\"flex animate-pulse items-center space-x-4 rounded-lg border bg-gray-100 p-4\"\n              style={{\n                borderColor: \"#EDEDED\",\n              }}\n            >\n              <div className=\"h-10 w-10 rounded-full bg-gray-300\" />\n\n              <div className=\"flex flex-1 flex-col\">\n                <div className=\"mb-2 h-4 w-3/4 rounded bg-gray-300\" />\n                <div className=\"h-6 w-1/2 rounded bg-gray-300\" />\n              </div>\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n}\n",
        "projectPlansSkeleton.tsx": "export function ProjectPlansSkeleton() {\n  return (\n    <div\n      className=\"mt-8 animate-pulse rounded-lg p-4\"\n      style={{\n        backgroundColor: \"transparent\",\n        border: \"1px solid #5D4037\",\n      }}\n    >\n      <div className=\"mb-2 h-8 w-48 animate-pulse rounded bg-gray-300\" />\n\n      <hr\n        className=\"mb-4 w-full border-t-2\"\n        style={{\n          borderColor: \"#5D4037\",\n        }}\n      />\n\n      <div className=\"flex flex-col items-center space-y-4 lg:flex-row lg:items-start lg:space-x-8 lg:space-y-0\">\n        <div\n          className=\"h-64 w-full animate-pulse rounded bg-gray-300 lg:w-2/3\"\n          style={{\n            border: \"1px solid #8B4513\",\n          }}\n        />\n\n        <div className=\"w-full space-y-4 lg:w-1/3\">\n          <div className=\"mb-4 h-8 w-1/3 animate-pulse rounded bg-gray-300\" />\n\n          <div className=\"mb-2 h-4 w-full animate-pulse rounded bg-gray-300\" />\n          <div className=\"mb-2 h-4 w-3/4 animate-pulse rounded bg-gray-300\" />\n          <div className=\"h-4 w-2/3 animate-pulse rounded bg-gray-300\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
        "projectShortDescriptionSkeleton.tsx": "export function ProjectShortDescriptionSkeleton() {\n  return (\n    <div className=\"my-8 animate-pulse\">\n      <div className=\"mb-2 h-4 w-3/4 rounded bg-gray-300\" />\n      <div className=\"h-4 w-2/4 rounded bg-gray-300\" />\n    </div>\n  );\n}\n",
        "tableSkeleton.tsx": "export default function TableSkeleton() {\n  const rows = 5;\n  const columns = 8;\n\n  return (\n    <div className=\"animate-pulse rounded-3xl bg-premium-backgroundLight px-4 py-5 shadow-lg lg:mx-4 lg:px-8 dark:bg-premium-secondaryLight\">\n      <div className=\"mb-4 flex flex-col gap-3 text-xs sm:flex-row sm:items-center sm:justify-between sm:gap-0 sm:text-sm md:px-3\">\n        <div className=\"flex items-center space-x-2 px-2 sm:px-0\">\n          <div className=\"h-6 w-16 rounded bg-gray-300 dark:bg-gray-700\" />\n          <div className=\"h-6 w-12 rounded bg-gray-300 dark:bg-gray-700\" />\n          <div className=\"h-6 w-24 rounded bg-gray-300 dark:bg-gray-700\" />\n        </div>\n        <div className=\"relative w-48\">\n          <div className=\"h-8 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n        </div>\n      </div>\n\n      <div className=\"table-responsive w-full overflow-x-auto\">\n        <table className=\"table-flush table w-full text-sm\">\n          <thead className=\"thead-light text-xs\">\n            <tr>\n              {Array.from({ length: columns }).map((_, index) => (\n                <th\n                  key={index}\n                  className=\"px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\"\n                >\n                  <div className=\"h-6 w-20 rounded bg-gray-300 dark:bg-gray-700 mx-auto\" />\n                </th>\n              ))}\n              <th className=\"px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\">\n                <div className=\"h-6 w-20 rounded bg-gray-300 dark:bg-gray-700 mx-auto\" />\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {Array.from({ length: rows }).map((_, rowIndex) => (\n              <tr\n                key={rowIndex}\n                className=\"h-20 border-t border-premium-borderColor hover:bg-premium-backgroundLight dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\"\n              >\n                {Array.from({ length: columns }).map((_, colIndex) => (\n                  <td key={colIndex} className=\"px-4 py-2\">\n                    <div className=\"h-6 w-full rounded bg-gray-300 dark:bg-gray-700\" />\n                  </td>\n                ))}\n                <td className=\"flex items-center justify-center px-4 py-2\">\n                  <div className=\"h-4 w-12 rounded bg-gray-300 dark:bg-gray-700\" />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"mt-4 flex items-center justify-between text-sm text-premium-textPrimary md:px-3 dark:text-premium-textPrimary\">\n        <div className=\"h-4 w-64 rounded bg-gray-300 dark:bg-gray-700\" />\n\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-700\" />\n          {Array.from({ length: 1 }).map((_, index) => (\n            <div\n              key={index}\n              className=\"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-700\"\n            />\n          ))}\n          <div className=\"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-700\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n"
      },
      "table": {
        "table.tsx": "import React, { useState, useMemo, useCallback } from \"react\";\nimport { Header } from \"@/lib/definitios\";\nimport { mergeSort } from \"@/utils/mergeSort\";\nimport TableHeader from \"./tableHeader\";\nimport TableRow from \"./tableRow\";\nimport TablePagination from \"./tablePagination\";\nimport TableSearch from \"./tableSearch\";\n\ntype TableProps<T extends Record<string, any>> = {\n  data: T[];\n  headers: Header<T>[];\n  totalEntries: number;\n  entry: string;\n  stateLabels?: { true: string; false: string };\n  currentPage: number;\n  goToPage: (pageNumber: number) => void;\n  goToNextPage: () => void;\n  goToPreviousPage: () => void;\n  entriesPerPage: number;\n  handleEntriesPerPageChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\n  handleSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onEditClick?: (item: T) => void;\n  onDeleteClick?: (item: T) => void;\n  actions?: {\n    icon: React.ElementType;\n    title: string;\n    className: string;\n    redirectUrl?: string | ((item: T) => string);\n    openInNewTab?: boolean;\n    onClick?: (item: T) => void;\n  }[];\n};\n\nexport default function Table<T extends { id?: number }>({\n  data,\n  headers,\n  totalEntries,\n  entry,\n  currentPage,\n  goToPage,\n  goToNextPage,\n  goToPreviousPage,\n  entriesPerPage,\n  handleEntriesPerPageChange,\n  handleSearchChange,\n  onEditClick,\n  onDeleteClick,\n  actions,\n}: TableProps<T>) {\n  const [sortState, setSortState] = useState<{\n    column: keyof T | null;\n    direction: \"asc\" | \"desc\" | null;\n  }>({\n    column: null,\n    direction: null,\n  });\n\n  const totalPages = useMemo(\n    () => Math.ceil(totalEntries / entriesPerPage),\n    [totalEntries, entriesPerPage]\n  );\n\n  const handleSort = useCallback((columnKey: keyof T | string) => {\n    setSortState((prev) => {\n      if (prev.column === columnKey) {\n        if (prev.direction === \"asc\")\n          return { column: columnKey as keyof T, direction: \"desc\" };\n        if (prev.direction === \"desc\") return { column: null, direction: null };\n      }\n      return { column: columnKey as keyof T, direction: \"asc\" };\n    });\n  }, []);\n\n  const sortedData = useMemo(() => {\n    if (!sortState.column || !sortState.direction) return data;\n    return mergeSort(data, sortState.column, sortState.direction);\n  }, [data, sortState]);\n\n  return (\n    <div className=\"rounded-3xl bg-premium-backgroundLight px-4 py-5 shadow-lg lg:px-8 dark:bg-premium-secondaryLight\">\n      <TableSearch\n        entriesPerPage={entriesPerPage}\n        handleEntriesPerPageChange={handleEntriesPerPageChange}\n        handleSearchChange={handleSearchChange}\n        entry={entry}\n      />\n      <div className=\"table-responsive overflow-x-auto\">\n        <table className=\"table-flush table text-sm w-full\">\n          <TableHeader\n            headers={headers}\n            sortState={sortState}\n            handleSort={handleSort}\n          />\n\n          <tbody>\n            {sortedData.map((item) => (\n              <TableRow\n                key={item.id}\n                item={item}\n                headers={headers}\n                onEditClick={onEditClick}\n                onDeleteClick={onDeleteClick}\n                actions={actions}\n              />\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"mt-4 flex items-center justify-between text-sm text-premium-textPrimary md:px-3 dark:text-premium-textPrimary\">\n        <span>\n          Mostrando {currentPage * entriesPerPage - entriesPerPage + 1} a{\" \"}\n          {Math.min(currentPage * entriesPerPage, totalEntries)} de{\" \"}\n          {totalEntries} {entry}\n        </span>\n        <TablePagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          goToPage={goToPage}\n          goToPreviousPage={goToPreviousPage}\n          goToNextPage={goToNextPage}\n        />\n      </div>\n    </div>\n  );\n}\n",
        "tableHeader.tsx": "import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Header } from \"@/lib/definitios\";\r\nimport { ChevronsUpDown } from \"lucide-react\";\r\n\r\ninterface TableHeaderProps<T> {\r\n  headers: Header<T>[];\r\n  sortState: { column: keyof T | null; direction: \"asc\" | \"desc\" | null };\r\n  handleSort: (columnKey: keyof T | string) => void;\r\n}\r\n\r\nexport default function TableHeader<T>({\r\n  headers,\r\n  sortState,\r\n  handleSort,\r\n}: TableHeaderProps<T>) {\r\n  return (\r\n    <thead className=\"thead-light text-xs\">\r\n      <tr>\r\n        {headers.map(({ label, key }) => {\r\n          const chevronsUpDownClass = clsx(\r\n            \"w-5 h-5 flex-shrink-0 transition-colors\",\r\n            sortState.column === key\r\n              ? \"text-premium-primary dark:text-premium-primary\"\r\n              : \"text-premium-textPlaceholder dark:text-premium-textSecondary\"\r\n          );\r\n\r\n          return (\r\n            <th\r\n              key={key as string}\r\n              className=\"cursor-pointer px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\"\r\n              onClick={() => handleSort(key)}\r\n            >\r\n              <div className=\"flex items-center justify-center gap-1\">\r\n                <span className=\"text-sm font-bold\">{label.toUpperCase()}</span>\r\n                <ChevronsUpDown className={chevronsUpDownClass} />\r\n              </div>\r\n            </th>\r\n          );\r\n        })}\r\n        <th className=\"px-4 py-2 text-center text-sm font-bold text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          ACCIÓN\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n  );\r\n}\r\n",
        "tablePagination.tsx": "import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface TablePaginationProps {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  goToPage: (pageNumber: number) => void;\r\n  goToPreviousPage: () => void;\r\n  goToNextPage: () => void;\r\n}\r\n\r\nexport default function TablePagination({\r\n  currentPage,\r\n  totalPages,\r\n  goToPage,\r\n  goToPreviousPage,\r\n  goToNextPage,\r\n}: TablePaginationProps) {\r\n  return (\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button\r\n        onClick={goToPreviousPage}\r\n        disabled={currentPage === 1}\r\n        className={clsx(\r\n          \"rounded-full border p-2 focus:outline-none transition-colors\",\r\n          \"border-premium-borderColor dark:border-premium-borderColorHover\",\r\n          currentPage === 1\r\n            ? \"text-premium-textPlaceholder cursor-not-allowed\"\r\n            : \"text-premium-primary dark:text-premium-primaryLight hover:bg-premium-primaryLight dark:hover:bg-premium-primaryDark hover:text-white\"\r\n        )}\r\n      >\r\n        <ChevronLeft className=\"h-4 w-4\" />\r\n      </button>\r\n\r\n      {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n        const startPage = Math.max(\r\n          1,\r\n          Math.min(currentPage - 2, totalPages - 4)\r\n        );\r\n        const pageNumber = startPage + i;\r\n        return (\r\n          <button\r\n            key={pageNumber}\r\n            onClick={() => goToPage(pageNumber)}\r\n            className={clsx(\r\n              \"rounded-full px-3 py-1 transition-colors duration-300\",\r\n              currentPage === pageNumber\r\n                ? \"bg-premium-primaryLight text-white hover:bg-premium-primary dark:bg-premium-primary dark:hover:bg-premium-primaryDark\"\r\n                : \"bg-premium-backgroundLight text-premium-textPrimary hover:bg-premium-primaryLight dark:bg-premium-backgroundDark dark:text-premium-textPrimary dark:hover:bg-premium-primary\"\r\n            )}\r\n          >\r\n            {pageNumber}\r\n          </button>\r\n        );\r\n      })}\r\n\r\n      <button\r\n        onClick={goToNextPage}\r\n        disabled={currentPage === totalPages}\r\n        className={clsx(\r\n          \"rounded-full border p-2 focus:outline-none transition-colors\",\r\n          \"border-premium-borderColor dark:border-premium-borderColorHover\",\r\n          currentPage === totalPages\r\n            ? \"text-premium-textPlaceholder cursor-not-allowed\"\r\n            : \"text-premium-primary dark:text-premium-primaryLight hover:bg-premium-primaryLight dark:hover:bg-premium-primaryDark hover:text-white\"\r\n        )}\r\n      >\r\n        <ChevronRight className=\"h-4 w-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n",
        "tableRow.tsx": "import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { formatNumber } from \"@/utils/formatters\";\r\nimport { getNestedValue } from \"@/utils/getNestedValue\";\r\nimport { Edit, Trash2 } from \"lucide-react\";\r\n\r\ninterface TableRowProps<T> {\r\n  item: T;\r\n  headers: {\r\n    key: keyof T | string;\r\n    type: string;\r\n    subKey?: string;\r\n    statusMapping?: Record<string, { label: string; className: string }>;\r\n  }[];\r\n  onEditClick?: (item: T) => void;\r\n  onDeleteClick?: (item: T) => void;\r\n  actions?: {\r\n    icon: React.ElementType;\r\n    title: string;\r\n    className: string;\r\n    redirectUrl?: string | ((item: T) => string);\r\n    openInNewTab?: boolean;\r\n    onClick?: (item: T) => void;\r\n    shouldRender?: (item: T) => boolean;\r\n  }[];\r\n}\r\n\r\nexport default function TableRow<T>({\r\n  item,\r\n  headers,\r\n  onEditClick,\r\n  onDeleteClick,\r\n  actions,\r\n}: TableRowProps<T>) {\r\n  return (\r\n    <tr className=\"h-16 max-h-28 border-t border-premium-borderColor hover:bg-premium-backgroundDark dark:border-premium-borderColorHover dark:hover:bg-premium-backgroundDark\">\r\n      {headers.map(({ key, type, subKey, statusMapping }, index) => {\r\n        const value =\r\n          typeof key === \"string\" ? getNestedValue(item, key) : item[key];\r\n\r\n        let content;\r\n        switch (type) {\r\n          case \"array\":\r\n            content = Array.isArray(value) ? (\r\n              <ul className=\"list-none pl-5 text-premium-textSecondary dark:text-premium-textSecondary\">\r\n                {value.map((subItem: any, i: number) => (\r\n                  <li key={i}>\r\n                    {subKey ? subItem[subKey] : JSON.stringify(subItem)}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : null;\r\n            break;\r\n\r\n          case \"boolean\":\r\n            content = (\r\n              <span\r\n                className={clsx(\r\n                  \"inline-block rounded-full px-3 py-1 text-sm font-medium\",\r\n                  value\r\n                    ? \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\"\r\n                    : \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\"\r\n                )}\r\n              >\r\n                {value ? \"Activo\" : \"Inactivo\"}\r\n              </span>\r\n            );\r\n            break;\r\n\r\n          case \"number\":\r\n            content = formatNumber(value as number);\r\n            break;\r\n\r\n          case \"date\":\r\n            content = new Date(value as string | number).toLocaleString(\r\n              \"es-ES\",\r\n              {\r\n                year: \"numeric\",\r\n                month: \"2-digit\",\r\n                day: \"2-digit\",\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n                second: \"2-digit\",\r\n                hour12: false,\r\n              }\r\n            );\r\n            break;\r\n\r\n          case \"status\":\r\n            const statusValue = String(value).toLowerCase();\r\n            const statusConfig = statusMapping?.[statusValue] || {\r\n              label: statusValue,\r\n              className:\r\n                \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200\",\r\n            };\r\n            content = (\r\n              <span\r\n                className={clsx(\r\n                  \"inline-block rounded-full px-3 py-1 text-sm font-medium\",\r\n                  statusConfig.className\r\n                )}\r\n              >\r\n                {statusConfig.label}\r\n              </span>\r\n            );\r\n            break;\r\n\r\n          default:\r\n            content = String(value ?? \"\");\r\n        }\r\n\r\n        return (\r\n          <td\r\n            key={index}\r\n            className=\"px-4 py-2 text-center text-premium-textPrimary dark:text-premium-textPrimary\"\r\n          >\r\n            {content}\r\n          </td>\r\n        );\r\n      })}\r\n\r\n      <td className=\"flex items-center justify-center space-x-2 px-4 py-2\">\r\n        {actions\r\n          ?.filter(\r\n            (action) => !action.shouldRender || action.shouldRender(item)\r\n          )\r\n          .map(\r\n            (\r\n              {\r\n                icon: Icon,\r\n                title,\r\n                className,\r\n                redirectUrl,\r\n                openInNewTab,\r\n                onClick,\r\n              },\r\n              i\r\n            ) => {\r\n              const resolvedRedirectUrl =\r\n                typeof redirectUrl === \"function\"\r\n                  ? redirectUrl(item)\r\n                  : redirectUrl;\r\n\r\n              return (\r\n                <button\r\n                  key={i}\r\n                  title={title}\r\n                  className={clsx(\"transition-colors\", className)}\r\n                  onClick={() => {\r\n                    if (onClick) {\r\n                      onClick(item);\r\n                    } else if (resolvedRedirectUrl) {\r\n                      if (openInNewTab) {\r\n                        window.open(resolvedRedirectUrl, \"_blank\");\r\n                      } else {\r\n                        window.location.href = resolvedRedirectUrl;\r\n                      }\r\n                    }\r\n                  }}\r\n                >\r\n                  <Icon className=\"h-5 w-5\" />\r\n                </button>\r\n              );\r\n            }\r\n          )}\r\n\r\n        {onEditClick && (\r\n          <button\r\n            title=\"Editar\"\r\n            onClick={() => onEditClick(item)}\r\n            className=\"text-blue-500 transition-colors hover:text-blue-600\"\r\n          >\r\n            <Edit className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n\r\n        {onDeleteClick && (\r\n          <button\r\n            title=\"Eliminar\"\r\n            onClick={() => onDeleteClick(item)}\r\n            className=\"text-red-500 transition-colors hover:text-red-700\"\r\n          >\r\n            <Trash2 className=\"h-5 w-5\" />\r\n          </button>\r\n        )}\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n",
        "tableSearch.tsx": "interface TableSearchProps {\r\n  entriesPerPage: number;\r\n  handleEntriesPerPageChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\r\n  handleSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  entry: string;\r\n}\r\n\r\nexport default function TableSearch({\r\n  entriesPerPage,\r\n  handleEntriesPerPageChange,\r\n  handleSearchChange,\r\n  entry,\r\n}: TableSearchProps) {\r\n  return (\r\n    <div className=\"mb-4 flex flex-col gap-3 text-xs sm:flex-row sm:items-center sm:justify-between sm:gap-0 sm:text-sm md:px-3\">\r\n      <div className=\"flex items-center space-x-2 px-2 sm:px-0\">\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          Mostrar\r\n        </span>\r\n        <select\r\n          name=\"numberElements\"\r\n          value={entriesPerPage}\r\n          onChange={handleEntriesPerPageChange}\r\n          className=\"rounded-md border border-premium-borderColor bg-premium-background px-2 py-1 text-premium-textPrimary focus:border-premium-borderColorHover focus:outline-none dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary dark:focus:border-premium-borderColorHover\"\r\n        >\r\n          {[5, 10, 15, 20, 30].map((num) => (\r\n            <option key={num} value={num}>\r\n              {num}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <span className=\"text-premium-textPrimary dark:text-premium-textPrimary\">\r\n          {entry} por página\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"relative\">\r\n        <input\r\n          name=\"search\"\r\n          type=\"text\"\r\n          maxLength={100}\r\n          onChange={handleSearchChange}\r\n          placeholder=\"Buscar...\"\r\n          className=\"w-full rounded-md border border-premium-borderColor bg-premium-background px-3 py-2 text-premium-textPrimary focus:border-premium-borderColorHover focus:outline-none sm:w-auto dark:border-premium-borderColorHover dark:bg-premium-backgroundDark dark:text-premium-textPrimary dark:focus:border-premium-borderColorHover\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
      },
      "userMenu.tsx": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { signOut, useSession } from \"next-auth/react\";\r\nimport Link from \"next/link\";\r\nimport { CircleUser, Menu } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\n\r\nexport default function UserMenu() {\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const { data: session } = useSession();\r\n\r\n  const toggleDropdown = () => setIsDropdownOpen((prev) => !prev);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        dropdownRef.current &&\r\n        !dropdownRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative inline-block text-left\">\r\n      <button\r\n        onClick={toggleDropdown}\r\n        className=\"flex items-center rounded-full border border-premium-borderColor bg-premium-background px-4 py-2 text-premium-secondary transition-shadow hover:shadow-lg focus:outline-none dark:border-premium-borderColorHover dark:bg-premium-secondaryLight dark:text-premium-textPrimary\"\r\n        type=\"button\"\r\n        aria-expanded={isDropdownOpen}\r\n        aria-haspopup=\"menu\"\r\n      >\r\n        <Menu className=\"mr-2 h-5 w-5\" />\r\n        <CircleUser className=\"h-6 w-6\" />\r\n      </button>\r\n\r\n      {isDropdownOpen && (\r\n        <div\r\n          className=\"absolute right-0 z-20 mt-2 w-48 rounded-md border border-premium-borderColor bg-premium-background shadow-lg dark:bg-premium-secondary\"\r\n          role=\"menu\"\r\n        >\r\n          <ul className=\"py-1\">\r\n            {session ? (\r\n              <li>\r\n                <button\r\n                  onClick={() => {\r\n                    setIsDropdownOpen(false);\r\n                    signOut({ callbackUrl: \"/\" });\r\n                  }}\r\n                  className=\"block w-full cursor-pointer px-4 py-2 text-left text-red-500 hover:bg-premium-backgroundLight dark:hover:bg-premium-secondaryLight transition-all\"\r\n                >\r\n                  Cerrar Sesión\r\n                </button>\r\n              </li>\r\n            ) : (\r\n              <>\r\n                <li>\r\n                  <Link\r\n                    href=\"/login\"\r\n                    onClick={() => setIsDropdownOpen(false)}\r\n                    className=\"block cursor-pointer px-4 py-2 hover:bg-premium-backgroundLight dark:hover:bg-premium-secondaryLight transition-all\"\r\n                  >\r\n                    Iniciar Sesión\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link\r\n                    href=\"/login/register\"\r\n                    onClick={() => setIsDropdownOpen(false)}\r\n                    className=\"block cursor-pointer px-4 py-2 hover:bg-premium-backgroundLight dark:hover:bg-premium-secondaryLight transition-all\"\r\n                  >\r\n                    Registrarse\r\n                  </Link>\r\n                </li>\r\n              </>\r\n            )}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
      "users": {
        "userModal.tsx": "import { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\nimport { UserData, Role, Gender, MembershipSummary } from \"@/lib/definitios\";\nimport ModalHeader from \"../modals/modalHeader\";\nimport ModalFooter from \"../modals/modalFooter\";\nimport dynamic from \"next/dynamic\";\n\nconst FormInput = dynamic(() => import(\"@/app/ui/modals/formInput\"), {\n  ssr: false,\n});\nconst FormSelect = dynamic(() => import(\"@/app/ui/modals/formSelect\"), {\n  ssr: false,\n});\nconst FormCheckbox = dynamic(() => import(\"@/app/ui/modals/formCheckbox\"), {\n  ssr: false,\n});\n\ninterface UserModalProps {\n  show: boolean;\n  flag: boolean;\n  onClose: () => void;\n  onSubmit: (e: React.FormEvent) => void;\n  handleChange: (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => void;\n  user: UserData;\n  roles: Role[];\n  genders: Gender[];\n  memberships: MembershipSummary[];\n  errors: {\n    usernameError: string;\n    namesError: string;\n    lastnamesError: string;\n    emailError: string;\n    phoneNumberError: string;\n    genderError: string;\n    roleError: string;\n    membershipError: string;\n  };\n}\n\nexport default function UserModal({\n  show,\n  flag,\n  onClose,\n  onSubmit,\n  handleChange,\n  user,\n  roles,\n  genders,\n  memberships,\n  errors,\n}: UserModalProps) {\n  useBodyOverflow(show);\n\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"mx-4 w-full max-w-2xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\n        {/* Header */}\n        <ModalHeader\n          title={user.id ? \"Editar Usuario\" : \"Registrar Usuario\"}\n          onClose={onClose}\n        />\n\n        {/* Body */}\n        <form\n          id=\"userForm\"\n          onSubmit={onSubmit}\n          noValidate\n          className=\"h-[60vh] space-y-4 overflow-y-auto px-6 py-4\"\n        >\n          <FormInput\n            label=\"Nombre de usuario\"\n            type=\"text\"\n            name=\"username\"\n            value={user.username || \"\"}\n            placeholder=\"Nombre de usuario\"\n            maxLength={150}\n            onChange={handleChange}\n            error={errors.usernameError}\n            flag={flag}\n          />\n\n          <FormInput\n            label=\"Nombres\"\n            type=\"text\"\n            name=\"names\"\n            value={user.names || \"\"}\n            placeholder=\"Nombres del usuario\"\n            maxLength={150}\n            onChange={handleChange}\n            error={errors.namesError}\n            flag={flag}\n          />\n\n          <FormInput\n            label=\"Apellidos\"\n            type=\"text\"\n            name=\"lastnames\"\n            value={user.lastnames || \"\"}\n            placeholder=\"Apellidos del usuario\"\n            maxLength={150}\n            onChange={handleChange}\n            error={errors.lastnamesError}\n            flag={flag}\n          />\n\n          <FormInput\n            label=\"Email\"\n            type=\"email\"\n            name=\"email\"\n            value={user.email || \"\"}\n            placeholder=\"Correo electrónico\"\n            maxLength={190}\n            onChange={handleChange}\n            error={errors.emailError}\n            flag={flag}\n          />\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Teléfono\"\n              type=\"text\"\n              name=\"phoneNumber\"\n              value={user.phoneNumber || \"\"}\n              placeholder=\"Número de teléfono\"\n              maxLength={45}\n              onChange={handleChange}\n              error={errors.phoneNumberError}\n              flag={flag}\n            />\n\n            <FormSelect\n              label=\"Género\"\n              name=\"gender.id\"\n              value={user.gender?.id || \"\"}\n              options={genders}\n              onChange={handleChange}\n              error={errors.genderError}\n              flag={flag}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormSelect\n              label=\"Rol\"\n              name=\"role.id\"\n              value={user.role?.id || \"\"}\n              options={roles}\n              onChange={handleChange}\n              error={errors.roleError}\n              flag={flag}\n            />\n\n            <FormSelect\n              label=\"Membresía\"\n              name=\"membership.id\"\n              value={user.membership?.id || \"\"}\n              options={memberships}\n              onChange={handleChange}\n              error={errors.membershipError}\n              flag={flag}\n            />\n          </div>\n\n          <FormCheckbox\n            label=\"Activo\"\n            name=\"state\"\n            checked={user.state || false}\n            onChange={handleChange}\n            className=\"rounded\"\n          />\n        </form>\n\n        {/* Footer */}\n        <ModalFooter onClose={onClose} formId=\"userForm\" />\n      </div>\n    </div>\n  );\n}\n",
        "userProjectsModal .tsx": "import { useState } from \"react\";\r\nimport { useBodyOverflow } from \"@/app/hooks/useBodyOverflow \";\r\nimport { useGetUserProjects } from \"@/app/hooks/users/useGetUserProjects\";\r\nimport { useProjectApi } from \"@/app/hooks/projects/useProjectApi\";\r\nimport ModalHeader from \"../modals/modalHeader\";\r\nimport ProjectCard from \"@/app/ui/projects/projectCard\";\r\nimport ModalConfirmation from \"../modals/modalConfirmation\";\r\nimport Alert from \"../alert\";\r\nimport ProjectCardSkeleton from \"../skeletons/projectCardSkeleton\";\r\n\r\ninterface UserProjectsModalProps {\r\n  show: boolean;\r\n  onClose: () => void;\r\n  userId: number;\r\n}\r\n\r\nexport default function UserProjectsModal({\r\n  show,\r\n  onClose,\r\n  userId,\r\n}: UserProjectsModalProps) {\r\n  const { submitProject, isProcessing } = useProjectApi();\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState<{\r\n    id: number;\r\n    name: string;\r\n  } | null>(null);\r\n  const [alertMessage, setAlertMessage] = useState<{\r\n    type: string;\r\n    message: string;\r\n  } | null>(null);\r\n\r\n  useBodyOverflow(show);\r\n\r\n  const { projects, isLoading, totalEntries, refreshUserProjects } =\r\n    useGetUserProjects({\r\n      userId,\r\n      entriesPerPage: 10,\r\n    });\r\n\r\n  const handleOpenModal = (id: number, name: string) => {\r\n    setSelectedProject({ id, name });\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteProject = async () => {\r\n    if (!selectedProject) return;\r\n\r\n    const success = await submitProject(selectedProject.id, \"delete\");\r\n\r\n    if (success) {\r\n      setAlertMessage({\r\n        type: \"success\",\r\n        message: `Propiedad \"${selectedProject.name}\" eliminada exitosamente.`,\r\n      });\r\n      refreshUserProjects();\r\n    } else {\r\n      setAlertMessage({\r\n        type: \"error\",\r\n        message: `Error al eliminar la propiedad \"${selectedProject.name}\".`,\r\n      });\r\n    }\r\n\r\n    setIsModalOpen(false);\r\n    setSelectedProject(null);\r\n  };\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"mx-4 w-full max-w-4xl overflow-hidden rounded-lg bg-premium-background shadow-xl dark:bg-premium-backgroundLight\">\r\n        {/* Header */}\r\n        <ModalHeader\r\n          title={`Propiedades del Usuario (${totalEntries})`}\r\n          onClose={onClose}\r\n        />\r\n\r\n        {/* Body */}\r\n        <div className=\"h-[80vh] overflow-y-auto p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {isLoading\r\n            ? Array.from({ length: 6 }).map((_, index) => (\r\n                <ProjectCardSkeleton key={index} />\r\n              ))\r\n            : projects.length > 0\r\n              ? projects.map((project) => (\r\n                  <ProjectCard\r\n                    key={project.id}\r\n                    id={project.id}\r\n                    images={project.projectMedia}\r\n                    name={project.name}\r\n                    location={project.city.name}\r\n                    price={project.price}\r\n                    area={project.totalArea}\r\n                    bedrooms={project.bedrooms}\r\n                    bathrooms={project.bathrooms}\r\n                    parkingSpots={project.parkingSpots}\r\n                    isFromMap={false}\r\n                    showActions={true}\r\n                    url={`/inmobiliario/${project.id}`}\r\n                    urlEdit={`/admin/propiedades/${project.id}`}\r\n                    onDelete={() => handleOpenModal(project.id, project.name)}\r\n                  />\r\n                ))\r\n              : !isLoading && (\r\n                  <p className=\"text-center text-gray-500 dark:text-gray-400 col-span-full\">\r\n                    No hay propiedades asociadas a este usuario.\r\n                  </p>\r\n                )}\r\n        </div>\r\n\r\n        <div className=\"col-span-full h-4\" />\r\n      </div>\r\n\r\n      {alertMessage && (\r\n        <Alert\r\n          type={alertMessage.type as \"success\" | \"error\"}\r\n          message={alertMessage.message}\r\n        />\r\n      )}\r\n\r\n      {isModalOpen && (\r\n        <ModalConfirmation\r\n          isOpen={isModalOpen}\r\n          onClose={() => setIsModalOpen(false)}\r\n          onConfirm={handleDeleteProject}\r\n          title=\"Eliminar Propiedad\"\r\n          message={`¿Estás seguro de que deseas eliminar la propiedad \"${selectedProject?.name}\"?`}\r\n          confirmLabel={isProcessing ? \"Eliminando...\" : \"Eliminar\"}\r\n          cancelLabel=\"Cancelar\"\r\n          confirmClassName=\"bg-red-600 hover:bg-red-700 disabled:opacity-50\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"
      }
    }
  },
  "lib": {
    "auth.ts": "import { NextAuthOptions } from \"next-auth\";\nimport { db } from \"@/lib/db\";\nimport GoogleProvider from \"next-auth/providers/google\";\nimport { RowDataPacket } from \"mysql2\";\nimport { Permission } from \"./definitios\";\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n    }),\n  ],\n  secret: process.env.AUTH_SECRET,\n  pages: {\n    signIn: \"/login\",\n  },\n  callbacks: {\n    async jwt({ token, user, account }) {\n      if (account?.provider === \"google\" && user && !token.id) {\n        const { email, name, image } = user;\n\n        const [result] = await db.query<RowDataPacket[][]>(\n          \"CALL get_user_session(?)\",\n          [email]\n        );\n        let [userRows = [], permissionsRows = []] = result;\n\n        if (userRows.length === 0) {\n          const [resultInsert] = await db.query<RowDataPacket[][]>(\n            \"CALL insert_user_provider(?, ?, ?, ?)\",\n            [name, email, image, \"Google\"]\n          );\n\n          [userRows = [], permissionsRows = []] = resultInsert;\n        }\n\n        const permissions: Permission[] = permissionsRows.map(\n          ({ id, name }) => ({ id, name })\n        );\n\n        token.id = userRows[0].id.toString();\n        token.role = userRows[0].role.toString();\n        token.permissions = permissions;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      session.user.id = token.id + \"\";\n      session.user.role = token.role + \"\";\n      session.user.permissions = token.permissions as Permission[];\n      return session;\n    },\n  },\n  debug: process.env.AUTH_DEBUG === \"true\",\n};\n",
    "db.ts": "import mysql from \"mysql2/promise\";\n\nexport const db = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_NAME,\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0,\n});\n",
    "definitios.ts": "import { DateTime } from \"next-auth/providers/kakao\";\n\nexport type ColumnType =\n  | \"string\"\n  | \"number\"\n  | \"boolean\"\n  | \"date\"\n  | \"array\"\n  | \"status\";\n\nexport interface Header<T> {\n  label: string;\n  key: keyof T | string;\n  type: ColumnType;\n  subKey?: string;\n  statusMapping?: Record<string, { label: string; className: string }>;\n}\n\nexport interface User {\n  id: number;\n  username: string;\n  identityDocument?: number;\n  names?: string;\n  lastnames?: string;\n  birthdate?: Date;\n  email: string;\n  phoneNumber?: string;\n  gender?: Gender;\n  password?: string;\n  state?: boolean;\n  registrationDate?: DateTime;\n  lastLogin?: DateTime;\n  role: Role;\n  membership: MembershipSummary;\n  provider: string;\n  totalProperties?: number;\n}\n\nexport interface Gender {\n  id: number;\n  name: string;\n}\n\nexport interface Role {\n  id: number;\n  name: string;\n  permissions?: Permission[];\n}\n\nexport interface Category {\n  id: number;\n  name: string;\n}\n\nexport interface CommonArea {\n  id: number;\n  name: string;\n}\n\nexport interface HousingType {\n  id: number;\n  name: string;\n}\n\nexport interface NearbyService {\n  id: number;\n  name: string;\n}\n\nexport interface Departament {\n  id: number;\n  name: string;\n}\n\nexport interface City {\n  id: number;\n  name: string;\n  departament: Departament;\n}\n\nexport interface PaymentMethod {\n  id: number;\n  name: string;\n  state: boolean;\n}\n\nexport interface Project {\n  id: number;\n  name: string;\n  state: boolean;\n  price?: number;\n  totalArea: number;\n  builtArea: number;\n  freeHeight?: number;\n  width?: number;\n  length?: number;\n  parkingSpots?: number;\n  elevator?: boolean;\n  heavyParking?: number;\n  availableUnits: number;\n  bathrooms?: number;\n  bedrooms?: number;\n  lobbies?: number;\n  towers?: number;\n  storageUnits?: number;\n  socioeconomicLevel?: number;\n  floorNumber?: number;\n  yearBuilt?: number;\n  customizationOptions?: boolean;\n  terrace?: boolean;\n  balcony?: boolean;\n  garden?: boolean;\n  laundryArea?: boolean;\n  complexName?: string;\n  shortDescription: string;\n  detailedDescription: string;\n  address: string;\n  latitude: number;\n  longitude: number;\n  availableDate?: Date;\n  projectType?: projectType;\n  statusProject?: statusProject;\n  propertyType: propertyType;\n  housingType?: HousingType;\n  city: City;\n  membership: number;\n  commonAreas: CommonArea[];\n  ownerId?: number;\n  email?: string;\n  residentialProjectId?: number;\n  warehouseProjectId?: number;\n  nearbyServices: NearbyService[];\n  projectMedia: ProjectMedia[];\n  media?: Media[];\n}\n\nexport interface projectType {\n  id: number;\n  name: string;\n}\n\nexport interface propertyType {\n  id: number;\n  name: string;\n}\n\nexport interface statusProject {\n  id: number;\n  name: string;\n}\n\nexport interface Membership {\n  id: number;\n  name: string;\n  benefits: string;\n  price: number;\n  discountThreeMonths: number;\n  discountSixMonths: number;\n  discountTwelveMonths: number;\n  maxProjects: number;\n  projectsFeatured: number;\n}\n\nexport interface Reservation {\n  id: number;\n  startDate: Date;\n  endDate: Date;\n  reservationDate: Date;\n  price: number;\n  userId: number;\n  paymentMethodId: number;\n  projectId: number;\n  statusReservationId: number;\n}\n\nexport interface StatusReservation {\n  id: number;\n  name: string;\n}\n\nexport interface Permission {\n  id: number;\n  name: string;\n}\n\nexport interface ImageType {\n  id: number;\n  name: string;\n  description?: string;\n  maxImagesAllowed: number;\n  isRequired: boolean;\n}\n\nexport interface ProjectMedia {\n  id?: number;\n  url: string;\n  tag: string;\n  description?: string;\n  projectId: number;\n  commonArea?: number;\n  imageType?: number;\n  type?: string;\n}\n\nexport interface Media {\n  id?: string;\n  tag: string;\n  file: File | string;\n  description?: string;\n  idType: number;\n  type: string;\n  category: string;\n}\n\nexport interface Request {\n  id: number;\n  date: Date;\n  operation: string;\n  responseMessage?: string;\n  userId: number;\n  userEmail: string;\n  statusRequestName: string;\n  projectId: number;\n  projectName: string;\n}\n\nexport type ProjectData = Partial<Project>;\nexport type UserData = Partial<User>;\n\nexport type ProjectSummary = Pick<\n  Project,\n  | \"id\"\n  | \"name\"\n  | \"price\"\n  | \"totalArea\"\n  | \"bedrooms\"\n  | \"bathrooms\"\n  | \"parkingSpots\"\n  | \"address\"\n  | \"longitude\"\n  | \"latitude\"\n  | \"city\"\n  | \"projectMedia\"\n  | \"email\"\n>;\n\nexport type MembershipSummary = Pick<Membership, \"id\" | \"name\">;\n\nexport type ProjectMediaData = Partial<ProjectMedia>;\n",
    "email": {
      "sendEmail.ts": "import nodemailer from \"nodemailer\";\r\n\r\nexport async function sendEmail(\r\n  to: string,\r\n  subject: string,\r\n  htmlContent: string\r\n) {\r\n  try {\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS,\r\n      },\r\n    });\r\n\r\n    const mailOptions = {\r\n      from: `\"EdifiK\" <${process.env.EMAIL_USER}>`,\r\n      to,\r\n      subject,\r\n      html: htmlContent,\r\n    };\r\n\r\n    await transporter.sendMail(mailOptions);\r\n  } catch (error) {\r\n    console.error(\"❌ Error al enviar el correo:\", error);\r\n  }\r\n}\r\n"
    },
    "s3.ts": "import { S3Client } from \"@aws-sdk/client-s3\";\n\nexport const s3 = new S3Client({\n  region: process.env.AWS_BUCKET_REGION,\n  credentials: {\n    accessKeyId: process.env.AWS_ACCESS_KEY as string,\n    secretAccessKey: process.env.AWS_SECRET_KEY as string,\n  },\n});\n"
  },
  "types": {
    "next-auth.d..ts": "import NextAuth, { DefaultSession } from \"next-auth\";\nimport { Permission } from \"@/lib/definitios\";\n\ndeclare module \"next-auth\" {\n  interface Session {\n    user: {\n      id?: string | null;\n      role?: string | null;\n      permissions?: Permission[] | null;\n    } & DefaultSession[\"user\"];\n  }\n\n  interface JWT {\n    id?: string;\n    role?: string;\n    permissions?: Permission[];\n  }\n}\n"
  },
  "utils": {
    "emailTemplates.ts": "export function generateEmailTemplate(propertyName: string, ownerId: string) {\r\n  return `\r\n      <!DOCTYPE html>\r\n      <html lang=\"es\">\r\n      <head>\r\n          <meta charset=\"UTF-8\">\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n          <title>Nueva Propiedad Registrada</title>\r\n          <style>\r\n              body {\r\n                  font-family: Arial, sans-serif;\r\n                  background-color: #000917;\r\n                  margin: 0;\r\n                  padding: 0;\r\n                  color: #ffffff;\r\n              }\r\n              .container {\r\n                  max-width: 600px;\r\n                  margin: 20px auto;\r\n                  background: #ffffff;\r\n                  padding: 20px;\r\n                  border-radius: 8px;\r\n                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n                  color: #333;\r\n              }\r\n              .header {\r\n                  text-align: center;\r\n                  padding: 20px 0;\r\n                  background-color: #9A5939;\r\n                  border-top-left-radius: 8px;\r\n                  border-top-right-radius: 8px;\r\n              }\r\n              .header img {\r\n                  max-width: 150px;\r\n              }\r\n              .content {\r\n                  padding: 20px;\r\n                  text-align: left;\r\n                  color: #000917;\r\n              }\r\n              .footer {\r\n                  text-align: center;\r\n                  font-size: 12px;\r\n                  color: #979CA3;\r\n                  margin-top: 20px;\r\n                  padding: 15px;\r\n                  background-color: #000917;\r\n                  border-bottom-left-radius: 8px;\r\n                  border-bottom-right-radius: 8px;\r\n              }\r\n              .footer a {\r\n                  color: #9A5939;\r\n                  text-decoration: none;\r\n                  font-weight: bold;\r\n                  transition: color 0.3s;\r\n              }\r\n              .footer a:hover {\r\n                  color: #ffffff;\r\n              }\r\n              .button-container {\r\n                  text-align: center;\r\n                  margin-top: 20px;\r\n              }\r\n              .btn {\r\n                    display: inline-block;\r\n                    width: 100%;\r\n                    max-width: 250px;\r\n                    padding: 14px 0;\r\n                    background-color: #9A5939;\r\n                    color: #ffffff !important;\r\n                    text-decoration: none !important;\r\n                    font-size: 16px;\r\n                    font-weight: bold;\r\n                    border-radius: 8px;\r\n                    text-align: center;\r\n                    transition: background-color 0.3s, transform 0.2s;\r\n                }\r\n              .btn:hover {\r\n                  background-color: #7d442b;\r\n                  transform: scale(1.05);\r\n              }\r\n          </style>\r\n      </head>\r\n      <body>\r\n          <div class=\"container\">\r\n              <div class=\"header\">\r\n                  <img src=\"https://tu-dominio.com/logo.png\" alt=\"EdifiK Logo\">\r\n              </div>\r\n              <div class=\"content\">\r\n                  <h2>Nueva Propiedad Registrada en EdifiK</h2>\r\n                  <p>Estimado equipo de EdifiK,</p>\r\n                  <p>Se ha registrado una nueva propiedad en la plataforma.</p>\r\n                  <ul>\r\n                      <li><strong>Nombre de la Propiedad:</strong> ${propertyName}</li>\r\n                      <li><strong>Propietario:</strong> ${ownerId}</li>\r\n                  </ul>\r\n                  <p>Le recomendamos revisar y validar la información en el sistema administrativo.</p>\r\n                  <p>Para más detalles, acceda a su cuenta en EdifiK.</p>\r\n                  <div class=\"button-container\">\r\n                      <a href=\"https://edifik.com/login\" class=\"btn\">Ingresar a EdifiK</a>\r\n                  </div>\r\n              </div>\r\n              <div class=\"footer\">\r\n                  <p>© ${new Date().getFullYear()} EdifiK. Todos los derechos reservados.</p>\r\n                  <p><a href=\"https://edifik.com\">Sitio Web</a> | <a href=\"mailto:soporte@edifik.com\">Soporte</a></p>\r\n              </div>\r\n          </div>\r\n      </body>\r\n      </html>\r\n    `;\r\n}\r\n",
    "escapeSearchTerm.ts": "export function escapeSearchTerm(searchTerm: string | null): string | null {\r\n  if (!searchTerm || searchTerm.trim() === \"\") {\r\n    return null;\r\n  }\r\n\r\n  let escapedTerm = searchTerm.trim();\r\n  escapedTerm = escapedTerm.replace(/\\\\/g, \"\\\\\\\\\");\r\n  escapedTerm = escapedTerm.replace(/%/g, \"\\\\%\");\r\n  escapedTerm = escapedTerm.replace(/_/g, \"\\\\_\");\r\n\r\n  return `%${escapedTerm}%`;\r\n}\r\n",
    "extractS3KeyFromUrl.ts": "export const extractS3KeyFromUrl = (url: string) => {\r\n  try {\r\n    const cloudFrontDomain = \"https://d3fhc8hmbgwz4k.cloudfront.net/\";\r\n\r\n    if (!url.startsWith(cloudFrontDomain)) {\r\n      console.warn(\r\n        `⚠️ La URL no tiene dominio de CloudFront, se asume que ya es un key: ${url}`\r\n      );\r\n      return url;\r\n    }\r\n\r\n    return url.replace(cloudFrontDomain, \"\");\r\n  } catch (error) {\r\n    console.error(\"❌ Error al extraer la clave S3:\", error);\r\n    return null;\r\n  }\r\n};\r\n",
    "formatters.ts": "export const formatNumber = (number: number) =>\n  new Intl.NumberFormat(\"es-CO\", {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(number);\n",
    "getNestedValue.ts": "export function getNestedValue<T>(item: T, path: string): any {\n  return path.split(\".\").reduce((acc: any, key) => acc && acc[key], item);\n}\n",
    "mergeSort.ts": "import { getNestedValue } from \"./getNestedValue\";\n\nexport const mergeSort = <T>(\n  array: T[],\n  key: keyof T | string,\n  direction: \"asc\" | \"desc\",\n): T[] => {\n  if (array.length <= 1) return array;\n\n  const middle = Math.floor(array.length / 2);\n  const left = mergeSort(array.slice(0, middle), key, direction);\n  const right = mergeSort(array.slice(middle), key, direction);\n\n  return merge(left, right, key, direction);\n};\n\nconst merge = <T>(\n  left: T[],\n  right: T[],\n  key: keyof T | string,\n  direction: \"asc\" | \"desc\",\n): T[] => {\n  const result: T[] = [];\n  let indexLeft = 0;\n  let indexRight = 0;\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    const leftValue = getNestedValue(left[indexLeft], key as string);\n    const rightValue = getNestedValue(right[indexRight], key as string);\n\n    const comparison =\n      typeof leftValue === \"string\"\n        ? leftValue.localeCompare(rightValue as string)\n        : (leftValue as number) - (rightValue as number);\n\n    if (\n      (direction === \"asc\" && comparison <= 0) ||\n      (direction === \"desc\" && comparison > 0)\n    ) {\n      result.push(left[indexLeft++]);\n    } else {\n      result.push(right[indexRight++]);\n    }\n  }\n\n  return result.concat(left.slice(indexLeft), right.slice(indexRight));\n};\n"
  }
}